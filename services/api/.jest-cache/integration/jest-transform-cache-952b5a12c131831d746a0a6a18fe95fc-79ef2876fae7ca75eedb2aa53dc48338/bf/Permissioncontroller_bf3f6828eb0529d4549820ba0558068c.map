{"version":3,"names":["cov_2nytf8d6bw","actualCoverage","db","permissions","roles","role_has_permissions","eq","logger","s","getAllPermissions","request","reply","f","permissionsList","select","id","name","guard_name","createdAt","updatedAt","from","status","data","error","code","message","getPermissionList","createPermission","body","b","errors","field","existingPermission","where","limit","length","now","Date","permissionResult","insert","values","returning","permission","getPermissionById","params","parseInt","rolePermissions","permission_id","role_id","roleIds","map","rp","roleDetails","roleId","roleResult","push","updatePermission","updateData","undefined","Object","keys","updatedPermissionResult","update","set","updatedPermission","deletePermission","delete","permissionValidation"],"sources":["Permission.controller.js"],"sourcesContent":["// Note: express-validator replaced with Fastify schema validation\n// Validation should be done in route definitions using Fastify's schema\nimport { db } from \"../config/db.drizzle.js\";\nimport { permissions, roles } from \"../db/schemas/index.js\";\nimport { role_has_permissions } from \"../db/schemas/index.js\";\nimport { eq } from \"drizzle-orm\";\n\nimport { logger } from '../utils/logger.js';\n// Get all permissions\nexport const getAllPermissions = async (request, reply) => {\n    try {\n        const permissionsList = await db.select({\n            id: permissions.id,\n            name: permissions.name,\n            guard_name: permissions.guard_name,\n            createdAt: permissions.createdAt,\n            updatedAt: permissions.updatedAt,\n        }).from(permissions);\n\n        return {\n            status: 200,\n            data: permissionsList,\n        };\n    } catch (error) {\n        logger.error(\"Error fetching permissions:\", error)\n        reply.code(500);\n            return {\n            status: 500,\n            message: \"Server error while fetching permissions\",\n        };\n    }\n};\n\n// Get permission list (names only)\nexport const getPermissionList = async (request, reply) => {\n    try {\n        const permissionsList = await db\n            .select({\n                id: permissions.id,\n                name: permissions.name,\n            })\n            .from(permissions);\n        \n        return {\n            status: 200,\n            data: permissionsList,\n        };\n    } catch (error) {\n        logger.error(\"Error fetching permission list:\", error)\n        reply.code(500);\n            return {\n            status: 500,\n            message: \"Server error while fetching permission list\",\n        };\n    }\n};\n\n// Create a new permission\nexport const createPermission = async (request, reply) => {\n    try {\n        // Note: Validation should be done in route definition using Fastify schema\n        const { name, guard_name } = request.body;\n        \n        // Basic validation\n        if (!name) {\n            reply.code(400);\n            return {\n                status: 400,\n                message: \"Validation failed\",\n                errors: [{ field: \"name\", message: \"Permission name is required\" }],\n            };\n        }\n\n        // Check if permission already exists\n        const existingPermission = await db\n            .select({ id: permissions.id })\n            .from(permissions)\n            .where(eq(permissions.name, name))\n            .limit(1);\n            \n        if (existingPermission.length > 0) {\n            reply.code(400);\n            return {\n                status: 400,\n                message: \"Permission already exists with this name\",\n            };\n        }\n\n        // Create permission\n        const now = new Date();\n        const permissionResult = await db\n            .insert(permissions)\n            .values({\n                name,\n                guard_name: guard_name || \"web\",\n                createdAt: now,\n                updatedAt: now,\n            })\n            .returning();\n\n        const permission = permissionResult[0];\n\n        reply.code(201);\n            return {\n            status: 201,\n            message: \"Permission created successfully\",\n            data: {\n                permission,\n            },\n        };\n    } catch (error) {\n        logger.error(\"Error creating permission:\", error)\n        reply.code(500);\n            return {\n            status: 500,\n            message: \"Server error while creating permission\",\n        };\n    }\n};\n\n// Get permission by ID\nexport const getPermissionById = async (request, reply) => {\n    try {\n        const { id } = request.params;\n\n        const permissionResult = await db\n            .select({\n                id: permissions.id,\n                name: permissions.name,\n                guard_name: permissions.guard_name,\n                createdAt: permissions.createdAt,\n                updatedAt: permissions.updatedAt,\n            })\n            .from(permissions)\n            .where(eq(permissions.id, parseInt(id)))\n            .limit(1);\n\n        if (permissionResult.length === 0) {\n            reply.code(404);\n            return {\n                status: 404,\n                message: \"Permission not found\",\n            };\n        }\n\n        const permission = permissionResult[0];\n\n        // Get roles that have this permission\n        const rolePermissions = await db\n            .select({\n                permission_id: role_has_permissions.permission_id,\n                role_id: role_has_permissions.role_id,\n            })\n            .from(role_has_permissions)\n            .where(eq(role_has_permissions.permission_id, parseInt(id)));\n\n        const roleIds = rolePermissions.map((rp) => rp.role_id);\n        const roleDetails = [];\n        \n        if (roleIds.length > 0) {\n            for (const roleId of roleIds) {\n                const roleResult = await db\n                    .select({\n                        id: roles.id,\n                        name: roles.name,\n                        guard_name: roles.guard_name,\n                        createdAt: roles.createdAt,\n                        updatedAt: roles.updatedAt,\n                    })\n                    .from(roles)\n                    .where(eq(roles.id, roleId))\n                    .limit(1);\n                if (roleResult.length > 0) {\n                    roleDetails.push(roleResult[0]);\n                }\n            }\n        }\n\n        return {\n            status: 200,\n            data: {\n                permission: {\n                    ...permission,\n                    roles: roleDetails,\n                },\n            },\n        };\n    } catch (error) {\n        logger.error(\"Error fetching permission:\", error)\n        reply.code(500);\n            return {\n            status: 500,\n            message: \"Server error while fetching permission\",\n        };\n    }\n};\n\n// Update permission by ID\nexport const updatePermission = async (request, reply) => {\n    try {\n        const { id } = request.params;\n        const { name, guard_name } = request.body;\n\n        // Find permission\n        const permissionResult = await db\n            .select({ id: permissions.id, name: permissions.name })\n            .from(permissions)\n            .where(eq(permissions.id, parseInt(id)))\n            .limit(1);\n\n        if (permissionResult.length === 0) {\n            reply.code(404);\n            return {\n                status: 404,\n                message: \"Permission not found\",\n            };\n        }\n\n        const permission = permissionResult[0];\n\n        // Check if another permission exists with the same name\n        if (name && name !== permission.name) {\n            const existingPermission = await db\n                .select({ id: permissions.id })\n                .from(permissions)\n                .where(eq(permissions.name, name))\n                .limit(1);\n                \n            if (existingPermission.length > 0) {\n                reply.code(400);\n            return {\n                    status: 400,\n                    message: \"Permission already exists with this name\",\n                };\n            }\n        }\n\n        // Prepare update data\n        const updateData = {\n            updatedAt: new Date(),\n        };\n        if (name !== undefined) updateData.name = name;\n        if (guard_name !== undefined) updateData.guard_name = guard_name;\n\n        // Check if there are any fields to update\n        if (Object.keys(updateData).length === 1) { // Only updatedAt\n            reply.code(400);\n            return {\n                status: 400,\n                message: \"No fields provided to update\",\n            };\n        }\n\n        // Update permission\n        const updatedPermissionResult = await db\n            .update(permissions)\n            .set(updateData)\n            .where(eq(permissions.id, parseInt(id)))\n            .returning();\n\n        const updatedPermission = updatedPermissionResult[0];\n\n        return {\n            status: 200,\n            message: \"Permission updated successfully\",\n            data: {\n                permission: updatedPermission,\n            },\n        };\n    } catch (error) {\n        logger.error(\"Error updating permission:\", error)\n        reply.code(500);\n            return {\n            status: 500,\n            message: \"Server error while updating permission\",\n        };\n    }\n};\n\n// Delete permission by ID\nexport const deletePermission = async (request, reply) => {\n    try {\n        const { id } = request.params;\n\n        // Find permission\n        const permissionResult = await db\n            .select({ id: permissions.id })\n            .from(permissions)\n            .where(eq(permissions.id, parseInt(id)))\n            .limit(1);\n\n        if (permissionResult.length === 0) {\n            reply.code(404);\n            return {\n                status: 404,\n                message: \"Permission not found\",\n            };\n        }\n\n        // Delete role-permission associations first\n        await db\n            .delete(role_has_permissions)\n            .where(eq(role_has_permissions.permission_id, parseInt(id)));\n\n        // Delete permission\n        await db\n            .delete(permissions)\n            .where(eq(permissions.id, parseInt(id)));\n\n        return {\n            status: 200,\n            message: \"Permission deleted successfully\",\n        };\n    } catch (error) {\n        logger.error(\"Error deleting permission:\", error)\n        reply.code(500);\n            return {\n            status: 500,\n            message: \"Server error while deleting permission\",\n        };\n    }\n};\n\n// Validation rules for creating/updating permission\n// Note: In Fastify, validation should be done using schema in route definitions\n// This is kept for compatibility but should be replaced with Fastify schema validation\nexport const permissionValidation = async (request, reply) => {\n    // Basic validation - should be done in route schema\n    if (!request.body.name) {\n        reply.code(400);\n            return {\n            status: 400,\n            message: \"Validation failed\",\n            errors: [{ field: \"name\", message: \"Permission name is required\" }],\n        };\n    }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}