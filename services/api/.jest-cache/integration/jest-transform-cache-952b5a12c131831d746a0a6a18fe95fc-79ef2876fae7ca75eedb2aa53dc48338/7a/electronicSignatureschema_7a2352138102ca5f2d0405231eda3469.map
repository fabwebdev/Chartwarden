{"version":3,"names":["cov_1aqoyarstq","actualCoverage","pgTable","bigint","varchar","text","timestamp","boolean","jsonb","index","pgEnum","unique","users","sessions","signatureTypeEnum","s","signatureMeaningEnum","signatureStatusEnum","electronic_signatures","id","mode","primaryKey","generatedByDefaultAsIdentity","signer_id","references","f","onDelete","onUpdate","notNull","signer_name","length","signer_email","signer_credentials","signer_title","session_id","signature_type","signature_meaning","signature_statement","signature_data","signature_image_format","document_type","document_id","document_version","default","document_hash","hash_algorithm","signed_at","server_timestamp","defaultNow","signer_timezone","tsa_timestamp","tsa_provider","tsa_response","authentication_method","mfa_verified","mfa_type","ip_address","user_agent","device_fingerprint","status","superseded_by_id","revocation_reason","revoked_at","revoked_by_id","requires_cosigner","required_cosigner_id","required_cosigner_role","cosigner_signature_id","cosignature_deadline","audit_log_id","organization_id","facility_id","regulatory_context","metadata","created_at","table","signerIdx","on","sessionIdx","documentTypeIdx","documentIdIdx","statusIdx","signedAtIdx","meaningIdx","documentHistoryIdx","signerTimeIdx","pendingCosignIdx","documentStatusIdx","uniqueSignature","signature_audit_events","signature_id","event_type","event_description","actor_id","actor_name","event_metadata","signatureIdx","actorIdx","eventTypeIdx","createdAtIdx","signatureEventHistoryIdx","signature_verification_tokens","token","expires_at","max_uses","use_count","created_by_id","is_active","tokenIdx","activeIdx"],"sources":["electronicSignature.schema.js"],"sourcesContent":["import { pgTable, bigint, varchar, text, timestamp, boolean, jsonb, index, pgEnum, unique } from 'drizzle-orm/pg-core';\nimport { users } from './user.schema.js';\nimport { sessions } from './session.schema.js';\n\n// ============================================================================\n// ELECTRONIC SIGNATURE SCHEMA - 21 CFR Part 11 COMPLIANCE\n// ============================================================================\n// Implements FDA 21 CFR Part 11 requirements for electronic records and signatures:\n// - Unique user identification and authentication binding\n// - Cryptographic timestamping for non-repudiation\n// - Immutable records (no UPDATE/DELETE allowed via database triggers)\n// - Signature meaning/intent documentation\n// - Document version binding for integrity verification\n// - Complete audit trail linkage\n// ============================================================================\n\n/**\n * Signature Type Enum\n * Defines the type of electronic signature captured\n */\nexport const signatureTypeEnum = pgEnum('signature_type', [\n  'TYPED',        // User typed their name as signature\n  'DRAWN',        // User drew signature on screen (touch/stylus)\n  'BIOMETRIC',    // Fingerprint, retina, or other biometric\n  'PIN',          // Personal Identification Number confirmation\n  'SMART_CARD',   // Hardware token/smart card authentication\n  'DIGITAL_CERT'  // PKI digital certificate signature\n]);\n\n/**\n * Signature Meaning/Intent Enum\n * Documents the legal significance and purpose of the signature\n * per 21 CFR Part 11.50(a) requirements\n */\nexport const signatureMeaningEnum = pgEnum('signature_meaning', [\n  'AUTHOR',           // I created/wrote this document\n  'REVIEWER',         // I have reviewed this document\n  'APPROVER',         // I approve this document\n  'VERIFIER',         // I verify the accuracy of this document\n  'AUTHENTICATOR',    // I authenticate this document is genuine\n  'WITNESS',          // I witnessed this event/signature\n  'COSIGNER',         // I co-sign as supervisor/oversight\n  'ORDERING_PROVIDER',// I am ordering this treatment/medication\n  'CERTIFIER',        // I certify the information is true and accurate\n  'ATTESTOR',         // I attest to the statements herein\n  'RECIPIENT',        // I received/acknowledged this document\n  'AMENDMENT'         // I am amending this document\n]);\n\n/**\n * Signature Status Enum\n * Tracks the lifecycle of a signature\n */\nexport const signatureStatusEnum = pgEnum('signature_status', [\n  'VALID',            // Signature is valid and active\n  'REVOKED',          // Signature has been revoked (with reason documented)\n  'EXPIRED',          // Signature validity period has expired\n  'SUPERSEDED',       // Replaced by a newer signature (amendment)\n  'PENDING_REVIEW'    // Awaiting cosigner/supervisor review\n]);\n\n/**\n * Electronic Signatures Table\n *\n * 21 CFR Part 11 Compliance Features:\n * - 11.10(a): System validation controls\n * - 11.10(b): Ability to generate accurate copies\n * - 11.10(c): Protection of records for retention period\n * - 11.10(d): Limiting system access to authorized individuals\n * - 11.10(e): Secure, computer-generated, time-stamped audit trails\n * - 11.50(a): Signed electronic records contain signer info, date/time, meaning\n * - 11.50(b): Signature manifestation in human readable form\n * - 11.70: Linking of electronic signatures to electronic records\n * - 11.100: Signature uniqueness and verification\n * - 11.200: Electronic signature components and controls\n *\n * HIPAA Compliance:\n * - Linked to audit_logs for complete activity tracking\n * - User authentication verified at time of signature\n * - Session binding ensures proper access controls\n */\nexport const electronic_signatures = pgTable('electronic_signatures', {\n  // Primary key - auto-incrementing for sequential ordering\n  id: bigint('id', { mode: 'number' }).primaryKey().generatedByDefaultAsIdentity(),\n\n  // ============================================================================\n  // SIGNER IDENTIFICATION (21 CFR Part 11.100)\n  // ============================================================================\n\n  // User who created the signature - REQUIRED\n  signer_id: text('signer_id')\n    .references(() => users.id, { onDelete: 'restrict', onUpdate: 'cascade' })\n    .notNull(),\n\n  // Denormalized signer info for immutable record (captured at time of signing)\n  signer_name: varchar('signer_name', { length: 255 }).notNull(),\n  signer_email: varchar('signer_email', { length: 255 }).notNull(),\n  signer_credentials: varchar('signer_credentials', { length: 255 }), // MD, RN, LCSW, etc.\n  signer_title: varchar('signer_title', { length: 255 }), // Job title at time of signing\n\n  // Session binding - proves user was authenticated (21 CFR Part 11.200)\n  session_id: text('session_id')\n    .references(() => sessions.id, { onDelete: 'set null', onUpdate: 'cascade' }),\n\n  // ============================================================================\n  // SIGNATURE DATA (21 CFR Part 11.50)\n  // ============================================================================\n\n  // Type of signature captured\n  signature_type: signatureTypeEnum('signature_type').notNull(),\n\n  // Signature meaning/intent - REQUIRED per 21 CFR 11.50(a)\n  signature_meaning: signatureMeaningEnum('signature_meaning').notNull(),\n\n  // Legal statement acknowledged by signer\n  // e.g., \"I certify that the information provided is true and accurate\"\n  signature_statement: text('signature_statement').notNull(),\n\n  // Actual signature data (based on signature_type)\n  // For TYPED: the typed name\n  // For DRAWN: base64-encoded image data or SVG path data\n  // For BIOMETRIC: encrypted biometric hash\n  // For PIN: confirmation flag (never store actual PIN)\n  // For SMART_CARD: token identifier\n  // For DIGITAL_CERT: certificate thumbprint/serial\n  signature_data: text('signature_data').notNull(),\n\n  // For drawn signatures - additional metadata\n  signature_image_format: varchar('signature_image_format', { length: 50 }), // PNG, SVG, etc.\n\n  // ============================================================================\n  // DOCUMENT BINDING (21 CFR Part 11.70)\n  // ============================================================================\n\n  // What type of record is being signed\n  document_type: varchar('document_type', { length: 100 }).notNull(), // encounter, order, certification, etc.\n\n  // ID of the record being signed\n  document_id: text('document_id').notNull(),\n\n  // Version of the document at time of signing (for amendment tracking)\n  document_version: varchar('document_version', { length: 50 }).default('1.0').notNull(),\n\n  // Cryptographic hash of document content at time of signing\n  // SHA-256 hash of the document content - proves document wasn't altered after signing\n  document_hash: varchar('document_hash', { length: 64 }).notNull(),\n\n  // Hash algorithm used (for future-proofing if SHA-256 is deprecated)\n  hash_algorithm: varchar('hash_algorithm', { length: 50 }).default('SHA-256').notNull(),\n\n  // ============================================================================\n  // TIMESTAMP & NON-REPUDIATION (21 CFR Part 11.10(e))\n  // ============================================================================\n\n  // Immutable timestamp of when signature was captured\n  signed_at: timestamp('signed_at').notNull(),\n\n  // Server timestamp (for comparison/validation)\n  server_timestamp: timestamp('server_timestamp').defaultNow().notNull(),\n\n  // Timezone of the signer at time of signing\n  signer_timezone: varchar('signer_timezone', { length: 100 }),\n\n  // Optional: Timestamp from trusted timestamp authority (TSA)\n  // For higher assurance environments\n  tsa_timestamp: timestamp('tsa_timestamp'),\n  tsa_provider: varchar('tsa_provider', { length: 255 }),\n  tsa_response: text('tsa_response'), // TSA token/response data\n\n  // ============================================================================\n  // AUTHENTICATION VERIFICATION (21 CFR Part 11.200)\n  // ============================================================================\n\n  // How the user authenticated before signing\n  authentication_method: varchar('authentication_method', { length: 100 }).notNull(), // PASSWORD, MFA, BIOMETRIC, SSO\n\n  // Was MFA used for this signature?\n  mfa_verified: boolean('mfa_verified').default(false).notNull(),\n\n  // Type of MFA used (if applicable)\n  mfa_type: varchar('mfa_type', { length: 100 }), // TOTP, SMS, EMAIL, HARDWARE_KEY, PUSH\n\n  // IP address of signer (for audit/verification)\n  ip_address: varchar('ip_address', { length: 45 }), // IPv6 max length\n\n  // User agent/device info\n  user_agent: text('user_agent'),\n\n  // Device fingerprint (optional, for additional verification)\n  device_fingerprint: varchar('device_fingerprint', { length: 255 }),\n\n  // ============================================================================\n  // SIGNATURE STATUS & LIFECYCLE\n  // ============================================================================\n\n  // Current status of the signature\n  status: signatureStatusEnum('status').default('VALID').notNull(),\n\n  // If revoked or superseded, link to the reason/replacement\n  superseded_by_id: bigint('superseded_by_id', { mode: 'number' }),\n  revocation_reason: text('revocation_reason'),\n  revoked_at: timestamp('revoked_at'),\n  revoked_by_id: text('revoked_by_id')\n    .references(() => users.id, { onDelete: 'set null', onUpdate: 'cascade' }),\n\n  // ============================================================================\n  // COSIGNATURE REQUIREMENTS\n  // ============================================================================\n\n  // Does this signature require a cosigner?\n  requires_cosigner: boolean('requires_cosigner').default(false).notNull(),\n\n  // ID of the required cosigner (if specific person required)\n  required_cosigner_id: text('required_cosigner_id')\n    .references(() => users.id, { onDelete: 'set null', onUpdate: 'cascade' }),\n\n  // Role/credential required for cosigner (if any qualified person can cosign)\n  required_cosigner_role: varchar('required_cosigner_role', { length: 100 }),\n\n  // Reference to cosigner's signature when completed\n  cosigner_signature_id: bigint('cosigner_signature_id', { mode: 'number' }),\n\n  // Deadline for cosignature (for time-sensitive documents)\n  cosignature_deadline: timestamp('cosignature_deadline'),\n\n  // ============================================================================\n  // COMPLIANCE METADATA\n  // ============================================================================\n\n  // Link to audit log entry for this signature event\n  audit_log_id: bigint('audit_log_id', { mode: 'number' }),\n\n  // Organization/facility context\n  organization_id: varchar('organization_id', { length: 100 }),\n  facility_id: varchar('facility_id', { length: 100 }),\n\n  // Regulatory context\n  regulatory_context: varchar('regulatory_context', { length: 100 }), // FDA, HIPAA, STATE_BOARD, etc.\n\n  // Additional metadata for extensibility\n  metadata: jsonb('metadata'),\n\n  // ============================================================================\n  // RECORD TIMESTAMPS (Immutable - no updated_at)\n  // ============================================================================\n\n  // Creation timestamp - immutable record\n  created_at: timestamp('created_at').defaultNow().notNull()\n\n  // NOTE: No updated_at column - electronic signatures are IMMUTABLE\n  // per 21 CFR Part 11 requirements. Any changes result in a new signature\n  // with the old one marked as SUPERSEDED.\n\n}, (table) => ({\n  // ============================================================================\n  // PERFORMANCE INDEXES\n  // ============================================================================\n\n  // Single column indexes for frequently queried columns\n  signerIdx: index('idx_electronic_signatures_signer_id').on(table.signer_id),\n  sessionIdx: index('idx_electronic_signatures_session_id').on(table.session_id),\n  documentTypeIdx: index('idx_electronic_signatures_document_type').on(table.document_type),\n  documentIdIdx: index('idx_electronic_signatures_document_id').on(table.document_id),\n  statusIdx: index('idx_electronic_signatures_status').on(table.status),\n  signedAtIdx: index('idx_electronic_signatures_signed_at').on(table.signed_at),\n  meaningIdx: index('idx_electronic_signatures_meaning').on(table.signature_meaning),\n\n  // Composite indexes for common query patterns\n\n  // Document signature history - \"get all signatures for encounter #123\"\n  documentHistoryIdx: index('idx_electronic_signatures_document_history')\n    .on(table.document_type, table.document_id, table.signed_at),\n\n  // User signature history - \"show all signatures by user in time range\"\n  signerTimeIdx: index('idx_electronic_signatures_signer_time')\n    .on(table.signer_id, table.signed_at),\n\n  // Pending cosignatures - \"find documents awaiting cosignature\"\n  pendingCosignIdx: index('idx_electronic_signatures_pending_cosign')\n    .on(table.requires_cosigner, table.cosigner_signature_id, table.cosignature_deadline),\n\n  // Status queries - \"find all valid signatures for document\"\n  documentStatusIdx: index('idx_electronic_signatures_document_status')\n    .on(table.document_type, table.document_id, table.status),\n\n  // Unique constraint: prevent duplicate signatures for same document version by same user with same meaning\n  uniqueSignature: unique('unique_signature_per_document_version')\n    .on(table.signer_id, table.document_type, table.document_id, table.document_version, table.signature_meaning)\n}));\n\n/**\n * Signature Audit Events Table\n *\n * Detailed audit trail for all signature-related events\n * Complements the main audit_logs table with signature-specific details\n * Required for 21 CFR Part 11.10(e) - secure, computer-generated, time-stamped audit trails\n */\nexport const signature_audit_events = pgTable('signature_audit_events', {\n  id: bigint('id', { mode: 'number' }).primaryKey().generatedByDefaultAsIdentity(),\n\n  // Reference to the signature\n  signature_id: bigint('signature_id', { mode: 'number' })\n    .references(() => electronic_signatures.id, { onDelete: 'restrict', onUpdate: 'cascade' })\n    .notNull(),\n\n  // Event details\n  event_type: varchar('event_type', { length: 100 }).notNull(), // CREATED, VIEWED, VERIFIED, REVOKED, EXPORTED, etc.\n  event_description: text('event_description'),\n\n  // Who triggered this event\n  actor_id: text('actor_id')\n    .references(() => users.id, { onDelete: 'set null', onUpdate: 'cascade' }),\n  actor_name: varchar('actor_name', { length: 255 }),\n\n  // Session context\n  session_id: text('session_id')\n    .references(() => sessions.id, { onDelete: 'set null', onUpdate: 'cascade' }),\n\n  // Request context\n  ip_address: varchar('ip_address', { length: 45 }),\n  user_agent: text('user_agent'),\n\n  // Additional event data\n  event_metadata: jsonb('event_metadata'),\n\n  // Immutable timestamp\n  created_at: timestamp('created_at').defaultNow().notNull()\n\n  // NOTE: No updated_at - audit events are immutable\n}, (table) => ({\n  signatureIdx: index('idx_signature_audit_events_signature_id').on(table.signature_id),\n  actorIdx: index('idx_signature_audit_events_actor_id').on(table.actor_id),\n  eventTypeIdx: index('idx_signature_audit_events_event_type').on(table.event_type),\n  createdAtIdx: index('idx_signature_audit_events_created_at').on(table.created_at),\n\n  // Composite: signature event history\n  signatureEventHistoryIdx: index('idx_signature_audit_events_history')\n    .on(table.signature_id, table.created_at)\n}));\n\n/**\n * Signature Verification Tokens Table\n *\n * Secure tokens for external signature verification\n * Allows third parties to verify signature authenticity without system access\n */\nexport const signature_verification_tokens = pgTable('signature_verification_tokens', {\n  id: bigint('id', { mode: 'number' }).primaryKey().generatedByDefaultAsIdentity(),\n\n  // Reference to the signature\n  signature_id: bigint('signature_id', { mode: 'number' })\n    .references(() => electronic_signatures.id, { onDelete: 'cascade', onUpdate: 'cascade' })\n    .notNull(),\n\n  // Verification token (secure random string)\n  token: varchar('token', { length: 255 }).notNull().unique(),\n\n  // Token configuration\n  expires_at: timestamp('expires_at'),\n  max_uses: bigint('max_uses', { mode: 'number' }),\n  use_count: bigint('use_count', { mode: 'number' }).default(0).notNull(),\n\n  // Who created this token\n  created_by_id: text('created_by_id')\n    .references(() => users.id, { onDelete: 'set null', onUpdate: 'cascade' }),\n\n  // Token status\n  is_active: boolean('is_active').default(true).notNull(),\n  revoked_at: timestamp('revoked_at'),\n\n  // Audit\n  created_at: timestamp('created_at').defaultNow().notNull()\n}, (table) => ({\n  tokenIdx: index('idx_signature_verification_tokens_token').on(table.token),\n  signatureIdx: index('idx_signature_verification_tokens_signature_id').on(table.signature_id),\n  activeIdx: index('idx_signature_verification_tokens_active').on(table.is_active, table.expires_at)\n}));\n"],"mappings":"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","ignoreList":[]}