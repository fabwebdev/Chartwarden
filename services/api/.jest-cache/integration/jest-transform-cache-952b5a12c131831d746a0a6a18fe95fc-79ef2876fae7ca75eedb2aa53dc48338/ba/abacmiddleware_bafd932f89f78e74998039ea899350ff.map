{"version":3,"names":["cov_29ph1cjyga","actualCoverage","hasAbacAccess","abacService","logger","s","requireAbacAccess","resource","options","b","f","request","reply","user","code","send","status","message","resourceObj","type","ownerId","department","location","environment","ipAddress","ip","socket","remoteAddress","userAgent","headers","hasAccess","requireAbacPolicy","resourceConfig","success","error","resourceType","action","getResourceId","getResourceAttributes","id","params","additionalAttrs","Object","assign","sessionId","session","requestMethod","method","requestPath","url","conflictResolution","setConflictResolution","skipAuditLog","setAuditLogging","result","authorize","abacDecision","allow","details","reason","matchedPolicy","name","requireDynamicAbacPolicy","contextBuilder","requirePatientRecordAccess","getPatientId","patientId","parseInt","requireRbacAndAbac","requiredPermissions","userHasAllPermissions","userRole","role","hasAllPermissions","every","permission","requireRbacOrAbac","hasRbacAccess","hasAbacAccessResult"],"sources":["abac.middleware.js"],"sourcesContent":["import { hasAbacAccess } from \"../config/abac.js\";\nimport { abacService } from \"../services/ABAC.service.js\";\n\nimport { logger } from '../utils/logger.js';\n\n/**\n * Middleware to check if user has access based on ABAC policies (legacy support)\n * @param {Object} resource - The resource being accessed\n * @param {Object} options - Additional options for ABAC evaluation\n */\nexport const requireAbacAccess = (resource, options = {}) => {\n  return async (request, reply) => {\n    // Check if user is authenticated\n    if (!request.user) {\n      return reply.code(401).send({\n        status: 401,\n        message: \"Access denied. Authentication required.\",\n      });\n    }\n\n    // Prepare resource object for ABAC evaluation\n    const resourceObj = {\n      type: resource.type || \"unknown\",\n      ownerId: resource.ownerId || null,\n      department: resource.department || null,\n      location: resource.location || null,\n      ...resource,\n    };\n\n    // Prepare environment object\n    const environment = {\n      ipAddress: request.ip || request.socket.remoteAddress,\n      userAgent: request.headers[\"user-agent\"],\n      ...options.environment,\n    };\n\n    // Check ABAC access using legacy config-based evaluation\n    const hasAccess = hasAbacAccess(request.user, resourceObj, environment);\n\n    if (!hasAccess) {\n      return reply.code(403).send({\n        status: 403,\n        message: \"Access denied. Insufficient attributes or policy violation.\",\n      });\n    }\n  };\n};\n\n/**\n * Enhanced ABAC middleware using the new database-backed policy evaluation engine\n * @param {Object} resourceConfig - Resource configuration for access check\n * @param {string} resourceConfig.type - Resource type (e.g., 'patient_record', 'medication')\n * @param {string} resourceConfig.action - Action being performed (e.g., 'read', 'write', 'delete')\n * @param {Function} resourceConfig.getResourceId - Optional function to extract resource ID from request\n * @param {Function} resourceConfig.getResourceAttributes - Optional function to get additional resource attributes\n * @param {Object} options - Additional options\n * @param {string} options.conflictResolution - Conflict resolution strategy\n * @param {boolean} options.skipAuditLog - Skip audit logging for this request\n */\nexport const requireAbacPolicy = (resourceConfig, options = {}) => {\n  return async (request, reply) => {\n    // Check if user is authenticated\n    if (!request.user) {\n      return reply.code(401).send({\n        success: false,\n        error: {\n          code: \"UNAUTHORIZED\",\n          message: \"Access denied. Authentication required.\",\n        },\n      });\n    }\n\n    try {\n      const {\n        type: resourceType,\n        action = \"read\",\n        getResourceId,\n        getResourceAttributes,\n      } = resourceConfig;\n\n      // Build resource object\n      const resource = {\n        type: resourceType,\n        id: getResourceId ? getResourceId(request) : request.params.id,\n      };\n\n      // Add additional resource attributes if provider function exists\n      if (getResourceAttributes && typeof getResourceAttributes === \"function\") {\n        const additionalAttrs = await getResourceAttributes(request);\n        Object.assign(resource, additionalAttrs);\n      }\n\n      // Build environment context\n      const environment = {\n        ipAddress: request.ip || request.socket?.remoteAddress,\n        userAgent: request.headers[\"user-agent\"],\n        sessionId: request.session?.id,\n        requestMethod: request.method,\n        requestPath: request.url,\n      };\n\n      // Set conflict resolution if specified\n      if (options.conflictResolution) {\n        abacService.setConflictResolution(options.conflictResolution);\n      }\n\n      // Temporarily disable audit logging if requested\n      if (options.skipAuditLog) {\n        abacService.setAuditLogging(false);\n      }\n\n      // Perform authorization check\n      const result = await abacService.authorize(\n        request.user,\n        resource,\n        action,\n        environment\n      );\n\n      // Re-enable audit logging\n      if (options.skipAuditLog) {\n        abacService.setAuditLogging(true);\n      }\n\n      // Attach decision info to request for downstream use\n      request.abacDecision = result;\n\n      if (!result.allow) {\n        return reply.code(403).send({\n          success: false,\n          error: {\n            code: \"FORBIDDEN\",\n            message: \"Access denied. Policy evaluation resulted in denial.\",\n            details: {\n              resourceType,\n              action,\n              reason: result.reason,\n              matchedPolicy: result.matchedPolicy?.name,\n            },\n          },\n        });\n      }\n    } catch (error) {\n      logger.error(\"ABAC policy evaluation error:\", error);\n      return reply.code(500).send({\n        success: false,\n        error: {\n          code: \"INTERNAL_ERROR\",\n          message: \"Error during access control evaluation.\",\n        },\n      });\n    }\n  };\n};\n\n/**\n * Dynamic ABAC middleware that evaluates policies based on request context\n * This is useful for routes where resource information is determined at runtime\n * @param {Function} contextBuilder - Function that returns { resource, action } from request\n * @param {Object} options - Additional options\n */\nexport const requireDynamicAbacPolicy = (contextBuilder, options = {}) => {\n  return async (request, reply) => {\n    if (!request.user) {\n      return reply.code(401).send({\n        success: false,\n        error: {\n          code: \"UNAUTHORIZED\",\n          message: \"Access denied. Authentication required.\",\n        },\n      });\n    }\n\n    try {\n      // Get resource and action from context builder\n      const { resource, action } = await contextBuilder(request);\n\n      // Build environment context\n      const environment = {\n        ipAddress: request.ip || request.socket?.remoteAddress,\n        userAgent: request.headers[\"user-agent\"],\n        sessionId: request.session?.id,\n        requestMethod: request.method,\n        requestPath: request.url,\n      };\n\n      // Perform authorization\n      const result = await abacService.authorize(\n        request.user,\n        resource,\n        action,\n        environment\n      );\n\n      request.abacDecision = result;\n\n      if (!result.allow) {\n        return reply.code(403).send({\n          success: false,\n          error: {\n            code: \"FORBIDDEN\",\n            message: \"Access denied by policy.\",\n            details: {\n              reason: result.reason,\n              matchedPolicy: result.matchedPolicy?.name,\n            },\n          },\n        });\n      }\n    } catch (error) {\n      logger.error(\"Dynamic ABAC policy evaluation error:\", error);\n      return reply.code(500).send({\n        success: false,\n        error: {\n          code: \"INTERNAL_ERROR\",\n          message: \"Error during access control evaluation.\",\n        },\n      });\n    }\n  };\n};\n\n/**\n * Middleware to check if user has access to a patient record\n * @param {Function} getPatientId - Function to extract patient ID from request\n */\nexport const requirePatientRecordAccess = (\n  getPatientId = (request) => request.params.id\n) => {\n  return async (request, reply) => {\n    // Check if user is authenticated\n    if (!request.user) {\n      return reply.code(401).send({\n        status: 401,\n        message: \"Access denied. Authentication required.\",\n      });\n    }\n\n    try {\n      // Get patient ID from request\n      const patientId = getPatientId(request);\n\n      if (!patientId) {\n        return reply.code(400).send({\n          status: 400,\n          message: \"Patient ID is required for access control.\",\n        });\n      }\n\n      // Prepare resource object for patient record\n      const resource = {\n        type: \"patient_record\",\n        ownerId: parseInt(patientId),\n        // In a real implementation, you would fetch the patient's department from the database\n        department: \"general\", // Default department\n      };\n\n      // Prepare environment object\n      const environment = {\n        ipAddress: request.ip || request.socket.remoteAddress,\n        userAgent: request.headers[\"user-agent\"],\n      };\n\n      // Check ABAC access\n      const hasAccess = hasAbacAccess(request.user, resource, environment);\n\n      if (!hasAccess) {\n        return reply.code(403).send({\n          status: 403,\n          message:\n            \"Access denied. You do not have permission to access this patient record.\",\n        });\n      }\n    } catch (error) {\n      logger.error(\"Error in patient record access control:\", error)\n      return reply.code(500).send({\n        status: 500,\n        message: \"Server error during access control check.\",\n      });\n    }\n  };\n};\n\n/**\n * Middleware to check if user has access based on both RBAC and ABAC\n * @param {Array} requiredPermissions - Permissions required (RBAC)\n * @param {Object} resource - The resource being accessed (ABAC)\n * @param {Object} options - Additional options\n */\nexport const requireRbacAndAbac = (\n  requiredPermissions,\n  resource,\n  options = {}\n) => {\n  return async (request, reply) => {\n    try {\n      // First check RBAC permissions\n      const { userHasAllPermissions } = await import(\"../config/rbac.js\");\n      \n      // Check if user is authenticated\n      if (!request.user) {\n        return reply.code(401).send({\n          status: 401,\n          message: \"Access denied. Authentication required.\",\n        });\n      }\n\n      // Check RBAC permissions\n      const userRole = request.user.role || \"patient\"; // Default to patient if no role specified\n      const hasAllPermissions = requiredPermissions.every((permission) =>\n        userHasAllPermissions(userRole, [permission])\n      );\n\n      if (!hasAllPermissions) {\n        return reply.code(403).send({\n          status: 403,\n          message: \"Access denied. Insufficient RBAC permissions.\",\n        });\n      }\n\n      // If RBAC passes, check ABAC\n      const resourceObj = {\n        type: resource.type || \"unknown\",\n        ownerId: resource.ownerId || null,\n        department: resource.department || null,\n        location: resource.location || null,\n        ...resource,\n      };\n\n      const environment = {\n        ipAddress: request.ip || request.socket.remoteAddress,\n        userAgent: request.headers[\"user-agent\"],\n        ...options.environment,\n      };\n\n      const hasAccess = hasAbacAccess(request.user, resourceObj, environment);\n\n      if (!hasAccess) {\n        return reply.code(403).send({\n          status: 403,\n          message: \"Access denied. ABAC policy violation.\",\n        });\n      }\n    } catch (error) {\n      logger.error(\"Error importing RBAC module:\", error)\n      return reply.code(500).send({\n        status: 500,\n        message: \"Server error during access control check.\",\n      });\n    }\n  };\n};\n\n/**\n * Middleware to check if user has access based on either RBAC or ABAC\n * @param {Array} requiredPermissions - Permissions required (RBAC)\n * @param {Object} resource - The resource being accessed (ABAC)\n * @param {Object} options - Additional options\n */\nexport const requireRbacOrAbac = (\n  requiredPermissions,\n  resource,\n  options = {}\n) => {\n  return async (request, reply) => {\n    try {\n      // Check if user is authenticated\n      if (!request.user) {\n        return reply.code(401).send({\n          status: 401,\n          message: \"Access denied. Authentication required.\",\n        });\n      }\n\n      // Check RBAC permissions\n      const { userHasAllPermissions } = await import(\"../config/rbac.js\");\n      const userRole = request.user.role || \"patient\"; // Default to patient if no role specified\n      const hasRbacAccess = requiredPermissions.every((permission) =>\n        userHasAllPermissions(userRole, [permission])\n      );\n\n      // Check ABAC access\n      const resourceObj = {\n        type: resource.type || \"unknown\",\n        ownerId: resource.ownerId || null,\n        department: resource.department || null,\n        location: resource.location || null,\n        ...resource,\n      };\n\n      const environment = {\n        ipAddress: request.ip || request.socket.remoteAddress,\n        userAgent: request.headers[\"user-agent\"],\n        ...options.environment,\n      };\n\n      const hasAbacAccessResult = hasAbacAccess(\n        request.user,\n        resourceObj,\n        environment\n      );\n\n      // Allow access if either RBAC or ABAC passes\n      if (!hasRbacAccess && !hasAbacAccessResult) {\n        return reply.code(403).send({\n          status: 403,\n          message:\n            \"Access denied. Neither RBAC permissions nor ABAC policies allow access.\",\n        });\n      }\n    } catch (error) {\n      logger.error(\"Error importing RBAC module:\", error)\n      return reply.code(500).send({\n        status: 500,\n        message: \"Server error during access control check.\",\n      });\n    }\n  };\n};\n\nexport default {\n  requireAbacAccess,\n  requireAbacPolicy,\n  requireDynamicAbacPolicy,\n  requirePatientRecordAccess,\n  requireRbacAndAbac,\n  requireRbacOrAbac,\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}