{"version":3,"names":["cov_2q2ukbpjjf","actualCoverage","crypto","encryptionConfig","logger","EncryptionService","constructor","f","s","config","algorithm","ivLength","authTagLength","key","previousKey","keyVersion","encrypt","plaintext","aad","b","undefined","plaintextBuffer","Buffer","isBuffer","from","String","iv","randomBytes","cipher","createCipheriv","setAAD","ciphertext","concat","update","final","authTag","getAuthTag","combined","toString","error","message","Error","decrypt","encryptedValue","version","subarray","debug","decipher","createDecipheriv","setAuthTag","includes","isBase64","warn","str","encryptDeterministic","fieldContext","ivSource","createHmac","digest","encryptFields","tableName","data","recordId","encryptedFields","searchableFields","searchableEncryptedFields","result","field","getAAD","decryptFields","createSearchToken","fieldName","searchValue","createBlindIndex","value","context","reencrypt","oldAad","newAad","generateKey","isEncrypted","length","decoded","encryptionService"],"sources":["EncryptionService.js"],"sourcesContent":["import crypto from \"crypto\";\nimport { encryptionConfig } from \"../config/encryption.config.js\";\nimport { logger } from \"../utils/logger.js\";\n\n/**\n * EncryptionService - HIPAA-Compliant Field-Level Encryption\n *\n * Provides AES-256-GCM encryption for PHI data at rest.\n * Uses authenticated encryption with associated data (AEAD) for integrity.\n *\n * Features:\n * - AES-256-GCM authenticated encryption\n * - Automatic key derivation using PBKDF2\n * - Key rotation support with version tracking\n * - Deterministic encryption for searchable fields\n * - Automatic IV generation for each encryption\n *\n * HIPAA Requirements:\n * - 164.312(a)(2)(iv): Encryption and decryption\n * - 164.312(c)(1): Integrity controls\n *\n * SECURITY TICKET: encryption-implementation\n */\nclass EncryptionService {\n  constructor() {\n    this.config = encryptionConfig;\n    this.algorithm = this.config.algorithm;\n    this.ivLength = this.config.ivLength;\n    this.authTagLength = this.config.authTagLength;\n    this.key = this.config.key;\n    this.previousKey = this.config.previousKey;\n    this.keyVersion = this.config.keyVersion;\n  }\n\n  /**\n   * Encrypt a plaintext value using AES-256-GCM\n   *\n   * @param {string|Buffer} plaintext - The data to encrypt\n   * @param {Buffer} [aad] - Additional authenticated data (optional)\n   * @returns {string} Encrypted value in format: version:iv:authTag:ciphertext (base64)\n   */\n  encrypt(plaintext, aad = null) {\n    if (plaintext === null || plaintext === undefined || plaintext === \"\") {\n      return plaintext;\n    }\n\n    try {\n      // Convert to buffer if string\n      const plaintextBuffer = Buffer.isBuffer(plaintext)\n        ? plaintext\n        : Buffer.from(String(plaintext), \"utf8\");\n\n      // Generate random IV for each encryption\n      const iv = crypto.randomBytes(this.ivLength);\n\n      // Create cipher\n      const cipher = crypto.createCipheriv(this.algorithm, this.key, iv, {\n        authTagLength: this.authTagLength,\n      });\n\n      // Set AAD if provided\n      if (aad) {\n        cipher.setAAD(aad);\n      }\n\n      // Encrypt\n      const ciphertext = Buffer.concat([\n        cipher.update(plaintextBuffer),\n        cipher.final(),\n      ]);\n\n      // Get authentication tag\n      const authTag = cipher.getAuthTag();\n\n      // Combine components: version:iv:authTag:ciphertext\n      // Using base64 encoding for storage efficiency\n      const combined = Buffer.concat([\n        Buffer.from([this.keyVersion]), // 1 byte version\n        iv,                              // 12 bytes IV\n        authTag,                         // 16 bytes auth tag\n        ciphertext,                      // Variable length ciphertext\n      ]);\n\n      return combined.toString(\"base64\");\n    } catch (error) {\n      logger.error(\"Encryption failed\", { error: error.message });\n      throw new Error(\"Failed to encrypt data\");\n    }\n  }\n\n  /**\n   * Decrypt a ciphertext value encrypted with AES-256-GCM\n   *\n   * @param {string} encryptedValue - The encrypted value (base64 format)\n   * @param {Buffer} [aad] - Additional authenticated data (must match encryption AAD)\n   * @returns {string} Decrypted plaintext\n   */\n  decrypt(encryptedValue, aad = null) {\n    if (encryptedValue === null || encryptedValue === undefined || encryptedValue === \"\") {\n      return encryptedValue;\n    }\n\n    try {\n      // Decode from base64\n      const combined = Buffer.from(encryptedValue, \"base64\");\n\n      // Extract components\n      const version = combined[0];\n      const iv = combined.subarray(1, 1 + this.ivLength);\n      const authTag = combined.subarray(\n        1 + this.ivLength,\n        1 + this.ivLength + this.authTagLength\n      );\n      const ciphertext = combined.subarray(1 + this.ivLength + this.authTagLength);\n\n      // Determine which key to use based on version\n      let key = this.key;\n      if (version !== this.keyVersion && this.previousKey) {\n        // Use previous key for old encrypted data\n        key = this.previousKey;\n        logger.debug(\"Using previous encryption key for decryption\", { version });\n      }\n\n      // Create decipher\n      const decipher = crypto.createDecipheriv(this.algorithm, key, iv, {\n        authTagLength: this.authTagLength,\n      });\n\n      // Set auth tag\n      decipher.setAuthTag(authTag);\n\n      // Set AAD if provided\n      if (aad) {\n        decipher.setAAD(aad);\n      }\n\n      // Decrypt\n      const plaintext = Buffer.concat([\n        decipher.update(ciphertext),\n        decipher.final(),\n      ]);\n\n      return plaintext.toString(\"utf8\");\n    } catch (error) {\n      // Check if this looks like unencrypted data (for migration)\n      if (!encryptedValue.includes(\":\") && !this.isBase64(encryptedValue)) {\n        logger.warn(\"Data appears to be unencrypted, returning as-is\");\n        return encryptedValue;\n      }\n\n      logger.error(\"Decryption failed\", { error: error.message });\n      throw new Error(\"Failed to decrypt data - integrity check failed\");\n    }\n  }\n\n  /**\n   * Check if a string is valid base64\n   *\n   * @param {string} str - String to check\n   * @returns {boolean}\n   */\n  isBase64(str) {\n    try {\n      return Buffer.from(str, \"base64\").toString(\"base64\") === str;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Encrypt a value with deterministic encryption (for searchable fields)\n   * Uses HMAC-based IV derivation for consistent ciphertext\n   *\n   * WARNING: This is less secure than random IV encryption.\n   * Only use for fields that must be searchable.\n   *\n   * @param {string} plaintext - The data to encrypt\n   * @param {string} fieldContext - Context for IV derivation (e.g., \"patients:mrn\")\n   * @returns {string} Encrypted value\n   */\n  encryptDeterministic(plaintext, fieldContext) {\n    if (plaintext === null || plaintext === undefined || plaintext === \"\") {\n      return plaintext;\n    }\n\n    try {\n      // Derive IV from HMAC of plaintext and context\n      // This produces the same IV for the same plaintext, making it searchable\n      const ivSource = crypto.createHmac(\"sha256\", this.key)\n        .update(`${fieldContext}:${plaintext}`)\n        .digest();\n\n      // Take first 12 bytes for IV\n      const iv = ivSource.subarray(0, this.ivLength);\n\n      // Create cipher\n      const cipher = crypto.createCipheriv(this.algorithm, this.key, iv, {\n        authTagLength: this.authTagLength,\n      });\n\n      // Encrypt\n      const ciphertext = Buffer.concat([\n        cipher.update(Buffer.from(plaintext, \"utf8\")),\n        cipher.final(),\n      ]);\n\n      // Get authentication tag\n      const authTag = cipher.getAuthTag();\n\n      // Combine components with \"d\" prefix to indicate deterministic\n      const combined = Buffer.concat([\n        Buffer.from([0x64, this.keyVersion]), // \"d\" + version\n        iv,\n        authTag,\n        ciphertext,\n      ]);\n\n      return combined.toString(\"base64\");\n    } catch (error) {\n      logger.error(\"Deterministic encryption failed\", { error: error.message });\n      throw new Error(\"Failed to encrypt data\");\n    }\n  }\n\n  /**\n   * Encrypt sensitive fields in an object\n   *\n   * @param {string} tableName - The table name (for field list lookup)\n   * @param {object} data - The data object with fields to encrypt\n   * @param {string|number} [recordId] - Record ID for AAD generation\n   * @returns {object} Data object with encrypted fields\n   */\n  encryptFields(tableName, data, recordId = null) {\n    if (!data || typeof data !== \"object\") {\n      return data;\n    }\n\n    const encryptedFields = this.config.encryptedFields[tableName] || [];\n    const searchableFields = this.config.searchableEncryptedFields[tableName] || [];\n    const result = { ...data };\n\n    // Encrypt regular fields with random IV\n    for (const field of encryptedFields) {\n      if (result[field] !== undefined && result[field] !== null) {\n        const aad = this.config.getAAD(tableName, field, recordId);\n        result[field] = this.encrypt(result[field], aad);\n      }\n    }\n\n    // Encrypt searchable fields with deterministic encryption\n    for (const field of searchableFields) {\n      if (result[field] !== undefined && result[field] !== null) {\n        result[field] = this.encryptDeterministic(\n          result[field],\n          `${tableName}:${field}`\n        );\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Decrypt sensitive fields in an object\n   *\n   * @param {string} tableName - The table name (for field list lookup)\n   * @param {object} data - The data object with fields to decrypt\n   * @param {string|number} [recordId] - Record ID for AAD verification\n   * @returns {object} Data object with decrypted fields\n   */\n  decryptFields(tableName, data, recordId = null) {\n    if (!data || typeof data !== \"object\") {\n      return data;\n    }\n\n    const encryptedFields = this.config.encryptedFields[tableName] || [];\n    const searchableFields = this.config.searchableEncryptedFields[tableName] || [];\n    const result = { ...data };\n\n    // Decrypt regular fields\n    for (const field of encryptedFields) {\n      if (result[field] !== undefined && result[field] !== null) {\n        try {\n          const aad = this.config.getAAD(tableName, field, recordId);\n          result[field] = this.decrypt(result[field], aad);\n        } catch (error) {\n          logger.warn(`Failed to decrypt field ${field}`, { error: error.message });\n          // Leave field as-is if decryption fails (might be unencrypted legacy data)\n        }\n      }\n    }\n\n    // Decrypt searchable fields\n    for (const field of searchableFields) {\n      if (result[field] !== undefined && result[field] !== null) {\n        try {\n          result[field] = this.decrypt(result[field]);\n        } catch (error) {\n          logger.warn(`Failed to decrypt searchable field ${field}`, { error: error.message });\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Encrypt a value for searching (deterministic)\n   * Use this to create search tokens for encrypted fields\n   *\n   * @param {string} tableName - The table name\n   * @param {string} fieldName - The field name\n   * @param {string} searchValue - The value to search for\n   * @returns {string} Encrypted search token\n   */\n  createSearchToken(tableName, fieldName, searchValue) {\n    return this.encryptDeterministic(searchValue, `${tableName}:${fieldName}`);\n  }\n\n  /**\n   * Hash a value for blind indexing (one-way, non-reversible)\n   * Use for equality searches without revealing the original value\n   *\n   * @param {string} value - The value to hash\n   * @param {string} context - Context for the hash (e.g., \"patients:ssn\")\n   * @returns {string} Base64-encoded hash\n   */\n  createBlindIndex(value, context) {\n    if (!value) return null;\n\n    return crypto.createHmac(\"sha256\", this.key)\n      .update(`${context}:${value}`)\n      .digest(\"base64\");\n  }\n\n  /**\n   * Re-encrypt data with the current key (for key rotation)\n   *\n   * @param {string} encryptedValue - Value encrypted with previous key\n   * @param {Buffer} [oldAad] - AAD used during original encryption\n   * @param {Buffer} [newAad] - AAD for new encryption (optional, defaults to oldAad)\n   * @returns {string} Re-encrypted value with current key\n   */\n  reencrypt(encryptedValue, oldAad = null, newAad = null) {\n    const plaintext = this.decrypt(encryptedValue, oldAad);\n    return this.encrypt(plaintext, newAad || oldAad);\n  }\n\n  /**\n   * Generate a secure random encryption key\n   *\n   * @returns {string} 64-character hex string (256 bits)\n   */\n  static generateKey() {\n    return crypto.randomBytes(32).toString(\"hex\");\n  }\n\n  /**\n   * Check if a value appears to be encrypted\n   *\n   * @param {string} value - Value to check\n   * @returns {boolean}\n   */\n  isEncrypted(value) {\n    if (!value || typeof value !== \"string\") {\n      return false;\n    }\n\n    // Check if it's a valid base64 string of expected minimum length\n    // Minimum length: 1 (version) + 12 (IV) + 16 (authTag) + 1 (min ciphertext) = 30 bytes = 40 base64 chars\n    if (value.length < 40) {\n      return false;\n    }\n\n    try {\n      const decoded = Buffer.from(value, \"base64\");\n      // Check version byte is valid\n      const version = decoded[0];\n      return version === this.keyVersion || version === 0x64; // Regular or deterministic\n    } catch {\n      return false;\n    }\n  }\n}\n\n// Export singleton instance\nconst encryptionService = new EncryptionService();\n\nexport { EncryptionService, encryptionService };\nexport default encryptionService;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}