{"version":3,"names":["cov_10l9m17t54","actualCoverage","db","prognosis","eq","Prognosis","s","findAll","f","select","from","findOne","options","where","patient_id","b","results","findByPk","id","create","data","result","insert","values","returning","update","set","updatedAt","Date","length","destroy","delete"],"sources":["Prognosis.model.js"],"sourcesContent":["/**\n * Prognosis Model\n * Compatibility layer for legacy controller using Drizzle ORM\n */\nimport { db } from '../db/index.js';\nimport { prognosis } from '../db/schemas/prognosis.schema.js';\nimport { eq } from 'drizzle-orm';\n\nconst Prognosis = {\n  async findAll() {\n    return await db.select().from(prognosis);\n  },\n\n  async findOne(options) {\n    if (options?.where?.patient_id) {\n      const results = await db.select().from(prognosis).where(eq(prognosis.patient_id, options.where.patient_id));\n      return results[0] || null;\n    }\n    return null;\n  },\n\n  async findByPk(id) {\n    const results = await db.select().from(prognosis).where(eq(prognosis.id, id));\n    return results[0] || null;\n  },\n\n  async create(data) {\n    const result = await db.insert(prognosis).values(data).returning();\n    return result[0];\n  },\n\n  async update(data, options) {\n    if (options?.where?.id) {\n      const result = await db.update(prognosis)\n        .set({ ...data, updatedAt: new Date() })\n        .where(eq(prognosis.id, options.where.id))\n        .returning();\n      return [result.length, result];\n    }\n    return [0, []];\n  },\n\n  async destroy(options) {\n    if (options?.where?.id) {\n      await db.delete(prognosis).where(eq(prognosis.id, options.where.id));\n      return 1;\n    }\n    return 0;\n  }\n};\n\nexport default Prognosis;\n"],"mappings":"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","ignoreList":[]}