{"version":3,"names":["cov_9p8u1eoaj","actualCoverage","PdfService","ExcelService","BrowserService","LoggerService","ServiceContainer","constructor","f","s","services","Map","resolved","aliases","registerDefaultServices","bind","abstract","concrete","shared","b","set","alias","make","has","get","service","Error","instance","remove","delete","getServices","Array","from","keys","getResolvedServices"],"sources":["ServiceContainer.js"],"sourcesContent":["import PdfService from './PdfService.js';\nimport ExcelService from './ExcelService.js';\nimport BrowserService from './BrowserService.js';\nimport LoggerService from './LoggerService.js';\n\nclass ServiceContainer {\n    constructor() {\n        this.services = new Map();\n        this.resolved = new Map();\n        this.aliases = new Map();\n        \n        // Register default services\n        this.registerDefaultServices();\n    }\n    \n    /**\n     * Register default services\n     */\n    registerDefaultServices() {\n        this.bind('pdf', PdfService);\n        this.bind('excel', ExcelService);\n        this.bind('browser', BrowserService);\n        this.bind('logger', LoggerService);\n    }\n    \n    /**\n     * Register a service\n     * @param {String} abstract - Service identifier\n     * @param {Function|Object} concrete - Service implementation\n     * @param {Boolean} shared - Whether the service should be shared (singleton)\n     */\n    bind(abstract, concrete, shared = true) {\n        this.services.set(abstract, {\n            concrete: concrete,\n            shared: shared\n        });\n    }\n    \n    /**\n     * Register an alias for a service\n     * @param {String} alias - Alias name\n     * @param {String} abstract - Service identifier\n     */\n    alias(alias, abstract) {\n        this.aliases.set(alias, abstract);\n    }\n    \n    /**\n     * Resolve a service\n     * @param {String} abstract - Service identifier\n     * @return {Object} - Service instance\n     */\n    make(abstract) {\n        // Check if it's an alias\n        if (this.aliases.has(abstract)) {\n            abstract = this.aliases.get(abstract);\n        }\n        \n        // Check if we have a resolved instance\n        if (this.resolved.has(abstract)) {\n            return this.resolved.get(abstract);\n        }\n        \n        // Get service definition\n        const service = this.services.get(abstract);\n        if (!service) {\n            throw new Error(`Service [${abstract}] is not registered.`);\n        }\n        \n        let instance;\n        \n        // Resolve the service\n        if (typeof service.concrete === 'function') {\n            // If it's a constructor function, instantiate it\n            instance = new service.concrete();\n        } else {\n            // If it's already an object, use it directly\n            instance = service.concrete;\n        }\n        \n        // Store resolved instance if it's shared\n        if (service.shared) {\n            this.resolved.set(abstract, instance);\n        }\n        \n        return instance;\n    }\n    \n    /**\n     * Check if a service is registered\n     * @param {String} abstract - Service identifier\n     * @return {Boolean}\n     */\n    has(abstract) {\n        return this.services.has(abstract) || this.aliases.has(abstract);\n    }\n    \n    /**\n     * Remove a service\n     * @param {String} abstract - Service identifier\n     */\n    remove(abstract) {\n        this.services.delete(abstract);\n        this.resolved.delete(abstract);\n        this.aliases.delete(abstract);\n    }\n    \n    /**\n     * Get all registered services\n     * @return {Array} - List of service identifiers\n     */\n    getServices() {\n        return Array.from(this.services.keys());\n    }\n    \n    /**\n     * Get all resolved services\n     * @return {Array} - List of resolved service identifiers\n     */\n    getResolvedServices() {\n        return Array.from(this.resolved.keys());\n    }\n}\n\n// Export singleton instance\nexport default new ServiceContainer();"],"mappings":"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","ignoreList":[]}