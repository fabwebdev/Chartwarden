d91b20d1dc146c2c6ca29eb830d9a2ae
/* istanbul ignore next */
function cov_2gw27eqidw() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/db/schemas/userPresence.schema.js";
  var hash = "624d57e5661c9b2541ed3c1ecea79dd33bd24e66";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/db/schemas/userPresence.schema.js",
    statementMap: {
      "0": {
        start: {
          line: 17,
          column: 34
        },
        end: {
          line: 22,
          column: 2
        }
      },
      "1": {
        start: {
          line: 35,
          column: 29
        },
        end: {
          line: 90,
          column: 3
        }
      },
      "2": {
        start: {
          line: 39,
          column: 22
        },
        end: {
          line: 39,
          column: 30
        }
      },
      "3": {
        start: {
          line: 45,
          column: 22
        },
        end: {
          line: 45,
          column: 30
        }
      },
      "4": {
        start: {
          line: 71,
          column: 15
        },
        end: {
          line: 90,
          column: 1
        }
      },
      "5": {
        start: {
          line: 98,
          column: 32
        },
        end: {
          line: 134,
          column: 3
        }
      },
      "6": {
        start: {
          line: 102,
          column: 22
        },
        end: {
          line: 102,
          column: 30
        }
      },
      "7": {
        start: {
          line: 107,
          column: 22
        },
        end: {
          line: 107,
          column: 30
        }
      },
      "8": {
        start: {
          line: 124,
          column: 15
        },
        end: {
          line: 134,
          column: 1
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 39,
            column: 16
          },
          end: {
            line: 39,
            column: 17
          }
        },
        loc: {
          start: {
            line: 39,
            column: 22
          },
          end: {
            line: 39,
            column: 30
          }
        },
        line: 39
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 45,
            column: 16
          },
          end: {
            line: 45,
            column: 17
          }
        },
        loc: {
          start: {
            line: 45,
            column: 22
          },
          end: {
            line: 45,
            column: 30
          }
        },
        line: 45
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 71,
            column: 3
          },
          end: {
            line: 71,
            column: 4
          }
        },
        loc: {
          start: {
            line: 71,
            column: 15
          },
          end: {
            line: 90,
            column: 1
          }
        },
        line: 71
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 102,
            column: 16
          },
          end: {
            line: 102,
            column: 17
          }
        },
        loc: {
          start: {
            line: 102,
            column: 22
          },
          end: {
            line: 102,
            column: 30
          }
        },
        line: 102
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 107,
            column: 16
          },
          end: {
            line: 107,
            column: 17
          }
        },
        loc: {
          start: {
            line: 107,
            column: 22
          },
          end: {
            line: 107,
            column: 30
          }
        },
        line: 107
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 124,
            column: 3
          },
          end: {
            line: 124,
            column: 4
          }
        },
        loc: {
          start: {
            line: 124,
            column: 15
          },
          end: {
            line: 134,
            column: 1
          }
        },
        line: 124
      }
    },
    branchMap: {},
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {},
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "624d57e5661c9b2541ed3c1ecea79dd33bd24e66"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2gw27eqidw = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2gw27eqidw();
import { pgTable, text, varchar, timestamp, boolean, index, pgEnum } from 'drizzle-orm/pg-core';
import { nanoid } from 'nanoid';
import { users } from './user.schema.js';

/**
 * User Presence Status Enum
 * Defines the online/offline status for real-time chat presence tracking
 */
export const presenceStatusEnum =
/* istanbul ignore next */
(cov_2gw27eqidw().s[0]++, pgEnum('presence_status', ['online',
// User is actively connected
'away',
// User is idle/inactive for extended period
'busy',
// User is online but marked as busy/do not disturb
'offline' // User is disconnected
]));

/**
 * User Presence Schema
 *
 * Tracks real-time online/offline status for team chat functionality.
 * Used for displaying user availability in chat rooms and presence indicators.
 *
 * HIPAA Compliance Considerations:
 * - Presence data should be retained for audit purposes (who was online when)
 * - Status changes should be logged for accountability
 * - Connection tracking helps with session management and security
 */
export const user_presence =
/* istanbul ignore next */
(cov_2gw27eqidw().s[1]++, pgTable('user_presence', {
  // Primary key
  id: text('id').primaryKey().$defaultFn(() => {
    /* istanbul ignore next */
    cov_2gw27eqidw().f[0]++;
    cov_2gw27eqidw().s[2]++;
    return nanoid();
  }),
  // User association
  user_id: text('user_id').notNull().unique().references(() => {
    /* istanbul ignore next */
    cov_2gw27eqidw().f[1]++;
    cov_2gw27eqidw().s[3]++;
    return users.id;
  }, {
    onDelete: 'cascade'
  }),
  // Presence status
  status: presenceStatusEnum('status').notNull().default('offline'),
  // Custom status message (optional)
  status_message: varchar('status_message', {
    length: 255
  }),
  // "In a meeting", "On break", etc.

  // Connection tracking
  socket_id: varchar('socket_id', {
    length: 255
  }),
  // Current socket connection ID
  is_connected: boolean('is_connected').default(false).notNull(),
  // Activity tracking
  last_seen_at: timestamp('last_seen_at').defaultNow().notNull(),
  // Last activity timestamp
  last_active_at: timestamp('last_active_at').defaultNow().notNull(),
  // Last interaction timestamp

  // Typing indicators (room-specific)
  typing_in_room_id: text('typing_in_room_id'),
  // Reference to chat room where user is typing

  // Session metadata
  user_agent: text('user_agent'),
  // Browser/device info for security
  ip_address: varchar('ip_address', {
    length: 45
  }),
  // IPv4 or IPv6 for audit

  // Timestamps
  created_at: timestamp('created_at').defaultNow().notNull(),
  updated_at: timestamp('updated_at').defaultNow().notNull()
}, table => {
  /* istanbul ignore next */
  cov_2gw27eqidw().f[2]++;
  cov_2gw27eqidw().s[4]++;
  return {
    // Index for finding online users
    userIdIdx: index('idx_user_presence_user_id').on(table.user_id),
    // Index for filtering by status
    statusIdx: index('idx_user_presence_status').on(table.status),
    // Index for finding connected users
    isConnectedIdx: index('idx_user_presence_is_connected').on(table.is_connected),
    // Composite index for active online users
    activeOnlineIdx: index('idx_user_presence_active_online').on(table.is_connected, table.status, table.last_active_at),
    // Index for typing indicators
    typingIdx: index('idx_user_presence_typing').on(table.typing_in_room_id),
    // Index for last seen queries
    lastSeenIdx: index('idx_user_presence_last_seen').on(table.last_seen_at)
  };
}));

/**
 * Presence History Schema
 *
 * Audit trail for presence status changes.
 * Maintains HIPAA-compliant history of when users were online/offline.
 */
export const presence_history =
/* istanbul ignore next */
(cov_2gw27eqidw().s[5]++, pgTable('presence_history', {
  // Primary key
  id: text('id').primaryKey().$defaultFn(() => {
    /* istanbul ignore next */
    cov_2gw27eqidw().f[3]++;
    cov_2gw27eqidw().s[6]++;
    return nanoid();
  }),
  // User association
  user_id: text('user_id').notNull().references(() => {
    /* istanbul ignore next */
    cov_2gw27eqidw().f[4]++;
    cov_2gw27eqidw().s[7]++;
    return users.id;
  }, {
    onDelete: 'cascade'
  }),
  // Status change tracking
  old_status: presenceStatusEnum('old_status').notNull(),
  new_status: presenceStatusEnum('new_status').notNull(),
  // Session information
  socket_id: varchar('socket_id', {
    length: 255
  }),
  user_agent: text('user_agent'),
  ip_address: varchar('ip_address', {
    length: 45
  }),
  // Session duration (for analytics)
  session_started_at: timestamp('session_started_at'),
  session_ended_at: timestamp('session_ended_at'),
  // Timestamp
  created_at: timestamp('created_at').defaultNow().notNull()
}, table => {
  /* istanbul ignore next */
  cov_2gw27eqidw().f[5]++;
  cov_2gw27eqidw().s[8]++;
  return {
    // Index for user history queries
    userIdIdx: index('idx_presence_history_user_id').on(table.user_id),
    // Index for time-based queries
    createdAtIdx: index('idx_presence_history_created_at').on(table.created_at),
    // Composite index for user timeline
    userTimeIdx: index('idx_presence_history_user_time').on(table.user_id, table.created_at)
  };
}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmd3MjdlcWlkdyIsImFjdHVhbENvdmVyYWdlIiwicGdUYWJsZSIsInRleHQiLCJ2YXJjaGFyIiwidGltZXN0YW1wIiwiYm9vbGVhbiIsImluZGV4IiwicGdFbnVtIiwibmFub2lkIiwidXNlcnMiLCJwcmVzZW5jZVN0YXR1c0VudW0iLCJzIiwidXNlcl9wcmVzZW5jZSIsImlkIiwicHJpbWFyeUtleSIsIiRkZWZhdWx0Rm4iLCJmIiwidXNlcl9pZCIsIm5vdE51bGwiLCJ1bmlxdWUiLCJyZWZlcmVuY2VzIiwib25EZWxldGUiLCJzdGF0dXMiLCJkZWZhdWx0Iiwic3RhdHVzX21lc3NhZ2UiLCJsZW5ndGgiLCJzb2NrZXRfaWQiLCJpc19jb25uZWN0ZWQiLCJsYXN0X3NlZW5fYXQiLCJkZWZhdWx0Tm93IiwibGFzdF9hY3RpdmVfYXQiLCJ0eXBpbmdfaW5fcm9vbV9pZCIsInVzZXJfYWdlbnQiLCJpcF9hZGRyZXNzIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJ0YWJsZSIsInVzZXJJZElkeCIsIm9uIiwic3RhdHVzSWR4IiwiaXNDb25uZWN0ZWRJZHgiLCJhY3RpdmVPbmxpbmVJZHgiLCJ0eXBpbmdJZHgiLCJsYXN0U2VlbklkeCIsInByZXNlbmNlX2hpc3RvcnkiLCJvbGRfc3RhdHVzIiwibmV3X3N0YXR1cyIsInNlc3Npb25fc3RhcnRlZF9hdCIsInNlc3Npb25fZW5kZWRfYXQiLCJjcmVhdGVkQXRJZHgiLCJ1c2VyVGltZUlkeCJdLCJzb3VyY2VzIjpbInVzZXJQcmVzZW5jZS5zY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgcGdUYWJsZSxcbiAgdGV4dCxcbiAgdmFyY2hhcixcbiAgdGltZXN0YW1wLFxuICBib29sZWFuLFxuICBpbmRleCxcbiAgcGdFbnVtXG59IGZyb20gJ2RyaXp6bGUtb3JtL3BnLWNvcmUnO1xuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnbmFub2lkJztcbmltcG9ydCB7IHVzZXJzIH0gZnJvbSAnLi91c2VyLnNjaGVtYS5qcyc7XG5cbi8qKlxuICogVXNlciBQcmVzZW5jZSBTdGF0dXMgRW51bVxuICogRGVmaW5lcyB0aGUgb25saW5lL29mZmxpbmUgc3RhdHVzIGZvciByZWFsLXRpbWUgY2hhdCBwcmVzZW5jZSB0cmFja2luZ1xuICovXG5leHBvcnQgY29uc3QgcHJlc2VuY2VTdGF0dXNFbnVtID0gcGdFbnVtKCdwcmVzZW5jZV9zdGF0dXMnLCBbXG4gICdvbmxpbmUnLCAgICAgIC8vIFVzZXIgaXMgYWN0aXZlbHkgY29ubmVjdGVkXG4gICdhd2F5JywgICAgICAgIC8vIFVzZXIgaXMgaWRsZS9pbmFjdGl2ZSBmb3IgZXh0ZW5kZWQgcGVyaW9kXG4gICdidXN5JywgICAgICAgIC8vIFVzZXIgaXMgb25saW5lIGJ1dCBtYXJrZWQgYXMgYnVzeS9kbyBub3QgZGlzdHVyYlxuICAnb2ZmbGluZScgICAgICAvLyBVc2VyIGlzIGRpc2Nvbm5lY3RlZFxuXSk7XG5cbi8qKlxuICogVXNlciBQcmVzZW5jZSBTY2hlbWFcbiAqXG4gKiBUcmFja3MgcmVhbC10aW1lIG9ubGluZS9vZmZsaW5lIHN0YXR1cyBmb3IgdGVhbSBjaGF0IGZ1bmN0aW9uYWxpdHkuXG4gKiBVc2VkIGZvciBkaXNwbGF5aW5nIHVzZXIgYXZhaWxhYmlsaXR5IGluIGNoYXQgcm9vbXMgYW5kIHByZXNlbmNlIGluZGljYXRvcnMuXG4gKlxuICogSElQQUEgQ29tcGxpYW5jZSBDb25zaWRlcmF0aW9uczpcbiAqIC0gUHJlc2VuY2UgZGF0YSBzaG91bGQgYmUgcmV0YWluZWQgZm9yIGF1ZGl0IHB1cnBvc2VzICh3aG8gd2FzIG9ubGluZSB3aGVuKVxuICogLSBTdGF0dXMgY2hhbmdlcyBzaG91bGQgYmUgbG9nZ2VkIGZvciBhY2NvdW50YWJpbGl0eVxuICogLSBDb25uZWN0aW9uIHRyYWNraW5nIGhlbHBzIHdpdGggc2Vzc2lvbiBtYW5hZ2VtZW50IGFuZCBzZWN1cml0eVxuICovXG5leHBvcnQgY29uc3QgdXNlcl9wcmVzZW5jZSA9IHBnVGFibGUoJ3VzZXJfcHJlc2VuY2UnLCB7XG4gIC8vIFByaW1hcnkga2V5XG4gIGlkOiB0ZXh0KCdpZCcpXG4gICAgLnByaW1hcnlLZXkoKVxuICAgIC4kZGVmYXVsdEZuKCgpID0+IG5hbm9pZCgpKSxcblxuICAvLyBVc2VyIGFzc29jaWF0aW9uXG4gIHVzZXJfaWQ6IHRleHQoJ3VzZXJfaWQnKVxuICAgIC5ub3ROdWxsKClcbiAgICAudW5pcXVlKClcbiAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxuXG4gIC8vIFByZXNlbmNlIHN0YXR1c1xuICBzdGF0dXM6IHByZXNlbmNlU3RhdHVzRW51bSgnc3RhdHVzJykubm90TnVsbCgpLmRlZmF1bHQoJ29mZmxpbmUnKSxcblxuICAvLyBDdXN0b20gc3RhdHVzIG1lc3NhZ2UgKG9wdGlvbmFsKVxuICBzdGF0dXNfbWVzc2FnZTogdmFyY2hhcignc3RhdHVzX21lc3NhZ2UnLCB7IGxlbmd0aDogMjU1IH0pLCAvLyBcIkluIGEgbWVldGluZ1wiLCBcIk9uIGJyZWFrXCIsIGV0Yy5cblxuICAvLyBDb25uZWN0aW9uIHRyYWNraW5nXG4gIHNvY2tldF9pZDogdmFyY2hhcignc29ja2V0X2lkJywgeyBsZW5ndGg6IDI1NSB9KSwgLy8gQ3VycmVudCBzb2NrZXQgY29ubmVjdGlvbiBJRFxuICBpc19jb25uZWN0ZWQ6IGJvb2xlYW4oJ2lzX2Nvbm5lY3RlZCcpLmRlZmF1bHQoZmFsc2UpLm5vdE51bGwoKSxcblxuICAvLyBBY3Rpdml0eSB0cmFja2luZ1xuICBsYXN0X3NlZW5fYXQ6IHRpbWVzdGFtcCgnbGFzdF9zZWVuX2F0JykuZGVmYXVsdE5vdygpLm5vdE51bGwoKSwgLy8gTGFzdCBhY3Rpdml0eSB0aW1lc3RhbXBcbiAgbGFzdF9hY3RpdmVfYXQ6IHRpbWVzdGFtcCgnbGFzdF9hY3RpdmVfYXQnKS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLCAvLyBMYXN0IGludGVyYWN0aW9uIHRpbWVzdGFtcFxuXG4gIC8vIFR5cGluZyBpbmRpY2F0b3JzIChyb29tLXNwZWNpZmljKVxuICB0eXBpbmdfaW5fcm9vbV9pZDogdGV4dCgndHlwaW5nX2luX3Jvb21faWQnKSwgLy8gUmVmZXJlbmNlIHRvIGNoYXQgcm9vbSB3aGVyZSB1c2VyIGlzIHR5cGluZ1xuXG4gIC8vIFNlc3Npb24gbWV0YWRhdGFcbiAgdXNlcl9hZ2VudDogdGV4dCgndXNlcl9hZ2VudCcpLCAvLyBCcm93c2VyL2RldmljZSBpbmZvIGZvciBzZWN1cml0eVxuICBpcF9hZGRyZXNzOiB2YXJjaGFyKCdpcF9hZGRyZXNzJywgeyBsZW5ndGg6IDQ1IH0pLCAvLyBJUHY0IG9yIElQdjYgZm9yIGF1ZGl0XG5cbiAgLy8gVGltZXN0YW1wc1xuICBjcmVhdGVkX2F0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxuICB1cGRhdGVkX2F0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnKS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxufSwgKHRhYmxlKSA9PiAoe1xuICAvLyBJbmRleCBmb3IgZmluZGluZyBvbmxpbmUgdXNlcnNcbiAgdXNlcklkSWR4OiBpbmRleCgnaWR4X3VzZXJfcHJlc2VuY2VfdXNlcl9pZCcpLm9uKHRhYmxlLnVzZXJfaWQpLFxuXG4gIC8vIEluZGV4IGZvciBmaWx0ZXJpbmcgYnkgc3RhdHVzXG4gIHN0YXR1c0lkeDogaW5kZXgoJ2lkeF91c2VyX3ByZXNlbmNlX3N0YXR1cycpLm9uKHRhYmxlLnN0YXR1cyksXG5cbiAgLy8gSW5kZXggZm9yIGZpbmRpbmcgY29ubmVjdGVkIHVzZXJzXG4gIGlzQ29ubmVjdGVkSWR4OiBpbmRleCgnaWR4X3VzZXJfcHJlc2VuY2VfaXNfY29ubmVjdGVkJykub24odGFibGUuaXNfY29ubmVjdGVkKSxcblxuICAvLyBDb21wb3NpdGUgaW5kZXggZm9yIGFjdGl2ZSBvbmxpbmUgdXNlcnNcbiAgYWN0aXZlT25saW5lSWR4OiBpbmRleCgnaWR4X3VzZXJfcHJlc2VuY2VfYWN0aXZlX29ubGluZScpXG4gICAgLm9uKHRhYmxlLmlzX2Nvbm5lY3RlZCwgdGFibGUuc3RhdHVzLCB0YWJsZS5sYXN0X2FjdGl2ZV9hdCksXG5cbiAgLy8gSW5kZXggZm9yIHR5cGluZyBpbmRpY2F0b3JzXG4gIHR5cGluZ0lkeDogaW5kZXgoJ2lkeF91c2VyX3ByZXNlbmNlX3R5cGluZycpLm9uKHRhYmxlLnR5cGluZ19pbl9yb29tX2lkKSxcblxuICAvLyBJbmRleCBmb3IgbGFzdCBzZWVuIHF1ZXJpZXNcbiAgbGFzdFNlZW5JZHg6IGluZGV4KCdpZHhfdXNlcl9wcmVzZW5jZV9sYXN0X3NlZW4nKS5vbih0YWJsZS5sYXN0X3NlZW5fYXQpLFxufSkpO1xuXG4vKipcbiAqIFByZXNlbmNlIEhpc3RvcnkgU2NoZW1hXG4gKlxuICogQXVkaXQgdHJhaWwgZm9yIHByZXNlbmNlIHN0YXR1cyBjaGFuZ2VzLlxuICogTWFpbnRhaW5zIEhJUEFBLWNvbXBsaWFudCBoaXN0b3J5IG9mIHdoZW4gdXNlcnMgd2VyZSBvbmxpbmUvb2ZmbGluZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHByZXNlbmNlX2hpc3RvcnkgPSBwZ1RhYmxlKCdwcmVzZW5jZV9oaXN0b3J5Jywge1xuICAvLyBQcmltYXJ5IGtleVxuICBpZDogdGV4dCgnaWQnKVxuICAgIC5wcmltYXJ5S2V5KClcbiAgICAuJGRlZmF1bHRGbigoKSA9PiBuYW5vaWQoKSksXG5cbiAgLy8gVXNlciBhc3NvY2lhdGlvblxuICB1c2VyX2lkOiB0ZXh0KCd1c2VyX2lkJylcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQsIHsgb25EZWxldGU6ICdjYXNjYWRlJyB9KSxcblxuICAvLyBTdGF0dXMgY2hhbmdlIHRyYWNraW5nXG4gIG9sZF9zdGF0dXM6IHByZXNlbmNlU3RhdHVzRW51bSgnb2xkX3N0YXR1cycpLm5vdE51bGwoKSxcbiAgbmV3X3N0YXR1czogcHJlc2VuY2VTdGF0dXNFbnVtKCduZXdfc3RhdHVzJykubm90TnVsbCgpLFxuXG4gIC8vIFNlc3Npb24gaW5mb3JtYXRpb25cbiAgc29ja2V0X2lkOiB2YXJjaGFyKCdzb2NrZXRfaWQnLCB7IGxlbmd0aDogMjU1IH0pLFxuICB1c2VyX2FnZW50OiB0ZXh0KCd1c2VyX2FnZW50JyksXG4gIGlwX2FkZHJlc3M6IHZhcmNoYXIoJ2lwX2FkZHJlc3MnLCB7IGxlbmd0aDogNDUgfSksXG5cbiAgLy8gU2Vzc2lvbiBkdXJhdGlvbiAoZm9yIGFuYWx5dGljcylcbiAgc2Vzc2lvbl9zdGFydGVkX2F0OiB0aW1lc3RhbXAoJ3Nlc3Npb25fc3RhcnRlZF9hdCcpLFxuICBzZXNzaW9uX2VuZGVkX2F0OiB0aW1lc3RhbXAoJ3Nlc3Npb25fZW5kZWRfYXQnKSxcblxuICAvLyBUaW1lc3RhbXBcbiAgY3JlYXRlZF9hdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JykuZGVmYXVsdE5vdygpLm5vdE51bGwoKSxcbn0sICh0YWJsZSkgPT4gKHtcbiAgLy8gSW5kZXggZm9yIHVzZXIgaGlzdG9yeSBxdWVyaWVzXG4gIHVzZXJJZElkeDogaW5kZXgoJ2lkeF9wcmVzZW5jZV9oaXN0b3J5X3VzZXJfaWQnKS5vbih0YWJsZS51c2VyX2lkKSxcblxuICAvLyBJbmRleCBmb3IgdGltZS1iYXNlZCBxdWVyaWVzXG4gIGNyZWF0ZWRBdElkeDogaW5kZXgoJ2lkeF9wcmVzZW5jZV9oaXN0b3J5X2NyZWF0ZWRfYXQnKS5vbih0YWJsZS5jcmVhdGVkX2F0KSxcblxuICAvLyBDb21wb3NpdGUgaW5kZXggZm9yIHVzZXIgdGltZWxpbmVcbiAgdXNlclRpbWVJZHg6IGluZGV4KCdpZHhfcHJlc2VuY2VfaGlzdG9yeV91c2VyX3RpbWUnKVxuICAgIC5vbih0YWJsZS51c2VyX2lkLCB0YWJsZS5jcmVhdGVkX2F0KSxcbn0pKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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