{"version":3,"names":["cov_ocd98rgxs","actualCoverage","db","cash_flow_projections","revenue_accruals","collection_forecasts","eq","and","gte","lte","sql","RevenueForecastingService","logger","CashFlowProjectionService","createProjection","projectionForPeriod","projectionType","b","options","userId","f","s","weeksAhead","monthsAhead","includeOutflows","sensitivityScenarios","projectedCollections","projectCollections","projectedAppealRecoveries","Math","round","totalProjectedInflows","totalProjectedOutflows","projectedPayroll","projectedVendorPayments","outflows","projectOutflows","total","payroll","vendorPayments","projectedNetCashFlow","projectedAR","projectedWorkingCapital","projectWorkingCapital","confidenceLevel","confidencePercentage","calculateConfidence","assumptions","collectionAssumptions","expectedCollectionRate","averageDaysToPayment","appealRecoveryRate","sensitivityAnalysis","performSensitivityAnalysis","projection","insert","values","projection_date","Date","projection_for_period","projection_type","weeks_ahead","months_ahead","projected_collections","projected_appeal_recoveries","total_projected_inflows","projected_payroll","projected_vendor_payments","total_projected_outflows","projected_net_cash_flow","projected_ar","projected_working_capital","confidence_level","confidence_percentage","methodology","sensitivity_analysis","created_by_id","returning","error","projectCollectionsFromAR","projectCollectionsFromTrends","outstandingAR","select","accrued_amount","collected_amount","written_off_amount","from","where","totalAR","expectedCollections","historical","getHistoricalCollections","length","avgCollections","reduce","sum","h","totalCollected","growthRate","calculateGrowthRate","firstHalf","slice","floor","secondHalf","avgFirst","avgSecond","max","min","projectedOtherExpenses","otherExpenses","currentAR","projectedAP","baseProjection","bestCase","scenario","collectionRate","denialRate","baseCase","worstCase","updateProjectionActuals","projectionId","actualCollections","actualNetCashFlow","id","limit","Error","varianceAmount","variancePercentage","update","set","actual_collections","actual_net_cash_flow","variance_amount","variance_percentage","updated_at","getRolling13WeekProjection","projections","week","projectionDate","setDate","getDate","periodLabel","toISOString","substring","push","getCashFlowSummary","startPeriod","endPeriod","summary","totalProjectedNetCashFlow","totalActualCollections","averageVariancePercentage","projectionCount","forEach","p","completedProjections","filter","avgVariance","abs"],"sources":["CashFlowProjection.service.js"],"sourcesContent":["import { db } from '../db/index.js';\nimport {\n  cash_flow_projections,\n  revenue_accruals,\n  collection_forecasts\n} from '../db/schemas/index.js';\nimport { eq, and, gte, lte, sql } from 'drizzle-orm';\nimport RevenueForecastingService from './RevenueForecasting.service.js';\n\nimport { logger } from '../utils/logger.js';\n/**\n * Cash Flow Projection Service\n * Phase 3D - Cash Flow Forecasting & Working Capital Analysis\n *\n * Purpose: Project cash collections and manage working capital needs\n * Features:\n *   - Short-term (weekly) cash flow projections\n *   - Long-term (monthly/quarterly) projections\n *   - Working capital analysis\n *   - Sensitivity analysis (best/worst case)\n *   - Variance tracking and accuracy metrics\n */\nclass CashFlowProjectionService {\n  /**\n   * Create cash flow projection\n   */\n  async createProjection(projectionForPeriod, projectionType = 'SHORT_TERM', options = {}, userId = null) {\n    try {\n      const {\n        weeksAhead = 4,\n        monthsAhead = 3,\n        includeOutflows = false,\n        sensitivityScenarios = false\n      } = options;\n\n      // Get projected collections based on outstanding AR and forecasts\n      const projectedCollections = await this.projectCollections(projectionForPeriod, projectionType);\n\n      // Estimate appeal recoveries\n      const projectedAppealRecoveries = Math.round(projectedCollections * 0.05); // 5% from appeals\n\n      // Calculate total inflows\n      const totalProjectedInflows = projectedCollections + projectedAppealRecoveries;\n\n      // Project outflows (if requested)\n      let totalProjectedOutflows = 0;\n      let projectedPayroll = 0;\n      let projectedVendorPayments = 0;\n\n      if (includeOutflows) {\n        const outflows = await this.projectOutflows(projectionForPeriod);\n        totalProjectedOutflows = outflows.total;\n        projectedPayroll = outflows.payroll;\n        projectedVendorPayments = outflows.vendorPayments;\n      }\n\n      // Net cash flow\n      const projectedNetCashFlow = totalProjectedInflows - totalProjectedOutflows;\n\n      // Project AR and working capital\n      const { projectedAR, projectedWorkingCapital } = await this.projectWorkingCapital(projectionForPeriod);\n\n      // Calculate confidence based on data quality\n      const { confidenceLevel, confidencePercentage } = this.calculateConfidence(projectionType);\n\n      // Assumptions\n      const assumptions = {\n        projectionType,\n        weeksAhead,\n        monthsAhead,\n        collectionAssumptions: {\n          expectedCollectionRate: 0.85,\n          averageDaysToPayment: 32,\n          appealRecoveryRate: 0.05\n        }\n      };\n\n      // Sensitivity analysis\n      let sensitivityAnalysis = null;\n      if (sensitivityScenarios) {\n        sensitivityAnalysis = this.performSensitivityAnalysis(projectedCollections);\n      }\n\n      // Create projection record\n      const [projection] = await db.insert(cash_flow_projections)\n        .values({\n          projection_date: new Date(),\n          projection_for_period: projectionForPeriod,\n          projection_type: projectionType,\n          weeks_ahead: weeksAhead,\n          months_ahead: monthsAhead,\n          projected_collections: projectedCollections,\n          projected_appeal_recoveries: projectedAppealRecoveries,\n          total_projected_inflows: totalProjectedInflows,\n          projected_payroll: projectedPayroll,\n          projected_vendor_payments: projectedVendorPayments,\n          total_projected_outflows: totalProjectedOutflows,\n          projected_net_cash_flow: projectedNetCashFlow,\n          projected_ar: projectedAR,\n          projected_working_capital: projectedWorkingCapital,\n          confidence_level: confidenceLevel,\n          confidence_percentage: confidencePercentage,\n          methodology: projectionType === 'SHORT_TERM' ? 'AR_AGING_ANALYSIS' : 'HISTORICAL_TREND_ANALYSIS',\n          assumptions,\n          sensitivity_analysis: sensitivityAnalysis,\n          created_by_id: userId\n        })\n        .returning();\n\n      return projection;\n    } catch (error) {\n      logger.error('Error creating cash flow projection:', error)\n      throw error;\n    }\n  }\n\n  /**\n   * Project collections based on AR aging and payment patterns\n   */\n  async projectCollections(projectionForPeriod, projectionType) {\n    if (projectionType === 'SHORT_TERM') {\n      // Use AR aging for short-term (next 4 weeks)\n      return await this.projectCollectionsFromAR();\n    } else {\n      // Use historical trends for long-term\n      return await this.projectCollectionsFromTrends(projectionForPeriod);\n    }\n  }\n\n  /**\n   * Project collections from AR aging (short-term)\n   */\n  async projectCollectionsFromAR() {\n    // Get outstanding AR\n    const outstandingAR = await db.select({\n      total: sql`SUM(${revenue_accruals.accrued_amount} - ${revenue_accruals.collected_amount} - ${revenue_accruals.written_off_amount})::bigint`\n    })\n      .from(revenue_accruals)\n      .where(\n        sql`${revenue_accruals.accrued_amount} > ${revenue_accruals.collected_amount} + ${revenue_accruals.written_off_amount}`\n      );\n\n    const totalAR = outstandingAR[0]?.total || 0;\n\n    // Assume 30% of AR will be collected in next 4 weeks (based on typical payment patterns)\n    const expectedCollections = Math.round(totalAR * 0.30);\n\n    return expectedCollections;\n  }\n\n  /**\n   * Project collections from historical trends (long-term)\n   */\n  async projectCollectionsFromTrends(projectionForPeriod) {\n    // Get recent historical collections\n    const historical = await RevenueForecastingService.getHistoricalCollections(6);\n\n    if (historical.length === 0) return 0;\n\n    // Calculate average\n    const avgCollections = historical.reduce((sum, h) => sum + (h.totalCollected || 0), 0) / historical.length;\n\n    // Apply growth trend if detected\n    const growthRate = this.calculateGrowthRate(historical);\n    const projectedCollections = Math.round(avgCollections * (1 + growthRate));\n\n    return projectedCollections;\n  }\n\n  /**\n   * Calculate growth rate from historical data\n   */\n  calculateGrowthRate(historical) {\n    if (historical.length < 2) return 0;\n\n    const firstHalf = historical.slice(0, Math.floor(historical.length / 2));\n    const secondHalf = historical.slice(Math.floor(historical.length / 2));\n\n    const avgFirst = firstHalf.reduce((sum, h) => sum + (h.totalCollected || 0), 0) / firstHalf.length;\n    const avgSecond = secondHalf.reduce((sum, h) => sum + (h.totalCollected || 0), 0) / secondHalf.length;\n\n    if (avgFirst === 0) return 0;\n\n    const growthRate = (avgSecond - avgFirst) / avgFirst;\n    return Math.max(-0.2, Math.min(0.2, growthRate)); // Cap at +/- 20%\n  }\n\n  /**\n   * Project outflows (simplified - would integrate with AP system)\n   */\n  async projectOutflows(projectionForPeriod) {\n    // This is simplified - in production would pull from AP system\n    // Assume typical monthly expenses\n    const projectedPayroll = 500000000; // $5M in cents\n    const projectedVendorPayments = 200000000; // $2M in cents\n    const projectedOtherExpenses = 100000000; // $1M in cents\n\n    return {\n      payroll: projectedPayroll,\n      vendorPayments: projectedVendorPayments,\n      otherExpenses: projectedOtherExpenses,\n      total: projectedPayroll + projectedVendorPayments + projectedOtherExpenses\n    };\n  }\n\n  /**\n   * Project working capital (AR - AP)\n   */\n  async projectWorkingCapital(projectionForPeriod) {\n    // Get current AR\n    const currentAR = await db.select({\n      total: sql`SUM(${revenue_accruals.accrued_amount} - ${revenue_accruals.collected_amount} - ${revenue_accruals.written_off_amount})::bigint`\n    })\n      .from(revenue_accruals)\n      .where(\n        sql`${revenue_accruals.accrued_amount} > ${revenue_accruals.collected_amount} + ${revenue_accruals.written_off_amount}`\n      );\n\n    const projectedAR = currentAR[0]?.total || 0;\n\n    // AP projection (simplified)\n    const projectedAP = 300000000; // $3M in cents\n\n    const projectedWorkingCapital = projectedAR - projectedAP;\n\n    return {\n      projectedAR,\n      projectedAP,\n      projectedWorkingCapital\n    };\n  }\n\n  /**\n   * Calculate confidence level\n   */\n  calculateConfidence(projectionType) {\n    // Short-term projections more confident due to known AR\n    if (projectionType === 'SHORT_TERM') {\n      return {\n        confidenceLevel: 'HIGH',\n        confidencePercentage: 8500 // 85%\n      };\n    } else {\n      return {\n        confidenceLevel: 'MEDIUM',\n        confidencePercentage: 7000 // 70%\n      };\n    }\n  }\n\n  /**\n   * Perform sensitivity analysis (best/worst case scenarios)\n   */\n  performSensitivityAnalysis(baseProjection) {\n    return {\n      bestCase: {\n        scenario: 'OPTIMISTIC',\n        projectedCollections: Math.round(baseProjection * 1.15), // 15% better\n        assumptions: {\n          collectionRate: 0.95,\n          averageDaysToPayment: 25,\n          denialRate: 0.08\n        }\n      },\n      baseCase: {\n        scenario: 'EXPECTED',\n        projectedCollections: baseProjection,\n        assumptions: {\n          collectionRate: 0.85,\n          averageDaysToPayment: 32,\n          denialRate: 0.12\n        }\n      },\n      worstCase: {\n        scenario: 'PESSIMISTIC',\n        projectedCollections: Math.round(baseProjection * 0.80), // 20% worse\n        assumptions: {\n          collectionRate: 0.70,\n          averageDaysToPayment: 45,\n          denialRate: 0.20\n        }\n      }\n    };\n  }\n\n  /**\n   * Update projection with actual results\n   */\n  async updateProjectionActuals(projectionId, actualCollections, actualNetCashFlow) {\n    const [projection] = await db.select()\n      .from(cash_flow_projections)\n      .where(eq(cash_flow_projections.id, projectionId))\n      .limit(1);\n\n    if (!projection) {\n      throw new Error(`Projection not found: ${projectionId}`);\n    }\n\n    const varianceAmount = actualCollections - projection.projected_collections;\n    const variancePercentage = projection.projected_collections > 0\n      ? Math.round((varianceAmount / projection.projected_collections) * 10000)\n      : 0;\n\n    await db.update(cash_flow_projections)\n      .set({\n        actual_collections: actualCollections,\n        actual_net_cash_flow: actualNetCashFlow,\n        variance_amount: varianceAmount,\n        variance_percentage: variancePercentage,\n        updated_at: new Date()\n      })\n      .where(eq(cash_flow_projections.id, projectionId));\n  }\n\n  /**\n   * Get rolling 13-week cash flow projection\n   */\n  async getRolling13WeekProjection(userId = null) {\n    const projections = [];\n\n    // Create weekly projections for next 13 weeks\n    for (let week = 0; week < 13; week++) {\n      const projectionDate = new Date();\n      projectionDate.setDate(projectionDate.getDate() + (week * 7));\n\n      const periodLabel = projectionDate.toISOString().substring(0, 7); // YYYY-MM\n\n      const projection = await this.createProjection(\n        periodLabel,\n        'SHORT_TERM',\n        { weeksAhead: 1 },\n        userId\n      );\n\n      projections.push(projection);\n    }\n\n    return projections;\n  }\n\n  /**\n   * Get cash flow summary\n   */\n  async getCashFlowSummary(startPeriod, endPeriod) {\n    const projections = await db.select()\n      .from(cash_flow_projections)\n      .where(\n        and(\n          gte(cash_flow_projections.projection_for_period, startPeriod),\n          lte(cash_flow_projections.projection_for_period, endPeriod)\n        )\n      );\n\n    const summary = {\n      totalProjectedInflows: 0,\n      totalProjectedOutflows: 0,\n      totalProjectedNetCashFlow: 0,\n      totalActualCollections: 0,\n      averageVariancePercentage: 0,\n      projectionCount: projections.length\n    };\n\n    projections.forEach(p => {\n      summary.totalProjectedInflows += p.total_projected_inflows || 0;\n      summary.totalProjectedOutflows += p.total_projected_outflows || 0;\n      summary.totalProjectedNetCashFlow += p.projected_net_cash_flow || 0;\n      summary.totalActualCollections += p.actual_collections || 0;\n    });\n\n    // Calculate average variance\n    const completedProjections = projections.filter(p => p.actual_collections !== null);\n    if (completedProjections.length > 0) {\n      const avgVariance = completedProjections.reduce((sum, p) => sum + Math.abs(p.variance_percentage || 0), 0) / completedProjections.length;\n      summary.averageVariancePercentage = avgVariance / 100; // Convert from basis points\n    }\n\n    return summary;\n  }\n}\n\nexport default new CashFlowProjectionService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}