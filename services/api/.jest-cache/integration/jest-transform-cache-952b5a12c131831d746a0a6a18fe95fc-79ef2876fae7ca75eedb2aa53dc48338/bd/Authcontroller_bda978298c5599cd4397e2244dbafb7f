f1f355e780214a15e2ae715ef8f30481
/* istanbul ignore next */
function cov_2j3ysjgo1l() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/Auth.controller.js";
  var hash = "fa943b9a302626ce5bb0b84692818744697216f8";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/Auth.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 10,
          column: 23
        },
        end: {
          line: 65,
          column: 1
        }
      },
      "1": {
        start: {
          line: 11,
          column: 2
        },
        end: {
          line: 64,
          column: 3
        }
      },
      "2": {
        start: {
          line: 13,
          column: 20
        },
        end: {
          line: 16,
          column: 6
        }
      },
      "3": {
        start: {
          line: 18,
          column: 4
        },
        end: {
          line: 24,
          column: 5
        }
      },
      "4": {
        start: {
          line: 19,
          column: 6
        },
        end: {
          line: 19,
          column: 22
        }
      },
      "5": {
        start: {
          line: 20,
          column: 12
        },
        end: {
          line: 23,
          column: 8
        }
      },
      "6": {
        start: {
          line: 27,
          column: 24
        },
        end: {
          line: 36,
          column: 64
        }
      },
      "7": {
        start: {
          line: 37,
          column: 17
        },
        end: {
          line: 37,
          column: 31
        }
      },
      "8": {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 45,
          column: 5
        }
      },
      "9": {
        start: {
          line: 40,
          column: 6
        },
        end: {
          line: 40,
          column: 22
        }
      },
      "10": {
        start: {
          line: 41,
          column: 12
        },
        end: {
          line: 44,
          column: 8
        }
      },
      "11": {
        start: {
          line: 48,
          column: 25
        },
        end: {
          line: 48,
          column: 36
        }
      },
      "12": {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 33
        }
      },
      "13": {
        start: {
          line: 51,
          column: 4
        },
        end: {
          line: 56,
          column: 6
        }
      },
      "14": {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 58,
          column: 42
        }
      },
      "15": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 20
        }
      },
      "16": {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 63,
          column: 6
        }
      },
      "17": {
        start: {
          line: 69,
          column: 34
        },
        end: {
          line: 83,
          column: 1
        }
      },
      "18": {
        start: {
          line: 71,
          column: 2
        },
        end: {
          line: 82,
          column: 3
        }
      },
      "19": {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 20
        }
      },
      "20": {
        start: {
          line: 73,
          column: 4
        },
        end: {
          line: 81,
          column: 6
        }
      },
      "21": {
        start: {
          line: 87,
          column: 31
        },
        end: {
          line: 100,
          column: 1
        }
      },
      "22": {
        start: {
          line: 89,
          column: 2
        },
        end: {
          line: 99,
          column: 3
        }
      },
      "23": {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 90,
          column: 20
        }
      },
      "24": {
        start: {
          line: 91,
          column: 4
        },
        end: {
          line: 98,
          column: 6
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 10,
            column: 23
          },
          end: {
            line: 10,
            column: 24
          }
        },
        loc: {
          start: {
            line: 10,
            column: 49
          },
          end: {
            line: 65,
            column: 1
          }
        },
        line: 10
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 69,
            column: 34
          },
          end: {
            line: 69,
            column: 35
          }
        },
        loc: {
          start: {
            line: 69,
            column: 60
          },
          end: {
            line: 83,
            column: 1
          }
        },
        line: 69
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 87,
            column: 31
          },
          end: {
            line: 87,
            column: 32
          }
        },
        loc: {
          start: {
            line: 87,
            column: 57
          },
          end: {
            line: 100,
            column: 1
          }
        },
        line: 87
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 18
      },
      "1": {
        loc: {
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 39
      },
      "2": {
        loc: {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 82,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 82,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 71
      },
      "3": {
        loc: {
          start: {
            line: 71,
            column: 6
          },
          end: {
            line: 71,
            column: 73
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 71,
            column: 6
          },
          end: {
            line: 71,
            column: 24
          }
        }, {
          start: {
            line: 71,
            column: 28
          },
          end: {
            line: 71,
            column: 47
          }
        }, {
          start: {
            line: 71,
            column: 51
          },
          end: {
            line: 71,
            column: 73
          }
        }],
        line: 71
      },
      "4": {
        loc: {
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 77,
            column: 86
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 77,
            column: 33
          },
          end: {
            line: 77,
            column: 81
          }
        }, {
          start: {
            line: 77,
            column: 84
          },
          end: {
            line: 77,
            column: 86
          }
        }],
        line: 77
      },
      "5": {
        loc: {
          start: {
            line: 78,
            column: 12
          },
          end: {
            line: 78,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 78,
            column: 34
          },
          end: {
            line: 78,
            column: 90
          }
        }, {
          start: {
            line: 78,
            column: 93
          },
          end: {
            line: 78,
            column: 95
          }
        }],
        line: 78
      },
      "6": {
        loc: {
          start: {
            line: 79,
            column: 12
          },
          end: {
            line: 79,
            column: 121
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 79,
            column: 37
          },
          end: {
            line: 79,
            column: 116
          }
        }, {
          start: {
            line: 79,
            column: 119
          },
          end: {
            line: 79,
            column: 121
          }
        }],
        line: 79
      },
      "7": {
        loc: {
          start: {
            line: 89,
            column: 2
          },
          end: {
            line: 99,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 89,
            column: 2
          },
          end: {
            line: 99,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 89
      },
      "8": {
        loc: {
          start: {
            line: 89,
            column: 6
          },
          end: {
            line: 89,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 89,
            column: 6
          },
          end: {
            line: 89,
            column: 25
          }
        }, {
          start: {
            line: 89,
            column: 29
          },
          end: {
            line: 89,
            column: 51
          }
        }],
        line: 89
      },
      "9": {
        loc: {
          start: {
            line: 95,
            column: 12
          },
          end: {
            line: 95,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 95,
            column: 34
          },
          end: {
            line: 95,
            column: 90
          }
        }, {
          start: {
            line: 95,
            column: 93
          },
          end: {
            line: 95,
            column: 95
          }
        }],
        line: 95
      },
      "10": {
        loc: {
          start: {
            line: 96,
            column: 12
          },
          end: {
            line: 96,
            column: 98
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 96,
            column: 37
          },
          end: {
            line: 96,
            column: 93
          }
        }, {
          start: {
            line: 96,
            column: 96
          },
          end: {
            line: 96,
            column: 98
          }
        }],
        line: 96
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "fa943b9a302626ce5bb0b84692818744697216f8"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2j3ysjgo1l = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2j3ysjgo1l();
import { db } from '../config/db.drizzle.js';
import { users } from '../db/schemas/user.schema.js';
import { eq } from 'drizzle-orm';
// Note: express-validator replaced with Fastify schema validation
import auth from '../config/betterAuth.js';
import { fromNodeHeaders } from 'better-auth/node';
import { logger } from '../utils/logger.js';
// Get user details (using Better Auth session)
/* istanbul ignore next */
cov_2j3ysjgo1l().s[0]++;
export const getUser = async (request, reply) => {
  /* istanbul ignore next */
  cov_2j3ysjgo1l().f[0]++;
  cov_2j3ysjgo1l().s[1]++;
  try {
    // Get session from Better Auth
    const session =
    /* istanbul ignore next */
    (cov_2j3ysjgo1l().s[2]++, await auth.api.getSession({
      headers: fromNodeHeaders(request.headers),
      cookies: request.cookies
    }));
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[3]++;
    if (!session) {
      /* istanbul ignore next */
      cov_2j3ysjgo1l().b[0][0]++;
      cov_2j3ysjgo1l().s[4]++;
      reply.code(401);
      /* istanbul ignore next */
      cov_2j3ysjgo1l().s[5]++;
      return {
        status: 401,
        message: 'Access denied. No valid session found.'
      };
    } else
    /* istanbul ignore next */
    {
      cov_2j3ysjgo1l().b[0][1]++;
    }

    // Fetch full user details from database using Drizzle
    const userRecords =
    /* istanbul ignore next */
    (cov_2j3ysjgo1l().s[6]++, await db.select({
      id: users.id,
      name: users.name,
      email: users.email,
      emailVerified: users.emailVerified,
      image: users.image,
      role: users.role,
      createdAt: users.createdAt,
      updatedAt: users.updatedAt
    }).from(users).where(eq(users.id, session.user.id)).limit(1));
    const user =
    /* istanbul ignore next */
    (cov_2j3ysjgo1l().s[7]++, userRecords[0]);
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[8]++;
    if (!user) {
      /* istanbul ignore next */
      cov_2j3ysjgo1l().b[1][0]++;
      cov_2j3ysjgo1l().s[9]++;
      reply.code(404);
      /* istanbul ignore next */
      cov_2j3ysjgo1l().s[10]++;
      return {
        status: 404,
        message: 'User not found'
      };
    } else
    /* istanbul ignore next */
    {
      cov_2j3ysjgo1l().b[1][1]++;
    }

    // Remove password from response
    const userResponse =
    /* istanbul ignore next */
    (cov_2j3ysjgo1l().s[11]++, {
      ...user
    });
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[12]++;
    delete userResponse.password;
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[13]++;
    return {
      status: 200,
      data: {
        user: userResponse
      }
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[14]++;
    logger.error('Get user error:', error);
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[15]++;
    reply.code(500);
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[16]++;
    return {
      status: 500,
      message: 'Server error while fetching user details'
    };
  }
};

// Validation rules for registration
// Note: In Fastify, validation should be done using schema in route definitions
/* istanbul ignore next */
cov_2j3ysjgo1l().s[17]++;
export const registerValidation = async (request, reply) => {
  /* istanbul ignore next */
  cov_2j3ysjgo1l().f[1]++;
  cov_2j3ysjgo1l().s[18]++;
  // Basic validation - should be done in route schema
  if (
  /* istanbul ignore next */
  (cov_2j3ysjgo1l().b[3][0]++, !request.body.name) ||
  /* istanbul ignore next */
  (cov_2j3ysjgo1l().b[3][1]++, !request.body.email) ||
  /* istanbul ignore next */
  (cov_2j3ysjgo1l().b[3][2]++, !request.body.password)) {
    /* istanbul ignore next */
    cov_2j3ysjgo1l().b[2][0]++;
    cov_2j3ysjgo1l().s[19]++;
    reply.code(400);
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[20]++;
    return {
      status: 400,
      message: 'Validation failed',
      errors: [...(!request.body.name ?
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[4][0]++, [{
        field: 'name',
        message: 'Name is required'
      }]) :
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[4][1]++, [])), ...(!request.body.email ?
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[5][0]++, [{
        field: 'email',
        message: 'Valid email is required'
      }]) :
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[5][1]++, [])), ...(!request.body.password ?
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[6][0]++, [{
        field: 'password',
        message: 'Password must be at least 6 characters long'
      }]) :
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[6][1]++, []))]
    };
  } else
  /* istanbul ignore next */
  {
    cov_2j3ysjgo1l().b[2][1]++;
  }
};

// Validation rules for login
// Note: In Fastify, validation should be done using schema in route definitions
/* istanbul ignore next */
cov_2j3ysjgo1l().s[21]++;
export const loginValidation = async (request, reply) => {
  /* istanbul ignore next */
  cov_2j3ysjgo1l().f[2]++;
  cov_2j3ysjgo1l().s[22]++;
  // Basic validation - should be done in route schema
  if (
  /* istanbul ignore next */
  (cov_2j3ysjgo1l().b[8][0]++, !request.body.email) ||
  /* istanbul ignore next */
  (cov_2j3ysjgo1l().b[8][1]++, !request.body.password)) {
    /* istanbul ignore next */
    cov_2j3ysjgo1l().b[7][0]++;
    cov_2j3ysjgo1l().s[23]++;
    reply.code(400);
    /* istanbul ignore next */
    cov_2j3ysjgo1l().s[24]++;
    return {
      status: 400,
      message: 'Validation failed',
      errors: [...(!request.body.email ?
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[9][0]++, [{
        field: 'email',
        message: 'Valid email is required'
      }]) :
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[9][1]++, [])), ...(!request.body.password ?
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[10][0]++, [{
        field: 'password',
        message: 'Password is required'
      }]) :
      /* istanbul ignore next */
      (cov_2j3ysjgo1l().b[10][1]++, []))]
    };
  } else
  /* istanbul ignore next */
  {
    cov_2j3ysjgo1l().b[7][1]++;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmozeXNqZ28xbCIsImFjdHVhbENvdmVyYWdlIiwiZGIiLCJ1c2VycyIsImVxIiwiYXV0aCIsImZyb21Ob2RlSGVhZGVycyIsImxvZ2dlciIsInMiLCJnZXRVc2VyIiwicmVxdWVzdCIsInJlcGx5IiwiZiIsInNlc3Npb24iLCJhcGkiLCJnZXRTZXNzaW9uIiwiaGVhZGVycyIsImNvb2tpZXMiLCJiIiwiY29kZSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJ1c2VyUmVjb3JkcyIsInNlbGVjdCIsImlkIiwibmFtZSIsImVtYWlsIiwiZW1haWxWZXJpZmllZCIsImltYWdlIiwicm9sZSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImZyb20iLCJ3aGVyZSIsInVzZXIiLCJsaW1pdCIsInVzZXJSZXNwb25zZSIsInBhc3N3b3JkIiwiZGF0YSIsImVycm9yIiwicmVnaXN0ZXJWYWxpZGF0aW9uIiwiYm9keSIsImVycm9ycyIsImZpZWxkIiwibG9naW5WYWxpZGF0aW9uIl0sInNvdXJjZXMiOlsiQXV0aC5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRiIH0gZnJvbSAnLi4vY29uZmlnL2RiLmRyaXp6bGUuanMnO1xuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9kYi9zY2hlbWFzL3VzZXIuc2NoZW1hLmpzJztcbmltcG9ydCB7IGVxIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xuLy8gTm90ZTogZXhwcmVzcy12YWxpZGF0b3IgcmVwbGFjZWQgd2l0aCBGYXN0aWZ5IHNjaGVtYSB2YWxpZGF0aW9uXG5pbXBvcnQgYXV0aCBmcm9tICcuLi9jb25maWcvYmV0dGVyQXV0aC5qcyc7XG5pbXBvcnQgeyBmcm9tTm9kZUhlYWRlcnMgfSBmcm9tICdiZXR0ZXItYXV0aC9ub2RlJztcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcbi8vIEdldCB1c2VyIGRldGFpbHMgKHVzaW5nIEJldHRlciBBdXRoIHNlc3Npb24pXG5leHBvcnQgY29uc3QgZ2V0VXNlciA9IGFzeW5jIChyZXF1ZXN0LCByZXBseSkgPT4ge1xuICB0cnkge1xuICAgIC8vIEdldCBzZXNzaW9uIGZyb20gQmV0dGVyIEF1dGhcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgYXV0aC5hcGkuZ2V0U2Vzc2lvbih7XG4gICAgICBoZWFkZXJzOiBmcm9tTm9kZUhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKSxcbiAgICAgIGNvb2tpZXM6IHJlcXVlc3QuY29va2llc1xuICAgIH0pO1xuICAgIFxuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgcmVwbHkuY29kZSg0MDEpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICAgIG1lc3NhZ2U6ICdBY2Nlc3MgZGVuaWVkLiBObyB2YWxpZCBzZXNzaW9uIGZvdW5kLidcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEZldGNoIGZ1bGwgdXNlciBkZXRhaWxzIGZyb20gZGF0YWJhc2UgdXNpbmcgRHJpenpsZVxuICAgIGNvbnN0IHVzZXJSZWNvcmRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgIGlkOiB1c2Vycy5pZCxcbiAgICAgIG5hbWU6IHVzZXJzLm5hbWUsXG4gICAgICBlbWFpbDogdXNlcnMuZW1haWwsXG4gICAgICBlbWFpbFZlcmlmaWVkOiB1c2Vycy5lbWFpbFZlcmlmaWVkLFxuICAgICAgaW1hZ2U6IHVzZXJzLmltYWdlLFxuICAgICAgcm9sZTogdXNlcnMucm9sZSxcbiAgICAgIGNyZWF0ZWRBdDogdXNlcnMuY3JlYXRlZEF0LFxuICAgICAgdXBkYXRlZEF0OiB1c2Vycy51cGRhdGVkQXRcbiAgICB9KS5mcm9tKHVzZXJzKS53aGVyZShlcSh1c2Vycy5pZCwgc2Vzc2lvbi51c2VyLmlkKSkubGltaXQoMSk7XG4gICAgY29uc3QgdXNlciA9IHVzZXJSZWNvcmRzWzBdO1xuICAgIFxuICAgIGlmICghdXNlcikge1xuICAgICAgcmVwbHkuY29kZSg0MDQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCdcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZSBwYXNzd29yZCBmcm9tIHJlc3BvbnNlXG4gICAgY29uc3QgdXNlclJlc3BvbnNlID0geyAuLi51c2VyIH07XG4gICAgZGVsZXRlIHVzZXJSZXNwb25zZS5wYXNzd29yZDtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXI6IHVzZXJSZXNwb25zZVxuICAgICAgfVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdHZXQgdXNlciBlcnJvcjonLCBlcnJvcilcbiAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSBmZXRjaGluZyB1c2VyIGRldGFpbHMnXG4gICAgfTtcbiAgfVxufTtcblxuLy8gVmFsaWRhdGlvbiBydWxlcyBmb3IgcmVnaXN0cmF0aW9uXG4vLyBOb3RlOiBJbiBGYXN0aWZ5LCB2YWxpZGF0aW9uIHNob3VsZCBiZSBkb25lIHVzaW5nIHNjaGVtYSBpbiByb3V0ZSBkZWZpbml0aW9uc1xuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVmFsaWRhdGlvbiA9IGFzeW5jIChyZXF1ZXN0LCByZXBseSkgPT4ge1xuICAvLyBCYXNpYyB2YWxpZGF0aW9uIC0gc2hvdWxkIGJlIGRvbmUgaW4gcm91dGUgc2NoZW1hXG4gIGlmICghcmVxdWVzdC5ib2R5Lm5hbWUgfHwgIXJlcXVlc3QuYm9keS5lbWFpbCB8fCAhcmVxdWVzdC5ib2R5LnBhc3N3b3JkKSB7XG4gICAgcmVwbHkuY29kZSg0MDApO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICBlcnJvcnM6IFtcbiAgICAgICAgLi4uKCFyZXF1ZXN0LmJvZHkubmFtZSA/IFt7IGZpZWxkOiAnbmFtZScsIG1lc3NhZ2U6ICdOYW1lIGlzIHJlcXVpcmVkJyB9XSA6IFtdKSxcbiAgICAgICAgLi4uKCFyZXF1ZXN0LmJvZHkuZW1haWwgPyBbeyBmaWVsZDogJ2VtYWlsJywgbWVzc2FnZTogJ1ZhbGlkIGVtYWlsIGlzIHJlcXVpcmVkJyB9XSA6IFtdKSxcbiAgICAgICAgLi4uKCFyZXF1ZXN0LmJvZHkucGFzc3dvcmQgPyBbeyBmaWVsZDogJ3Bhc3N3b3JkJywgbWVzc2FnZTogJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcnIH1dIDogW10pLFxuICAgICAgXSxcbiAgICB9O1xuICB9XG59O1xuXG4vLyBWYWxpZGF0aW9uIHJ1bGVzIGZvciBsb2dpblxuLy8gTm90ZTogSW4gRmFzdGlmeSwgdmFsaWRhdGlvbiBzaG91bGQgYmUgZG9uZSB1c2luZyBzY2hlbWEgaW4gcm91dGUgZGVmaW5pdGlvbnNcbmV4cG9ydCBjb25zdCBsb2dpblZhbGlkYXRpb24gPSBhc3luYyAocmVxdWVzdCwgcmVwbHkpID0+IHtcbiAgLy8gQmFzaWMgdmFsaWRhdGlvbiAtIHNob3VsZCBiZSBkb25lIGluIHJvdXRlIHNjaGVtYVxuICBpZiAoIXJlcXVlc3QuYm9keS5lbWFpbCB8fCAhcmVxdWVzdC5ib2R5LnBhc3N3b3JkKSB7XG4gICAgcmVwbHkuY29kZSg0MDApO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICBlcnJvcnM6IFtcbiAgICAgICAgLi4uKCFyZXF1ZXN0LmJvZHkuZW1haWwgPyBbeyBmaWVsZDogJ2VtYWlsJywgbWVzc2FnZTogJ1ZhbGlkIGVtYWlsIGlzIHJlcXVpcmVkJyB9XSA6IFtdKSxcbiAgICAgICAgLi4uKCFyZXF1ZXN0LmJvZHkucGFzc3dvcmQgPyBbeyBmaWVsZDogJ3Bhc3N3b3JkJywgbWVzc2FnZTogJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJyB9XSA6IFtdKSxcbiAgICAgIF0sXG4gICAgfTtcbiAgfVxufTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJ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