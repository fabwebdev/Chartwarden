{"version":3,"names":["cov_ykj1h6vwq","actualCoverage","argon2","crypto","db","passwordHistory","users","eq","desc","logger","ARGON2_CONFIG","s","type","argon2id","memoryCost","timeCost","parallelism","hashLength","saltLength","PASSWORD_POLICY","minLength","maxLength","historyCount","maxAgeInDays","PasswordHashingService","constructor","f","config","policy","hashPassword","password","validatePasswordFormat","normalizedPassword","normalize","hash","debug","error","message","Error","verifyPassword","b","isValid","verify","timingSafeEqual","a","bufferA","Buffer","from","bufferB","length","alloc","needsRehash","checkPasswordHistory","userId","newPassword","history","select","where","orderBy","createdAt","limit","record","isMatch","passwordHash","isReused","addToPasswordHistory","insert","values","Date","allHistory","id","idsToDelete","slice","map","h","delete","updatePassword","currentPassword","user","success","isCurrentValid","historyCheck","newHash","update","set","password_changed_at","updatedAt","info","migratePasswordHash","plainPassword","currentHash","needsMigration","generateSecurePassword","lowercase","uppercase","numbers","special","allChars","randomInt","i","arr","split","j","join","getPasswordPolicy","requirements","recommendations","passwordHashingService"],"sources":["PasswordHashing.service.js"],"sourcesContent":["/**\n * Password Hashing Service\n *\n * Secure password management system using Argon2id hashing algorithm\n * following OWASP recommendations for password storage.\n *\n * SECURITY COMPLIANCE:\n * - HIPAA: ยง164.308(a)(5)(ii)(D) - Password management\n * - NIST SP 800-63B - Digital Identity Guidelines\n * - OWASP Password Storage Cheat Sheet\n *\n * Features:\n * - Argon2id hashing with OWASP-recommended parameters\n * - Password history tracking to prevent reuse\n * - Secure timing-safe password comparison\n * - Unicode character support\n * - Maximum password length protection (DoS prevention)\n * - Rate limiting integration\n * - Comprehensive error handling\n */\n\nimport argon2 from 'argon2';\nimport crypto from 'crypto';\nimport { db } from '../config/db.drizzle.js';\nimport { passwordHistory } from '../db/schemas/passwordHistory.schema.js';\nimport { users } from '../db/schemas/index.js';\nimport { eq, desc } from 'drizzle-orm';\nimport { logger } from '../utils/logger.js';\n\n/**\n * OWASP Recommended Argon2id Parameters (2024)\n * https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html\n *\n * Argon2id is the recommended variant as it provides resistance against both\n * side-channel and GPU-based attacks.\n */\nexport const ARGON2_CONFIG = {\n  type: argon2.argon2id, // Argon2id - hybrid variant (recommended)\n  memoryCost: 65536, // 64 MiB - OWASP minimum recommendation\n  timeCost: 3, // 3 iterations - OWASP recommendation\n  parallelism: 4, // 4 threads - reasonable for most systems\n  hashLength: 32, // 32 bytes output\n  saltLength: 16, // 16 bytes salt (128 bits)\n};\n\n/**\n * Password Policy Configuration\n */\nexport const PASSWORD_POLICY = {\n  minLength: 12, // HIPAA requirement\n  maxLength: 128, // DoS prevention (Argon2 handles any length, but limit for sanity)\n  historyCount: 12, // Number of previous passwords to remember (HIPAA recommends at least 6)\n  maxAgeInDays: 90, // Maximum password age (HIPAA compliance)\n};\n\n/**\n * PasswordHashingService - Secure password management\n */\nclass PasswordHashingService {\n  constructor() {\n    this.config = ARGON2_CONFIG;\n    this.policy = PASSWORD_POLICY;\n  }\n\n  /**\n   * Hash a password using Argon2id\n   *\n   * @param {string} password - Plain text password to hash\n   * @returns {Promise<string>} Argon2id hash string\n   * @throws {Error} If password is invalid or hashing fails\n   */\n  async hashPassword(password) {\n    try {\n      // Validate password before hashing\n      this.validatePasswordFormat(password);\n\n      // Normalize Unicode (NFC form for consistency)\n      const normalizedPassword = password.normalize('NFC');\n\n      // Generate hash with Argon2id\n      const hash = await argon2.hash(normalizedPassword, {\n        type: this.config.type,\n        memoryCost: this.config.memoryCost,\n        timeCost: this.config.timeCost,\n        parallelism: this.config.parallelism,\n        hashLength: this.config.hashLength,\n        saltLength: this.config.saltLength,\n      });\n\n      logger.debug('Password hashed successfully with Argon2id');\n      return hash;\n    } catch (error) {\n      logger.error('Password hashing failed:', error.message);\n      throw new Error('Failed to hash password securely');\n    }\n  }\n\n  /**\n   * Verify a password against an Argon2id hash\n   * Uses timing-safe comparison to prevent timing attacks\n   *\n   * @param {string} password - Plain text password to verify\n   * @param {string} hash - Argon2id hash to compare against\n   * @returns {Promise<boolean>} True if password matches, false otherwise\n   */\n  async verifyPassword(password, hash) {\n    try {\n      // Validate inputs\n      if (!password || typeof password !== 'string') {\n        return false;\n      }\n\n      if (!hash || typeof hash !== 'string') {\n        return false;\n      }\n\n      // Normalize Unicode for consistent comparison\n      const normalizedPassword = password.normalize('NFC');\n\n      // Argon2 verify is already timing-safe\n      const isValid = await argon2.verify(hash, normalizedPassword);\n\n      return isValid;\n    } catch (error) {\n      // Log error but don't expose details\n      logger.error('Password verification failed:', error.message);\n      return false;\n    }\n  }\n\n  /**\n   * Secure timing-safe string comparison\n   * Prevents timing attacks by ensuring constant-time comparison\n   *\n   * @param {string} a - First string\n   * @param {string} b - Second string\n   * @returns {boolean} True if strings are equal\n   */\n  timingSafeEqual(a, b) {\n    try {\n      const bufferA = Buffer.from(a, 'utf8');\n      const bufferB = Buffer.from(b, 'utf8');\n\n      // If lengths differ, compare against a random buffer to maintain constant time\n      if (bufferA.length !== bufferB.length) {\n        crypto.timingSafeEqual(bufferA, Buffer.alloc(bufferA.length));\n        return false;\n      }\n\n      return crypto.timingSafeEqual(bufferA, bufferB);\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Validate password format (length and character requirements)\n   *\n   * @param {string} password - Password to validate\n   * @throws {Error} If password format is invalid\n   */\n  validatePasswordFormat(password) {\n    if (!password || typeof password !== 'string') {\n      throw new Error('Password is required and must be a string');\n    }\n\n    // Check minimum length\n    if (password.length < this.policy.minLength) {\n      throw new Error(`Password must be at least ${this.policy.minLength} characters long`);\n    }\n\n    // Check maximum length (DoS prevention)\n    if (password.length > this.policy.maxLength) {\n      throw new Error(`Password must not exceed ${this.policy.maxLength} characters`);\n    }\n\n    // Unicode validation - ensure password can be normalized\n    try {\n      password.normalize('NFC');\n    } catch {\n      throw new Error('Password contains invalid characters');\n    }\n  }\n\n  /**\n   * Check if a hash needs to be rehashed (e.g., parameters changed)\n   *\n   * @param {string} hash - Existing hash to check\n   * @returns {Promise<boolean>} True if hash needs updating\n   */\n  async needsRehash(hash) {\n    try {\n      return argon2.needsRehash(hash, {\n        type: this.config.type,\n        memoryCost: this.config.memoryCost,\n        timeCost: this.config.timeCost,\n      });\n    } catch {\n      // If check fails, assume rehash is needed\n      return true;\n    }\n  }\n\n  /**\n   * Check if a password was previously used by the user\n   *\n   * @param {string} userId - User ID to check history for\n   * @param {string} newPassword - New password to check against history\n   * @returns {Promise<{isReused: boolean, message: string}>} Reuse check result\n   */\n  async checkPasswordHistory(userId, newPassword) {\n    try {\n      // Normalize password for consistent comparison\n      const normalizedPassword = newPassword.normalize('NFC');\n\n      // Fetch password history (most recent first)\n      const history = await db\n        .select()\n        .from(passwordHistory)\n        .where(eq(passwordHistory.userId, userId))\n        .orderBy(desc(passwordHistory.createdAt))\n        .limit(this.policy.historyCount);\n\n      // Check against each historical password\n      for (const record of history) {\n        const isMatch = await this.verifyPassword(normalizedPassword, record.passwordHash);\n        if (isMatch) {\n          return {\n            isReused: true,\n            message: `Password cannot be the same as your last ${this.policy.historyCount} passwords`,\n          };\n        }\n      }\n\n      return {\n        isReused: false,\n        message: 'Password is not in history',\n      };\n    } catch (error) {\n      logger.error('Password history check failed:', error.message);\n      // On error, allow the password change (fail open for availability)\n      return {\n        isReused: false,\n        message: 'Could not verify password history',\n        error: true,\n      };\n    }\n  }\n\n  /**\n   * Add a password to the user's history\n   *\n   * @param {string} userId - User ID\n   * @param {string} passwordHash - Hash of the password to store\n   * @returns {Promise<void>}\n   */\n  async addToPasswordHistory(userId, passwordHash) {\n    try {\n      // Add new password to history\n      await db.insert(passwordHistory).values({\n        userId,\n        passwordHash,\n        createdAt: new Date(),\n      });\n\n      // Clean up old entries beyond the history limit\n      const allHistory = await db\n        .select({ id: passwordHistory.id })\n        .from(passwordHistory)\n        .where(eq(passwordHistory.userId, userId))\n        .orderBy(desc(passwordHistory.createdAt));\n\n      // Delete entries beyond the limit\n      if (allHistory.length > this.policy.historyCount) {\n        const idsToDelete = allHistory\n          .slice(this.policy.historyCount)\n          .map((h) => h.id);\n\n        for (const id of idsToDelete) {\n          await db.delete(passwordHistory).where(eq(passwordHistory.id, id));\n        }\n      }\n\n      logger.debug(`Password history updated for user ${userId}`);\n    } catch (error) {\n      logger.error('Failed to update password history:', error.message);\n      // Don't throw - password change should still succeed\n    }\n  }\n\n  /**\n   * Update user's password with full security checks\n   *\n   * @param {string} userId - User ID\n   * @param {string} currentPassword - Current password for verification\n   * @param {string} newPassword - New password to set\n   * @returns {Promise<{success: boolean, message: string, errors?: string[]}>}\n   */\n  async updatePassword(userId, currentPassword, newPassword) {\n    try {\n      // Fetch user\n      const [user] = await db\n        .select()\n        .from(users)\n        .where(eq(users.id, userId))\n        .limit(1);\n\n      if (!user) {\n        return {\n          success: false,\n          message: 'User not found',\n        };\n      }\n\n      // Verify current password\n      const isCurrentValid = await this.verifyPassword(currentPassword, user.password);\n      if (!isCurrentValid) {\n        return {\n          success: false,\n          message: 'Current password is incorrect',\n        };\n      }\n\n      // Validate new password format\n      try {\n        this.validatePasswordFormat(newPassword);\n      } catch (error) {\n        return {\n          success: false,\n          message: error.message,\n        };\n      }\n\n      // Check password history\n      const historyCheck = await this.checkPasswordHistory(userId, newPassword);\n      if (historyCheck.isReused) {\n        return {\n          success: false,\n          message: historyCheck.message,\n        };\n      }\n\n      // Hash new password\n      const newHash = await this.hashPassword(newPassword);\n\n      // Add current password to history before updating\n      if (user.password) {\n        await this.addToPasswordHistory(userId, user.password);\n      }\n\n      // Update user's password\n      await db\n        .update(users)\n        .set({\n          password: newHash,\n          password_changed_at: new Date(),\n          updatedAt: new Date(),\n        })\n        .where(eq(users.id, userId));\n\n      logger.info(`Password updated successfully for user ${userId}`);\n\n      return {\n        success: true,\n        message: 'Password updated successfully',\n      };\n    } catch (error) {\n      logger.error('Password update failed:', error.message);\n      return {\n        success: false,\n        message: 'Failed to update password',\n      };\n    }\n  }\n\n  /**\n   * Migrate a password hash from another algorithm (bcrypt, etc.) to Argon2id\n   *\n   * @param {string} userId - User ID\n   * @param {string} plainPassword - Plain text password (from successful login)\n   * @param {string} currentHash - Current hash (may be bcrypt or old argon2)\n   * @returns {Promise<boolean>} True if migration was performed\n   */\n  async migratePasswordHash(userId, plainPassword, currentHash) {\n    try {\n      // Check if current hash needs rehashing\n      const needsMigration = await this.needsRehash(currentHash);\n\n      if (needsMigration) {\n        // Generate new Argon2id hash\n        const newHash = await this.hashPassword(plainPassword);\n\n        // Update user's password hash\n        await db\n          .update(users)\n          .set({\n            password: newHash,\n            updatedAt: new Date(),\n          })\n          .where(eq(users.id, userId));\n\n        logger.info(`Password hash migrated to Argon2id for user ${userId}`);\n        return true;\n      }\n\n      return false;\n    } catch (error) {\n      logger.error('Password hash migration failed:', error.message);\n      return false;\n    }\n  }\n\n  /**\n   * Generate a secure random password\n   *\n   * @param {number} length - Password length (default: 16)\n   * @returns {string} Secure random password\n   */\n  generateSecurePassword(length = 16) {\n    const lowercase = 'abcdefghijklmnopqrstuvwxyz';\n    const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    const numbers = '0123456789';\n    const special = '!@#$%^&*()_+-=[]{}|;:,.<>?';\n    const allChars = lowercase + uppercase + numbers + special;\n\n    // Ensure at least one of each type\n    let password = '';\n    password += lowercase[crypto.randomInt(lowercase.length)];\n    password += uppercase[crypto.randomInt(uppercase.length)];\n    password += numbers[crypto.randomInt(numbers.length)];\n    password += special[crypto.randomInt(special.length)];\n\n    // Fill the rest randomly\n    for (let i = password.length; i < length; i++) {\n      password += allChars[crypto.randomInt(allChars.length)];\n    }\n\n    // Shuffle the password using Fisher-Yates\n    const arr = password.split('');\n    for (let i = arr.length - 1; i > 0; i--) {\n      const j = crypto.randomInt(i + 1);\n      [arr[i], arr[j]] = [arr[j], arr[i]];\n    }\n\n    return arr.join('');\n  }\n\n  /**\n   * Get password policy for display to users\n   *\n   * @returns {Object} Human-readable password policy\n   */\n  getPasswordPolicy() {\n    return {\n      minLength: this.policy.minLength,\n      maxLength: this.policy.maxLength,\n      requirements: [\n        `Minimum ${this.policy.minLength} characters`,\n        `Maximum ${this.policy.maxLength} characters`,\n        'At least 3 of: lowercase, uppercase, numbers, special characters',\n        `Cannot reuse last ${this.policy.historyCount} passwords`,\n        `Must change every ${this.policy.maxAgeInDays} days`,\n      ],\n      recommendations: [\n        'Use a unique password not used on other sites',\n        'Consider using a password manager',\n        'Avoid personal information like names or birthdays',\n        'Longer passwords are generally stronger',\n      ],\n    };\n  }\n}\n\n// Export singleton instance\nexport const passwordHashingService = new PasswordHashingService();\n\n// Export class for testing\nexport default PasswordHashingService;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}