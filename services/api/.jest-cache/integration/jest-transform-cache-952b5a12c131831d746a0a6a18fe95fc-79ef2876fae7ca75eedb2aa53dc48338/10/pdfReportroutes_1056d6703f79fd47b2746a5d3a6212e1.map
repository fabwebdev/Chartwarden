{"version":3,"names":["cov_17ratzep7n","actualCoverage","controller","PERMISSIONS","requireAnyPermission","pdfReportRoutes","fastify","options","f","s","get","preHandler","VIEW_REPORTS","getReportTypes","bind","VIEW_PATIENT_DETAILS","VIEW_CLINICAL_NOTES","exportPatientChart","exportCensusReport","exportBillingReport","exportExecutiveDashboard","viewPdf","post","exportAnalyticsReport","exportCustomReport","exportRawHtml"],"sources":["pdfReport.routes.js"],"sourcesContent":["import controller from '../controllers/PdfReport.controller.js';\nimport { PERMISSIONS } from '../config/rbac.js';\nimport { requireAnyPermission } from '../middleware/rbac.middleware.js';\n\n/**\n * PDF Report Routes\n * Provides PDF export endpoints for all report types using Puppeteer\n *\n * Features:\n * - HTML template-based PDF generation with Puppeteer\n * - Professional styling and formatting\n * - Multiple report types supported (Census, Billing, Patient Chart, etc.)\n * - Customizable paper size, orientation, and margins\n * - Streaming file downloads and inline viewing\n *\n * Query Parameters (common to all endpoints):\n * - paper_size: Letter, Legal, A4, A3, Tabloid (default: Letter)\n * - orientation: portrait, landscape (default: portrait)\n * - print_background: true/false (default: true)\n * - display_header_footer: true/false (default: true)\n * - scale: 0.1-2.0 (default: 1)\n *\n * Endpoints:\n * - GET /api/pdf-reports/types - Get available report types\n * - GET /api/pdf-reports/patient/:patientId - Export patient chart\n * - GET /api/pdf-reports/census - Export census report\n * - GET /api/pdf-reports/billing - Export billing report\n * - GET /api/pdf-reports/executive-dashboard - Export executive dashboard\n * - GET /api/pdf-reports/view/:type - View PDF inline (without download)\n * - POST /api/pdf-reports/analytics - Export analytics report\n * - POST /api/pdf-reports/custom - Export custom report with provided data\n * - POST /api/pdf-reports/raw - Export raw HTML to PDF\n */\nexport default async function pdfReportRoutes(fastify, options) {\n\n    // ==================== READ ENDPOINTS ====================\n\n    // Get available report types\n    fastify.get('/pdf-reports/types', {\n        preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n    }, controller.getReportTypes.bind(controller));\n\n    // Export Patient Chart to PDF\n    fastify.get('/pdf-reports/patient/:patientId', {\n        preHandler: [requireAnyPermission(\n            PERMISSIONS.VIEW_PATIENT_DETAILS,\n            PERMISSIONS.VIEW_CLINICAL_NOTES,\n            PERMISSIONS.VIEW_REPORTS\n        )]\n    }, controller.exportPatientChart.bind(controller));\n\n    // Export Census Report to PDF\n    fastify.get('/pdf-reports/census', {\n        preHandler: [requireAnyPermission(\n            PERMISSIONS.VIEW_PATIENT_DETAILS,\n            PERMISSIONS.VIEW_CLINICAL_NOTES,\n            PERMISSIONS.VIEW_REPORTS\n        )]\n    }, controller.exportCensusReport.bind(controller));\n\n    // Export Billing Report to PDF\n    fastify.get('/pdf-reports/billing', {\n        preHandler: [requireAnyPermission(\n            PERMISSIONS.VIEW_CLINICAL_NOTES,\n            PERMISSIONS.VIEW_REPORTS\n        )]\n    }, controller.exportBillingReport.bind(controller));\n\n    // Export Executive Dashboard to PDF\n    fastify.get('/pdf-reports/executive-dashboard', {\n        preHandler: [requireAnyPermission(\n            PERMISSIONS.VIEW_CLINICAL_NOTES,\n            PERMISSIONS.VIEW_REPORTS\n        )]\n    }, controller.exportExecutiveDashboard.bind(controller));\n\n    // View PDF inline (without download prompt)\n    fastify.get('/pdf-reports/view/:type', {\n        preHandler: [requireAnyPermission(\n            PERMISSIONS.VIEW_CLINICAL_NOTES,\n            PERMISSIONS.VIEW_REPORTS\n        )]\n    }, controller.viewPdf.bind(controller));\n\n    // ==================== WRITE ENDPOINTS ====================\n\n    // Export Analytics Report to PDF\n    fastify.post('/pdf-reports/analytics', {\n        preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n    }, controller.exportAnalyticsReport.bind(controller));\n\n    // Export Custom Report to PDF\n    fastify.post('/pdf-reports/custom', {\n        preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n    }, controller.exportCustomReport.bind(controller));\n\n    // Export Raw HTML to PDF\n    fastify.post('/pdf-reports/raw', {\n        preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n    }, controller.exportRawHtml.bind(controller));\n}\n"],"mappings":"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","ignoreList":[]}