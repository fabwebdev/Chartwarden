{"version":3,"names":["cov_2ourp0in38","actualCoverage","ChatController","authenticate","rateLimit","chatRoutes","fastify","options","f","s","addHook","post","schema","description","tags","body","type","properties","name","enum","default","patientId","participantIds","items","response","success","message","room","createRoom","bind","get","querystring","archived","count","rooms","getRooms","params","required","id","getRoom","put","updateRoom","delete","archiveRoom","config","max","timeWindow","content","replyToId","data","sendMessage","limit","before","messages","getMessages","editMessage","deleteMessage","userId","participant","addParticipant","removeParticipant","messageId","updateLastRead"],"sources":["chat.routes.js"],"sourcesContent":["import ChatController from '../controllers/Chat.controller.js';\nimport { authenticate } from '../middleware/betterAuth.middleware.js';\nimport rateLimit from '@fastify/rate-limit';\n\n/**\n * Chat Routes\n * Real-time team chat with message persistence and presence tracking\n *\n * All routes require authentication\n * Rate limiting applied to prevent message spam\n */\nexport default async function chatRoutes(fastify, options) {\n  // Apply authentication middleware to all routes\n  fastify.addHook('onRequest', authenticate);\n\n  // ============================================\n  // ROOM MANAGEMENT ENDPOINTS\n  // ============================================\n\n  /**\n   * 1. Create new chat room\n   * POST /api/chat/rooms\n   */\n  fastify.post(\n    '/rooms',\n    {\n      schema: {\n        description: 'Create a new chat room',\n        tags: ['Chat'],\n        body: {\n          type: 'object',\n          properties: {\n            name: { type: 'string', description: 'Room name (optional for direct messages)' },\n            type: {\n              type: 'string',\n              enum: ['direct', 'group', 'department', 'patient_care'],\n              default: 'group',\n              description: 'Room type'\n            },\n            description: { type: 'string', description: 'Room description' },\n            patientId: { type: 'string', description: 'Patient ID (required for patient_care rooms)' },\n            participantIds: {\n              type: 'array',\n              items: { type: 'string' },\n              description: 'Array of user IDs to add as participants'\n            }\n          }\n        },\n        response: {\n          201: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' },\n              room: { type: 'object' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.createRoom.bind(ChatController)\n  );\n\n  /**\n   * 2. Get all rooms for current user\n   * GET /api/chat/rooms\n   */\n  fastify.get(\n    '/rooms',\n    {\n      schema: {\n        description: 'Get all active chat rooms for the current user',\n        tags: ['Chat'],\n        querystring: {\n          type: 'object',\n          properties: {\n            type: { type: 'string', enum: ['direct', 'group', 'department', 'patient_care'] },\n            archived: { type: 'string', enum: ['true', 'false'], default: 'false' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              count: { type: 'number' },\n              rooms: { type: 'array' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.getRooms.bind(ChatController)\n  );\n\n  /**\n   * 3. Get room details\n   * GET /api/chat/rooms/:id\n   */\n  fastify.get(\n    '/rooms/:id',\n    {\n      schema: {\n        description: 'Get chat room details with participants',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              room: { type: 'object' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.getRoom.bind(ChatController)\n  );\n\n  /**\n   * 4. Update room settings\n   * PUT /api/chat/rooms/:id\n   */\n  fastify.put(\n    '/rooms/:id',\n    {\n      schema: {\n        description: 'Update chat room settings',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' }\n          }\n        },\n        body: {\n          type: 'object',\n          properties: {\n            name: { type: 'string', description: 'Room name' },\n            description: { type: 'string', description: 'Room description' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' },\n              room: { type: 'object' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.updateRoom.bind(ChatController)\n  );\n\n  /**\n   * 5. Archive a room\n   * DELETE /api/chat/rooms/:id\n   */\n  fastify.delete(\n    '/rooms/:id',\n    {\n      schema: {\n        description: 'Archive a chat room (soft delete)',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.archiveRoom.bind(ChatController)\n  );\n\n  // ============================================\n  // MESSAGE MANAGEMENT ENDPOINTS\n  // ============================================\n\n  /**\n   * 6. Send a message\n   * POST /api/chat/rooms/:id/messages\n   * Rate limited to prevent spam\n   */\n  fastify.post(\n    '/rooms/:id/messages',\n    {\n      config: {\n        rateLimit: {\n          max: 30, // Max 30 messages\n          timeWindow: '1 minute' // Per minute\n        }\n      },\n      schema: {\n        description: 'Send a message to a chat room',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' }\n          }\n        },\n        body: {\n          type: 'object',\n          required: ['content'],\n          properties: {\n            content: { type: 'string', description: 'Message content' },\n            replyToId: { type: 'string', description: 'ID of message being replied to' }\n          }\n        },\n        response: {\n          201: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' },\n              data: { type: 'object' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.sendMessage.bind(ChatController)\n  );\n\n  /**\n   * 7. Get message history\n   * GET /api/chat/rooms/:id/messages\n   */\n  fastify.get(\n    '/rooms/:id/messages',\n    {\n      schema: {\n        description: 'Get message history for a chat room with pagination',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' }\n          }\n        },\n        querystring: {\n          type: 'object',\n          properties: {\n            limit: { type: 'number', default: 50, description: 'Number of messages to retrieve' },\n            before: { type: 'string', description: 'ISO timestamp - get messages before this time' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              count: { type: 'number' },\n              messages: { type: 'array' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.getMessages.bind(ChatController)\n  );\n\n  /**\n   * 8. Edit a message\n   * PUT /api/chat/messages/:id\n   */\n  fastify.put(\n    '/messages/:id',\n    {\n      schema: {\n        description: 'Edit a message',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Message ID' }\n          }\n        },\n        body: {\n          type: 'object',\n          required: ['content'],\n          properties: {\n            content: { type: 'string', description: 'Updated message content' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' },\n              data: { type: 'object' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.editMessage.bind(ChatController)\n  );\n\n  /**\n   * 9. Delete a message\n   * DELETE /api/chat/messages/:id\n   */\n  fastify.delete(\n    '/messages/:id',\n    {\n      schema: {\n        description: 'Delete a message (soft delete)',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Message ID' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.deleteMessage.bind(ChatController)\n  );\n\n  // ============================================\n  // PARTICIPANT MANAGEMENT ENDPOINTS\n  // ============================================\n\n  /**\n   * 10. Add participant to room\n   * POST /api/chat/rooms/:id/participants\n   */\n  fastify.post(\n    '/rooms/:id/participants',\n    {\n      schema: {\n        description: 'Add a participant to a chat room',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' }\n          }\n        },\n        body: {\n          type: 'object',\n          required: ['userId'],\n          properties: {\n            userId: { type: 'string', description: 'User ID to add' }\n          }\n        },\n        response: {\n          201: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' },\n              participant: { type: 'object' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.addParticipant.bind(ChatController)\n  );\n\n  /**\n   * 11. Remove participant from room\n   * DELETE /api/chat/rooms/:id/participants/:userId\n   */\n  fastify.delete(\n    '/rooms/:id/participants/:userId',\n    {\n      schema: {\n        description: 'Remove a participant from a chat room',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id', 'userId'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' },\n            userId: { type: 'string', description: 'User ID to remove' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.removeParticipant.bind(ChatController)\n  );\n\n  /**\n   * 12. Update last read timestamp\n   * PUT /api/chat/rooms/:id/read\n   */\n  fastify.put(\n    '/rooms/:id/read',\n    {\n      schema: {\n        description: 'Update last read timestamp for a room',\n        tags: ['Chat'],\n        params: {\n          type: 'object',\n          required: ['id'],\n          properties: {\n            id: { type: 'string', description: 'Room ID' }\n          }\n        },\n        body: {\n          type: 'object',\n          properties: {\n            messageId: { type: 'string', description: 'Last read message ID' }\n          }\n        },\n        response: {\n          200: {\n            type: 'object',\n            properties: {\n              success: { type: 'boolean' },\n              message: { type: 'string' }\n            }\n          }\n        }\n      }\n    },\n    ChatController.updateLastRead.bind(ChatController)\n  );\n}\n"],"mappings":"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","ignoreList":[]}