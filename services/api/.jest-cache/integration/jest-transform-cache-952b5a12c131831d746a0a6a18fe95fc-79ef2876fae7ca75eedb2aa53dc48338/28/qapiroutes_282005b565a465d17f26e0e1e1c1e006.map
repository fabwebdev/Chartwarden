{"version":3,"names":["cov_1uauk2pv9a","actualCoverage","QAPIController","PERMISSIONS","requireAnyPermission","qapiRoutes","fastify","options","f","s","get","preHandler","VIEW_CLINICAL_NOTES","VIEW_PATIENT_DETAILS","getAllIncidents","getIncidentById","post","CREATE_CLINICAL_NOTES","createIncident","put","UPDATE_CLINICAL_NOTES","updateIncident","closeIncident","delete","DELETE_CLINICAL_NOTES","deleteIncident","getAllGrievances","getGrievanceById","createGrievance","updateGrievance","resolveGrievance","deleteGrievance","getAllQualityMeasures","createQualityMeasure","recordMeasureData","getMeasureTrends","getAllPIPs","createPIP","updatePIP","conductChartAudit","getAuditResults","getAllInfections","reportInfection","updateInfection"],"sources":["qapi.routes.js"],"sourcesContent":["import QAPIController from \"../controllers/QAPI.controller.js\";\nimport { PERMISSIONS } from \"../config/rbac.js\";\nimport { requireAnyPermission } from \"../middleware/rbac.middleware.js\";\n\n/**\n * QAPI Routes\n * Quality Assurance and Performance Improvement endpoints\n *\n * Includes:\n * - Incident management (6 routes)\n * - Grievance management (6 routes)\n * - Quality measures (4 routes)\n * - Performance improvement projects (3 routes)\n * - Chart audits (2 routes)\n * - Infection control (3 routes)\n */\nexport default async function qapiRoutes(fastify, options) {\n  // ==================== INCIDENTS MANAGEMENT ====================\n\n  // Get all incidents\n  fastify.get(\"/incidents\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getAllIncidents);\n\n  // Get incident by ID\n  fastify.get(\"/incidents/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getIncidentById);\n\n  // Create new incident\n  fastify.post(\"/incidents\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.CREATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.createIncident);\n\n  // Update incident\n  fastify.put(\"/incidents/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.UPDATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.updateIncident);\n\n  // Close incident\n  fastify.post(\"/incidents/:id/close\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.UPDATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.closeIncident);\n\n  // Delete incident\n  fastify.delete(\"/incidents/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.DELETE_CLINICAL_NOTES\n    )]\n  }, QAPIController.deleteIncident);\n\n  // ==================== GRIEVANCES MANAGEMENT ====================\n\n  // Get all grievances\n  fastify.get(\"/grievances\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getAllGrievances);\n\n  // Get grievance by ID\n  fastify.get(\"/grievances/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getGrievanceById);\n\n  // Create new grievance\n  fastify.post(\"/grievances\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.CREATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.createGrievance);\n\n  // Update grievance\n  fastify.put(\"/grievances/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.UPDATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.updateGrievance);\n\n  // Resolve grievance\n  fastify.post(\"/grievances/:id/resolve\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.UPDATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.resolveGrievance);\n\n  // Delete grievance\n  fastify.delete(\"/grievances/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.DELETE_CLINICAL_NOTES\n    )]\n  }, QAPIController.deleteGrievance);\n\n  // ==================== QUALITY MEASURES ====================\n\n  // Get all quality measures\n  fastify.get(\"/quality-measures\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getAllQualityMeasures);\n\n  // Create quality measure\n  fastify.post(\"/quality-measures\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.CREATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.createQualityMeasure);\n\n  // Record measure data point\n  fastify.post(\"/quality-measures/data\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.CREATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.recordMeasureData);\n\n  // Get measure trends\n  fastify.get(\"/quality-measures/trends\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getMeasureTrends);\n\n  // ==================== PERFORMANCE IMPROVEMENT PROJECTS ====================\n\n  // Get all PIPs\n  fastify.get(\"/pips\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getAllPIPs);\n\n  // Create new PIP\n  fastify.post(\"/pips\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.CREATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.createPIP);\n\n  // Update PIP\n  fastify.put(\"/pips/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.UPDATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.updatePIP);\n\n  // ==================== CHART AUDITS ====================\n\n  // Conduct chart audit\n  fastify.post(\"/chart-audits\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.CREATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.conductChartAudit);\n\n  // Get audit results\n  fastify.get(\"/chart-audits\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getAuditResults);\n\n  // ==================== INFECTION CONTROL ====================\n\n  // Get all infections\n  fastify.get(\"/infections\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.VIEW_CLINICAL_NOTES,\n      PERMISSIONS.VIEW_PATIENT_DETAILS\n    )]\n  }, QAPIController.getAllInfections);\n\n  // Report new infection\n  fastify.post(\"/infections\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.CREATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.reportInfection);\n\n  // Update infection report\n  fastify.put(\"/infections/:id\", {\n    preHandler: [requireAnyPermission(\n      PERMISSIONS.UPDATE_CLINICAL_NOTES\n    )]\n  }, QAPIController.updateInfection);\n}\n"],"mappings":"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","ignoreList":[]}