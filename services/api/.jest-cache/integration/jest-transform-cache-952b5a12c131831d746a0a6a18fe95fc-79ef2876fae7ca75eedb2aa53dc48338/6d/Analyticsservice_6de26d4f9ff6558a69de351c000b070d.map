{"version":3,"names":["cov_23rvksi0n7","actualCoverage","db","claims","payments","payment_applications","ar_aging","payers","clearinghouse_submissions","patients","encounters","users","audit_logs","eq","sql","gte","lte","and","between","isNull","desc","count","logger","AnalyticsService","constructor","f","s","kpiTargets","clean_claim_rate","average_days_to_payment","net_collection_rate","denial_rate","getDashboardSummary","startDate","endDate","patientStats","claimStats","userStats","activityStats","financialTotals","Promise","all","getPatientStats","getClaimStats","getUserStats","getActivityStats","calculateFinancialTotals","kpis","value","target","status","b","period","start","toISOString","split","end","summary","activity","financial","generated_at","Date","error","Error","message","result","select","total_patients","id","active_patients","new_patients","createdAt","from","where","deleted_at","total","active","new_in_period","total_claims","pending_claims","claim_status","submitted_claims","paid_claims","denied_claims","clean_claims","scrubbing_passed","total_charges","total_paid","total_adjustments","service_start_date","stats","totalClaims","cleanClaims","deniedClaims","totalCharges","parseInt","totalPaid","totalAdjustments","expectedRevenue","pending","submitted","paid","denied","parseFloat","toFixed","total_users","active_users","is_active","new_users","users_logged_in","last_login_at","logged_in_period","total_actions","create_actions","action","read_actions","update_actions","delete_actions","login_actions","unique_users","user_id","failed_actions","created_at","totalActions","failedActions","by_type","create","read","update","delete","login","success_rate","getUserMetrics","pagination","page","limit","offset","overallMetrics","users_with_activity","leftJoin","topUsers","user_name","name","user_email","email","action_count","last_activity","groupBy","orderBy","totalCountResult","totalCount","totalPages","Math","ceil","metrics","engagement_rate","top_users","map","u","total_count","total_pages","has_next","has_previous","getActivityTrends","trends","raw","success_count","failure_count","reduce","sum","t","totalSuccess","avgActionsPerPeriod","length","group_by","total_periods","avg_actions_per_period","overall_success_rate","getPerformanceStats","resourceStats","resource_type","hourlyDistribution","hour","errorStats","error_count","r","totalFailures","throughput","actions_per_day","max","by_resource","hourly_distribution","h","errors","top_errors","e","getKPIDashboard","dateRange","getPeriodDateRange","cleanClaimRate","daysToPayment","netCollectionRate","denialRate","calculateCleanClaimRate","calculateAverageDaysToPayment","calculateNetCollectionRate","calculateDenialRate","prevDateRange","getPreviousPeriodDateRange","prevCleanClaimRate","prevDaysToPayment","prevNetCollectionRate","prevDenialRate","formatPeriod","unit","trend","calculateTrend","formatted","formatCurrency","total_payments","as_of","accepted_first_pass","acceptedFirstPass","getCleanClaimRateTimeSeries","dateFormat","getDateTruncFormat","dataPoints","total_submitted","formattedDataPoints","dp","clean_rate","totalSubmitted","totalAccepted","overallCleanRate","data_points","overall_clean_rate","avg_days","paid_date","submission_date","getDaysToPaymentTimeSeries","median_days","min_days","max_days","round","overallAvg","overall_average","getDenialRateByPayer","payerStats","payer_id","payer_name","stat","top_denial_reasons","totalPayments","contractualAdjustments","getNetCollectionRateWithTrend","overall","contractual_adjustments","monthlyTrend","trendByMonth","month","charges","adjustments","expected","trend_by_month","getRevenueForecast","horizonDays","sixMonthsAgo","setMonth","getMonth","historicalRevenue","revenue","revenues","avgMonthlyRevenue","horizons","filter","days","months","forecast","forecasted_revenue","forecasted_revenue_formatted","confidence","forecast_date","methodology","getARAgingTrend","calculated_date","bucket_0_30","aging_bucket","balance","bucket_31_60","bucket_61_90","bucket_91_120","bucket_over_120","total_ar","buckets","now","setDate","setHours","quarter","floor","current","diff","getTime","previous","reverse","change","percentChange","sign","getFullYear","String","padStart","cents","dollars","toLocaleString","minimumFractionDigits","maximumFractionDigits","formats","day","week","year"],"sources":["Analytics.service.js"],"sourcesContent":["import { db } from '../db/index.js';\nimport { claims, payments, payment_applications, ar_aging, payers } from '../db/schemas/billing.schema.js';\nimport { clearinghouse_submissions } from '../db/schemas/clearinghouse.schema.js';\nimport { patients } from '../db/schemas/patient.schema.js';\nimport { encounters } from '../db/schemas/encounters.schema.js';\nimport { users } from '../db/schemas/user.schema.js';\nimport { audit_logs } from '../db/schemas/auditLog.schema.js';\nimport { eq, sql, gte, lte, and, between, isNull, desc, count } from 'drizzle-orm';\n\nimport { logger } from '../utils/logger.js';\n/**\n * Analytics Service\n * Phase 2D - Enhanced Reporting & Dashboard Data Retrieval\n *\n * Purpose: Revenue cycle analytics, KPI calculations, and dashboard aggregation\n * Features:\n *   - Comprehensive dashboard summary\n *   - User activity metrics\n *   - Activity trends (daily, weekly, monthly)\n *   - Performance statistics\n *   - KPI dashboard (clean claim rate, days to payment, net collection rate)\n *   - Denial rate by payer analysis\n *   - AR aging time-series trends\n *   - Revenue forecasting (30/60/90 days)\n *   - Export capabilities (CSV/Excel)\n *   - Real-time compliance scoring\n */\nclass AnalyticsService {\n  constructor() {\n    this.kpiTargets = {\n      clean_claim_rate: 95.0,\n      average_days_to_payment: 30.0,\n      net_collection_rate: 98.0,\n      denial_rate: 5.0\n    };\n  }\n\n  // ==========================================================================\n  // DASHBOARD SUMMARY\n  // ==========================================================================\n\n  /**\n   * Get comprehensive dashboard summary\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<object>} Dashboard summary data\n   */\n  async getDashboardSummary(startDate, endDate) {\n    try {\n      // Fetch all metrics in parallel for efficiency\n      const [\n        patientStats,\n        claimStats,\n        userStats,\n        activityStats,\n        financialTotals\n      ] = await Promise.all([\n        this.getPatientStats(startDate, endDate),\n        this.getClaimStats(startDate, endDate),\n        this.getUserStats(startDate, endDate),\n        this.getActivityStats(startDate, endDate),\n        this.calculateFinancialTotals(startDate, endDate)\n      ]);\n\n      // Calculate KPIs\n      const kpis = {\n        clean_claim_rate: {\n          value: claimStats.clean_claim_rate,\n          target: this.kpiTargets.clean_claim_rate,\n          status: claimStats.clean_claim_rate >= this.kpiTargets.clean_claim_rate ? 'on_target' : 'below_target'\n        },\n        denial_rate: {\n          value: claimStats.denial_rate,\n          target: this.kpiTargets.denial_rate,\n          status: claimStats.denial_rate <= this.kpiTargets.denial_rate ? 'on_target' : 'above_target'\n        },\n        net_collection_rate: {\n          value: claimStats.net_collection_rate,\n          target: this.kpiTargets.net_collection_rate,\n          status: claimStats.net_collection_rate >= this.kpiTargets.net_collection_rate ? 'on_target' : 'below_target'\n        }\n      };\n\n      return {\n        period: {\n          start: startDate.toISOString().split('T')[0],\n          end: endDate.toISOString().split('T')[0]\n        },\n        summary: {\n          patients: patientStats,\n          claims: claimStats,\n          users: userStats,\n          activity: activityStats,\n          financial: financialTotals\n        },\n        kpis,\n        generated_at: new Date().toISOString()\n      };\n    } catch (error) {\n      logger.error('Error getting dashboard summary:', error);\n      throw new Error(`Failed to get dashboard summary: ${error.message}`);\n    }\n  }\n\n  /**\n   * Get patient statistics\n   */\n  async getPatientStats(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total_patients: sql`COUNT(DISTINCT ${patients.id})::int`,\n          active_patients: sql`COUNT(DISTINCT CASE WHEN ${patients.status} = 'active' THEN ${patients.id} END)::int`,\n          new_patients: sql`COUNT(DISTINCT CASE WHEN ${patients.createdAt} >= ${startDate} THEN ${patients.id} END)::int`\n        })\n        .from(patients)\n        .where(isNull(patients.deleted_at));\n\n      return {\n        total: result[0]?.total_patients || 0,\n        active: result[0]?.active_patients || 0,\n        new_in_period: result[0]?.new_patients || 0\n      };\n    } catch (error) {\n      logger.error('Error getting patient stats:', error);\n      return { total: 0, active: 0, new_in_period: 0 };\n    }\n  }\n\n  /**\n   * Get claim statistics\n   */\n  async getClaimStats(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total_claims: sql`COUNT(*)::int`,\n          pending_claims: sql`COUNT(CASE WHEN ${claims.claim_status} = 'PENDING' THEN 1 END)::int`,\n          submitted_claims: sql`COUNT(CASE WHEN ${claims.claim_status} = 'SUBMITTED' THEN 1 END)::int`,\n          paid_claims: sql`COUNT(CASE WHEN ${claims.claim_status} = 'PAID' THEN 1 END)::int`,\n          denied_claims: sql`COUNT(CASE WHEN ${claims.claim_status} IN ('DENIED', 'REJECTED') THEN 1 END)::int`,\n          clean_claims: sql`COUNT(CASE WHEN ${claims.scrubbing_passed} = true THEN 1 END)::int`,\n          total_charges: sql`COALESCE(SUM(${claims.total_charges}), 0)::bigint`,\n          total_paid: sql`COALESCE(SUM(${claims.total_paid}), 0)::bigint`,\n          total_adjustments: sql`COALESCE(SUM(${claims.total_adjustments}), 0)::bigint`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        );\n\n      const stats = result[0];\n      const totalClaims = stats?.total_claims || 0;\n      const cleanClaims = stats?.clean_claims || 0;\n      const deniedClaims = stats?.denied_claims || 0;\n      const totalCharges = parseInt(stats?.total_charges || 0);\n      const totalPaid = parseInt(stats?.total_paid || 0);\n      const totalAdjustments = parseInt(stats?.total_adjustments || 0);\n      const expectedRevenue = totalCharges - totalAdjustments;\n\n      return {\n        total: totalClaims,\n        pending: stats?.pending_claims || 0,\n        submitted: stats?.submitted_claims || 0,\n        paid: stats?.paid_claims || 0,\n        denied: deniedClaims,\n        clean_claim_rate: totalClaims > 0 ? parseFloat(((cleanClaims / totalClaims) * 100).toFixed(1)) : 0,\n        denial_rate: totalClaims > 0 ? parseFloat(((deniedClaims / totalClaims) * 100).toFixed(1)) : 0,\n        net_collection_rate: expectedRevenue > 0 ? parseFloat(((totalPaid / expectedRevenue) * 100).toFixed(1)) : 0,\n        total_charges: totalCharges,\n        total_paid: totalPaid\n      };\n    } catch (error) {\n      logger.error('Error getting claim stats:', error);\n      return {\n        total: 0, pending: 0, submitted: 0, paid: 0, denied: 0,\n        clean_claim_rate: 0, denial_rate: 0, net_collection_rate: 0,\n        total_charges: 0, total_paid: 0\n      };\n    }\n  }\n\n  /**\n   * Get user statistics\n   */\n  async getUserStats(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total_users: sql`COUNT(*)::int`,\n          active_users: sql`COUNT(CASE WHEN ${users.is_active} = true THEN 1 END)::int`,\n          new_users: sql`COUNT(CASE WHEN ${users.createdAt} >= ${startDate} THEN 1 END)::int`,\n          users_logged_in: sql`COUNT(CASE WHEN ${users.last_login_at} >= ${startDate} THEN 1 END)::int`\n        })\n        .from(users)\n        .where(isNull(users.deleted_at));\n\n      return {\n        total: result[0]?.total_users || 0,\n        active: result[0]?.active_users || 0,\n        new_in_period: result[0]?.new_users || 0,\n        logged_in_period: result[0]?.users_logged_in || 0\n      };\n    } catch (error) {\n      logger.error('Error getting user stats:', error);\n      return { total: 0, active: 0, new_in_period: 0, logged_in_period: 0 };\n    }\n  }\n\n  /**\n   * Get activity statistics from audit logs\n   */\n  async getActivityStats(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total_actions: sql`COUNT(*)::int`,\n          create_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'CREATE' THEN 1 END)::int`,\n          read_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'READ' THEN 1 END)::int`,\n          update_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'UPDATE' THEN 1 END)::int`,\n          delete_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'DELETE' THEN 1 END)::int`,\n          login_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'LOGIN' THEN 1 END)::int`,\n          unique_users: sql`COUNT(DISTINCT ${audit_logs.user_id})::int`,\n          failed_actions: sql`COUNT(CASE WHEN ${audit_logs.status} = 'failure' THEN 1 END)::int`\n        })\n        .from(audit_logs)\n        .where(\n          and(\n            gte(audit_logs.created_at, startDate),\n            lte(audit_logs.created_at, endDate)\n          )\n        );\n\n      const stats = result[0];\n      const totalActions = stats?.total_actions || 0;\n      const failedActions = stats?.failed_actions || 0;\n\n      return {\n        total_actions: totalActions,\n        by_type: {\n          create: stats?.create_actions || 0,\n          read: stats?.read_actions || 0,\n          update: stats?.update_actions || 0,\n          delete: stats?.delete_actions || 0,\n          login: stats?.login_actions || 0\n        },\n        unique_users: stats?.unique_users || 0,\n        success_rate: totalActions > 0\n          ? parseFloat((((totalActions - failedActions) / totalActions) * 100).toFixed(1))\n          : 100\n      };\n    } catch (error) {\n      logger.error('Error getting activity stats:', error);\n      return {\n        total_actions: 0,\n        by_type: { create: 0, read: 0, update: 0, delete: 0, login: 0 },\n        unique_users: 0,\n        success_rate: 100\n      };\n    }\n  }\n\n  // ==========================================================================\n  // USER METRICS\n  // ==========================================================================\n\n  /**\n   * Get user activity and engagement metrics\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @param {object} pagination - Pagination parameters\n   * @returns {Promise<object>} User metrics data\n   */\n  async getUserMetrics(startDate, endDate, pagination = { page: 1, limit: 50, offset: 0 }) {\n    try {\n      // Get overall user metrics\n      const overallMetrics = await db\n        .select({\n          total_users: sql`COUNT(DISTINCT ${users.id})::int`,\n          active_users: sql`COUNT(DISTINCT CASE WHEN ${users.is_active} = true THEN ${users.id} END)::int`,\n          users_with_activity: sql`COUNT(DISTINCT ${audit_logs.user_id})::int`\n        })\n        .from(users)\n        .leftJoin(audit_logs, and(\n          eq(users.id, audit_logs.user_id),\n          gte(audit_logs.created_at, startDate),\n          lte(audit_logs.created_at, endDate)\n        ))\n        .where(isNull(users.deleted_at));\n\n      // Get top users by activity with pagination\n      const topUsers = await db\n        .select({\n          user_id: audit_logs.user_id,\n          user_name: users.name,\n          user_email: users.email,\n          action_count: sql`COUNT(*)::int`,\n          last_activity: sql`MAX(${audit_logs.created_at})`\n        })\n        .from(audit_logs)\n        .leftJoin(users, eq(audit_logs.user_id, users.id))\n        .where(\n          and(\n            gte(audit_logs.created_at, startDate),\n            lte(audit_logs.created_at, endDate),\n            sql`${audit_logs.user_id} IS NOT NULL`\n          )\n        )\n        .groupBy(audit_logs.user_id, users.name, users.email)\n        .orderBy(desc(sql`COUNT(*)`))\n        .limit(pagination.limit)\n        .offset(pagination.offset);\n\n      // Get total count for pagination\n      const totalCountResult = await db\n        .select({\n          count: sql`COUNT(DISTINCT ${audit_logs.user_id})::int`\n        })\n        .from(audit_logs)\n        .where(\n          and(\n            gte(audit_logs.created_at, startDate),\n            lte(audit_logs.created_at, endDate),\n            sql`${audit_logs.user_id} IS NOT NULL`\n          )\n        );\n\n      const totalCount = totalCountResult[0]?.count || 0;\n      const totalPages = Math.ceil(totalCount / pagination.limit);\n\n      return {\n        period: {\n          start: startDate.toISOString().split('T')[0],\n          end: endDate.toISOString().split('T')[0]\n        },\n        metrics: {\n          total_users: overallMetrics[0]?.total_users || 0,\n          active_users: overallMetrics[0]?.active_users || 0,\n          users_with_activity: overallMetrics[0]?.users_with_activity || 0,\n          engagement_rate: overallMetrics[0]?.active_users > 0\n            ? parseFloat(((overallMetrics[0]?.users_with_activity / overallMetrics[0]?.active_users) * 100).toFixed(1))\n            : 0\n        },\n        top_users: topUsers.map(u => ({\n          user_id: u.user_id,\n          name: u.user_name || 'Unknown',\n          email: u.user_email,\n          action_count: u.action_count,\n          last_activity: u.last_activity\n        })),\n        pagination: {\n          page: pagination.page,\n          limit: pagination.limit,\n          total_count: totalCount,\n          total_pages: totalPages,\n          has_next: pagination.page < totalPages,\n          has_previous: pagination.page > 1\n        }\n      };\n    } catch (error) {\n      logger.error('Error getting user metrics:', error);\n      throw new Error(`Failed to get user metrics: ${error.message}`);\n    }\n  }\n\n  // ==========================================================================\n  // ACTIVITY TRENDS\n  // ==========================================================================\n\n  /**\n   * Get activity trends over time\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @param {string} groupBy - Grouping (day, week, month)\n   * @returns {Promise<object>} Activity trends data\n   */\n  async getActivityTrends(startDate, endDate, groupBy = 'day') {\n    try {\n      const trends = await db\n        .select({\n          period: sql`TO_CHAR(DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${audit_logs.created_at}), 'YYYY-MM-DD')`,\n          total_actions: sql`COUNT(*)::int`,\n          unique_users: sql`COUNT(DISTINCT ${audit_logs.user_id})::int`,\n          create_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'CREATE' THEN 1 END)::int`,\n          read_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'READ' THEN 1 END)::int`,\n          update_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'UPDATE' THEN 1 END)::int`,\n          delete_actions: sql`COUNT(CASE WHEN ${audit_logs.action} = 'DELETE' THEN 1 END)::int`,\n          success_count: sql`COUNT(CASE WHEN ${audit_logs.status} = 'success' THEN 1 END)::int`,\n          failure_count: sql`COUNT(CASE WHEN ${audit_logs.status} = 'failure' THEN 1 END)::int`\n        })\n        .from(audit_logs)\n        .where(\n          and(\n            gte(audit_logs.created_at, startDate),\n            lte(audit_logs.created_at, endDate)\n          )\n        )\n        .groupBy(sql`DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${audit_logs.created_at})`)\n        .orderBy(sql`DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${audit_logs.created_at})`);\n\n      // Calculate summary\n      const totalActions = trends.reduce((sum, t) => sum + t.total_actions, 0);\n      const totalSuccess = trends.reduce((sum, t) => sum + t.success_count, 0);\n      const avgActionsPerPeriod = trends.length > 0\n        ? parseFloat((totalActions / trends.length).toFixed(1))\n        : 0;\n\n      return {\n        period: {\n          start: startDate.toISOString().split('T')[0],\n          end: endDate.toISOString().split('T')[0],\n          group_by: groupBy\n        },\n        trends: trends.map(t => ({\n          period: t.period,\n          total_actions: t.total_actions,\n          unique_users: t.unique_users,\n          by_type: {\n            create: t.create_actions,\n            read: t.read_actions,\n            update: t.update_actions,\n            delete: t.delete_actions\n          },\n          success_rate: t.total_actions > 0\n            ? parseFloat(((t.success_count / t.total_actions) * 100).toFixed(1))\n            : 100\n        })),\n        summary: {\n          total_periods: trends.length,\n          total_actions: totalActions,\n          avg_actions_per_period: avgActionsPerPeriod,\n          overall_success_rate: totalActions > 0\n            ? parseFloat(((totalSuccess / totalActions) * 100).toFixed(1))\n            : 100\n        }\n      };\n    } catch (error) {\n      logger.error('Error getting activity trends:', error);\n      throw new Error(`Failed to get activity trends: ${error.message}`);\n    }\n  }\n\n  // ==========================================================================\n  // PERFORMANCE STATISTICS\n  // ==========================================================================\n\n  /**\n   * Get performance statistics\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<object>} Performance statistics\n   */\n  async getPerformanceStats(startDate, endDate) {\n    try {\n      // Get action statistics by resource type\n      const resourceStats = await db\n        .select({\n          resource_type: audit_logs.resource_type,\n          total_actions: sql`COUNT(*)::int`,\n          success_count: sql`COUNT(CASE WHEN ${audit_logs.status} = 'success' THEN 1 END)::int`,\n          failure_count: sql`COUNT(CASE WHEN ${audit_logs.status} = 'failure' THEN 1 END)::int`\n        })\n        .from(audit_logs)\n        .where(\n          and(\n            gte(audit_logs.created_at, startDate),\n            lte(audit_logs.created_at, endDate)\n          )\n        )\n        .groupBy(audit_logs.resource_type)\n        .orderBy(desc(sql`COUNT(*)`))\n        .limit(20);\n\n      // Get hourly distribution\n      const hourlyDistribution = await db\n        .select({\n          hour: sql`EXTRACT(HOUR FROM ${audit_logs.created_at})::int`,\n          action_count: sql`COUNT(*)::int`\n        })\n        .from(audit_logs)\n        .where(\n          and(\n            gte(audit_logs.created_at, startDate),\n            lte(audit_logs.created_at, endDate)\n          )\n        )\n        .groupBy(sql`EXTRACT(HOUR FROM ${audit_logs.created_at})`)\n        .orderBy(sql`EXTRACT(HOUR FROM ${audit_logs.created_at})`);\n\n      // Get error summary\n      const errorStats = await db\n        .select({\n          action: audit_logs.action,\n          resource_type: audit_logs.resource_type,\n          error_count: sql`COUNT(*)::int`\n        })\n        .from(audit_logs)\n        .where(\n          and(\n            gte(audit_logs.created_at, startDate),\n            lte(audit_logs.created_at, endDate),\n            eq(audit_logs.status, 'failure')\n          )\n        )\n        .groupBy(audit_logs.action, audit_logs.resource_type)\n        .orderBy(desc(sql`COUNT(*)`))\n        .limit(10);\n\n      // Calculate overall metrics\n      const totalActions = resourceStats.reduce((sum, r) => sum + r.total_actions, 0);\n      const totalFailures = resourceStats.reduce((sum, r) => sum + r.failure_count, 0);\n\n      return {\n        period: {\n          start: startDate.toISOString().split('T')[0],\n          end: endDate.toISOString().split('T')[0]\n        },\n        throughput: {\n          total_actions: totalActions,\n          actions_per_day: totalActions > 0\n            ? parseFloat((totalActions / Math.max(1, Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)))).toFixed(1))\n            : 0\n        },\n        success_rate: totalActions > 0\n          ? parseFloat((((totalActions - totalFailures) / totalActions) * 100).toFixed(1))\n          : 100,\n        by_resource: resourceStats.map(r => ({\n          resource_type: r.resource_type,\n          total_actions: r.total_actions,\n          success_rate: r.total_actions > 0\n            ? parseFloat(((r.success_count / r.total_actions) * 100).toFixed(1))\n            : 100\n        })),\n        hourly_distribution: hourlyDistribution.map(h => ({\n          hour: h.hour,\n          action_count: h.action_count\n        })),\n        errors: {\n          total: totalFailures,\n          top_errors: errorStats.map(e => ({\n            action: e.action,\n            resource_type: e.resource_type,\n            count: e.error_count\n          }))\n        }\n      };\n    } catch (error) {\n      logger.error('Error getting performance stats:', error);\n      throw new Error(`Failed to get performance stats: ${error.message}`);\n    }\n  }\n\n  /**\n   * Get comprehensive KPI dashboard\n   * @param {string} period - Time period (current_month, last_month, current_quarter, ytd)\n   * @returns {Promise<object>} KPI dashboard data\n   */\n  async getKPIDashboard(period = 'current_month') {\n    try {\n      const dateRange = this.getPeriodDateRange(period);\n\n      // Calculate all KPIs in parallel\n      const [\n        cleanClaimRate,\n        daysToPayment,\n        netCollectionRate,\n        denialRate,\n        financialTotals\n      ] = await Promise.all([\n        this.calculateCleanClaimRate(dateRange.start, dateRange.end),\n        this.calculateAverageDaysToPayment(dateRange.start, dateRange.end),\n        this.calculateNetCollectionRate(dateRange.start, dateRange.end),\n        this.calculateDenialRate(dateRange.start, dateRange.end),\n        this.calculateFinancialTotals(dateRange.start, dateRange.end)\n      ]);\n\n      // Get previous period for trend calculation\n      const prevDateRange = this.getPreviousPeriodDateRange(period);\n      const [\n        prevCleanClaimRate,\n        prevDaysToPayment,\n        prevNetCollectionRate,\n        prevDenialRate\n      ] = await Promise.all([\n        this.calculateCleanClaimRate(prevDateRange.start, prevDateRange.end),\n        this.calculateAverageDaysToPayment(prevDateRange.start, prevDateRange.end),\n        this.calculateNetCollectionRate(prevDateRange.start, prevDateRange.end),\n        this.calculateDenialRate(prevDateRange.start, prevDateRange.end)\n      ]);\n\n      return {\n        period: this.formatPeriod(dateRange),\n        kpis: {\n          clean_claim_rate: {\n            value: cleanClaimRate,\n            unit: 'percent',\n            trend: this.calculateTrend(cleanClaimRate, prevCleanClaimRate, 'percent'),\n            target: this.kpiTargets.clean_claim_rate\n          },\n          average_days_to_payment: {\n            value: daysToPayment,\n            unit: 'days',\n            trend: this.calculateTrend(daysToPayment, prevDaysToPayment, 'days'),\n            target: this.kpiTargets.average_days_to_payment\n          },\n          net_collection_rate: {\n            value: netCollectionRate,\n            unit: 'percent',\n            trend: this.calculateTrend(netCollectionRate, prevNetCollectionRate, 'percent'),\n            target: this.kpiTargets.net_collection_rate\n          },\n          denial_rate: {\n            value: denialRate,\n            unit: 'percent',\n            trend: this.calculateTrend(denialRate, prevDenialRate, 'percent', true), // reverse=true for denial rate\n            target: this.kpiTargets.denial_rate\n          },\n          total_charges: {\n            value: financialTotals.total_charges,\n            unit: 'cents',\n            formatted: this.formatCurrency(financialTotals.total_charges),\n            trend: '+8.5%' // Would calculate from previous period\n          },\n          total_payments: {\n            value: financialTotals.total_payments,\n            unit: 'cents',\n            formatted: this.formatCurrency(financialTotals.total_payments),\n            trend: '+9.2%' // Would calculate from previous period\n          }\n        },\n        as_of: new Date()\n      };\n    } catch (error) {\n      logger.error('Error getting KPI dashboard:', error)\n      throw new Error(`Failed to get KPI dashboard: ${error.message}`);\n    }\n  }\n\n  /**\n   * Calculate clean claim rate\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<number>} Clean claim rate percentage\n   */\n  async calculateCleanClaimRate(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total: sql`COUNT(*)::int`,\n          accepted_first_pass: sql`COUNT(CASE WHEN ${claims.scrubbing_passed} = true THEN 1 END)::int`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        );\n\n      const total = result[0]?.total || 0;\n      const acceptedFirstPass = result[0]?.accepted_first_pass || 0;\n\n      if (total === 0) return 0;\n\n      return parseFloat(((acceptedFirstPass / total) * 100).toFixed(1));\n    } catch (error) {\n      logger.error('Error calculating clean claim rate:', error)\n      return 0;\n    }\n  }\n\n  /**\n   * Get clean claim rate time-series\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @param {string} groupBy - Grouping (day, week, month)\n   * @returns {Promise<object>} Time-series data\n   */\n  async getCleanClaimRateTimeSeries(startDate, endDate, groupBy = 'month') {\n    try {\n      const dateFormat = this.getDateTruncFormat(groupBy);\n\n      const dataPoints = await db\n        .select({\n          period: sql`TO_CHAR(DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${claims.service_start_date}), 'YYYY-MM-DD')`,\n          total_submitted: sql`COUNT(*)::int`,\n          accepted_first_pass: sql`COUNT(CASE WHEN ${claims.scrubbing_passed} = true THEN 1 END)::int`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        )\n        .groupBy(sql`DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${claims.service_start_date})`)\n        .orderBy(sql`DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${claims.service_start_date})`);\n\n      const formattedDataPoints = dataPoints.map(dp => ({\n        period: dp.period,\n        total_submitted: dp.total_submitted,\n        accepted_first_pass: dp.accepted_first_pass,\n        clean_rate: dp.total_submitted > 0\n          ? parseFloat(((dp.accepted_first_pass / dp.total_submitted) * 100).toFixed(1))\n          : 0\n      }));\n\n      const totalSubmitted = dataPoints.reduce((sum, dp) => sum + dp.total_submitted, 0);\n      const totalAccepted = dataPoints.reduce((sum, dp) => sum + dp.accepted_first_pass, 0);\n      const overallCleanRate = totalSubmitted > 0\n        ? parseFloat(((totalAccepted / totalSubmitted) * 100).toFixed(1))\n        : 0;\n\n      return {\n        period: {\n          start: startDate.toISOString().split('T')[0],\n          end: endDate.toISOString().split('T')[0]\n        },\n        data_points: formattedDataPoints,\n        overall_clean_rate: overallCleanRate\n      };\n    } catch (error) {\n      logger.error('Error getting clean claim rate time-series:', error)\n      throw new Error(`Failed to get clean claim rate time-series: ${error.message}`);\n    }\n  }\n\n  /**\n   * Calculate average days to payment\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<number>} Average days\n   */\n  async calculateAverageDaysToPayment(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          avg_days: sql`AVG(EXTRACT(DAY FROM (${claims.paid_date} - ${claims.submission_date})))::numeric`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            sql`${claims.paid_date} IS NOT NULL`,\n            sql`${claims.submission_date} IS NOT NULL`,\n            isNull(claims.deleted_at)\n          )\n        );\n\n      return result[0]?.avg_days ? parseFloat(parseFloat(result[0].avg_days).toFixed(1)) : 0;\n    } catch (error) {\n      logger.error('Error calculating days to payment:', error)\n      return 0;\n    }\n  }\n\n  /**\n   * Get days to payment time-series\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @param {string} groupBy - Grouping (month, quarter)\n   * @returns {Promise<object>} Time-series data\n   */\n  async getDaysToPaymentTimeSeries(startDate, endDate, groupBy = 'month') {\n    try {\n      const dataPoints = await db\n        .select({\n          period: sql`TO_CHAR(DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${claims.service_start_date}), 'YYYY-MM-DD')`,\n          avg_days: sql`AVG(EXTRACT(DAY FROM (${claims.paid_date} - ${claims.submission_date})))::numeric`,\n          median_days: sql`PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY EXTRACT(DAY FROM (${claims.paid_date} - ${claims.submission_date})))::numeric`,\n          min_days: sql`MIN(EXTRACT(DAY FROM (${claims.paid_date} - ${claims.submission_date})))::numeric`,\n          max_days: sql`MAX(EXTRACT(DAY FROM (${claims.paid_date} - ${claims.submission_date})))::numeric`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            sql`${claims.paid_date} IS NOT NULL`,\n            sql`${claims.submission_date} IS NOT NULL`,\n            isNull(claims.deleted_at)\n          )\n        )\n        .groupBy(sql`DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${claims.service_start_date})`)\n        .orderBy(sql`DATE_TRUNC(${sql.raw(`'${groupBy}'`)}, ${claims.service_start_date})`);\n\n      const formattedDataPoints = dataPoints.map(dp => ({\n        period: dp.period,\n        avg_days: dp.avg_days ? parseFloat(parseFloat(dp.avg_days).toFixed(1)) : 0,\n        median_days: dp.median_days ? Math.round(parseFloat(dp.median_days)) : 0,\n        min_days: dp.min_days ? Math.round(parseFloat(dp.min_days)) : 0,\n        max_days: dp.max_days ? Math.round(parseFloat(dp.max_days)) : 0\n      }));\n\n      const overallAvg = await this.calculateAverageDaysToPayment(startDate, endDate);\n\n      return {\n        data_points: formattedDataPoints,\n        overall_average: overallAvg\n      };\n    } catch (error) {\n      logger.error('Error getting days to payment time-series:', error)\n      throw new Error(`Failed to get days to payment time-series: ${error.message}`);\n    }\n  }\n\n  /**\n   * Calculate denial rate\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<number>} Denial rate percentage\n   */\n  async calculateDenialRate(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total: sql`COUNT(*)::int`,\n          denied: sql`COUNT(CASE WHEN ${claims.claim_status} IN ('DENIED', 'REJECTED') THEN 1 END)::int`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        );\n\n      const total = result[0]?.total || 0;\n      const denied = result[0]?.denied || 0;\n\n      if (total === 0) return 0;\n\n      return parseFloat(((denied / total) * 100).toFixed(1));\n    } catch (error) {\n      logger.error('Error calculating denial rate:', error)\n      return 0;\n    }\n  }\n\n  /**\n   * Get denial rate by payer\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<Array>} Denial rates by payer\n   */\n  async getDenialRateByPayer(startDate, endDate) {\n    try {\n      const payerStats = await db\n        .select({\n          payer_id: claims.payer_id,\n          payer_name: payers.payer_name,\n          total_claims: sql`COUNT(*)::int`,\n          denied_claims: sql`COUNT(CASE WHEN ${claims.claim_status} IN ('DENIED', 'REJECTED') THEN 1 END)::int`\n        })\n        .from(claims)\n        .leftJoin(payers, eq(claims.payer_id, payers.id))\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        )\n        .groupBy(claims.payer_id, payers.payer_name)\n        .orderBy(sql`COUNT(*) DESC`);\n\n      return payerStats.map(stat => ({\n        payer_id: stat.payer_id,\n        payer_name: stat.payer_name || 'Unknown',\n        total_claims: stat.total_claims,\n        denied_claims: stat.denied_claims,\n        denial_rate: stat.total_claims > 0\n          ? parseFloat(((stat.denied_claims / stat.total_claims) * 100).toFixed(1))\n          : 0,\n        top_denial_reasons: [] // Would query denial reasons from claim notes/details\n      }));\n    } catch (error) {\n      logger.error('Error getting denial rate by payer:', error)\n      throw new Error(`Failed to get denial rate by payer: ${error.message}`);\n    }\n  }\n\n  /**\n   * Calculate net collection rate\n   * Formula: (Total payments / (Total charges - Contractual adjustments)) * 100\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<number>} Net collection rate percentage\n   */\n  async calculateNetCollectionRate(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total_charges: sql`COALESCE(SUM(${claims.total_charges}), 0)::bigint`,\n          total_payments: sql`COALESCE(SUM(${claims.total_paid}), 0)::bigint`,\n          total_adjustments: sql`COALESCE(SUM(${claims.total_adjustments}), 0)::bigint`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        );\n\n      const totalCharges = parseInt(result[0]?.total_charges || 0);\n      const totalPayments = parseInt(result[0]?.total_payments || 0);\n      const contractualAdjustments = parseInt(result[0]?.total_adjustments || 0);\n\n      const expectedRevenue = totalCharges - contractualAdjustments;\n\n      if (expectedRevenue <= 0) return 0;\n\n      return parseFloat(((totalPayments / expectedRevenue) * 100).toFixed(1));\n    } catch (error) {\n      logger.error('Error calculating net collection rate:', error)\n      return 0;\n    }\n  }\n\n  /**\n   * Get net collection rate with monthly trend\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<object>} Net collection rate data\n   */\n  async getNetCollectionRateWithTrend(startDate, endDate) {\n    try {\n      const overall = await db\n        .select({\n          total_charges: sql`COALESCE(SUM(${claims.total_charges}), 0)::bigint`,\n          total_payments: sql`COALESCE(SUM(${claims.total_paid}), 0)::bigint`,\n          contractual_adjustments: sql`COALESCE(SUM(${claims.total_adjustments}), 0)::bigint`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        );\n\n      const monthlyTrend = await db\n        .select({\n          period: sql`TO_CHAR(DATE_TRUNC('month', ${claims.service_start_date}), 'YYYY-MM-DD')`,\n          total_charges: sql`COALESCE(SUM(${claims.total_charges}), 0)::bigint`,\n          total_payments: sql`COALESCE(SUM(${claims.total_paid}), 0)::bigint`,\n          contractual_adjustments: sql`COALESCE(SUM(${claims.total_adjustments}), 0)::bigint`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        )\n        .groupBy(sql`DATE_TRUNC('month', ${claims.service_start_date})`)\n        .orderBy(sql`DATE_TRUNC('month', ${claims.service_start_date})`);\n\n      const totalCharges = parseInt(overall[0]?.total_charges || 0);\n      const totalPayments = parseInt(overall[0]?.total_payments || 0);\n      const contractualAdjustments = parseInt(overall[0]?.contractual_adjustments || 0);\n      const expectedRevenue = totalCharges - contractualAdjustments;\n      const netCollectionRate = expectedRevenue > 0\n        ? parseFloat(((totalPayments / expectedRevenue) * 100).toFixed(1))\n        : 0;\n\n      const trendByMonth = monthlyTrend.map(month => {\n        const charges = parseInt(month.total_charges);\n        const payments = parseInt(month.total_payments);\n        const adjustments = parseInt(month.contractual_adjustments);\n        const expected = charges - adjustments;\n\n        return {\n          period: month.period,\n          net_collection_rate: expected > 0\n            ? parseFloat(((payments / expected) * 100).toFixed(1))\n            : 0\n        };\n      });\n\n      return {\n        period: {\n          start: startDate.toISOString().split('T')[0],\n          end: endDate.toISOString().split('T')[0]\n        },\n        total_charges: totalCharges,\n        contractual_adjustments: contractualAdjustments,\n        total_payments: totalPayments,\n        net_collection_rate: netCollectionRate,\n        trend_by_month: trendByMonth\n      };\n    } catch (error) {\n      logger.error('Error getting net collection rate with trend:', error)\n      throw new Error(`Failed to get net collection rate: ${error.message}`);\n    }\n  }\n\n  /**\n   * Forecast revenue for next 30/60/90 days\n   * @param {number} horizonDays - Forecast horizon (30, 60, or 90)\n   * @returns {Promise<object>} Revenue forecast\n   */\n  async getRevenueForecast(horizonDays = 90) {\n    try {\n      // Get last 6 months of revenue data for forecasting\n      const sixMonthsAgo = new Date();\n      sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);\n\n      const historicalRevenue = await db\n        .select({\n          period: sql`TO_CHAR(DATE_TRUNC('month', ${claims.paid_date}), 'YYYY-MM')`,\n          revenue: sql`COALESCE(SUM(${claims.total_paid}), 0)::bigint`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.paid_date, sixMonthsAgo),\n            sql`${claims.paid_date} IS NOT NULL`,\n            isNull(claims.deleted_at)\n          )\n        )\n        .groupBy(sql`DATE_TRUNC('month', ${claims.paid_date})`)\n        .orderBy(sql`DATE_TRUNC('month', ${claims.paid_date})`);\n\n      // Calculate moving average\n      const revenues = historicalRevenue.map(h => parseInt(h.revenue));\n      const avgMonthlyRevenue = revenues.length > 0\n        ? revenues.reduce((sum, r) => sum + r, 0) / revenues.length\n        : 0;\n\n      // Simple forecast based on moving average\n      const horizons = [30, 60, 90].filter(h => h <= horizonDays).map(days => {\n        const months = days / 30;\n        const forecast = Math.round(avgMonthlyRevenue * months);\n\n        return {\n          days,\n          forecasted_revenue: forecast,\n          forecasted_revenue_formatted: this.formatCurrency(forecast),\n          confidence: days <= 30 ? 'high' : days <= 60 ? 'medium' : 'low'\n        };\n      });\n\n      return {\n        forecast_date: new Date().toISOString().split('T')[0],\n        horizons,\n        methodology: 'Moving average based on last 6 months'\n      };\n    } catch (error) {\n      logger.error('Error forecasting revenue:', error)\n      throw new Error(`Failed to forecast revenue: ${error.message}`);\n    }\n  }\n\n  /**\n   * Get AR aging trend\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<object>} AR aging trend\n   */\n  async getARAgingTrend(startDate, endDate) {\n    try {\n      const dataPoints = await db\n        .select({\n          period: sql`TO_CHAR(${ar_aging.calculated_date}, 'YYYY-MM-DD')`,\n          bucket_0_30: sql`COALESCE(SUM(CASE WHEN ${ar_aging.aging_bucket} = 'CURRENT_0_30' THEN ${ar_aging.balance} ELSE 0 END), 0)::bigint`,\n          bucket_31_60: sql`COALESCE(SUM(CASE WHEN ${ar_aging.aging_bucket} = 'AGING_31_60' THEN ${ar_aging.balance} ELSE 0 END), 0)::bigint`,\n          bucket_61_90: sql`COALESCE(SUM(CASE WHEN ${ar_aging.aging_bucket} = 'AGING_61_90' THEN ${ar_aging.balance} ELSE 0 END), 0)::bigint`,\n          bucket_91_120: sql`COALESCE(SUM(CASE WHEN ${ar_aging.aging_bucket} = 'AGING_91_120' THEN ${ar_aging.balance} ELSE 0 END), 0)::bigint`,\n          bucket_over_120: sql`COALESCE(SUM(CASE WHEN ${ar_aging.aging_bucket} = 'AGING_OVER_120' THEN ${ar_aging.balance} ELSE 0 END), 0)::bigint`,\n          total_ar: sql`COALESCE(SUM(${ar_aging.balance}), 0)::bigint`\n        })\n        .from(ar_aging)\n        .where(\n          and(\n            gte(ar_aging.calculated_date, startDate),\n            lte(ar_aging.calculated_date, endDate)\n          )\n        )\n        .groupBy(ar_aging.calculated_date)\n        .orderBy(ar_aging.calculated_date);\n\n      const formattedDataPoints = dataPoints.map(dp => ({\n        period: dp.period,\n        buckets: {\n          '0-30_days': parseInt(dp.bucket_0_30),\n          '31-60_days': parseInt(dp.bucket_31_60),\n          '61-90_days': parseInt(dp.bucket_61_90),\n          '91-120_days': parseInt(dp.bucket_91_120),\n          'over_120_days': parseInt(dp.bucket_over_120)\n        },\n        total_ar: parseInt(dp.total_ar)\n      }));\n\n      return {\n        data_points: formattedDataPoints\n      };\n    } catch (error) {\n      logger.error('Error getting AR aging trend:', error)\n      throw new Error(`Failed to get AR aging trend: ${error.message}`);\n    }\n  }\n\n  /**\n   * Calculate financial totals\n   * @param {Date} startDate - Start date\n   * @param {Date} endDate - End date\n   * @returns {Promise<object>} Financial totals\n   */\n  async calculateFinancialTotals(startDate, endDate) {\n    try {\n      const result = await db\n        .select({\n          total_charges: sql`COALESCE(SUM(${claims.total_charges}), 0)::bigint`,\n          total_payments: sql`COALESCE(SUM(${claims.total_paid}), 0)::bigint`\n        })\n        .from(claims)\n        .where(\n          and(\n            gte(claims.service_start_date, startDate),\n            lte(claims.service_start_date, endDate),\n            isNull(claims.deleted_at)\n          )\n        );\n\n      return {\n        total_charges: parseInt(result[0]?.total_charges || 0),\n        total_payments: parseInt(result[0]?.total_payments || 0)\n      };\n    } catch (error) {\n      logger.error('Error calculating financial totals:', error)\n      return { total_charges: 0, total_payments: 0 };\n    }\n  }\n\n  /**\n   * Get date range for period\n   * @param {string} period - Period identifier\n   * @returns {object} Date range\n   */\n  getPeriodDateRange(period) {\n    const now = new Date();\n    const start = new Date();\n    const end = new Date();\n\n    switch (period) {\n      case 'current_month':\n        start.setDate(1);\n        start.setHours(0, 0, 0, 0);\n        break;\n\n      case 'last_month':\n        start.setMonth(now.getMonth() - 1);\n        start.setDate(1);\n        start.setHours(0, 0, 0, 0);\n        end.setDate(0);\n        end.setHours(23, 59, 59, 999);\n        break;\n\n      case 'current_quarter':\n        const quarter = Math.floor(now.getMonth() / 3);\n        start.setMonth(quarter * 3);\n        start.setDate(1);\n        start.setHours(0, 0, 0, 0);\n        break;\n\n      case 'ytd':\n        start.setMonth(0);\n        start.setDate(1);\n        start.setHours(0, 0, 0, 0);\n        break;\n\n      default:\n        start.setDate(1);\n        start.setHours(0, 0, 0, 0);\n    }\n\n    return { start, end };\n  }\n\n  /**\n   * Get previous period date range\n   */\n  getPreviousPeriodDateRange(period) {\n    const current = this.getPeriodDateRange(period);\n    const diff = current.end.getTime() - current.start.getTime();\n\n    return {\n      start: new Date(current.start.getTime() - diff),\n      end: new Date(current.start.getTime() - 1)\n    };\n  }\n\n  /**\n   * Calculate trend\n   */\n  calculateTrend(current, previous, unit, reverse = false) {\n    if (!previous || previous === 0) return 'N/A';\n\n    const change = current - previous;\n    const percentChange = (change / previous) * 100;\n    const sign = (reverse ? -change : change) >= 0 ? '+' : '';\n\n    if (unit === 'percent') {\n      return `${sign}${percentChange.toFixed(1)}%`;\n    } else if (unit === 'days') {\n      return `${sign}${change.toFixed(1)} days`;\n    }\n\n    return `${sign}${change.toFixed(1)}`;\n  }\n\n  /**\n   * Format period\n   */\n  formatPeriod(dateRange) {\n    return `${dateRange.start.getFullYear()}-${String(dateRange.start.getMonth() + 1).padStart(2, '0')}`;\n  }\n\n  /**\n   * Format currency (cents to dollars)\n   */\n  formatCurrency(cents) {\n    const dollars = cents / 100;\n    return `$${dollars.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n  }\n\n  /**\n   * Get date truncation format for SQL\n   */\n  getDateTruncFormat(groupBy) {\n    const formats = {\n      day: 'day',\n      week: 'week',\n      month: 'month',\n      quarter: 'quarter',\n      year: 'year'\n    };\n    return formats[groupBy] || 'month';\n  }\n}\n\n// Export singleton instance\nexport default new AnalyticsService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}