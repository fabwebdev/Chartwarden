e9b6dbfe6f788f7d4d05b1f387c7427a
/* istanbul ignore next */
function cov_1sxxz9dpe7() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/CardiacAssessment.controller.js";
  var hash = "111c2cd88c7b57bf38e1f1e435a581a7e717813e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/CardiacAssessment.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 11,
          column: 8
        },
        end: {
          line: 28,
          column: 9
        }
      },
      "1": {
        start: {
          line: 12,
          column: 39
        },
        end: {
          line: 18,
          column: 39
        }
      },
      "2": {
        start: {
          line: 19,
          column: 12
        },
        end: {
          line: 19,
          column: 28
        }
      },
      "3": {
        start: {
          line: 20,
          column: 12
        },
        end: {
          line: 20,
          column: 38
        }
      },
      "4": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 70
        }
      },
      "5": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 23,
          column: 28
        }
      },
      "6": {
        start: {
          line: 24,
          column: 12
        },
        end: {
          line: 27,
          column: 14
        }
      },
      "7": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 49,
          column: 9
        }
      },
      "8": {
        start: {
          line: 34,
          column: 32
        },
        end: {
          line: 39,
          column: 28
        }
      },
      "9": {
        start: {
          line: 40,
          column: 12
        },
        end: {
          line: 40,
          column: 28
        }
      },
      "10": {
        start: {
          line: 41,
          column: 12
        },
        end: {
          line: 41,
          column: 31
        }
      },
      "11": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 43,
          column: 63
        }
      },
      "12": {
        start: {
          line: 44,
          column: 12
        },
        end: {
          line: 44,
          column: 28
        }
      },
      "13": {
        start: {
          line: 45,
          column: 12
        },
        end: {
          line: 48,
          column: 14
        }
      },
      "14": {
        start: {
          line: 54,
          column: 8
        },
        end: {
          line: 118,
          column: 9
        }
      },
      "15": {
        start: {
          line: 55,
          column: 48
        },
        end: {
          line: 55,
          column: 60
        }
      },
      "16": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 63,
          column: 13
        }
      },
      "17": {
        start: {
          line: 59,
          column: 16
        },
        end: {
          line: 59,
          column: 32
        }
      },
      "18": {
        start: {
          line: 60,
          column: 16
        },
        end: {
          line: 62,
          column: 18
        }
      },
      "19": {
        start: {
          line: 65,
          column: 12
        },
        end: {
          line: 70,
          column: 13
        }
      },
      "20": {
        start: {
          line: 66,
          column: 16
        },
        end: {
          line: 66,
          column: 32
        }
      },
      "21": {
        start: {
          line: 67,
          column: 16
        },
        end: {
          line: 69,
          column: 18
        }
      },
      "22": {
        start: {
          line: 73,
          column: 40
        },
        end: {
          line: 73,
          column: 173
        }
      },
      "23": {
        start: {
          line: 74,
          column: 39
        },
        end: {
          line: 74,
          column: 61
        }
      },
      "24": {
        start: {
          line: 77,
          column: 37
        },
        end: {
          line: 79,
          column: 29
        }
      },
      "25": {
        start: {
          line: 83,
          column: 24
        },
        end: {
          line: 83,
          column: 34
        }
      },
      "26": {
        start: {
          line: 84,
          column: 12
        },
        end: {
          line: 102,
          column: 13
        }
      },
      "27": {
        start: {
          line: 86,
          column: 16
        },
        end: {
          line: 89,
          column: 33
        }
      },
      "28": {
        start: {
          line: 90,
          column: 16
        },
        end: {
          line: 90,
          column: 35
        }
      },
      "29": {
        start: {
          line: 91,
          column: 16
        },
        end: {
          line: 91,
          column: 34
        }
      },
      "30": {
        start: {
          line: 94,
          column: 16
        },
        end: {
          line: 99,
          column: 31
        }
      },
      "31": {
        start: {
          line: 100,
          column: 16
        },
        end: {
          line: 100,
          column: 35
        }
      },
      "32": {
        start: {
          line: 101,
          column: 16
        },
        end: {
          line: 101,
          column: 34
        }
      },
      "33": {
        start: {
          line: 104,
          column: 12
        },
        end: {
          line: 104,
          column: 77
        }
      },
      "34": {
        start: {
          line: 106,
          column: 12
        },
        end: {
          line: 106,
          column: 28
        }
      },
      "35": {
        start: {
          line: 107,
          column: 12
        },
        end: {
          line: 110,
          column: 14
        }
      },
      "36": {
        start: {
          line: 112,
          column: 12
        },
        end: {
          line: 112,
          column: 68
        }
      },
      "37": {
        start: {
          line: 113,
          column: 12
        },
        end: {
          line: 113,
          column: 28
        }
      },
      "38": {
        start: {
          line: 114,
          column: 12
        },
        end: {
          line: 117,
          column: 14
        }
      },
      "39": {
        start: {
          line: 124,
          column: 8
        },
        end: {
          line: 159,
          column: 9
        }
      },
      "40": {
        start: {
          line: 125,
          column: 27
        },
        end: {
          line: 125,
          column: 41
        }
      },
      "41": {
        start: {
          line: 127,
          column: 39
        },
        end: {
          line: 133,
          column: 93
        }
      },
      "42": {
        start: {
          line: 134,
          column: 38
        },
        end: {
          line: 134,
          column: 59
        }
      },
      "43": {
        start: {
          line: 136,
          column: 12
        },
        end: {
          line: 146,
          column: 13
        }
      },
      "44": {
        start: {
          line: 138,
          column: 16
        },
        end: {
          line: 138,
          column: 32
        }
      },
      "45": {
        start: {
          line: 139,
          column: 16
        },
        end: {
          line: 145,
          column: 18
        }
      },
      "46": {
        start: {
          line: 148,
          column: 12
        },
        end: {
          line: 148,
          column: 88
        }
      },
      "47": {
        start: {
          line: 150,
          column: 12
        },
        end: {
          line: 150,
          column: 28
        }
      },
      "48": {
        start: {
          line: 151,
          column: 12
        },
        end: {
          line: 151,
          column: 37
        }
      },
      "49": {
        start: {
          line: 153,
          column: 12
        },
        end: {
          line: 153,
          column: 69
        }
      },
      "50": {
        start: {
          line: 154,
          column: 12
        },
        end: {
          line: 154,
          column: 28
        }
      },
      "51": {
        start: {
          line: 155,
          column: 12
        },
        end: {
          line: 158,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 10,
            column: 4
          },
          end: {
            line: 10,
            column: 5
          }
        },
        loc: {
          start: {
            line: 10,
            column: 32
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 10
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 32,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        loc: {
          start: {
            line: 32,
            column: 38
          },
          end: {
            line: 50,
            column: 5
          }
        },
        line: 32
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 53,
            column: 4
          },
          end: {
            line: 53,
            column: 5
          }
        },
        loc: {
          start: {
            line: 53,
            column: 32
          },
          end: {
            line: 119,
            column: 5
          }
        },
        line: 53
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 123,
            column: 4
          },
          end: {
            line: 123,
            column: 5
          }
        },
        loc: {
          start: {
            line: 123,
            column: 31
          },
          end: {
            line: 160,
            column: 5
          }
        },
        line: 123
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 58,
            column: 12
          },
          end: {
            line: 63,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 58,
            column: 12
          },
          end: {
            line: 63,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 58
      },
      "1": {
        loc: {
          start: {
            line: 65,
            column: 12
          },
          end: {
            line: 70,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 65,
            column: 12
          },
          end: {
            line: 70,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 65
      },
      "2": {
        loc: {
          start: {
            line: 77,
            column: 37
          },
          end: {
            line: 79,
            column: 29
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 78,
            column: 18
          },
          end: {
            line: 78,
            column: 39
          }
        }, {
          start: {
            line: 79,
            column: 18
          },
          end: {
            line: 79,
            column: 29
          }
        }],
        line: 77
      },
      "3": {
        loc: {
          start: {
            line: 84,
            column: 12
          },
          end: {
            line: 102,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 84,
            column: 12
          },
          end: {
            line: 102,
            column: 13
          }
        }, {
          start: {
            line: 92,
            column: 19
          },
          end: {
            line: 102,
            column: 13
          }
        }],
        line: 84
      },
      "4": {
        loc: {
          start: {
            line: 136,
            column: 12
          },
          end: {
            line: 146,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 136,
            column: 12
          },
          end: {
            line: 146,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 136
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "111c2cd88c7b57bf38e1f1e435a581a7e717813e"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1sxxz9dpe7 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1sxxz9dpe7();
import { db } from "../../config/db.drizzle.js";
import { cardiac_assessment } from "../../db/schemas/cardiacAssessment.schema.js";
import { cardiac } from "../../db/schemas/cardiac.schema.js";
import { eq } from "drizzle-orm";
import { logAudit } from "../../middleware/audit.middleware.js";
import { logger } from '../../utils/logger.js';
class CardiacAssessmentController {
  // Get all cardiac assessments
  async index(request, reply) {
    /* istanbul ignore next */
    cov_1sxxz9dpe7().f[0]++;
    cov_1sxxz9dpe7().s[0]++;
    try {
      const cardiacAssessments =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[1]++, await db.select({
        id: cardiac_assessment.id,
        patient_id: cardiac_assessment.patient_id,
        cardiac_ids: cardiac_assessment.cardiac_ids,
        createdAt: cardiac_assessment.createdAt,
        updatedAt: cardiac_assessment.updatedAt
      }).from(cardiac_assessment));
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[2]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[3]++;
      return cardiacAssessments;
    } catch (error) {
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[4]++;
      logger.error("Error fetching cardiac assessments:", error);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[5]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[6]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Get all cardiac options
  async cardiacList(request, reply) {
    /* istanbul ignore next */
    cov_1sxxz9dpe7().f[1]++;
    cov_1sxxz9dpe7().s[7]++;
    try {
      const cardiacList =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[8]++, await db.select({
        id: cardiac.id,
        name: cardiac.name,
        createdAt: cardiac.createdAt,
        updatedAt: cardiac.updatedAt
      }).from(cardiac));
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[9]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[10]++;
      return cardiacList;
    } catch (error) {
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[11]++;
      logger.error("Error fetching cardiac list:", error);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[12]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[13]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Store or update cardiac assessment
  async store(request, reply) {
    /* istanbul ignore next */
    cov_1sxxz9dpe7().f[2]++;
    cov_1sxxz9dpe7().s[14]++;
    try {
      const {
        patient_id,
        cardiac_ids
      } =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[15]++, request.body);

      // Validate required fields
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[16]++;
      if (!patient_id) {
        /* istanbul ignore next */
        cov_1sxxz9dpe7().b[0][0]++;
        cov_1sxxz9dpe7().s[17]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_1sxxz9dpe7().s[18]++;
        return {
          message: "Patient ID is required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_1sxxz9dpe7().b[0][1]++;
      }
      cov_1sxxz9dpe7().s[19]++;
      if (!cardiac_ids) {
        /* istanbul ignore next */
        cov_1sxxz9dpe7().b[1][0]++;
        cov_1sxxz9dpe7().s[20]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_1sxxz9dpe7().s[21]++;
        return {
          message: "Cardiac IDs are required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_1sxxz9dpe7().b[1][1]++;
      }

      // Check if cardiac assessment already exists for this patient
      const existingAssessments =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[22]++, await db.select({
        id: cardiac_assessment.id
      }).from(cardiac_assessment).where(eq(cardiac_assessment.patient_id, patient_id)).limit(1));
      const existingAssessment =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[23]++, existingAssessments[0]);

      // Convert cardiac_ids array to comma-separated string
      const cardiacIdsString =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[24]++, Array.isArray(cardiac_ids) ?
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().b[2][0]++, cardiac_ids.join(",")) :
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().b[2][1]++, cardiac_ids));
      let result;
      let action;
      const now =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[25]++, new Date());
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[26]++;
      if (existingAssessment) {
        /* istanbul ignore next */
        cov_1sxxz9dpe7().b[3][0]++;
        cov_1sxxz9dpe7().s[27]++;
        // Update existing cardiac assessment
        result = await db.update(cardiac_assessment).set({
          cardiac_ids: cardiacIdsString,
          updatedAt: now
        }).where(eq(cardiac_assessment.patient_id, patient_id)).returning();
        /* istanbul ignore next */
        cov_1sxxz9dpe7().s[28]++;
        result = result[0];
        /* istanbul ignore next */
        cov_1sxxz9dpe7().s[29]++;
        action = "UPDATE";
      } else {
        /* istanbul ignore next */
        cov_1sxxz9dpe7().b[3][1]++;
        cov_1sxxz9dpe7().s[30]++;
        // Create new cardiac assessment
        result = await db.insert(cardiac_assessment).values({
          patient_id: patient_id,
          cardiac_ids: cardiacIdsString,
          createdAt: now,
          updatedAt: now
        }).returning();
        /* istanbul ignore next */
        cov_1sxxz9dpe7().s[31]++;
        result = result[0];
        /* istanbul ignore next */
        cov_1sxxz9dpe7().s[32]++;
        action = "CREATE";
      }
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[33]++;
      await logAudit(request, action, "cardiac_assessment", result.id);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[34]++;
      reply.code(201);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[35]++;
      return {
        message: "Cardiac assessment created or updated successfully",
        data: result
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[36]++;
      logger.error("Error storing cardiac assessment:", error);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[37]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[38]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Show cardiac assessment for a specific patient
  // Returns empty data if no assessment exists (to allow frontend to render form)
  async show(request, reply) {
    /* istanbul ignore next */
    cov_1sxxz9dpe7().f[3]++;
    cov_1sxxz9dpe7().s[39]++;
    try {
      const {
        id
      } =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[40]++, request.params);
      const cardiacAssessments =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[41]++, await db.select({
        id: cardiac_assessment.id,
        patient_id: cardiac_assessment.patient_id,
        cardiac_ids: cardiac_assessment.cardiac_ids,
        createdAt: cardiac_assessment.createdAt,
        updatedAt: cardiac_assessment.updatedAt
      }).from(cardiac_assessment).where(eq(cardiac_assessment.patient_id, id)).limit(1));
      const cardiacAssessment =
      /* istanbul ignore next */
      (cov_1sxxz9dpe7().s[42]++, cardiacAssessments[0]);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[43]++;
      if (!cardiacAssessment) {
        /* istanbul ignore next */
        cov_1sxxz9dpe7().b[4][0]++;
        cov_1sxxz9dpe7().s[44]++;
        // Return 200 with empty data instead of 404, so frontend can render form
        reply.code(200);
        /* istanbul ignore next */
        cov_1sxxz9dpe7().s[45]++;
        return {
          id: null,
          patient_id: parseInt(id),
          cardiac_ids: "",
          createdAt: null,
          updatedAt: null
        };
      } else
      /* istanbul ignore next */
      {
        cov_1sxxz9dpe7().b[4][1]++;
      }
      cov_1sxxz9dpe7().s[46]++;
      await logAudit(request, "READ", "cardiac_assessment", cardiacAssessment.id);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[47]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[48]++;
      return cardiacAssessment;
    } catch (error) {
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[49]++;
      logger.error("Error fetching cardiac assessment:", error);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[50]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1sxxz9dpe7().s[51]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }
}
export default new CardiacAssessmentController();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXN4eHo5ZHBlNyIsImFjdHVhbENvdmVyYWdlIiwiZGIiLCJjYXJkaWFjX2Fzc2Vzc21lbnQiLCJjYXJkaWFjIiwiZXEiLCJsb2dBdWRpdCIsImxvZ2dlciIsIkNhcmRpYWNBc3Nlc3NtZW50Q29udHJvbGxlciIsImluZGV4IiwicmVxdWVzdCIsInJlcGx5IiwiZiIsInMiLCJjYXJkaWFjQXNzZXNzbWVudHMiLCJzZWxlY3QiLCJpZCIsInBhdGllbnRfaWQiLCJjYXJkaWFjX2lkcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImZyb20iLCJjb2RlIiwiZXJyb3IiLCJtZXNzYWdlIiwiY2FyZGlhY0xpc3QiLCJuYW1lIiwic3RvcmUiLCJib2R5IiwiYiIsImV4aXN0aW5nQXNzZXNzbWVudHMiLCJ3aGVyZSIsImxpbWl0IiwiZXhpc3RpbmdBc3Nlc3NtZW50IiwiY2FyZGlhY0lkc1N0cmluZyIsIkFycmF5IiwiaXNBcnJheSIsImpvaW4iLCJyZXN1bHQiLCJhY3Rpb24iLCJub3ciLCJEYXRlIiwidXBkYXRlIiwic2V0IiwicmV0dXJuaW5nIiwiaW5zZXJ0IiwidmFsdWVzIiwiZGF0YSIsInNob3ciLCJwYXJhbXMiLCJjYXJkaWFjQXNzZXNzbWVudCIsInBhcnNlSW50Il0sInNvdXJjZXMiOlsiQ2FyZGlhY0Fzc2Vzc21lbnQuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi9jb25maWcvZGIuZHJpenpsZS5qc1wiO1xuaW1wb3J0IHsgY2FyZGlhY19hc3Nlc3NtZW50IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvY2FyZGlhY0Fzc2Vzc21lbnQuc2NoZW1hLmpzXCI7XG5pbXBvcnQgeyBjYXJkaWFjIH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvY2FyZGlhYy5zY2hlbWEuanNcIjtcbmltcG9ydCB7IGVxIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbXBvcnQgeyBsb2dBdWRpdCB9IGZyb20gXCIuLi8uLi9taWRkbGV3YXJlL2F1ZGl0Lm1pZGRsZXdhcmUuanNcIjtcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyLmpzJztcbmNsYXNzIENhcmRpYWNBc3Nlc3NtZW50Q29udHJvbGxlciB7XG4gICAgLy8gR2V0IGFsbCBjYXJkaWFjIGFzc2Vzc21lbnRzXG4gICAgYXN5bmMgaW5kZXgocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmRpYWNBc3Nlc3NtZW50cyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgaWQ6IGNhcmRpYWNfYXNzZXNzbWVudC5pZCxcbiAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBjYXJkaWFjX2Fzc2Vzc21lbnQucGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICBjYXJkaWFjX2lkczogY2FyZGlhY19hc3Nlc3NtZW50LmNhcmRpYWNfaWRzLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogY2FyZGlhY19hc3Nlc3NtZW50LmNyZWF0ZWRBdCxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGNhcmRpYWNfYXNzZXNzbWVudC51cGRhdGVkQXQsXG4gICAgICAgICAgICB9KS5mcm9tKGNhcmRpYWNfYXNzZXNzbWVudCk7XG4gICAgICAgICAgICByZXBseS5jb2RlKDIwMCk7XG4gICAgICAgICAgICByZXR1cm4gY2FyZGlhY0Fzc2Vzc21lbnRzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2FyZGlhYyBhc3Nlc3NtZW50czpcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IGFsbCBjYXJkaWFjIG9wdGlvbnNcbiAgICBhc3luYyBjYXJkaWFjTGlzdChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY2FyZGlhY0xpc3QgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBjYXJkaWFjLmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGNhcmRpYWMubmFtZSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGNhcmRpYWMuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogY2FyZGlhYy51cGRhdGVkQXQsXG4gICAgICAgICAgICB9KS5mcm9tKGNhcmRpYWMpO1xuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIGNhcmRpYWNMaXN0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2FyZGlhYyBsaXN0OlwiLCBlcnJvcilcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdG9yZSBvciB1cGRhdGUgY2FyZGlhYyBhc3Nlc3NtZW50XG4gICAgYXN5bmMgc3RvcmUocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGF0aWVudF9pZCwgY2FyZGlhY19pZHMgfSA9IHJlcXVlc3QuYm9keTtcblxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgICAgICBpZiAoIXBhdGllbnRfaWQpIHtcbiAgICAgICAgICAgICAgICByZXBseS5jb2RlKDQwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJQYXRpZW50IElEIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjYXJkaWFjX2lkcykge1xuICAgICAgICAgICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkNhcmRpYWMgSURzIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGNhcmRpYWMgYXNzZXNzbWVudCBhbHJlYWR5IGV4aXN0cyBmb3IgdGhpcyBwYXRpZW50XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Fzc2Vzc21lbnRzID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IGNhcmRpYWNfYXNzZXNzbWVudC5pZCB9KS5mcm9tKGNhcmRpYWNfYXNzZXNzbWVudCkud2hlcmUoZXEoY2FyZGlhY19hc3Nlc3NtZW50LnBhdGllbnRfaWQsIHBhdGllbnRfaWQpKS5saW1pdCgxKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQXNzZXNzbWVudCA9IGV4aXN0aW5nQXNzZXNzbWVudHNbMF07XG5cbiAgICAgICAgICAgIC8vIENvbnZlcnQgY2FyZGlhY19pZHMgYXJyYXkgdG8gY29tbWEtc2VwYXJhdGVkIHN0cmluZ1xuICAgICAgICAgICAgY29uc3QgY2FyZGlhY0lkc1N0cmluZyA9IEFycmF5LmlzQXJyYXkoY2FyZGlhY19pZHMpXG4gICAgICAgICAgICAgICAgPyBjYXJkaWFjX2lkcy5qb2luKFwiLFwiKVxuICAgICAgICAgICAgICAgIDogY2FyZGlhY19pZHM7XG5cbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBsZXQgYWN0aW9uO1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0Fzc2Vzc21lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgY2FyZGlhYyBhc3Nlc3NtZW50XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGIudXBkYXRlKGNhcmRpYWNfYXNzZXNzbWVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldCh7IGNhcmRpYWNfaWRzOiBjYXJkaWFjSWRzU3RyaW5nLCB1cGRhdGVkQXQ6IG5vdyB9KVxuICAgICAgICAgICAgICAgICAgICAud2hlcmUoZXEoY2FyZGlhY19hc3Nlc3NtZW50LnBhdGllbnRfaWQsIHBhdGllbnRfaWQpKVxuICAgICAgICAgICAgICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9IFwiVVBEQVRFXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgY2FyZGlhYyBhc3Nlc3NtZW50XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGIuaW5zZXJ0KGNhcmRpYWNfYXNzZXNzbWVudCkudmFsdWVzKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aWVudF9pZDogcGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgY2FyZGlhY19pZHM6IGNhcmRpYWNJZHNTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbm93LFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgICAgICAgICAgICB9KS5yZXR1cm5pbmcoKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbMF07XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gXCJDUkVBVEVcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgbG9nQXVkaXQocmVxdWVzdCwgYWN0aW9uLCBcImNhcmRpYWNfYXNzZXNzbWVudFwiLCByZXN1bHQuaWQpO1xuXG4gICAgICAgICAgICByZXBseS5jb2RlKDIwMSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ2FyZGlhYyBhc3Nlc3NtZW50IGNyZWF0ZWQgb3IgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3Igc3RvcmluZyBjYXJkaWFjIGFzc2Vzc21lbnQ6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNob3cgY2FyZGlhYyBhc3Nlc3NtZW50IGZvciBhIHNwZWNpZmljIHBhdGllbnRcbiAgICAvLyBSZXR1cm5zIGVtcHR5IGRhdGEgaWYgbm8gYXNzZXNzbWVudCBleGlzdHMgKHRvIGFsbG93IGZyb250ZW5kIHRvIHJlbmRlciBmb3JtKVxuICAgIGFzeW5jIHNob3cocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcXVlc3QucGFyYW1zO1xuXG4gICAgICAgICAgICBjb25zdCBjYXJkaWFjQXNzZXNzbWVudHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBjYXJkaWFjX2Fzc2Vzc21lbnQuaWQsXG4gICAgICAgICAgICAgICAgcGF0aWVudF9pZDogY2FyZGlhY19hc3Nlc3NtZW50LnBhdGllbnRfaWQsXG4gICAgICAgICAgICAgICAgY2FyZGlhY19pZHM6IGNhcmRpYWNfYXNzZXNzbWVudC5jYXJkaWFjX2lkcyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGNhcmRpYWNfYXNzZXNzbWVudC5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBjYXJkaWFjX2Fzc2Vzc21lbnQudXBkYXRlZEF0LFxuICAgICAgICAgICAgfSkuZnJvbShjYXJkaWFjX2Fzc2Vzc21lbnQpLndoZXJlKGVxKGNhcmRpYWNfYXNzZXNzbWVudC5wYXRpZW50X2lkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgICAgICAgY29uc3QgY2FyZGlhY0Fzc2Vzc21lbnQgPSBjYXJkaWFjQXNzZXNzbWVudHNbMF07XG5cbiAgICAgICAgICAgIGlmICghY2FyZGlhY0Fzc2Vzc21lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gMjAwIHdpdGggZW1wdHkgZGF0YSBpbnN0ZWFkIG9mIDQwNCwgc28gZnJvbnRlbmQgY2FuIHJlbmRlciBmb3JtXG4gICAgICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBwYXJzZUludChpZCksXG4gICAgICAgICAgICAgICAgICAgIGNhcmRpYWNfaWRzOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBsb2dBdWRpdChyZXF1ZXN0LCBcIlJFQURcIiwgXCJjYXJkaWFjX2Fzc2Vzc21lbnRcIiwgY2FyZGlhY0Fzc2Vzc21lbnQuaWQpO1xuXG4gICAgICAgICAgICByZXBseS5jb2RlKDIwMCk7XG4gICAgICAgICAgICByZXR1cm4gY2FyZGlhY0Fzc2Vzc21lbnQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjYXJkaWFjIGFzc2Vzc21lbnQ6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IENhcmRpYWNBc3Nlc3NtZW50Q29udHJvbGxlcigpOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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