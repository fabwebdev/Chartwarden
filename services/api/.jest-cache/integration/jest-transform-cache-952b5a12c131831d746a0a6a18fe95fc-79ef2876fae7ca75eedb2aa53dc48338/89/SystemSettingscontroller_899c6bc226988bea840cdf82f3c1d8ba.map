{"version":3,"names":["cov_tewcq05oc","actualCoverage","db","admin_settings","admin_settings_history","clearinghouse_configurations","eq","sql","and","desc","asc","inArray","logger","crypto","SystemSettingsController","encryptionKey","f","s","b","process","env","SETTINGS_ENCRYPTION_KEY","encryptValue","value","iv","randomBytes","key","scryptSync","cipher","createCipheriv","encrypted","update","final","toString","error","decryptValue","encryptedValue","includes","ivHex","split","Buffer","from","decipher","createDecipheriv","decrypted","maskValue","length","repeat","slice","listSettings","request","reply","category","query","select","where","toUpperCase","settings","orderBy","display_order","categories","setting","cat","settingData","is_sensitive","setting_value","is_masked","push","code","send","success","data","total_count","message","getSetting","params","setting_key","limit","updateSetting","reason","body","existing","is_readonly","validationError","validateValue","newValue","updated","set","updated_by_id","user","id","updated_at","Date","returning","insert","values","setting_id","previous_value","new_value","change_reason","ip_address","ip","user_agent","headers","session_id","session","changed_by_id","info","responseData","requires_restart","bulkUpdateSettings","Array","isArray","results","errors","item","updated_count","updated_keys","getSettingsHistory","offset","history","changed_at","parseInt","count","resetSetting","default_value","testClearinghouseConnection","api_endpoint","username","password","connection_timeout","URL","startTime","now","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","clearTimeout","responseTime","ok","status","connection_details","status_text","statusText","response_time_ms","endpoint","reachable","auth_required","fetchError","name","initializeSettings","existingCount","existing_count","defaultSettings","description","setting_type","options","JSON","stringify","label","validation_rules","min","max","map","parse","created_by_id","created_count","rules","num","isNaN","undefined","emailRegex","test","validValues","o","join","required","pattern","regex","RegExp"],"sources":["SystemSettings.controller.js"],"sourcesContent":["import { db } from '../db/index.js';\nimport { admin_settings, admin_settings_history } from '../db/schemas/adminSettings.schema.js';\nimport { clearinghouse_configurations } from '../db/schemas/clearinghouse.schema.js';\nimport { eq, sql, and, desc, asc, inArray } from 'drizzle-orm';\nimport { logger } from '../utils/logger.js';\nimport crypto from 'crypto';\n\n/**\n * System Settings Controller\n * Admin-only endpoint for managing system-wide configuration settings\n *\n * Features:\n *   - System configuration management (CRUD)\n *   - Clearinghouse integration settings\n *   - Settings history/audit trail\n *   - Connection testing for clearinghouse\n *   - Encrypted credential storage\n *\n * Endpoints:\n * - GET /api/admin/settings - List all settings by category\n * - GET /api/admin/settings/:key - Get setting by key\n * - PUT /api/admin/settings/:key - Update setting\n * - POST /api/admin/settings/bulk - Bulk update settings\n * - GET /api/admin/settings/history - Get settings change history\n * - POST /api/admin/settings/clearinghouse/test - Test clearinghouse connection\n * - POST /api/admin/settings/reset/:key - Reset setting to default\n */\nclass SystemSettingsController {\n\n  // Encryption key should be in environment - using a default for development\n  get encryptionKey() {\n    return process.env.SETTINGS_ENCRYPTION_KEY || 'chartwarden-settings-encryption-key-32';\n  }\n\n  /**\n   * Encrypt sensitive value\n   * @private\n   */\n  encryptValue(value) {\n    if (!value) return value;\n    try {\n      const iv = crypto.randomBytes(16);\n      const key = crypto.scryptSync(this.encryptionKey, 'salt', 32);\n      const cipher = crypto.createCipheriv('aes-256-cbc', key, iv);\n      let encrypted = cipher.update(value, 'utf8', 'hex');\n      encrypted += cipher.final('hex');\n      return iv.toString('hex') + ':' + encrypted;\n    } catch (error) {\n      logger.error('Error encrypting value:', error);\n      return value;\n    }\n  }\n\n  /**\n   * Decrypt sensitive value\n   * @private\n   */\n  decryptValue(encryptedValue) {\n    if (!encryptedValue || !encryptedValue.includes(':')) return encryptedValue;\n    try {\n      const [ivHex, encrypted] = encryptedValue.split(':');\n      const iv = Buffer.from(ivHex, 'hex');\n      const key = crypto.scryptSync(this.encryptionKey, 'salt', 32);\n      const decipher = crypto.createDecipheriv('aes-256-cbc', key, iv);\n      let decrypted = decipher.update(encrypted, 'hex', 'utf8');\n      decrypted += decipher.final('utf8');\n      return decrypted;\n    } catch (error) {\n      logger.error('Error decrypting value:', error);\n      return encryptedValue;\n    }\n  }\n\n  /**\n   * Mask sensitive value for display\n   * @private\n   */\n  maskValue(value) {\n    if (!value) return value;\n    if (value.length <= 4) return '****';\n    return '*'.repeat(value.length - 4) + value.slice(-4);\n  }\n\n  /**\n   * List all settings grouped by category\n   * GET /api/admin/settings\n   *\n   * Query: category (optional)\n   * Response: { success, data: { categories: { category: settings[] } } }\n   */\n  async listSettings(request, reply) {\n    try {\n      const { category } = request.query;\n\n      let query = db.select().from(admin_settings);\n\n      if (category) {\n        query = query.where(eq(admin_settings.category, category.toUpperCase()));\n      }\n\n      const settings = await query.orderBy(\n        asc(admin_settings.category),\n        asc(admin_settings.display_order)\n      );\n\n      // Group by category and mask sensitive values\n      const categories = {};\n      for (const setting of settings) {\n        const cat = setting.category;\n        if (!categories[cat]) {\n          categories[cat] = [];\n        }\n\n        // Mask sensitive values\n        const settingData = { ...setting };\n        if (setting.is_sensitive && setting.setting_value) {\n          settingData.setting_value = this.maskValue(setting.setting_value);\n          settingData.is_masked = true;\n        }\n\n        categories[cat].push(settingData);\n      }\n\n      return reply.code(200).send({\n        success: true,\n        data: {\n          categories,\n          total_count: settings.length\n        }\n      });\n    } catch (error) {\n      logger.error('Error listing settings:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Get setting by key\n   * GET /api/admin/settings/:key\n   *\n   * Params: key (setting key)\n   * Response: { success, data: setting }\n   */\n  async getSetting(request, reply) {\n    try {\n      const { key } = request.params;\n\n      const [setting] = await db\n        .select()\n        .from(admin_settings)\n        .where(eq(admin_settings.setting_key, key))\n        .limit(1);\n\n      if (!setting) {\n        return reply.code(404).send({\n          success: false,\n          error: `Setting \"${key}\" not found`\n        });\n      }\n\n      // Mask sensitive value\n      const settingData = { ...setting };\n      if (setting.is_sensitive && setting.setting_value) {\n        settingData.setting_value = this.maskValue(setting.setting_value);\n        settingData.is_masked = true;\n      }\n\n      return reply.code(200).send({\n        success: true,\n        data: settingData\n      });\n    } catch (error) {\n      logger.error('Error getting setting:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Update setting\n   * PUT /api/admin/settings/:key\n   *\n   * Params: key (setting key)\n   * Body: { value, reason }\n   * Response: { success, message, data: setting }\n   */\n  async updateSetting(request, reply) {\n    try {\n      const { key } = request.params;\n      const { value, reason } = request.body;\n\n      // Get existing setting\n      const [existing] = await db\n        .select()\n        .from(admin_settings)\n        .where(eq(admin_settings.setting_key, key))\n        .limit(1);\n\n      if (!existing) {\n        return reply.code(404).send({\n          success: false,\n          error: `Setting \"${key}\" not found`\n        });\n      }\n\n      if (existing.is_readonly) {\n        return reply.code(403).send({\n          success: false,\n          error: `Setting \"${key}\" is read-only and cannot be modified`\n        });\n      }\n\n      // Validate value based on type\n      const validationError = this.validateValue(value, existing);\n      if (validationError) {\n        return reply.code(400).send({\n          success: false,\n          error: validationError\n        });\n      }\n\n      // Encrypt if sensitive\n      let newValue = value;\n      if (existing.is_sensitive && value) {\n        newValue = this.encryptValue(value);\n      }\n\n      // Update setting\n      const [updated] = await db\n        .update(admin_settings)\n        .set({\n          setting_value: newValue?.toString(),\n          updated_by_id: request.user?.id,\n          updated_at: new Date()\n        })\n        .where(eq(admin_settings.id, existing.id))\n        .returning();\n\n      // Record history\n      await db.insert(admin_settings_history).values({\n        setting_id: existing.id,\n        setting_key: key,\n        previous_value: existing.is_sensitive ? '[ENCRYPTED]' : existing.setting_value,\n        new_value: existing.is_sensitive ? '[ENCRYPTED]' : newValue?.toString(),\n        change_reason: reason,\n        ip_address: request.ip,\n        user_agent: request.headers['user-agent'],\n        session_id: request.session?.id,\n        changed_by_id: request.user?.id\n      });\n\n      logger.info(`Setting \"${key}\" updated by user ${request.user?.id}`);\n\n      // Mask response if sensitive\n      const responseData = { ...updated };\n      if (existing.is_sensitive) {\n        responseData.setting_value = this.maskValue(value);\n        responseData.is_masked = true;\n      }\n\n      return reply.code(200).send({\n        success: true,\n        message: `Setting \"${key}\" updated successfully`,\n        data: responseData,\n        requires_restart: existing.requires_restart\n      });\n    } catch (error) {\n      logger.error('Error updating setting:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Bulk update multiple settings\n   * POST /api/admin/settings/bulk\n   *\n   * Body: { settings: [{ key, value }], reason }\n   * Response: { success, message, updated_count, errors }\n   */\n  async bulkUpdateSettings(request, reply) {\n    try {\n      const { settings, reason } = request.body;\n\n      if (!settings || !Array.isArray(settings)) {\n        return reply.code(400).send({\n          success: false,\n          error: 'settings array is required'\n        });\n      }\n\n      const results = {\n        updated: [],\n        errors: []\n      };\n\n      for (const item of settings) {\n        try {\n          // Get existing setting\n          const [existing] = await db\n            .select()\n            .from(admin_settings)\n            .where(eq(admin_settings.setting_key, item.key))\n            .limit(1);\n\n          if (!existing) {\n            results.errors.push({ key: item.key, error: 'Setting not found' });\n            continue;\n          }\n\n          if (existing.is_readonly) {\n            results.errors.push({ key: item.key, error: 'Setting is read-only' });\n            continue;\n          }\n\n          // Validate\n          const validationError = this.validateValue(item.value, existing);\n          if (validationError) {\n            results.errors.push({ key: item.key, error: validationError });\n            continue;\n          }\n\n          // Encrypt if sensitive\n          let newValue = item.value;\n          if (existing.is_sensitive && item.value) {\n            newValue = this.encryptValue(item.value);\n          }\n\n          // Update\n          await db\n            .update(admin_settings)\n            .set({\n              setting_value: newValue?.toString(),\n              updated_by_id: request.user?.id,\n              updated_at: new Date()\n            })\n            .where(eq(admin_settings.id, existing.id));\n\n          // Record history\n          await db.insert(admin_settings_history).values({\n            setting_id: existing.id,\n            setting_key: item.key,\n            previous_value: existing.is_sensitive ? '[ENCRYPTED]' : existing.setting_value,\n            new_value: existing.is_sensitive ? '[ENCRYPTED]' : newValue?.toString(),\n            change_reason: reason,\n            ip_address: request.ip,\n            user_agent: request.headers['user-agent'],\n            session_id: request.session?.id,\n            changed_by_id: request.user?.id\n          });\n\n          results.updated.push(item.key);\n        } catch (error) {\n          results.errors.push({ key: item.key, error: error.message });\n        }\n      }\n\n      logger.info(`Bulk settings update by user ${request.user?.id}: ${results.updated.length} updated, ${results.errors.length} errors`);\n\n      return reply.code(200).send({\n        success: true,\n        message: `${results.updated.length} settings updated successfully`,\n        updated_count: results.updated.length,\n        updated_keys: results.updated,\n        errors: results.errors\n      });\n    } catch (error) {\n      logger.error('Error bulk updating settings:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Get settings change history\n   * GET /api/admin/settings/history\n   *\n   * Query: key (optional), limit (default 50), offset (default 0)\n   * Response: { success, data: history[] }\n   */\n  async getSettingsHistory(request, reply) {\n    try {\n      const { key, limit = 50, offset = 0 } = request.query;\n\n      let query = db.select().from(admin_settings_history);\n\n      if (key) {\n        query = query.where(eq(admin_settings_history.setting_key, key));\n      }\n\n      const history = await query\n        .orderBy(desc(admin_settings_history.changed_at))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      return reply.code(200).send({\n        success: true,\n        count: history.length,\n        data: history\n      });\n    } catch (error) {\n      logger.error('Error getting settings history:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Reset setting to default value\n   * POST /api/admin/settings/reset/:key\n   *\n   * Params: key (setting key)\n   * Response: { success, message, data: setting }\n   */\n  async resetSetting(request, reply) {\n    try {\n      const { key } = request.params;\n      const { reason } = request.body;\n\n      // Get existing setting\n      const [existing] = await db\n        .select()\n        .from(admin_settings)\n        .where(eq(admin_settings.setting_key, key))\n        .limit(1);\n\n      if (!existing) {\n        return reply.code(404).send({\n          success: false,\n          error: `Setting \"${key}\" not found`\n        });\n      }\n\n      if (existing.is_readonly) {\n        return reply.code(403).send({\n          success: false,\n          error: `Setting \"${key}\" is read-only`\n        });\n      }\n\n      // Reset to default\n      const [updated] = await db\n        .update(admin_settings)\n        .set({\n          setting_value: existing.default_value,\n          updated_by_id: request.user?.id,\n          updated_at: new Date()\n        })\n        .where(eq(admin_settings.id, existing.id))\n        .returning();\n\n      // Record history\n      await db.insert(admin_settings_history).values({\n        setting_id: existing.id,\n        setting_key: key,\n        previous_value: existing.is_sensitive ? '[ENCRYPTED]' : existing.setting_value,\n        new_value: existing.is_sensitive ? '[ENCRYPTED]' : existing.default_value,\n        change_reason: reason || 'Reset to default value',\n        ip_address: request.ip,\n        user_agent: request.headers['user-agent'],\n        session_id: request.session?.id,\n        changed_by_id: request.user?.id\n      });\n\n      logger.info(`Setting \"${key}\" reset to default by user ${request.user?.id}`);\n\n      return reply.code(200).send({\n        success: true,\n        message: `Setting \"${key}\" reset to default successfully`,\n        data: updated\n      });\n    } catch (error) {\n      logger.error('Error resetting setting:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Test clearinghouse connection\n   * POST /api/admin/settings/clearinghouse/test\n   *\n   * Body: { api_endpoint, username, password, connection_timeout }\n   * Response: { success, message, connection_details }\n   */\n  async testClearinghouseConnection(request, reply) {\n    try {\n      const { api_endpoint, username, password, connection_timeout = 30000 } = request.body;\n\n      if (!api_endpoint) {\n        return reply.code(400).send({\n          success: false,\n          error: 'API endpoint is required for connection test'\n        });\n      }\n\n      // Validate URL format\n      try {\n        new URL(api_endpoint);\n      } catch {\n        return reply.code(400).send({\n          success: false,\n          error: 'Invalid API endpoint URL format'\n        });\n      }\n\n      const startTime = Date.now();\n\n      // Simulate connection test (in production, this would actually connect)\n      // For now, we'll do a basic HTTP check\n      try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), connection_timeout);\n\n        const response = await fetch(api_endpoint, {\n          method: 'HEAD',\n          signal: controller.signal,\n          headers: username && password ? {\n            'Authorization': 'Basic ' + Buffer.from(`${username}:${password}`).toString('base64')\n          } : {}\n        });\n\n        clearTimeout(timeoutId);\n\n        const responseTime = Date.now() - startTime;\n\n        if (response.ok || response.status === 401 || response.status === 403) {\n          // 401/403 means the endpoint is reachable but needs auth\n          return reply.code(200).send({\n            success: true,\n            message: 'Connection test successful',\n            connection_details: {\n              status: response.status,\n              status_text: response.statusText,\n              response_time_ms: responseTime,\n              endpoint: api_endpoint,\n              reachable: true,\n              auth_required: response.status === 401 || response.status === 403\n            }\n          });\n        } else {\n          return reply.code(200).send({\n            success: false,\n            message: `Connection failed with status ${response.status}`,\n            connection_details: {\n              status: response.status,\n              status_text: response.statusText,\n              response_time_ms: responseTime,\n              endpoint: api_endpoint,\n              reachable: true,\n              error: `Server returned status ${response.status}`\n            }\n          });\n        }\n      } catch (fetchError) {\n        const responseTime = Date.now() - startTime;\n\n        if (fetchError.name === 'AbortError') {\n          return reply.code(200).send({\n            success: false,\n            message: 'Connection timeout',\n            connection_details: {\n              endpoint: api_endpoint,\n              reachable: false,\n              response_time_ms: responseTime,\n              error: `Connection timed out after ${connection_timeout}ms`\n            }\n          });\n        }\n\n        return reply.code(200).send({\n          success: false,\n          message: 'Connection failed',\n          connection_details: {\n            endpoint: api_endpoint,\n            reachable: false,\n            response_time_ms: responseTime,\n            error: fetchError.message\n          }\n        });\n      }\n    } catch (error) {\n      logger.error('Error testing clearinghouse connection:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Initialize default settings (for first-time setup)\n   * POST /api/admin/settings/initialize\n   *\n   * Response: { success, message, created_count }\n   */\n  async initializeSettings(request, reply) {\n    try {\n      // Check if settings already exist\n      const [existingCount] = await db\n        .select({ count: sql`COUNT(*)::int` })\n        .from(admin_settings);\n\n      if (existingCount.count > 0) {\n        return reply.code(200).send({\n          success: true,\n          message: 'Settings already initialized',\n          existing_count: existingCount.count\n        });\n      }\n\n      const defaultSettings = [\n        // System Configuration\n        {\n          setting_key: 'system.timezone',\n          name: 'System Timezone',\n          description: 'Default timezone for the application',\n          setting_value: 'America/New_York',\n          default_value: 'America/New_York',\n          setting_type: 'SELECT',\n          category: 'SYSTEM',\n          options: JSON.stringify([\n            { value: 'America/New_York', label: 'Eastern Time (ET)' },\n            { value: 'America/Chicago', label: 'Central Time (CT)' },\n            { value: 'America/Denver', label: 'Mountain Time (MT)' },\n            { value: 'America/Los_Angeles', label: 'Pacific Time (PT)' },\n            { value: 'America/Anchorage', label: 'Alaska Time (AKT)' },\n            { value: 'Pacific/Honolulu', label: 'Hawaii Time (HT)' },\n            { value: 'UTC', label: 'Coordinated Universal Time (UTC)' }\n          ]),\n          display_order: 1\n        },\n        {\n          setting_key: 'system.date_format',\n          name: 'Date Format',\n          description: 'Default date format for display',\n          setting_value: 'MM/DD/YYYY',\n          default_value: 'MM/DD/YYYY',\n          setting_type: 'SELECT',\n          category: 'SYSTEM',\n          options: JSON.stringify([\n            { value: 'MM/DD/YYYY', label: 'MM/DD/YYYY (US)' },\n            { value: 'DD/MM/YYYY', label: 'DD/MM/YYYY (EU)' },\n            { value: 'YYYY-MM-DD', label: 'YYYY-MM-DD (ISO)' }\n          ]),\n          display_order: 2\n        },\n        {\n          setting_key: 'system.maintenance_mode',\n          name: 'Maintenance Mode',\n          description: 'Enable to put the system in maintenance mode',\n          setting_value: 'false',\n          default_value: 'false',\n          setting_type: 'BOOLEAN',\n          category: 'SYSTEM',\n          display_order: 3\n        },\n\n        // Security Settings\n        {\n          setting_key: 'security.session_timeout',\n          name: 'Session Timeout (minutes)',\n          description: 'Duration in minutes before inactive sessions expire',\n          setting_value: '30',\n          default_value: '30',\n          setting_type: 'INTEGER',\n          category: 'SECURITY',\n          validation_rules: JSON.stringify({ min: 5, max: 480 }),\n          display_order: 1\n        },\n        {\n          setting_key: 'security.max_login_attempts',\n          name: 'Max Login Attempts',\n          description: 'Maximum failed login attempts before account lockout',\n          setting_value: '5',\n          default_value: '5',\n          setting_type: 'INTEGER',\n          category: 'SECURITY',\n          validation_rules: JSON.stringify({ min: 3, max: 10 }),\n          display_order: 2\n        },\n        {\n          setting_key: 'security.password_expiry_days',\n          name: 'Password Expiry (days)',\n          description: 'Number of days before password must be changed (0 = never)',\n          setting_value: '90',\n          default_value: '90',\n          setting_type: 'INTEGER',\n          category: 'SECURITY',\n          validation_rules: JSON.stringify({ min: 0, max: 365 }),\n          display_order: 3\n        },\n\n        // Clearinghouse Settings\n        {\n          setting_key: 'clearinghouse.enabled',\n          name: 'Enable Clearinghouse Integration',\n          description: 'Enable or disable clearinghouse integration',\n          setting_value: 'false',\n          default_value: 'false',\n          setting_type: 'BOOLEAN',\n          category: 'CLEARINGHOUSE',\n          display_order: 1\n        },\n        {\n          setting_key: 'clearinghouse.api_endpoint',\n          name: 'API Endpoint URL',\n          description: 'Clearinghouse API endpoint URL',\n          setting_value: '',\n          default_value: '',\n          setting_type: 'URL',\n          category: 'CLEARINGHOUSE',\n          display_order: 2\n        },\n        {\n          setting_key: 'clearinghouse.username',\n          name: 'API Username',\n          description: 'Username for clearinghouse API authentication',\n          setting_value: '',\n          default_value: '',\n          setting_type: 'STRING',\n          category: 'CLEARINGHOUSE',\n          display_order: 3\n        },\n        {\n          setting_key: 'clearinghouse.password',\n          name: 'API Password',\n          description: 'Password for clearinghouse API authentication',\n          setting_value: '',\n          default_value: '',\n          setting_type: 'ENCRYPTED',\n          category: 'CLEARINGHOUSE',\n          is_sensitive: true,\n          display_order: 4\n        },\n        {\n          setting_key: 'clearinghouse.sync_frequency',\n          name: 'Sync Frequency',\n          description: 'How often to sync with the clearinghouse',\n          setting_value: '60',\n          default_value: '60',\n          setting_type: 'SELECT',\n          category: 'CLEARINGHOUSE',\n          options: JSON.stringify([\n            { value: '15', label: 'Every 15 minutes' },\n            { value: '30', label: 'Every 30 minutes' },\n            { value: '60', label: 'Every hour' },\n            { value: '120', label: 'Every 2 hours' },\n            { value: '360', label: 'Every 6 hours' },\n            { value: '1440', label: 'Once daily' }\n          ]),\n          display_order: 5\n        },\n        {\n          setting_key: 'clearinghouse.connection_timeout',\n          name: 'Connection Timeout (seconds)',\n          description: 'Timeout for clearinghouse API connections',\n          setting_value: '30',\n          default_value: '30',\n          setting_type: 'INTEGER',\n          category: 'CLEARINGHOUSE',\n          validation_rules: JSON.stringify({ min: 5, max: 120 }),\n          display_order: 6\n        }\n      ];\n\n      // Insert default settings\n      await db.insert(admin_settings).values(\n        defaultSettings.map(s => ({\n          ...s,\n          options: s.options ? JSON.parse(s.options) : null,\n          validation_rules: s.validation_rules ? JSON.parse(s.validation_rules) : null,\n          created_by_id: request.user?.id,\n          updated_by_id: request.user?.id\n        }))\n      );\n\n      logger.info(`Settings initialized by user ${request.user?.id}: ${defaultSettings.length} settings created`);\n\n      return reply.code(201).send({\n        success: true,\n        message: 'Settings initialized successfully',\n        created_count: defaultSettings.length\n      });\n    } catch (error) {\n      logger.error('Error initializing settings:', error);\n      return reply.code(500).send({\n        success: false,\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * Validate setting value based on type\n   * @private\n   */\n  validateValue(value, setting) {\n    const { setting_type, validation_rules } = setting;\n    const rules = validation_rules || {};\n\n    switch (setting_type) {\n      case 'INTEGER':\n        const num = parseInt(value);\n        if (isNaN(num)) return 'Value must be a valid integer';\n        if (rules.min !== undefined && num < rules.min) return `Value must be at least ${rules.min}`;\n        if (rules.max !== undefined && num > rules.max) return `Value must be at most ${rules.max}`;\n        break;\n\n      case 'BOOLEAN':\n        if (!['true', 'false', true, false].includes(value)) {\n          return 'Value must be true or false';\n        }\n        break;\n\n      case 'URL':\n        if (value) {\n          try {\n            new URL(value);\n          } catch {\n            return 'Value must be a valid URL';\n          }\n        }\n        break;\n\n      case 'EMAIL':\n        if (value) {\n          const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n          if (!emailRegex.test(value)) {\n            return 'Value must be a valid email address';\n          }\n        }\n        break;\n\n      case 'SELECT':\n        if (value && setting.options) {\n          const validValues = setting.options.map(o => o.value);\n          if (!validValues.includes(value)) {\n            return `Value must be one of: ${validValues.join(', ')}`;\n          }\n        }\n        break;\n\n      case 'JSON':\n        if (value) {\n          try {\n            JSON.parse(value);\n          } catch {\n            return 'Value must be valid JSON';\n          }\n        }\n        break;\n    }\n\n    if (rules.required && !value) {\n      return 'Value is required';\n    }\n\n    if (rules.pattern && value) {\n      const regex = new RegExp(rules.pattern);\n      if (!regex.test(value)) {\n        return `Value does not match required pattern`;\n      }\n    }\n\n    return null;\n  }\n}\n\n// Export singleton instance\nexport default new SystemSettingsController();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}