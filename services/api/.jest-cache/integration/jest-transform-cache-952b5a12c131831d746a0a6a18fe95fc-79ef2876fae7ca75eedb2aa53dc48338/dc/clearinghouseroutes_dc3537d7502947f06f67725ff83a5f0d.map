{"version":3,"names":["cov_l10agkk91","actualCoverage","controller","PERMISSIONS","requireAnyPermission","clearinghouseRoutes","fastify","options","f","s","get","preHandler","VIEW_REPORTS","listConfigurations","bind","getConfiguration","post","CREATE_CLINICAL_NOTES","createConfiguration","put","UPDATE_CLINICAL_NOTES","updateConfiguration","delete","deleteConfiguration","listBatches","getBatchDetails","retryBatch","uploadResponseFile","listResponseFiles","getResponseFileDetails","processResponseFile","generate837I","generateBatch837I","retrySubmission","getSubmissionHistory","VIEW_CLINICAL_NOTES","getSubmissionsForClaim","submitToClearinghouse","downloadEDIFile","process277Acknowledgment","getSubmissionStatuses"],"sources":["clearinghouse.routes.js"],"sourcesContent":["import controller from '../controllers/Clearinghouse.controller.js';\nimport { PERMISSIONS } from '../config/rbac.js';\nimport { requireAnyPermission } from '../middleware/rbac.middleware.js';\n\n/**\n * Clearinghouse Routes\n * Phase 2C - 837I EDI Generation & Claim Submission/Response Tracking\n *\n * Comprehensive clearinghouse management for electronic claim submission\n * Features:\n *   - Clearinghouse configuration management (CRUD)\n *   - Single and batch 837I file generation\n *   - X12 format compliance (005010X223A2)\n *   - Transmission batch management and tracking\n *   - Clearinghouse submission tracking with full lifecycle\n *   - Response file processing (TA1, 999, 277CA, 277)\n *   - Status history and audit trail\n *   - Retry and resubmission functionality\n *   - EDI file download\n *\n * Configuration Endpoints:\n * - GET /api/clearinghouse/configurations - List all configurations\n * - GET /api/clearinghouse/configurations/:id - Get configuration by ID\n * - POST /api/clearinghouse/configurations - Create configuration\n * - PUT /api/clearinghouse/configurations/:id - Update configuration\n * - DELETE /api/clearinghouse/configurations/:id - Delete configuration\n *\n * Transmission Batch Endpoints:\n * - GET /api/clearinghouse/batches - List transmission batches\n * - GET /api/clearinghouse/batches/:batchId - Get batch details\n * - POST /api/clearinghouse/batches/:batchId/retry - Retry failed batch\n *\n * Submission Endpoints:\n * - POST /api/clearinghouse/generate-837i/:claimId - Generate 837I for single claim\n * - POST /api/clearinghouse/generate-batch - Generate batch 837I\n * - GET /api/clearinghouse/submissions/:claimId - Get submission history for claim\n * - POST /api/clearinghouse/submit/:submissionId - Submit to clearinghouse\n * - POST /api/clearinghouse/submissions/:submissionId/retry - Retry submission\n * - GET /api/clearinghouse/submissions/:submissionId/history - Get status history\n * - GET /api/clearinghouse/submission-status - Get all submission statuses\n *\n * Response Processing Endpoints:\n * - POST /api/clearinghouse/responses/upload - Upload response file\n * - GET /api/clearinghouse/responses - List response files\n * - GET /api/clearinghouse/responses/:fileId - Get response file details\n * - POST /api/clearinghouse/responses/:fileId/process - Process response file\n * - POST /api/clearinghouse/process-277 - Process 277 acknowledgment (legacy)\n *\n * File Download:\n * - GET /api/clearinghouse/download-edi/:submissionId - Download EDI file\n */\nexport default async function clearinghouseRoutes(fastify, options) {\n\n  // ==========================================\n  // CLEARINGHOUSE CONFIGURATION MANAGEMENT\n  // ==========================================\n\n  // List all clearinghouse configurations\n  fastify.get('/clearinghouse/configurations', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.listConfigurations.bind(controller));\n\n  // Get clearinghouse configuration by ID\n  fastify.get('/clearinghouse/configurations/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.getConfiguration.bind(controller));\n\n  // Create clearinghouse configuration\n  fastify.post('/clearinghouse/configurations', {\n    preHandler: [requireAnyPermission(PERMISSIONS.CREATE_CLINICAL_NOTES)]\n  }, controller.createConfiguration.bind(controller));\n\n  // Update clearinghouse configuration\n  fastify.put('/clearinghouse/configurations/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_CLINICAL_NOTES)]\n  }, controller.updateConfiguration.bind(controller));\n\n  // Delete clearinghouse configuration\n  fastify.delete('/clearinghouse/configurations/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_CLINICAL_NOTES)]\n  }, controller.deleteConfiguration.bind(controller));\n\n  // ==========================================\n  // TRANSMISSION BATCH MANAGEMENT\n  // ==========================================\n\n  // List transmission batches\n  fastify.get('/clearinghouse/batches', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.listBatches.bind(controller));\n\n  // Get transmission batch details\n  fastify.get('/clearinghouse/batches/:batchId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.getBatchDetails.bind(controller));\n\n  // Retry failed transmission batch\n  fastify.post('/clearinghouse/batches/:batchId/retry', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_CLINICAL_NOTES)]\n  }, controller.retryBatch.bind(controller));\n\n  // ==========================================\n  // RESPONSE FILE PROCESSING\n  // ==========================================\n\n  // Upload response file (TA1, 999, 277CA, 277)\n  fastify.post('/clearinghouse/responses/upload', {\n    preHandler: [requireAnyPermission(PERMISSIONS.CREATE_CLINICAL_NOTES)]\n  }, controller.uploadResponseFile.bind(controller));\n\n  // List response files\n  fastify.get('/clearinghouse/responses', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.listResponseFiles.bind(controller));\n\n  // Get response file details\n  fastify.get('/clearinghouse/responses/:fileId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.getResponseFileDetails.bind(controller));\n\n  // Process response file\n  fastify.post('/clearinghouse/responses/:fileId/process', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_CLINICAL_NOTES)]\n  }, controller.processResponseFile.bind(controller));\n\n  // ==========================================\n  // SUBMISSION MANAGEMENT (includes legacy + new)\n  // ==========================================\n\n  // Generate 837I EDI file for single claim\n  fastify.post('/clearinghouse/generate-837i/:claimId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.CREATE_CLINICAL_NOTES)]\n  }, controller.generate837I);\n\n  // Generate batch 837I file for multiple claims\n  fastify.post('/clearinghouse/generate-batch', {\n    preHandler: [requireAnyPermission(PERMISSIONS.CREATE_CLINICAL_NOTES)]\n  }, controller.generateBatch837I);\n\n  // Retry failed submission\n  fastify.post('/clearinghouse/submissions/:submissionId/retry', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_CLINICAL_NOTES)]\n  }, controller.retrySubmission.bind(controller));\n\n  // Get submission status history\n  fastify.get('/clearinghouse/submissions/:submissionId/history', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.getSubmissionHistory.bind(controller));\n\n  // Get submission history for claim (legacy - must come after more specific routes)\n  fastify.get('/clearinghouse/submissions/:claimId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_CLINICAL_NOTES)]\n  }, controller.getSubmissionsForClaim.bind(controller));\n\n  // Submit EDI file to clearinghouse via SFTP\n  fastify.post('/clearinghouse/submit/:submissionId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_CLINICAL_NOTES)]\n  }, controller.submitToClearinghouse);\n\n  // Download EDI file\n  fastify.get('/clearinghouse/download-edi/:submissionId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_CLINICAL_NOTES)]\n  }, controller.downloadEDIFile);\n\n  // Process 277 acknowledgment from clearinghouse (legacy endpoint)\n  fastify.post('/clearinghouse/process-277', {\n    preHandler: [requireAnyPermission(PERMISSIONS.CREATE_CLINICAL_NOTES)]\n  }, controller.process277Acknowledgment);\n\n  // Get all submission statuses\n  fastify.get('/clearinghouse/submission-status', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.getSubmissionStatuses);\n}\n"],"mappings":"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","ignoreList":[]}