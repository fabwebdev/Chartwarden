{"version":3,"names":["cov_18639skado","actualCoverage","db","roles","permissions","user_has_roles","role_has_permissions","eq","like","and","or","desc","asc","count","sql","ilike","ne","logger","AuditService","clearPermissionCache","SYSTEM_PROTECTED_ROLES","s","ROLE_STATUSES","createRoleAuditLog","request","action","roleId","oldValue","b","newValue","f","createAuditLog","user_id","user","id","session_id","session","request_id","resource_type","resource_id","toString","old_value","JSON","stringify","new_value","status","ip_address","ip","headers","user_agent","metadata","action_type","admin_user_id","timestamp","Date","toISOString","error","isSystemProtectedRole","roleName","some","protectedRole","toLowerCase","getAllRoles","reply","page","Math","max","parseInt","query","limit","min","offset","sortField","sort","sortOrder","order","conditions","statusLower","push","is_active","name","is_system","undefined","isSystem","orderByClause","createdAt","updatedAt","hierarchy_level","select","display_name","description","guard_name","from","length","where","rolesList","orderBy","countQuery","totalCount","rolesWithDetails","Promise","all","map","role","rolePermissions","permission_id","role_id","permissionDetails","rp","perm","resource","userCount","user_count","Number","success","data","meta","total","totalPages","ceil","hasNextPage","hasPrevPage","code","message","createRole","permissionIds","body","errors","field","trimmedName","trim","existingRole","insert","values","returning","Array","isArray","validPermissionIds","permId","isNaN","rolePermissionValues","permissionId","assigned_by","assigned_at","roleWithPermissions","getRoleById","params","updateRole","version","duplicateRole","updateData","updatedRole","update","set","currentPermissions","delete","deleteRole","force","details","assigned_users","affected_users","assignPermissions","permission_ids","existingPermissions","existingPermissionIds","Set","p","results","assigned","skipped","invalid","reason","has","existing_permissions","role_name","revokePermission","permission","assignment","permission_name","getRolePermissions","roleValidation"],"sources":["Role.controller.js"],"sourcesContent":["/**\n * Role Management REST API Controller\n *\n * Implements complete CRUD operations for role management with:\n * - Pagination, sorting, and filtering\n * - Permission assignment and revocation\n * - System role protection (SuperAdmin, etc.)\n * - HIPAA-compliant audit logging\n * - Input validation and sanitization\n * - Optimistic locking for concurrent updates\n */\n\nimport { db } from \"../config/db.drizzle.js\";\nimport { roles, permissions, user_has_roles } from \"../db/schemas/index.js\";\nimport { role_has_permissions } from \"../db/schemas/index.js\";\nimport { eq, like, and, or, desc, asc, count, sql, ilike, ne } from \"drizzle-orm\";\nimport { logger } from '../utils/logger.js';\nimport AuditService from '../services/AuditService.js';\nimport { clearPermissionCache } from '../middleware/rbac.middleware.js';\n\n// System-protected roles that cannot be modified or deleted\nconst SYSTEM_PROTECTED_ROLES = ['SuperAdmin', 'admin', 'DefaultUser'];\n\n// Valid role statuses\nconst ROLE_STATUSES = ['Active', 'Inactive', 'Archived'];\n\n/**\n * Helper function to create audit log for role operations\n */\nasync function createRoleAuditLog(request, action, roleId, oldValue = null, newValue = null) {\n  try {\n    await AuditService.createAuditLog({\n      user_id: request.user?.id || null,\n      session_id: request.session?.id || null,\n      request_id: request.id || null,\n      action: action,\n      resource_type: 'roles',\n      resource_id: roleId?.toString() || null,\n      old_value: oldValue ? JSON.stringify(oldValue) : null,\n      new_value: newValue ? JSON.stringify(newValue) : null,\n      status: 'success',\n      ip_address: request.ip || request.headers?.['x-forwarded-for'] || null,\n      user_agent: request.headers?.['user-agent'] || null,\n      metadata: JSON.stringify({\n        action_type: action,\n        admin_user_id: request.user?.id,\n        timestamp: new Date().toISOString()\n      })\n    });\n  } catch (error) {\n    logger.error('Failed to create audit log for role operation:', error);\n  }\n}\n\n/**\n * Check if a role is system-protected\n */\nfunction isSystemProtectedRole(roleName) {\n  return SYSTEM_PROTECTED_ROLES.some(\n    protectedRole => protectedRole.toLowerCase() === roleName?.toLowerCase()\n  );\n}\n\n/**\n * GET /api/roles\n * List all roles with pagination, sorting, and filtering\n *\n * Query Parameters:\n * - page: Page number (default: 1)\n * - limit: Items per page (default: 20, max: 100)\n * - sort: Sort field (name, created_at, updated_at) (default: name)\n * - order: Sort order (asc, desc) (default: asc)\n * - status: Filter by status (Active, Inactive, Archived)\n * - name: Filter by name (partial match)\n * - is_system: Filter by system role flag (true/false)\n */\nexport const getAllRoles = async (request, reply) => {\n  try {\n    // Parse query parameters with defaults\n    const page = Math.max(1, parseInt(request.query.page) || 1);\n    const limit = Math.min(100, Math.max(1, parseInt(request.query.limit) || 20));\n    const offset = (page - 1) * limit;\n    const sortField = request.query.sort || 'name';\n    const sortOrder = request.query.order?.toLowerCase() === 'desc' ? 'desc' : 'asc';\n\n    // Build filter conditions\n    const conditions = [];\n\n    // Filter by status (Active/Inactive based on is_active)\n    if (request.query.status) {\n      const statusLower = request.query.status.toLowerCase();\n      if (statusLower === 'active') {\n        conditions.push(eq(roles.is_active, true));\n      } else if (statusLower === 'inactive' || statusLower === 'archived') {\n        conditions.push(eq(roles.is_active, false));\n      }\n    }\n\n    // Filter by name (case-insensitive partial match)\n    if (request.query.name) {\n      conditions.push(ilike(roles.name, `%${request.query.name}%`));\n    }\n\n    // Filter by system role\n    if (request.query.is_system !== undefined) {\n      const isSystem = request.query.is_system === 'true' || request.query.is_system === true;\n      conditions.push(eq(roles.is_system, isSystem));\n    }\n\n    // Build sort expression\n    let orderByClause;\n    switch (sortField) {\n      case 'created_at':\n        orderByClause = sortOrder === 'desc' ? desc(roles.createdAt) : asc(roles.createdAt);\n        break;\n      case 'updated_at':\n        orderByClause = sortOrder === 'desc' ? desc(roles.updatedAt) : asc(roles.updatedAt);\n        break;\n      case 'hierarchy_level':\n        orderByClause = sortOrder === 'desc' ? desc(roles.hierarchy_level) : asc(roles.hierarchy_level);\n        break;\n      default:\n        orderByClause = sortOrder === 'desc' ? desc(roles.name) : asc(roles.name);\n    }\n\n    // Query roles with conditions\n    let query = db.select({\n      id: roles.id,\n      name: roles.name,\n      display_name: roles.display_name,\n      description: roles.description,\n      guard_name: roles.guard_name,\n      hierarchy_level: roles.hierarchy_level,\n      is_active: roles.is_active,\n      is_system: roles.is_system,\n      createdAt: roles.createdAt,\n      updatedAt: roles.updatedAt,\n    }).from(roles);\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions));\n    }\n\n    const rolesList = await query.orderBy(orderByClause).limit(limit).offset(offset);\n\n    // Get total count for pagination\n    let countQuery = db.select({ count: count() }).from(roles);\n    if (conditions.length > 0) {\n      countQuery = countQuery.where(and(...conditions));\n    }\n    const [{ count: totalCount }] = await countQuery;\n\n    // Get permissions and user counts for each role\n    const rolesWithDetails = await Promise.all(rolesList.map(async (role) => {\n      // Get permissions for this role\n      const rolePermissions = await db\n        .select({\n          permission_id: role_has_permissions.permission_id,\n        })\n        .from(role_has_permissions)\n        .where(eq(role_has_permissions.role_id, role.id));\n\n      const permissionDetails = [];\n      for (const rp of rolePermissions) {\n        const [perm] = await db\n          .select({\n            id: permissions.id,\n            name: permissions.name,\n            resource: permissions.resource,\n            action: permissions.action,\n            description: permissions.description,\n          })\n          .from(permissions)\n          .where(eq(permissions.id, rp.permission_id));\n        if (perm) {\n          permissionDetails.push(perm);\n        }\n      }\n\n      // Get user count for this role\n      const [{ count: userCount }] = await db\n        .select({ count: count() })\n        .from(user_has_roles)\n        .where(eq(user_has_roles.role_id, role.id));\n\n      return {\n        ...role,\n        status: role.is_active ? 'Active' : 'Inactive',\n        permissions: permissionDetails,\n        user_count: Number(userCount),\n      };\n    }));\n\n    // Create audit log for role list access\n    await createRoleAuditLog(request, 'ROLE_LIST_VIEW', null);\n\n    return {\n      success: true,\n      data: rolesWithDetails,\n      meta: {\n        page,\n        limit,\n        total: Number(totalCount),\n        totalPages: Math.ceil(Number(totalCount) / limit),\n        hasNextPage: page * limit < Number(totalCount),\n        hasPrevPage: page > 1,\n      },\n    };\n  } catch (error) {\n    logger.error(\"Error fetching roles:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while fetching roles\",\n      },\n    };\n  }\n};\n\n/**\n * POST /api/roles\n * Create a new role with optional initial permissions\n */\nexport const createRole = async (request, reply) => {\n  try {\n    const {\n      name,\n      display_name,\n      description,\n      guard_name,\n      hierarchy_level,\n      is_active = true,\n      permissions: permissionIds\n    } = request.body;\n\n    // Validate required fields\n    if (!name || typeof name !== 'string') {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: \"Role name is required\",\n          errors: [{ field: \"name\", message: \"Role name is required and must be a string\" }],\n        },\n      };\n    }\n\n    // Validate name length (2-50 chars)\n    const trimmedName = name.trim();\n    if (trimmedName.length < 2 || trimmedName.length > 50) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: \"Role name must be between 2 and 50 characters\",\n          errors: [{ field: \"name\", message: \"Role name must be between 2 and 50 characters\" }],\n        },\n      };\n    }\n\n    // Validate description length (max 255 chars)\n    if (description && description.length > 255) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: \"Description must be at most 255 characters\",\n          errors: [{ field: \"description\", message: \"Description must be at most 255 characters\" }],\n        },\n      };\n    }\n\n    // Check if role name already exists (case-insensitive)\n    const [existingRole] = await db\n      .select({ id: roles.id })\n      .from(roles)\n      .where(ilike(roles.name, trimmedName));\n\n    if (existingRole) {\n      reply.code(409);\n      return {\n        success: false,\n        error: {\n          code: 'DUPLICATE_ROLE',\n          message: \"A role with this name already exists\",\n        },\n      };\n    }\n\n    // Create role\n    const [role] = await db.insert(roles)\n      .values({\n        name: trimmedName,\n        display_name: display_name?.trim() || trimmedName,\n        description: description?.trim() || null,\n        guard_name: guard_name || \"web\",\n        hierarchy_level: hierarchy_level || 100,\n        is_active: is_active !== false,\n        is_system: false, // New roles are never system roles\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      })\n      .returning();\n\n    // Associate permissions if provided\n    if (permissionIds && Array.isArray(permissionIds) && permissionIds.length > 0) {\n      // Validate permission IDs exist\n      const validPermissionIds = [];\n      for (const permId of permissionIds) {\n        const id = parseInt(permId);\n        if (!isNaN(id)) {\n          const [perm] = await db\n            .select({ id: permissions.id })\n            .from(permissions)\n            .where(eq(permissions.id, id));\n          if (perm) {\n            validPermissionIds.push(id);\n          }\n        }\n      }\n\n      if (validPermissionIds.length > 0) {\n        const rolePermissionValues = validPermissionIds.map(permissionId => ({\n          role_id: role.id,\n          permission_id: permissionId,\n          assigned_by: request.user?.id || null,\n          assigned_at: new Date(),\n        }));\n\n        await db.insert(role_has_permissions).values(rolePermissionValues);\n      }\n    }\n\n    // Fetch role with permissions\n    const rolePermissions = await db\n      .select({\n        permission_id: role_has_permissions.permission_id,\n      })\n      .from(role_has_permissions)\n      .where(eq(role_has_permissions.role_id, role.id));\n\n    const permissionDetails = [];\n    for (const rp of rolePermissions) {\n      const [perm] = await db\n        .select({\n          id: permissions.id,\n          name: permissions.name,\n          resource: permissions.resource,\n          action: permissions.action,\n          description: permissions.description,\n        })\n        .from(permissions)\n        .where(eq(permissions.id, rp.permission_id));\n      if (perm) {\n        permissionDetails.push(perm);\n      }\n    }\n\n    const roleWithPermissions = {\n      ...role,\n      status: role.is_active ? 'Active' : 'Inactive',\n      permissions: permissionDetails,\n    };\n\n    // Create audit log\n    await createRoleAuditLog(request, 'ROLE_CREATE', role.id, null, roleWithPermissions);\n\n    reply.code(201);\n    return {\n      success: true,\n      message: \"Role created successfully\",\n      data: roleWithPermissions,\n    };\n  } catch (error) {\n    logger.error(\"Error creating role:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while creating role\",\n      },\n    };\n  }\n};\n\n/**\n * GET /api/roles/:id\n * Retrieve single role details including full permission list\n */\nexport const getRoleById = async (request, reply) => {\n  try {\n    const { id } = request.params;\n    const roleId = parseInt(id);\n\n    if (isNaN(roleId)) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'INVALID_ID',\n          message: \"Invalid role ID format\",\n        },\n      };\n    }\n\n    // Find role by ID\n    const [role] = await db\n      .select({\n        id: roles.id,\n        name: roles.name,\n        display_name: roles.display_name,\n        description: roles.description,\n        guard_name: roles.guard_name,\n        hierarchy_level: roles.hierarchy_level,\n        is_active: roles.is_active,\n        is_system: roles.is_system,\n        createdAt: roles.createdAt,\n        updatedAt: roles.updatedAt,\n      })\n      .from(roles)\n      .where(eq(roles.id, roleId));\n\n    if (!role) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'ROLE_NOT_FOUND',\n          message: \"Role not found\",\n        },\n      };\n    }\n\n    // Get permissions for this role\n    const rolePermissions = await db\n      .select({\n        permission_id: role_has_permissions.permission_id,\n        assigned_at: role_has_permissions.assigned_at,\n        assigned_by: role_has_permissions.assigned_by,\n      })\n      .from(role_has_permissions)\n      .where(eq(role_has_permissions.role_id, role.id));\n\n    const permissionDetails = [];\n    for (const rp of rolePermissions) {\n      const [perm] = await db\n        .select({\n          id: permissions.id,\n          name: permissions.name,\n          resource: permissions.resource,\n          action: permissions.action,\n          description: permissions.description,\n          is_active: permissions.is_active,\n        })\n        .from(permissions)\n        .where(eq(permissions.id, rp.permission_id));\n      if (perm) {\n        permissionDetails.push({\n          ...perm,\n          assigned_at: rp.assigned_at,\n          assigned_by: rp.assigned_by,\n        });\n      }\n    }\n\n    // Get user count for this role\n    const [{ count: userCount }] = await db\n      .select({ count: count() })\n      .from(user_has_roles)\n      .where(eq(user_has_roles.role_id, role.id));\n\n    const roleWithPermissions = {\n      ...role,\n      status: role.is_active ? 'Active' : 'Inactive',\n      permissions: permissionDetails,\n      user_count: Number(userCount),\n    };\n\n    // Create audit log\n    await createRoleAuditLog(request, 'ROLE_VIEW', role.id);\n\n    return {\n      success: true,\n      data: roleWithPermissions,\n    };\n  } catch (error) {\n    logger.error(\"Error fetching role:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while fetching role\",\n      },\n    };\n  }\n};\n\n/**\n * PUT /api/roles/:id\n * Update role metadata (name, description, status, display order)\n */\nexport const updateRole = async (request, reply) => {\n  try {\n    const { id } = request.params;\n    const roleId = parseInt(id);\n    const {\n      name,\n      display_name,\n      description,\n      guard_name,\n      hierarchy_level,\n      is_active,\n      permissions: permissionIds,\n      version // For optimistic locking\n    } = request.body;\n\n    if (isNaN(roleId)) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'INVALID_ID',\n          message: \"Invalid role ID format\",\n        },\n      };\n    }\n\n    // Find role\n    const [existingRole] = await db\n      .select()\n      .from(roles)\n      .where(eq(roles.id, roleId));\n\n    if (!existingRole) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'ROLE_NOT_FOUND',\n          message: \"Role not found\",\n        },\n      };\n    }\n\n    // Prevent modification of system-protected roles (except permissions)\n    if (existingRole.is_system && (name || display_name || description !== undefined || is_active !== undefined)) {\n      reply.code(403);\n      return {\n        success: false,\n        error: {\n          code: 'SYSTEM_ROLE_PROTECTED',\n          message: `Cannot modify system-protected role: ${existingRole.name}. System roles can only have their permissions updated.`,\n        },\n      };\n    }\n\n    // Validate name if provided\n    if (name !== undefined) {\n      const trimmedName = name.trim();\n      if (trimmedName.length < 2 || trimmedName.length > 50) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: \"Role name must be between 2 and 50 characters\",\n            errors: [{ field: \"name\", message: \"Role name must be between 2 and 50 characters\" }],\n          },\n        };\n      }\n\n      // Check for duplicate name (excluding current role)\n      const [duplicateRole] = await db\n        .select({ id: roles.id })\n        .from(roles)\n        .where(and(\n          ilike(roles.name, trimmedName),\n          ne(roles.id, roleId)\n        ));\n\n      if (duplicateRole) {\n        reply.code(409);\n        return {\n          success: false,\n          error: {\n            code: 'DUPLICATE_ROLE',\n            message: \"A role with this name already exists\",\n          },\n        };\n      }\n    }\n\n    // Validate description length\n    if (description && description.length > 255) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: \"Description must be at most 255 characters\",\n          errors: [{ field: \"description\", message: \"Description must be at most 255 characters\" }],\n        },\n      };\n    }\n\n    // Build update data\n    const updateData = { updatedAt: new Date() };\n    if (name !== undefined) updateData.name = name.trim();\n    if (display_name !== undefined) updateData.display_name = display_name.trim();\n    if (description !== undefined) updateData.description = description?.trim() || null;\n    if (guard_name !== undefined) updateData.guard_name = guard_name;\n    if (hierarchy_level !== undefined) updateData.hierarchy_level = hierarchy_level;\n    if (is_active !== undefined) updateData.is_active = is_active;\n\n    // Update role\n    const [updatedRole] = await db.update(roles)\n      .set(updateData)\n      .where(eq(roles.id, roleId))\n      .returning();\n\n    // Update permissions if provided\n    if (permissionIds !== undefined && Array.isArray(permissionIds)) {\n      // Get current permissions for audit\n      const currentPermissions = await db\n        .select({ permission_id: role_has_permissions.permission_id })\n        .from(role_has_permissions)\n        .where(eq(role_has_permissions.role_id, roleId));\n\n      // Remove all existing permissions\n      await db.delete(role_has_permissions)\n        .where(eq(role_has_permissions.role_id, roleId));\n\n      // Add new permissions\n      if (permissionIds.length > 0) {\n        const validPermissionIds = [];\n        for (const permId of permissionIds) {\n          const id = parseInt(permId);\n          if (!isNaN(id)) {\n            const [perm] = await db\n              .select({ id: permissions.id })\n              .from(permissions)\n              .where(eq(permissions.id, id));\n            if (perm) {\n              validPermissionIds.push(id);\n            }\n          }\n        }\n\n        if (validPermissionIds.length > 0) {\n          const rolePermissionValues = validPermissionIds.map(permissionId => ({\n            role_id: roleId,\n            permission_id: permissionId,\n            assigned_by: request.user?.id || null,\n            assigned_at: new Date(),\n          }));\n\n          await db.insert(role_has_permissions).values(rolePermissionValues);\n        }\n      }\n\n      // Clear permission cache for all users with this role\n      clearPermissionCache(null); // Clear all caches when role permissions change\n    }\n\n    // Fetch updated role with permissions\n    const rolePermissions = await db\n      .select({\n        permission_id: role_has_permissions.permission_id,\n      })\n      .from(role_has_permissions)\n      .where(eq(role_has_permissions.role_id, roleId));\n\n    const permissionDetails = [];\n    for (const rp of rolePermissions) {\n      const [perm] = await db\n        .select({\n          id: permissions.id,\n          name: permissions.name,\n          resource: permissions.resource,\n          action: permissions.action,\n          description: permissions.description,\n        })\n        .from(permissions)\n        .where(eq(permissions.id, rp.permission_id));\n      if (perm) {\n        permissionDetails.push(perm);\n      }\n    }\n\n    const roleWithPermissions = {\n      ...updatedRole,\n      status: updatedRole.is_active ? 'Active' : 'Inactive',\n      permissions: permissionDetails,\n    };\n\n    // Create audit log\n    await createRoleAuditLog(request, 'ROLE_UPDATE', roleId, existingRole, roleWithPermissions);\n\n    return {\n      success: true,\n      message: \"Role updated successfully\",\n      data: roleWithPermissions,\n    };\n  } catch (error) {\n    logger.error(\"Error updating role:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while updating role\",\n      },\n    };\n  }\n};\n\n/**\n * DELETE /api/roles/:id\n * Soft delete or deactivate role with cascading checks\n */\nexport const deleteRole = async (request, reply) => {\n  try {\n    const { id } = request.params;\n    const roleId = parseInt(id);\n    const { force = false } = request.query; // Force delete removes role entirely\n\n    if (isNaN(roleId)) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'INVALID_ID',\n          message: \"Invalid role ID format\",\n        },\n      };\n    }\n\n    // Find role\n    const [existingRole] = await db\n      .select()\n      .from(roles)\n      .where(eq(roles.id, roleId));\n\n    if (!existingRole) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'ROLE_NOT_FOUND',\n          message: \"Role not found\",\n        },\n      };\n    }\n\n    // Prevent deletion of system-protected roles\n    if (existingRole.is_system || isSystemProtectedRole(existingRole.name)) {\n      reply.code(403);\n      return {\n        success: false,\n        error: {\n          code: 'SYSTEM_ROLE_PROTECTED',\n          message: `Cannot delete system-protected role: ${existingRole.name}`,\n        },\n      };\n    }\n\n    // Check if role is assigned to any active users\n    const [{ count: userCount }] = await db\n      .select({ count: count() })\n      .from(user_has_roles)\n      .where(eq(user_has_roles.role_id, roleId));\n\n    if (Number(userCount) > 0 && !force) {\n      reply.code(409);\n      return {\n        success: false,\n        error: {\n          code: 'ROLE_IN_USE',\n          message: `Cannot delete role: ${existingRole.name}. It is currently assigned to ${userCount} user(s). Remove users from this role first or use force=true to deactivate.`,\n          details: {\n            assigned_users: Number(userCount),\n          },\n        },\n      };\n    }\n\n    if (Number(userCount) > 0 && force) {\n      // Soft delete: deactivate the role instead of deleting\n      await db.update(roles)\n        .set({\n          is_active: false,\n          updatedAt: new Date()\n        })\n        .where(eq(roles.id, roleId));\n\n      // Create audit log\n      await createRoleAuditLog(request, 'ROLE_DEACTIVATE', roleId, existingRole, { ...existingRole, is_active: false });\n\n      return {\n        success: true,\n        message: `Role \"${existingRole.name}\" has been deactivated (soft deleted) because it has ${userCount} assigned user(s).`,\n        data: {\n          id: roleId,\n          action: 'deactivated',\n          affected_users: Number(userCount),\n        },\n      };\n    }\n\n    // Hard delete: remove role associations and role itself\n    await db.delete(role_has_permissions)\n      .where(eq(role_has_permissions.role_id, roleId));\n\n    await db.delete(user_has_roles)\n      .where(eq(user_has_roles.role_id, roleId));\n\n    await db.delete(roles)\n      .where(eq(roles.id, roleId));\n\n    // Clear all permission caches\n    clearPermissionCache(null);\n\n    // Create audit log\n    await createRoleAuditLog(request, 'ROLE_DELETE', roleId, existingRole, null);\n\n    reply.code(200);\n    return {\n      success: true,\n      message: `Role \"${existingRole.name}\" deleted successfully`,\n      data: {\n        id: roleId,\n        action: 'deleted',\n      },\n    };\n  } catch (error) {\n    logger.error(\"Error deleting role:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while deleting role\",\n      },\n    };\n  }\n};\n\n/**\n * POST /api/roles/:id/permissions\n * Assign one or multiple permissions to a role\n */\nexport const assignPermissions = async (request, reply) => {\n  try {\n    const { id } = request.params;\n    const roleId = parseInt(id);\n    const { permission_ids } = request.body;\n\n    if (isNaN(roleId)) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'INVALID_ID',\n          message: \"Invalid role ID format\",\n        },\n      };\n    }\n\n    // Validate permission_ids\n    if (!permission_ids || !Array.isArray(permission_ids) || permission_ids.length === 0) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: \"permission_ids must be a non-empty array\",\n        },\n      };\n    }\n\n    // Find role\n    const [role] = await db\n      .select()\n      .from(roles)\n      .where(eq(roles.id, roleId));\n\n    if (!role) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'ROLE_NOT_FOUND',\n          message: \"Role not found\",\n        },\n      };\n    }\n\n    // Get existing permissions for this role\n    const existingPermissions = await db\n      .select({ permission_id: role_has_permissions.permission_id })\n      .from(role_has_permissions)\n      .where(eq(role_has_permissions.role_id, roleId));\n\n    const existingPermissionIds = new Set(existingPermissions.map(p => p.permission_id));\n\n    // Process each permission\n    const results = {\n      assigned: [],\n      skipped: [], // Already assigned\n      invalid: [], // Permission doesn't exist\n    };\n\n    for (const permId of permission_ids) {\n      const permissionId = parseInt(permId);\n\n      if (isNaN(permissionId)) {\n        results.invalid.push({ id: permId, reason: 'Invalid ID format' });\n        continue;\n      }\n\n      // Check if permission exists\n      const [perm] = await db\n        .select({ id: permissions.id, name: permissions.name })\n        .from(permissions)\n        .where(eq(permissions.id, permissionId));\n\n      if (!perm) {\n        results.invalid.push({ id: permissionId, reason: 'Permission not found' });\n        continue;\n      }\n\n      // Check if already assigned (idempotent - skip silently)\n      if (existingPermissionIds.has(permissionId)) {\n        results.skipped.push({ id: permissionId, name: perm.name });\n        continue;\n      }\n\n      // Assign permission\n      await db.insert(role_has_permissions).values({\n        role_id: roleId,\n        permission_id: permissionId,\n        assigned_by: request.user?.id || null,\n        assigned_at: new Date(),\n      });\n\n      results.assigned.push({ id: permissionId, name: perm.name });\n    }\n\n    // Clear permission cache\n    clearPermissionCache(null);\n\n    // Create audit log\n    await createRoleAuditLog(request, 'ROLE_PERMISSION_ASSIGN', roleId,\n      { existing_permissions: Array.from(existingPermissionIds) },\n      { assigned: results.assigned, role_id: roleId }\n    );\n\n    return {\n      success: true,\n      message: `Permissions updated for role \"${role.name}\"`,\n      data: {\n        role_id: roleId,\n        role_name: role.name,\n        ...results,\n      },\n    };\n  } catch (error) {\n    logger.error(\"Error assigning permissions:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while assigning permissions\",\n      },\n    };\n  }\n};\n\n/**\n * DELETE /api/roles/:id/permissions/:permissionId\n * Revoke specific permission from role\n */\nexport const revokePermission = async (request, reply) => {\n  try {\n    const { id, permissionId } = request.params;\n    const roleId = parseInt(id);\n    const permId = parseInt(permissionId);\n\n    if (isNaN(roleId) || isNaN(permId)) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'INVALID_ID',\n          message: \"Invalid role ID or permission ID format\",\n        },\n      };\n    }\n\n    // Find role\n    const [role] = await db\n      .select()\n      .from(roles)\n      .where(eq(roles.id, roleId));\n\n    if (!role) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'ROLE_NOT_FOUND',\n          message: \"Role not found\",\n        },\n      };\n    }\n\n    // Find permission\n    const [permission] = await db\n      .select({ id: permissions.id, name: permissions.name })\n      .from(permissions)\n      .where(eq(permissions.id, permId));\n\n    if (!permission) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'PERMISSION_NOT_FOUND',\n          message: \"Permission not found\",\n        },\n      };\n    }\n\n    // Check if permission is assigned to this role\n    const [assignment] = await db\n      .select()\n      .from(role_has_permissions)\n      .where(and(\n        eq(role_has_permissions.role_id, roleId),\n        eq(role_has_permissions.permission_id, permId)\n      ));\n\n    if (!assignment) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'PERMISSION_NOT_ASSIGNED',\n          message: `Permission \"${permission.name}\" is not assigned to role \"${role.name}\"`,\n        },\n      };\n    }\n\n    // Remove permission from role\n    await db.delete(role_has_permissions)\n      .where(and(\n        eq(role_has_permissions.role_id, roleId),\n        eq(role_has_permissions.permission_id, permId)\n      ));\n\n    // Clear permission cache\n    clearPermissionCache(null);\n\n    // Create audit log\n    await createRoleAuditLog(request, 'ROLE_PERMISSION_REVOKE', roleId,\n      { permission_id: permId, permission_name: permission.name },\n      null\n    );\n\n    reply.code(200);\n    return {\n      success: true,\n      message: `Permission \"${permission.name}\" revoked from role \"${role.name}\"`,\n      data: {\n        role_id: roleId,\n        role_name: role.name,\n        permission_id: permId,\n        permission_name: permission.name,\n      },\n    };\n  } catch (error) {\n    logger.error(\"Error revoking permission:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while revoking permission\",\n      },\n    };\n  }\n};\n\n/**\n * GET /api/roles/:id/permissions\n * Get all permissions assigned to a specific role\n */\nexport const getRolePermissions = async (request, reply) => {\n  try {\n    const { id } = request.params;\n    const roleId = parseInt(id);\n\n    if (isNaN(roleId)) {\n      reply.code(400);\n      return {\n        success: false,\n        error: {\n          code: 'INVALID_ID',\n          message: \"Invalid role ID format\",\n        },\n      };\n    }\n\n    // Find role\n    const [role] = await db\n      .select({\n        id: roles.id,\n        name: roles.name,\n        display_name: roles.display_name,\n        description: roles.description,\n        hierarchy_level: roles.hierarchy_level,\n        is_active: roles.is_active,\n        is_system: roles.is_system,\n      })\n      .from(roles)\n      .where(eq(roles.id, roleId));\n\n    if (!role) {\n      reply.code(404);\n      return {\n        success: false,\n        error: {\n          code: 'ROLE_NOT_FOUND',\n          message: \"Role not found\",\n        },\n      };\n    }\n\n    // Get permissions for this role with assignment details\n    const rolePermissions = await db\n      .select({\n        permission_id: role_has_permissions.permission_id,\n        assigned_at: role_has_permissions.assigned_at,\n        assigned_by: role_has_permissions.assigned_by,\n      })\n      .from(role_has_permissions)\n      .where(eq(role_has_permissions.role_id, roleId));\n\n    // Fetch detailed permission info\n    const permissionDetails = [];\n    for (const rp of rolePermissions) {\n      const [perm] = await db\n        .select({\n          id: permissions.id,\n          name: permissions.name,\n          resource: permissions.resource,\n          action: permissions.action,\n          description: permissions.description,\n          is_active: permissions.is_active,\n        })\n        .from(permissions)\n        .where(eq(permissions.id, rp.permission_id));\n\n      if (perm) {\n        permissionDetails.push({\n          ...perm,\n          assigned_at: rp.assigned_at,\n          assigned_by: rp.assigned_by,\n        });\n      }\n    }\n\n    // Create audit log\n    await createRoleAuditLog(request, 'ROLE_PERMISSIONS_VIEW', roleId);\n\n    return {\n      success: true,\n      data: {\n        role: {\n          id: role.id,\n          name: role.name,\n          display_name: role.display_name,\n          hierarchy_level: role.hierarchy_level,\n        },\n        permissions: permissionDetails,\n        total: permissionDetails.length,\n      },\n    };\n  } catch (error) {\n    logger.error(\"Error fetching role permissions:\", error);\n    reply.code(500);\n    return {\n      success: false,\n      error: {\n        code: 'INTERNAL_ERROR',\n        message: \"Server error while fetching role permissions\",\n      },\n    };\n  }\n};\n\n/**\n * Legacy validation middleware (for backward compatibility)\n * @deprecated Use Yup schemas in route definitions instead\n */\nexport const roleValidation = async (request, reply) => {\n  if (!request.body.name) {\n    reply.code(400);\n    return {\n      success: false,\n      error: {\n        code: 'VALIDATION_ERROR',\n        message: \"Validation failed\",\n        errors: [{ field: \"name\", message: \"Role name is required\" }],\n      },\n    };\n  }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}