{"version":3,"names":["cov_19de9wlm62","actualCoverage","eq","and","desc","sql","db","abacPolicies","abacAttributes","abacAccessLogs","abacPolicyTestCases","logger","CACHE_TTL_MS","s","policyCache","Map","attributeCache","policyCacheTimestamp","attributeCacheTimestamp","CONFLICT_RESOLUTION","DENY_OVERRIDE","PERMIT_OVERRIDE","FIRST_APPLICABLE","HIGHEST_PRIORITY","OPERATORS","a","b","f","neq","gt","gte","lt","lte","in","Array","isArray","includes","notIn","contains","String","startsWith","endsWith","regex","RegExp","test","exists","undefined","notExists","between","min","max","arrayContains","arrayContainsAny","some","v","arrayContainsAll","every","ENVIRONMENT_PROVIDERS","currentHour","Date","getHours","currentMinute","getMinutes","currentDayOfWeek","getDay","currentDate","toISOString","split","currentTime","isWeekend","isBusinessHours","hour","day","getValueByPath","obj","path","parts","current","part","loadPolicies","forceRefresh","now","size","from","values","policies","select","where","isActive","orderBy","priority","clear","policy","set","id","error","loadAttributes","attributes","attr","name","evaluateCondition","condition","context","attribute","operator","value","warn","attrValue","envAttr","replace","operatorFn","message","evaluateConditionGroup","conditionGroup","conditions","length","results","map","cond","toLowerCase","r","evaluatePolicy","resourceType","action","rules","effect","resource","type","matches","rulesObj","JSON","parse","e","conditionsMatch","resolveConflicts","decisions","strategy","matchingDecisions","filter","d","allow","matchedPolicy","reason","denyDecision","find","allowDecision","permitDecision","denyDec","firstMatch","highestPriority","buildContext","user","environment","role","department","location","clearanceLevel","ownerId","classification","ipAddress","userAgent","sessionId","logAccessDecision","params","userId","resourceId","decision","userAttributes","resourceAttributes","environmentAttributes","evaluatedPolicies","evaluationTimeMs","errorMessage","insert","matchedPolicyId","matchedPolicyName","ABACService","constructor","conflictResolution","enableAuditLog","setConflictResolution","Object","setAuditLogging","enabled","clearCache","authorize","startTime","result","push","resolution","toString","can","createPolicy","policyData","description","createdBy","stringify","returning","updatePolicy","policyId","updates","rest","updateData","updatedAt","update","deletePolicy","getPolicies","includeInactive","query","getPolicy","createAttribute","attrData","getAttributes","simulate","testCase","wasLogging","simulatedAt","runPolicyTest","Error","actualDecision","pass","expectedDecision","lastTestResult","lastTestedAt","expected","actual","policyMatched","policyEffect","createTestCase","testCaseData","getTestCases","getAccessLogs","filters","startDate","endDate","limit","createdAt","getAccessStats","whereClause","stats","count","as","avgEvaluationTime","groupBy","abacService"],"sources":["ABAC.service.js"],"sourcesContent":["import { eq, and, desc, sql } from \"drizzle-orm\";\nimport { db } from \"../db/index.js\";\nimport {\n  abacPolicies,\n  abacAttributes,\n  abacAccessLogs,\n  abacPolicyTestCases,\n} from \"../db/schemas/abacPolicy.schema.js\";\nimport { logger } from \"../utils/logger.js\";\n\n/**\n * ABAC (Attribute-Based Access Control) Service\n *\n * A comprehensive authorization service that evaluates access decisions\n * based on user attributes, resource attributes, and environmental context.\n *\n * Key features:\n * - Dynamic policy evaluation with configurable rules\n * - Multiple conflict resolution strategies\n * - In-memory caching for performance\n * - Full audit logging for compliance\n * - Policy testing/simulation capabilities\n */\n\n// Cache configuration\nconst CACHE_TTL_MS = 60000; // 1 minute cache TTL\nconst policyCache = new Map();\nconst attributeCache = new Map();\nlet policyCacheTimestamp = 0;\nlet attributeCacheTimestamp = 0;\n\n// Conflict resolution strategies\nexport const CONFLICT_RESOLUTION = {\n  DENY_OVERRIDE: \"deny-override\", // Any deny = deny (most restrictive)\n  PERMIT_OVERRIDE: \"permit-override\", // Any permit = permit (most permissive)\n  FIRST_APPLICABLE: \"first-applicable\", // First matching policy wins\n  HIGHEST_PRIORITY: \"highest-priority\", // Highest priority policy wins\n};\n\n// Default operators for condition evaluation\nconst OPERATORS = {\n  eq: (a, b) => a === b,\n  neq: (a, b) => a !== b,\n  gt: (a, b) => a > b,\n  gte: (a, b) => a >= b,\n  lt: (a, b) => a < b,\n  lte: (a, b) => a <= b,\n  in: (a, b) => Array.isArray(b) && b.includes(a),\n  notIn: (a, b) => Array.isArray(b) && !b.includes(a),\n  contains: (a, b) => String(a).includes(String(b)),\n  startsWith: (a, b) => String(a).startsWith(String(b)),\n  endsWith: (a, b) => String(a).endsWith(String(b)),\n  regex: (a, b) => new RegExp(b).test(String(a)),\n  exists: (a) => a !== null && a !== undefined,\n  notExists: (a) => a === null || a === undefined,\n  between: (a, [min, max]) => a >= min && a <= max,\n  arrayContains: (a, b) => Array.isArray(a) && a.includes(b),\n  arrayContainsAny: (a, b) => Array.isArray(a) && Array.isArray(b) && b.some((v) => a.includes(v)),\n  arrayContainsAll: (a, b) => Array.isArray(a) && Array.isArray(b) && b.every((v) => a.includes(v)),\n};\n\n// Built-in environment attribute providers\nconst ENVIRONMENT_PROVIDERS = {\n  currentHour: () => new Date().getHours(),\n  currentMinute: () => new Date().getMinutes(),\n  currentDayOfWeek: () => new Date().getDay(), // 0 = Sunday\n  currentDate: () => new Date().toISOString().split(\"T\")[0],\n  currentTime: () => new Date().toISOString(),\n  isWeekend: () => [0, 6].includes(new Date().getDay()),\n  isBusinessHours: () => {\n    const hour = new Date().getHours();\n    const day = new Date().getDay();\n    return day >= 1 && day <= 5 && hour >= 9 && hour < 17;\n  },\n};\n\n/**\n * Get value from nested object path\n * @param {Object} obj - Object to get value from\n * @param {string} path - Dot-notation path (e.g., 'user.department')\n * @returns {*} The value at the path or undefined\n */\nfunction getValueByPath(obj, path) {\n  if (!path || !obj) return undefined;\n\n  const parts = path.split(\".\");\n  let current = obj;\n\n  for (const part of parts) {\n    if (current === null || current === undefined) return undefined;\n    current = current[part];\n  }\n\n  return current;\n}\n\n/**\n * Load policies from database with caching\n * @param {boolean} forceRefresh - Force cache refresh\n * @returns {Promise<Array>} Array of active policies\n */\nasync function loadPolicies(forceRefresh = false) {\n  const now = Date.now();\n\n  if (!forceRefresh && policyCache.size > 0 && now - policyCacheTimestamp < CACHE_TTL_MS) {\n    return Array.from(policyCache.values());\n  }\n\n  try {\n    const policies = await db\n      .select()\n      .from(abacPolicies)\n      .where(eq(abacPolicies.isActive, true))\n      .orderBy(desc(abacPolicies.priority));\n\n    policyCache.clear();\n    for (const policy of policies) {\n      policyCache.set(policy.id, policy);\n    }\n    policyCacheTimestamp = now;\n\n    return policies;\n  } catch (error) {\n    logger.error(\"Failed to load ABAC policies:\", error);\n    // Return cached policies if available, empty array otherwise\n    return Array.from(policyCache.values());\n  }\n}\n\n/**\n * Load attribute definitions from database with caching\n * @param {boolean} forceRefresh - Force cache refresh\n * @returns {Promise<Array>} Array of active attribute definitions\n */\nasync function loadAttributes(forceRefresh = false) {\n  const now = Date.now();\n\n  if (!forceRefresh && attributeCache.size > 0 && now - attributeCacheTimestamp < CACHE_TTL_MS) {\n    return Array.from(attributeCache.values());\n  }\n\n  try {\n    const attributes = await db\n      .select()\n      .from(abacAttributes)\n      .where(eq(abacAttributes.isActive, true));\n\n    attributeCache.clear();\n    for (const attr of attributes) {\n      attributeCache.set(attr.name, attr);\n    }\n    attributeCacheTimestamp = now;\n\n    return attributes;\n  } catch (error) {\n    logger.error(\"Failed to load ABAC attributes:\", error);\n    return Array.from(attributeCache.values());\n  }\n}\n\n/**\n * Evaluate a single condition against the context\n * @param {Object} condition - Condition to evaluate\n * @param {Object} context - Full evaluation context\n * @returns {boolean} Whether the condition is satisfied\n */\nfunction evaluateCondition(condition, context) {\n  const { attribute, operator, value } = condition;\n\n  if (!attribute || !operator) {\n    logger.warn(\"Invalid condition - missing attribute or operator:\", condition);\n    return false;\n  }\n\n  // Get the attribute value from context\n  let attrValue = getValueByPath(context, attribute);\n\n  // Handle special environment providers\n  if (attribute.startsWith(\"environment.\") && attrValue === undefined) {\n    const envAttr = attribute.replace(\"environment.\", \"\");\n    if (ENVIRONMENT_PROVIDERS[envAttr]) {\n      attrValue = ENVIRONMENT_PROVIDERS[envAttr]();\n    }\n  }\n\n  // Get the operator function\n  const operatorFn = OPERATORS[operator];\n  if (!operatorFn) {\n    logger.warn(\"Unknown operator:\", operator);\n    return false;\n  }\n\n  try {\n    return operatorFn(attrValue, value);\n  } catch (error) {\n    logger.error(\"Error evaluating condition:\", { condition, error: error.message });\n    return false;\n  }\n}\n\n/**\n * Evaluate a group of conditions with logical operators\n * @param {Object} conditionGroup - Group of conditions with logical operator\n * @param {Object} context - Full evaluation context\n * @returns {boolean} Whether the condition group is satisfied\n */\nfunction evaluateConditionGroup(conditionGroup, context) {\n  const { operator = \"and\", conditions = [] } = conditionGroup;\n\n  if (conditions.length === 0) {\n    return true; // Empty conditions = always true\n  }\n\n  const results = conditions.map((cond) => {\n    // Handle nested groups\n    if (cond.conditions) {\n      return evaluateConditionGroup(cond, context);\n    }\n    return evaluateCondition(cond, context);\n  });\n\n  switch (operator.toLowerCase()) {\n    case \"and\":\n      return results.every((r) => r === true);\n    case \"or\":\n      return results.some((r) => r === true);\n    case \"not\":\n      return !results[0];\n    default:\n      return results.every((r) => r === true);\n  }\n}\n\n/**\n * Evaluate a single policy against the context\n * @param {Object} policy - Policy to evaluate\n * @param {Object} context - Full evaluation context\n * @returns {Object} Evaluation result { matches: boolean, effect: string }\n */\nfunction evaluatePolicy(policy, context) {\n  const { resourceType, action, rules, effect } = policy;\n\n  // Check if policy applies to this resource type and action\n  if (resourceType !== \"*\" && resourceType !== context.resource.type) {\n    return { matches: false, effect: null };\n  }\n\n  if (action !== \"*\" && action !== context.action) {\n    return { matches: false, effect: null };\n  }\n\n  // Evaluate the rules\n  let rulesObj = rules;\n  if (typeof rules === \"string\") {\n    try {\n      rulesObj = JSON.parse(rules);\n    } catch (e) {\n      logger.error(\"Invalid policy rules JSON:\", policy.id);\n      return { matches: false, effect: null };\n    }\n  }\n\n  const conditionsMatch = evaluateConditionGroup(rulesObj, context);\n\n  return {\n    matches: conditionsMatch,\n    effect: conditionsMatch ? effect : null,\n  };\n}\n\n/**\n * Resolve conflicts between multiple policy decisions\n * @param {Array} decisions - Array of { policy, matches, effect }\n * @param {string} strategy - Conflict resolution strategy\n * @returns {Object} Final decision { allow: boolean, matchedPolicy: Object }\n */\nfunction resolveConflicts(decisions, strategy = CONFLICT_RESOLUTION.DENY_OVERRIDE) {\n  const matchingDecisions = decisions.filter((d) => d.matches);\n\n  if (matchingDecisions.length === 0) {\n    return { allow: false, matchedPolicy: null, reason: \"no_matching_policy\" };\n  }\n\n  switch (strategy) {\n    case CONFLICT_RESOLUTION.DENY_OVERRIDE:\n      // Any deny = deny\n      const denyDecision = matchingDecisions.find((d) => d.effect === \"deny\");\n      if (denyDecision) {\n        return { allow: false, matchedPolicy: denyDecision.policy, reason: \"deny_override\" };\n      }\n      const allowDecision = matchingDecisions.find((d) => d.effect === \"allow\");\n      return {\n        allow: !!allowDecision,\n        matchedPolicy: allowDecision?.policy || null,\n        reason: allowDecision ? \"permit\" : \"no_permit\",\n      };\n\n    case CONFLICT_RESOLUTION.PERMIT_OVERRIDE:\n      // Any permit = permit\n      const permitDecision = matchingDecisions.find((d) => d.effect === \"allow\");\n      if (permitDecision) {\n        return { allow: true, matchedPolicy: permitDecision.policy, reason: \"permit_override\" };\n      }\n      const denyDec = matchingDecisions.find((d) => d.effect === \"deny\");\n      return {\n        allow: false,\n        matchedPolicy: denyDec?.policy || null,\n        reason: \"deny\",\n      };\n\n    case CONFLICT_RESOLUTION.FIRST_APPLICABLE:\n      // First matching policy wins (policies are already sorted by priority)\n      const firstMatch = matchingDecisions[0];\n      return {\n        allow: firstMatch.effect === \"allow\",\n        matchedPolicy: firstMatch.policy,\n        reason: \"first_applicable\",\n      };\n\n    case CONFLICT_RESOLUTION.HIGHEST_PRIORITY:\n      // Highest priority wins (policies are sorted by priority desc)\n      const highestPriority = matchingDecisions[0];\n      return {\n        allow: highestPriority.effect === \"allow\",\n        matchedPolicy: highestPriority.policy,\n        reason: \"highest_priority\",\n      };\n\n    default:\n      return { allow: false, matchedPolicy: null, reason: \"unknown_strategy\" };\n  }\n}\n\n/**\n * Build evaluation context from user, resource, and environment\n * @param {Object} user - User attributes\n * @param {Object} resource - Resource attributes\n * @param {Object} environment - Environment attributes\n * @param {string} action - Action being performed\n * @returns {Object} Full evaluation context\n */\nfunction buildContext(user, resource, environment, action) {\n  return {\n    user: {\n      id: user?.id,\n      role: user?.role,\n      department: user?.department,\n      location: user?.location,\n      clearanceLevel: user?.clearanceLevel,\n      ...user?.attributes,\n      ...user,\n    },\n    resource: {\n      type: resource?.type,\n      id: resource?.id,\n      ownerId: resource?.ownerId,\n      department: resource?.department,\n      classification: resource?.classification,\n      ...resource?.attributes,\n      ...resource,\n    },\n    environment: {\n      ipAddress: environment?.ipAddress,\n      userAgent: environment?.userAgent,\n      sessionId: environment?.sessionId,\n      currentHour: ENVIRONMENT_PROVIDERS.currentHour(),\n      currentDayOfWeek: ENVIRONMENT_PROVIDERS.currentDayOfWeek(),\n      isBusinessHours: ENVIRONMENT_PROVIDERS.isBusinessHours(),\n      isWeekend: ENVIRONMENT_PROVIDERS.isWeekend(),\n      ...environment,\n    },\n    action,\n  };\n}\n\n/**\n * Log access decision to database\n * @param {Object} params - Log parameters\n */\nasync function logAccessDecision(params) {\n  const {\n    userId,\n    sessionId,\n    ipAddress,\n    userAgent,\n    resourceType,\n    resourceId,\n    action,\n    decision,\n    userAttributes,\n    resourceAttributes,\n    environmentAttributes,\n    evaluatedPolicies,\n    matchedPolicy,\n    evaluationTimeMs,\n    errorMessage,\n  } = params;\n\n  try {\n    await db.insert(abacAccessLogs).values({\n      userId,\n      sessionId,\n      ipAddress,\n      userAgent,\n      resourceType,\n      resourceId,\n      action,\n      decision,\n      userAttributes,\n      resourceAttributes,\n      environmentAttributes,\n      evaluatedPolicies,\n      matchedPolicyId: matchedPolicy?.id,\n      matchedPolicyName: matchedPolicy?.name,\n      evaluationTimeMs,\n      errorMessage,\n    });\n  } catch (error) {\n    logger.error(\"Failed to log ABAC access decision:\", error);\n  }\n}\n\n// ============================================================================\n// ABAC Service Class\n// ============================================================================\n\nclass ABACService {\n  constructor() {\n    this.conflictResolution = CONFLICT_RESOLUTION.DENY_OVERRIDE;\n    this.enableAuditLog = true;\n  }\n\n  /**\n   * Set conflict resolution strategy\n   * @param {string} strategy - One of CONFLICT_RESOLUTION values\n   */\n  setConflictResolution(strategy) {\n    if (Object.values(CONFLICT_RESOLUTION).includes(strategy)) {\n      this.conflictResolution = strategy;\n    }\n  }\n\n  /**\n   * Enable or disable audit logging\n   * @param {boolean} enabled\n   */\n  setAuditLogging(enabled) {\n    this.enableAuditLog = enabled;\n  }\n\n  /**\n   * Clear all caches (useful after policy updates)\n   */\n  clearCache() {\n    policyCache.clear();\n    attributeCache.clear();\n    policyCacheTimestamp = 0;\n    attributeCacheTimestamp = 0;\n  }\n\n  /**\n   * Main authorization decision method\n   * @param {Object} user - User making the request\n   * @param {Object} resource - Resource being accessed\n   * @param {string} action - Action being performed (read, write, delete, etc.)\n   * @param {Object} environment - Environmental context (IP, time, etc.)\n   * @returns {Promise<Object>} Authorization decision\n   */\n  async authorize(user, resource, action, environment = {}) {\n    const startTime = Date.now();\n    let decision = \"deny\";\n    let matchedPolicy = null;\n    let evaluatedPolicies = [];\n    let errorMessage = null;\n\n    try {\n      // Build full context\n      const context = buildContext(user, resource, environment, action);\n\n      // Load policies\n      const policies = await loadPolicies();\n\n      // Evaluate all applicable policies\n      const decisions = [];\n      for (const policy of policies) {\n        const result = evaluatePolicy(policy, context);\n        decisions.push({\n          policy,\n          matches: result.matches,\n          effect: result.effect,\n        });\n\n        if (result.matches) {\n          evaluatedPolicies.push({\n            id: policy.id,\n            name: policy.name,\n            effect: result.effect,\n            priority: policy.priority,\n          });\n        }\n      }\n\n      // Resolve conflicts\n      const resolution = resolveConflicts(decisions, this.conflictResolution);\n      decision = resolution.allow ? \"allow\" : \"deny\";\n      matchedPolicy = resolution.matchedPolicy;\n\n      const evaluationTimeMs = Date.now() - startTime;\n\n      // Log the decision\n      if (this.enableAuditLog) {\n        await logAccessDecision({\n          userId: user?.id,\n          sessionId: environment?.sessionId,\n          ipAddress: environment?.ipAddress,\n          userAgent: environment?.userAgent,\n          resourceType: resource?.type,\n          resourceId: resource?.id?.toString(),\n          action,\n          decision,\n          userAttributes: context.user,\n          resourceAttributes: context.resource,\n          environmentAttributes: context.environment,\n          evaluatedPolicies,\n          matchedPolicy,\n          evaluationTimeMs,\n        });\n      }\n\n      return {\n        allow: decision === \"allow\",\n        decision,\n        matchedPolicy: matchedPolicy\n          ? { id: matchedPolicy.id, name: matchedPolicy.name }\n          : null,\n        evaluatedPolicies,\n        evaluationTimeMs,\n        reason: resolution.reason,\n      };\n    } catch (error) {\n      errorMessage = error.message;\n      logger.error(\"ABAC authorization error:\", error);\n\n      // Log error\n      if (this.enableAuditLog) {\n        await logAccessDecision({\n          userId: user?.id,\n          resourceType: resource?.type,\n          resourceId: resource?.id?.toString(),\n          action,\n          decision: \"deny\",\n          errorMessage,\n          evaluationTimeMs: Date.now() - startTime,\n        });\n      }\n\n      // Fail closed - deny on error\n      return {\n        allow: false,\n        decision: \"deny\",\n        error: errorMessage,\n        reason: \"evaluation_error\",\n      };\n    }\n  }\n\n  /**\n   * Check if user can perform action on resource (simple boolean response)\n   * @param {Object} user - User making the request\n   * @param {Object} resource - Resource being accessed\n   * @param {string} action - Action being performed\n   * @param {Object} environment - Environmental context\n   * @returns {Promise<boolean>}\n   */\n  async can(user, resource, action, environment = {}) {\n    const result = await this.authorize(user, resource, action, environment);\n    return result.allow;\n  }\n\n  // ===========================================================================\n  // Policy Management\n  // ===========================================================================\n\n  /**\n   * Create a new ABAC policy\n   * @param {Object} policyData - Policy data\n   * @returns {Promise<Object>} Created policy\n   */\n  async createPolicy(policyData) {\n    const { name, description, resourceType, action, rules, effect, priority, createdBy } = policyData;\n\n    const [policy] = await db\n      .insert(abacPolicies)\n      .values({\n        name,\n        description,\n        resourceType,\n        action,\n        rules: typeof rules === \"string\" ? rules : JSON.stringify(rules),\n        effect: effect || \"allow\",\n        priority: priority || 0,\n        createdBy,\n        isActive: true,\n      })\n      .returning();\n\n    this.clearCache();\n    return policy;\n  }\n\n  /**\n   * Update an existing policy\n   * @param {number} policyId - Policy ID\n   * @param {Object} updates - Fields to update\n   * @returns {Promise<Object>} Updated policy\n   */\n  async updatePolicy(policyId, updates) {\n    const { rules, ...rest } = updates;\n\n    const updateData = { ...rest, updatedAt: new Date() };\n    if (rules !== undefined) {\n      updateData.rules = typeof rules === \"string\" ? rules : JSON.stringify(rules);\n    }\n\n    const [policy] = await db\n      .update(abacPolicies)\n      .set(updateData)\n      .where(eq(abacPolicies.id, policyId))\n      .returning();\n\n    this.clearCache();\n    return policy;\n  }\n\n  /**\n   * Delete a policy (soft delete by deactivating)\n   * @param {number} policyId - Policy ID\n   * @returns {Promise<Object>} Deactivated policy\n   */\n  async deletePolicy(policyId) {\n    const [policy] = await db\n      .update(abacPolicies)\n      .set({ isActive: false, updatedAt: new Date() })\n      .where(eq(abacPolicies.id, policyId))\n      .returning();\n\n    this.clearCache();\n    return policy;\n  }\n\n  /**\n   * Get all policies\n   * @param {boolean} includeInactive - Include inactive policies\n   * @returns {Promise<Array>} Array of policies\n   */\n  async getPolicies(includeInactive = false) {\n    let query = db.select().from(abacPolicies);\n\n    if (!includeInactive) {\n      query = query.where(eq(abacPolicies.isActive, true));\n    }\n\n    return query.orderBy(desc(abacPolicies.priority));\n  }\n\n  /**\n   * Get a single policy by ID\n   * @param {number} policyId - Policy ID\n   * @returns {Promise<Object>} Policy\n   */\n  async getPolicy(policyId) {\n    const [policy] = await db\n      .select()\n      .from(abacPolicies)\n      .where(eq(abacPolicies.id, policyId));\n\n    return policy;\n  }\n\n  // ===========================================================================\n  // Attribute Management\n  // ===========================================================================\n\n  /**\n   * Create a new attribute definition\n   * @param {Object} attrData - Attribute data\n   * @returns {Promise<Object>} Created attribute\n   */\n  async createAttribute(attrData) {\n    const [attr] = await db.insert(abacAttributes).values(attrData).returning();\n    this.clearCache();\n    return attr;\n  }\n\n  /**\n   * Get all attribute definitions\n   * @returns {Promise<Array>} Array of attributes\n   */\n  async getAttributes() {\n    return loadAttributes(true);\n  }\n\n  // ===========================================================================\n  // Policy Testing & Simulation\n  // ===========================================================================\n\n  /**\n   * Simulate a policy evaluation without logging\n   * @param {Object} testCase - Test case with user, resource, environment, action\n   * @returns {Promise<Object>} Simulation result\n   */\n  async simulate(testCase) {\n    const { user, resource, action, environment } = testCase;\n\n    // Temporarily disable logging\n    const wasLogging = this.enableAuditLog;\n    this.enableAuditLog = false;\n\n    try {\n      const result = await this.authorize(user, resource, action, environment);\n      return {\n        ...result,\n        testCase,\n        simulatedAt: new Date().toISOString(),\n      };\n    } finally {\n      this.enableAuditLog = wasLogging;\n    }\n  }\n\n  /**\n   * Run a test case against a specific policy\n   * @param {number} policyId - Policy ID\n   * @param {Object} testCase - Test case data\n   * @returns {Promise<Object>} Test result\n   */\n  async runPolicyTest(policyId, testCase) {\n    const policy = await this.getPolicy(policyId);\n    if (!policy) {\n      throw new Error(\"Policy not found\");\n    }\n\n    const context = buildContext(\n      testCase.userAttributes,\n      testCase.resourceAttributes,\n      testCase.environmentAttributes,\n      testCase.action || \"read\"\n    );\n\n    const result = evaluatePolicy(policy, context);\n    const actualDecision = result.matches ? result.effect : \"deny\";\n    const pass = actualDecision === testCase.expectedDecision;\n\n    // Update test case result\n    await db\n      .update(abacPolicyTestCases)\n      .set({\n        lastTestResult: pass ? \"pass\" : \"fail\",\n        lastTestedAt: new Date(),\n      })\n      .where(eq(abacPolicyTestCases.id, testCase.id));\n\n    return {\n      pass,\n      expected: testCase.expectedDecision,\n      actual: actualDecision,\n      policyMatched: result.matches,\n      policyEffect: result.effect,\n    };\n  }\n\n  /**\n   * Create a test case for a policy\n   * @param {Object} testCaseData - Test case data\n   * @returns {Promise<Object>} Created test case\n   */\n  async createTestCase(testCaseData) {\n    const [testCase] = await db\n      .insert(abacPolicyTestCases)\n      .values(testCaseData)\n      .returning();\n    return testCase;\n  }\n\n  /**\n   * Get test cases for a policy\n   * @param {number} policyId - Policy ID\n   * @returns {Promise<Array>} Array of test cases\n   */\n  async getTestCases(policyId) {\n    return db\n      .select()\n      .from(abacPolicyTestCases)\n      .where(eq(abacPolicyTestCases.policyId, policyId));\n  }\n\n  // ===========================================================================\n  // Access Logs\n  // ===========================================================================\n\n  /**\n   * Get access logs with filtering\n   * @param {Object} filters - Filter options\n   * @returns {Promise<Array>} Array of access logs\n   */\n  async getAccessLogs(filters = {}) {\n    const { userId, resourceType, decision, startDate, endDate, limit = 100 } = filters;\n\n    let query = db.select().from(abacAccessLogs);\n\n    const conditions = [];\n    if (userId) conditions.push(eq(abacAccessLogs.userId, userId));\n    if (resourceType) conditions.push(eq(abacAccessLogs.resourceType, resourceType));\n    if (decision) conditions.push(eq(abacAccessLogs.decision, decision));\n    if (startDate) conditions.push(sql`${abacAccessLogs.createdAt} >= ${startDate}`);\n    if (endDate) conditions.push(sql`${abacAccessLogs.createdAt} <= ${endDate}`);\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions));\n    }\n\n    return query.orderBy(desc(abacAccessLogs.createdAt)).limit(limit);\n  }\n\n  /**\n   * Get access decision statistics\n   * @param {Object} filters - Filter options\n   * @returns {Promise<Object>} Statistics\n   */\n  async getAccessStats(filters = {}) {\n    const { startDate, endDate } = filters;\n\n    const conditions = [];\n    if (startDate) conditions.push(sql`${abacAccessLogs.createdAt} >= ${startDate}`);\n    if (endDate) conditions.push(sql`${abacAccessLogs.createdAt} <= ${endDate}`);\n\n    const whereClause = conditions.length > 0 ? and(...conditions) : undefined;\n\n    const stats = await db\n      .select({\n        decision: abacAccessLogs.decision,\n        count: sql`count(*)`.as(\"count\"),\n        avgEvaluationTime: sql`avg(${abacAccessLogs.evaluationTimeMs})`.as(\"avg_time\"),\n      })\n      .from(abacAccessLogs)\n      .where(whereClause)\n      .groupBy(abacAccessLogs.decision);\n\n    return stats;\n  }\n}\n\n// Export singleton instance\nexport const abacService = new ABACService();\n\n// Export class for testing\nexport { ABACService };\n\n// Note: CONFLICT_RESOLUTION is already exported at declaration with 'export const'\n\nexport default abacService;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}