f8561c0f93db8ff85e8af24d11532f48
/* istanbul ignore next */
function cov_2h17fokuyc() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/Nutrition.controller.js";
  var hash = "1601908dc8c5a3aa3961df25df79a907a8a1efdc";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/Nutrition.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 11,
          column: 8
        },
        end: {
          line: 28,
          column: 9
        }
      },
      "1": {
        start: {
          line: 12,
          column: 43
        },
        end: {
          line: 18,
          column: 44
        }
      },
      "2": {
        start: {
          line: 19,
          column: 12
        },
        end: {
          line: 19,
          column: 28
        }
      },
      "3": {
        start: {
          line: 20,
          column: 12
        },
        end: {
          line: 20,
          column: 42
        }
      },
      "4": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 75
        }
      },
      "5": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 23,
          column: 28
        }
      },
      "6": {
        start: {
          line: 24,
          column: 12
        },
        end: {
          line: 27,
          column: 14
        }
      },
      "7": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 64,
          column: 9
        }
      },
      "8": {
        start: {
          line: 34,
          column: 27
        },
        end: {
          line: 34,
          column: 41
        }
      },
      "9": {
        start: {
          line: 36,
          column: 41
        },
        end: {
          line: 43,
          column: 97
        }
      },
      "10": {
        start: {
          line: 44,
          column: 40
        },
        end: {
          line: 44,
          column: 63
        }
      },
      "11": {
        start: {
          line: 46,
          column: 12
        },
        end: {
          line: 51,
          column: 13
        }
      },
      "12": {
        start: {
          line: 47,
          column: 16
        },
        end: {
          line: 47,
          column: 32
        }
      },
      "13": {
        start: {
          line: 48,
          column: 12
        },
        end: {
          line: 50,
          column: 18
        }
      },
      "14": {
        start: {
          line: 53,
          column: 12
        },
        end: {
          line: 53,
          column: 28
        }
      },
      "15": {
        start: {
          line: 54,
          column: 12
        },
        end: {
          line: 56,
          column: 14
        }
      },
      "16": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 71
        }
      },
      "17": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 59,
          column: 28
        }
      },
      "18": {
        start: {
          line: 60,
          column: 12
        },
        end: {
          line: 63,
          column: 14
        }
      },
      "19": {
        start: {
          line: 69,
          column: 8
        },
        end: {
          line: 157,
          column: 9
        }
      },
      "20": {
        start: {
          line: 70,
          column: 27
        },
        end: {
          line: 70,
          column: 41
        }
      },
      "21": {
        start: {
          line: 75,
          column: 16
        },
        end: {
          line: 75,
          column: 28
        }
      },
      "22": {
        start: {
          line: 78,
          column: 12
        },
        end: {
          line: 83,
          column: 13
        }
      },
      "23": {
        start: {
          line: 79,
          column: 16
        },
        end: {
          line: 79,
          column: 32
        }
      },
      "24": {
        start: {
          line: 80,
          column: 12
        },
        end: {
          line: 82,
          column: 18
        }
      },
      "25": {
        start: {
          line: 85,
          column: 12
        },
        end: {
          line: 90,
          column: 13
        }
      },
      "26": {
        start: {
          line: 86,
          column: 16
        },
        end: {
          line: 86,
          column: 32
        }
      },
      "27": {
        start: {
          line: 87,
          column: 12
        },
        end: {
          line: 89,
          column: 18
        }
      },
      "28": {
        start: {
          line: 92,
          column: 12
        },
        end: {
          line: 97,
          column: 13
        }
      },
      "29": {
        start: {
          line: 93,
          column: 16
        },
        end: {
          line: 93,
          column: 32
        }
      },
      "30": {
        start: {
          line: 94,
          column: 12
        },
        end: {
          line: 96,
          column: 18
        }
      },
      "31": {
        start: {
          line: 100,
          column: 40
        },
        end: {
          line: 100,
          column: 171
        }
      },
      "32": {
        start: {
          line: 101,
          column: 39
        },
        end: {
          line: 101,
          column: 61
        }
      },
      "33": {
        start: {
          line: 104,
          column: 51
        },
        end: {
          line: 108,
          column: 45
        }
      },
      "34": {
        start: {
          line: 110,
          column: 47
        },
        end: {
          line: 114,
          column: 40
        }
      },
      "35": {
        start: {
          line: 117,
          column: 24
        },
        end: {
          line: 117,
          column: 34
        }
      },
      "36": {
        start: {
          line: 119,
          column: 12
        },
        end: {
          line: 143,
          column: 13
        }
      },
      "37": {
        start: {
          line: 121,
          column: 16
        },
        end: {
          line: 129,
          column: 33
        }
      },
      "38": {
        start: {
          line: 130,
          column: 16
        },
        end: {
          line: 130,
          column: 35
        }
      },
      "39": {
        start: {
          line: 133,
          column: 16
        },
        end: {
          line: 141,
          column: 33
        }
      },
      "40": {
        start: {
          line: 142,
          column: 16
        },
        end: {
          line: 142,
          column: 35
        }
      },
      "41": {
        start: {
          line: 145,
          column: 12
        },
        end: {
          line: 145,
          column: 28
        }
      },
      "42": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 149,
          column: 14
        }
      },
      "43": {
        start: {
          line: 151,
          column: 12
        },
        end: {
          line: 151,
          column: 69
        }
      },
      "44": {
        start: {
          line: 152,
          column: 12
        },
        end: {
          line: 152,
          column: 28
        }
      },
      "45": {
        start: {
          line: 153,
          column: 12
        },
        end: {
          line: 156,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 10,
            column: 4
          },
          end: {
            line: 10,
            column: 5
          }
        },
        loc: {
          start: {
            line: 10,
            column: 49
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 10
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 32,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        loc: {
          start: {
            line: 32,
            column: 50
          },
          end: {
            line: 65,
            column: 5
          }
        },
        line: 32
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        },
        loc: {
          start: {
            line: 68,
            column: 54
          },
          end: {
            line: 158,
            column: 5
          }
        },
        line: 68
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 46,
            column: 12
          },
          end: {
            line: 51,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 46,
            column: 12
          },
          end: {
            line: 51,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 46
      },
      "1": {
        loc: {
          start: {
            line: 78,
            column: 12
          },
          end: {
            line: 83,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 78,
            column: 12
          },
          end: {
            line: 83,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 78
      },
      "2": {
        loc: {
          start: {
            line: 85,
            column: 12
          },
          end: {
            line: 90,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 85,
            column: 12
          },
          end: {
            line: 90,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 85
      },
      "3": {
        loc: {
          start: {
            line: 92,
            column: 12
          },
          end: {
            line: 97,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 92,
            column: 12
          },
          end: {
            line: 97,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 92
      },
      "4": {
        loc: {
          start: {
            line: 104,
            column: 51
          },
          end: {
            line: 108,
            column: 45
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 107,
            column: 18
          },
          end: {
            line: 107,
            column: 55
          }
        }, {
          start: {
            line: 108,
            column: 18
          },
          end: {
            line: 108,
            column: 45
          }
        }],
        line: 104
      },
      "5": {
        loc: {
          start: {
            line: 110,
            column: 47
          },
          end: {
            line: 114,
            column: 40
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 113,
            column: 18
          },
          end: {
            line: 113,
            column: 50
          }
        }, {
          start: {
            line: 114,
            column: 18
          },
          end: {
            line: 114,
            column: 40
          }
        }],
        line: 110
      },
      "6": {
        loc: {
          start: {
            line: 119,
            column: 12
          },
          end: {
            line: 143,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 119,
            column: 12
          },
          end: {
            line: 143,
            column: 13
          }
        }, {
          start: {
            line: 131,
            column: 19
          },
          end: {
            line: 143,
            column: 13
          }
        }],
        line: 119
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "1601908dc8c5a3aa3961df25df79a907a8a1efdc"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2h17fokuyc = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2h17fokuyc();
import { db } from "../../config/db.drizzle.js";
import { nutrition_assessment } from "../../db/schemas/nutritionAssessment.schema.js";
import { nutrition_problems_type } from "../../db/schemas/nutritionProblemsType.schema.js";
import { nutrition_template } from "../../db/schemas/nutritionTemplate.schema.js";
import { eq } from "drizzle-orm";
import { logger } from '../../utils/logger.js';
class NutritionController {
  // Get all nutrition problems types
  async nutritionProblemsTypes(request, reply) {
    /* istanbul ignore next */
    cov_2h17fokuyc().f[0]++;
    cov_2h17fokuyc().s[0]++;
    try {
      const nutritionProblemsTypes =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[1]++, await db.select({
        id: nutrition_problems_type.id,
        name: nutrition_problems_type.name,
        description: nutrition_problems_type.description,
        createdAt: nutrition_problems_type.createdAt,
        updatedAt: nutrition_problems_type.updatedAt
      }).from(nutrition_problems_type));
      /* istanbul ignore next */
      cov_2h17fokuyc().s[2]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[3]++;
      return nutritionProblemsTypes;
    } catch (error) {
      /* istanbul ignore next */
      cov_2h17fokuyc().s[4]++;
      logger.error("Error fetching nutrition problems types:", error);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[5]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[6]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Show nutrition assessment for a specific patient
  async nutritionAssessmentShow(request, reply) {
    /* istanbul ignore next */
    cov_2h17fokuyc().f[1]++;
    cov_2h17fokuyc().s[7]++;
    try {
      const {
        id
      } =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[8]++, request.params);
      const nutritionAssessments =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[9]++, await db.select({
        id: nutrition_assessment.id,
        patient_id: nutrition_assessment.patient_id,
        nutrition_problems_type_ids: nutrition_assessment.nutrition_problems_type_ids,
        nutrition_template_ids: nutrition_assessment.nutrition_template_ids,
        createdAt: nutrition_assessment.createdAt,
        updatedAt: nutrition_assessment.updatedAt
      }).from(nutrition_assessment).where(eq(nutrition_assessment.patient_id, id)).limit(1));
      const nutritionAssessment =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[10]++, nutritionAssessments[0]);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[11]++;
      if (!nutritionAssessment) {
        /* istanbul ignore next */
        cov_2h17fokuyc().b[0][0]++;
        cov_2h17fokuyc().s[12]++;
        reply.code(404);
        /* istanbul ignore next */
        cov_2h17fokuyc().s[13]++;
        return {
          error: "No nutrition assessment found for this patient"
        };
      } else
      /* istanbul ignore next */
      {
        cov_2h17fokuyc().b[0][1]++;
      }
      cov_2h17fokuyc().s[14]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[15]++;
      return {
        nutrition_assessment: nutritionAssessment
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_2h17fokuyc().s[16]++;
      logger.error("Error fetching nutrition assessment:", error);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[17]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[18]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Auto save nutrition assessment for a patient
  async nutritionAssessmentAutoSave(request, reply) {
    /* istanbul ignore next */
    cov_2h17fokuyc().f[2]++;
    cov_2h17fokuyc().s[19]++;
    try {
      const {
        id
      } =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[20]++, request.params);
      const {
        patient_id,
        nutrition_problems_type_ids,
        nutrition_template_ids
      } =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[21]++, request.body);

      // Validate required fields
      /* istanbul ignore next */
      cov_2h17fokuyc().s[22]++;
      if (!patient_id) {
        /* istanbul ignore next */
        cov_2h17fokuyc().b[1][0]++;
        cov_2h17fokuyc().s[23]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_2h17fokuyc().s[24]++;
        return {
          message: "Patient ID is required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_2h17fokuyc().b[1][1]++;
      }
      cov_2h17fokuyc().s[25]++;
      if (!nutrition_problems_type_ids) {
        /* istanbul ignore next */
        cov_2h17fokuyc().b[2][0]++;
        cov_2h17fokuyc().s[26]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_2h17fokuyc().s[27]++;
        return {
          message: "Nutrition problems type IDs are required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_2h17fokuyc().b[2][1]++;
      }
      cov_2h17fokuyc().s[28]++;
      if (!nutrition_template_ids) {
        /* istanbul ignore next */
        cov_2h17fokuyc().b[3][0]++;
        cov_2h17fokuyc().s[29]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_2h17fokuyc().s[30]++;
        return {
          message: "Nutrition template IDs are required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_2h17fokuyc().b[3][1]++;
      }

      // Check if nutrition assessment already exists for this patient
      const existingAssessments =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[31]++, await db.select({
        id: nutrition_assessment.id
      }).from(nutrition_assessment).where(eq(nutrition_assessment.patient_id, id)).limit(1));
      const existingAssessment =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[32]++, existingAssessments[0]);

      // Convert arrays to comma-separated strings if they are arrays
      const nutritionProblemsTypeIdsString =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[33]++, Array.isArray(nutrition_problems_type_ids) ?
      /* istanbul ignore next */
      (cov_2h17fokuyc().b[4][0]++, nutrition_problems_type_ids.join(",")) :
      /* istanbul ignore next */
      (cov_2h17fokuyc().b[4][1]++, nutrition_problems_type_ids));
      const nutritionTemplateIdsString =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[34]++, Array.isArray(nutrition_template_ids) ?
      /* istanbul ignore next */
      (cov_2h17fokuyc().b[5][0]++, nutrition_template_ids.join(",")) :
      /* istanbul ignore next */
      (cov_2h17fokuyc().b[5][1]++, nutrition_template_ids));
      let result;
      const now =
      /* istanbul ignore next */
      (cov_2h17fokuyc().s[35]++, new Date());
      /* istanbul ignore next */
      cov_2h17fokuyc().s[36]++;
      if (existingAssessment) {
        /* istanbul ignore next */
        cov_2h17fokuyc().b[6][0]++;
        cov_2h17fokuyc().s[37]++;
        // Update existing nutrition assessment
        result = await db.update(nutrition_assessment).set({
          patient_id: patient_id,
          nutrition_problems_type_ids: nutritionProblemsTypeIdsString,
          nutrition_template_ids: nutritionTemplateIdsString,
          updatedAt: now
        }).where(eq(nutrition_assessment.patient_id, id)).returning();
        /* istanbul ignore next */
        cov_2h17fokuyc().s[38]++;
        result = result[0];
      } else {
        /* istanbul ignore next */
        cov_2h17fokuyc().b[6][1]++;
        cov_2h17fokuyc().s[39]++;
        // Create new nutrition assessment
        result = await db.insert(nutrition_assessment).values({
          patient_id: patient_id,
          nutrition_problems_type_ids: nutritionProblemsTypeIdsString,
          nutrition_template_ids: nutritionTemplateIdsString,
          createdAt: now,
          updatedAt: now
        }).returning();
        /* istanbul ignore next */
        cov_2h17fokuyc().s[40]++;
        result = result[0];
      }
      /* istanbul ignore next */
      cov_2h17fokuyc().s[41]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[42]++;
      return {
        message: "Données sauvegardées avec succès",
        data: result
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_2h17fokuyc().s[43]++;
      logger.error("Error saving nutrition assessment:", error);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[44]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_2h17fokuyc().s[45]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }
}
export default new NutritionController();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmgxN2Zva3V5YyIsImFjdHVhbENvdmVyYWdlIiwiZGIiLCJudXRyaXRpb25fYXNzZXNzbWVudCIsIm51dHJpdGlvbl9wcm9ibGVtc190eXBlIiwibnV0cml0aW9uX3RlbXBsYXRlIiwiZXEiLCJsb2dnZXIiLCJOdXRyaXRpb25Db250cm9sbGVyIiwibnV0cml0aW9uUHJvYmxlbXNUeXBlcyIsInJlcXVlc3QiLCJyZXBseSIsImYiLCJzIiwic2VsZWN0IiwiaWQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJmcm9tIiwiY29kZSIsImVycm9yIiwibWVzc2FnZSIsIm51dHJpdGlvbkFzc2Vzc21lbnRTaG93IiwicGFyYW1zIiwibnV0cml0aW9uQXNzZXNzbWVudHMiLCJwYXRpZW50X2lkIiwibnV0cml0aW9uX3Byb2JsZW1zX3R5cGVfaWRzIiwibnV0cml0aW9uX3RlbXBsYXRlX2lkcyIsIndoZXJlIiwibGltaXQiLCJudXRyaXRpb25Bc3Nlc3NtZW50IiwiYiIsIm51dHJpdGlvbkFzc2Vzc21lbnRBdXRvU2F2ZSIsImJvZHkiLCJleGlzdGluZ0Fzc2Vzc21lbnRzIiwiZXhpc3RpbmdBc3Nlc3NtZW50IiwibnV0cml0aW9uUHJvYmxlbXNUeXBlSWRzU3RyaW5nIiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsIm51dHJpdGlvblRlbXBsYXRlSWRzU3RyaW5nIiwicmVzdWx0Iiwibm93IiwiRGF0ZSIsInVwZGF0ZSIsInNldCIsInJldHVybmluZyIsImluc2VydCIsInZhbHVlcyIsImRhdGEiXSwic291cmNlcyI6WyJOdXRyaXRpb24uY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi9jb25maWcvZGIuZHJpenpsZS5qc1wiO1xuaW1wb3J0IHsgbnV0cml0aW9uX2Fzc2Vzc21lbnQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hcy9udXRyaXRpb25Bc3Nlc3NtZW50LnNjaGVtYS5qc1wiO1xuaW1wb3J0IHsgbnV0cml0aW9uX3Byb2JsZW1zX3R5cGUgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hcy9udXRyaXRpb25Qcm9ibGVtc1R5cGUuc2NoZW1hLmpzXCI7XG5pbXBvcnQgeyBudXRyaXRpb25fdGVtcGxhdGUgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hcy9udXRyaXRpb25UZW1wbGF0ZS5zY2hlbWEuanNcIjtcbmltcG9ydCB7IGVxIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5jbGFzcyBOdXRyaXRpb25Db250cm9sbGVyIHtcbiAgICAvLyBHZXQgYWxsIG51dHJpdGlvbiBwcm9ibGVtcyB0eXBlc1xuICAgIGFzeW5jIG51dHJpdGlvblByb2JsZW1zVHlwZXMocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG51dHJpdGlvblByb2JsZW1zVHlwZXMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBudXRyaXRpb25fcHJvYmxlbXNfdHlwZS5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBudXRyaXRpb25fcHJvYmxlbXNfdHlwZS5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudXRyaXRpb25fcHJvYmxlbXNfdHlwZS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG51dHJpdGlvbl9wcm9ibGVtc190eXBlLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG51dHJpdGlvbl9wcm9ibGVtc190eXBlLnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIH0pLmZyb20obnV0cml0aW9uX3Byb2JsZW1zX3R5cGUpO1xuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIG51dHJpdGlvblByb2JsZW1zVHlwZXM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBudXRyaXRpb24gcHJvYmxlbXMgdHlwZXM6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNob3cgbnV0cml0aW9uIGFzc2Vzc21lbnQgZm9yIGEgc3BlY2lmaWMgcGF0aWVudFxuICAgIGFzeW5jIG51dHJpdGlvbkFzc2Vzc21lbnRTaG93KHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkIH0gPSByZXF1ZXN0LnBhcmFtcztcblxuICAgICAgICAgICAgY29uc3QgbnV0cml0aW9uQXNzZXNzbWVudHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBudXRyaXRpb25fYXNzZXNzbWVudC5pZCxcbiAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBudXRyaXRpb25fYXNzZXNzbWVudC5wYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgIG51dHJpdGlvbl9wcm9ibGVtc190eXBlX2lkczogbnV0cml0aW9uX2Fzc2Vzc21lbnQubnV0cml0aW9uX3Byb2JsZW1zX3R5cGVfaWRzLFxuICAgICAgICAgICAgICAgIG51dHJpdGlvbl90ZW1wbGF0ZV9pZHM6IG51dHJpdGlvbl9hc3Nlc3NtZW50Lm51dHJpdGlvbl90ZW1wbGF0ZV9pZHMsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBudXRyaXRpb25fYXNzZXNzbWVudC5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBudXRyaXRpb25fYXNzZXNzbWVudC51cGRhdGVkQXQsXG4gICAgICAgICAgICB9KS5mcm9tKG51dHJpdGlvbl9hc3Nlc3NtZW50KS53aGVyZShlcShudXRyaXRpb25fYXNzZXNzbWVudC5wYXRpZW50X2lkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgICAgICAgY29uc3QgbnV0cml0aW9uQXNzZXNzbWVudCA9IG51dHJpdGlvbkFzc2Vzc21lbnRzWzBdO1xuXG4gICAgICAgICAgICBpZiAoIW51dHJpdGlvbkFzc2Vzc21lbnQpIHtcbiAgICAgICAgICAgICAgICByZXBseS5jb2RlKDQwNCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjogXCJObyBudXRyaXRpb24gYXNzZXNzbWVudCBmb3VuZCBmb3IgdGhpcyBwYXRpZW50XCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBudXRyaXRpb25fYXNzZXNzbWVudDogbnV0cml0aW9uQXNzZXNzbWVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBudXRyaXRpb24gYXNzZXNzbWVudDpcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXV0byBzYXZlIG51dHJpdGlvbiBhc3Nlc3NtZW50IGZvciBhIHBhdGllbnRcbiAgICBhc3luYyBudXRyaXRpb25Bc3Nlc3NtZW50QXV0b1NhdmUocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcXVlc3QucGFyYW1zO1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIHBhdGllbnRfaWQsXG4gICAgICAgICAgICAgICAgbnV0cml0aW9uX3Byb2JsZW1zX3R5cGVfaWRzLFxuICAgICAgICAgICAgICAgIG51dHJpdGlvbl90ZW1wbGF0ZV9pZHMsXG4gICAgICAgICAgICB9ID0gcmVxdWVzdC5ib2R5O1xuXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICAgICAgICAgIGlmICghcGF0aWVudF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUGF0aWVudCBJRCBpcyByZXF1aXJlZFwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghbnV0cml0aW9uX3Byb2JsZW1zX3R5cGVfaWRzKSB7XG4gICAgICAgICAgICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOdXRyaXRpb24gcHJvYmxlbXMgdHlwZSBJRHMgYXJlIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFudXRyaXRpb25fdGVtcGxhdGVfaWRzKSB7XG4gICAgICAgICAgICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOdXRyaXRpb24gdGVtcGxhdGUgSURzIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIG51dHJpdGlvbiBhc3Nlc3NtZW50IGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIHBhdGllbnRcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQXNzZXNzbWVudHMgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogbnV0cml0aW9uX2Fzc2Vzc21lbnQuaWQgfSkuZnJvbShudXRyaXRpb25fYXNzZXNzbWVudCkud2hlcmUoZXEobnV0cml0aW9uX2Fzc2Vzc21lbnQucGF0aWVudF9pZCwgaWQpKS5saW1pdCgxKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQXNzZXNzbWVudCA9IGV4aXN0aW5nQXNzZXNzbWVudHNbMF07XG5cbiAgICAgICAgICAgIC8vIENvbnZlcnQgYXJyYXlzIHRvIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdzIGlmIHRoZXkgYXJlIGFycmF5c1xuICAgICAgICAgICAgY29uc3QgbnV0cml0aW9uUHJvYmxlbXNUeXBlSWRzU3RyaW5nID0gQXJyYXkuaXNBcnJheShcbiAgICAgICAgICAgICAgICBudXRyaXRpb25fcHJvYmxlbXNfdHlwZV9pZHNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICA/IG51dHJpdGlvbl9wcm9ibGVtc190eXBlX2lkcy5qb2luKFwiLFwiKVxuICAgICAgICAgICAgICAgIDogbnV0cml0aW9uX3Byb2JsZW1zX3R5cGVfaWRzO1xuXG4gICAgICAgICAgICBjb25zdCBudXRyaXRpb25UZW1wbGF0ZUlkc1N0cmluZyA9IEFycmF5LmlzQXJyYXkoXG4gICAgICAgICAgICAgICAgbnV0cml0aW9uX3RlbXBsYXRlX2lkc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgID8gbnV0cml0aW9uX3RlbXBsYXRlX2lkcy5qb2luKFwiLFwiKVxuICAgICAgICAgICAgICAgIDogbnV0cml0aW9uX3RlbXBsYXRlX2lkcztcblxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0Fzc2Vzc21lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgbnV0cml0aW9uIGFzc2Vzc21lbnRcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi51cGRhdGUobnV0cml0aW9uX2Fzc2Vzc21lbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudF9pZDogcGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51dHJpdGlvbl9wcm9ibGVtc190eXBlX2lkczogbnV0cml0aW9uUHJvYmxlbXNUeXBlSWRzU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnV0cml0aW9uX3RlbXBsYXRlX2lkczogbnV0cml0aW9uVGVtcGxhdGVJZHNTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKGVxKG51dHJpdGlvbl9hc3Nlc3NtZW50LnBhdGllbnRfaWQsIGlkKSlcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybmluZygpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBudXRyaXRpb24gYXNzZXNzbWVudFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLmluc2VydChudXRyaXRpb25fYXNzZXNzbWVudClcbiAgICAgICAgICAgICAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBwYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnV0cml0aW9uX3Byb2JsZW1zX3R5cGVfaWRzOiBudXRyaXRpb25Qcm9ibGVtc1R5cGVJZHNTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudXRyaXRpb25fdGVtcGxhdGVfaWRzOiBudXRyaXRpb25UZW1wbGF0ZUlkc1N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbm93LFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBub3csXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcGx5LmNvZGUoMjAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJEb25uw6llcyBzYXV2ZWdhcmTDqWVzIGF2ZWMgc3VjY8Ooc1wiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBzYXZpbmcgbnV0cml0aW9uIGFzc2Vzc21lbnQ6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IE51dHJpdGlvbkNvbnRyb2xsZXIoKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWixTQUFTRSxFQUFFLFFBQVEsNEJBQTRCO0FBQy9DLFNBQVNDLG9CQUFv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