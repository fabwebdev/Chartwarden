{"version":3,"names":["cov_289fqwmn8","actualCoverage","pgTable","bigint","varchar","text","timestamp","index","patients","users","patient_allergies","s","id","mode","primaryKey","generatedByDefaultAsIdentity","patient_id","references","f","notNull","allergen_name","length","allergen_type","allergen_code","reaction_type","reaction_severity","reaction_description","status","default","onset_date","verified_by_id","verified_date","source","created_by_id","updated_by_id","deleted_at","createdAt","defaultNow","updatedAt","table","patientIdx","on","allergenNameIdx","statusIdx","patientStatusIdx","drug_interactions","drug1_name","drug1_code","drug2_name","drug2_code","interaction_severity","interaction_description","clinical_effect","management_recommendation","drug1Idx","drug2Idx","severityIdx"],"sources":["patientAllergy.schema.js"],"sourcesContent":["import { pgTable, bigint, varchar, text, timestamp, index } from 'drizzle-orm/pg-core';\nimport { patients } from './patient.schema.js';\nimport { users } from './user.schema.js';\n\n/**\n * Patient Allergies\n * Tracks patient allergies and adverse reactions\n * Critical for medication safety and drug interaction checking\n */\nexport const patient_allergies = pgTable('patient_allergies', {\n  id: bigint('id', { mode: 'number' }).primaryKey().generatedByDefaultAsIdentity(),\n  patient_id: bigint('patient_id', { mode: 'number' }).references(() => patients.id).notNull(),\n\n  // Allergy identification\n  allergen_name: varchar('allergen_name', { length: 255 }).notNull(),\n  allergen_type: varchar('allergen_type', { length: 50 }), // MEDICATION, FOOD, ENVIRONMENTAL, OTHER\n  allergen_code: varchar('allergen_code', { length: 50 }), // RxNorm or other standard code\n\n  // Reaction details\n  reaction_type: varchar('reaction_type', { length: 100 }), // ANAPHYLAXIS, RASH, HIVES, SWELLING, GI_UPSET, OTHER\n  reaction_severity: varchar('reaction_severity', { length: 50 }), // MILD, MODERATE, SEVERE, LIFE_THREATENING\n  reaction_description: text('reaction_description'),\n\n  // Status\n  status: varchar('status', { length: 50 }).default('ACTIVE'), // ACTIVE, INACTIVE, RESOLVED\n  onset_date: varchar('onset_date', { length: 50 }),\n  verified_by_id: text('verified_by_id').references(() => users.id),\n  verified_date: timestamp('verified_date'),\n\n  // Source of information\n  source: varchar('source', { length: 100 }), // PATIENT_REPORTED, MEDICAL_RECORD, FAMILY_REPORTED\n\n  // Audit fields\n  created_by_id: text('created_by_id').references(() => users.id),\n  updated_by_id: text('updated_by_id').references(() => users.id),\n  deleted_at: timestamp('deleted_at'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull()\n}, (table) => ({\n  patientIdx: index('idx_patient_allergies_patient_id').on(table.patient_id),\n  allergenNameIdx: index('idx_patient_allergies_allergen_name').on(table.allergen_name),\n  statusIdx: index('idx_patient_allergies_status').on(table.status),\n  patientStatusIdx: index('idx_patient_allergies_patient_status')\n    .on(table.patient_id, table.status),\n}));\n\n/**\n * Drug Interactions - Known drug-drug interactions database\n * Used for medication safety checking\n */\nexport const drug_interactions = pgTable('drug_interactions', {\n  id: bigint('id', { mode: 'number' }).primaryKey().generatedByDefaultAsIdentity(),\n\n  // Drug pair\n  drug1_name: varchar('drug1_name', { length: 255 }).notNull(),\n  drug1_code: varchar('drug1_code', { length: 50 }), // RxNorm or NDC\n  drug2_name: varchar('drug2_name', { length: 255 }).notNull(),\n  drug2_code: varchar('drug2_code', { length: 50 }), // RxNorm or NDC\n\n  // Interaction details\n  interaction_severity: varchar('interaction_severity', { length: 50 }).notNull(), // CONTRAINDICATED, SEVERE, MODERATE, MINOR\n  interaction_description: text('interaction_description'),\n  clinical_effect: text('clinical_effect'),\n  management_recommendation: text('management_recommendation'),\n\n  // Source\n  source: varchar('source', { length: 100 }), // FDA, MEDSCAPE, EPOCRATES, CUSTOM\n\n  // Audit fields\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull()\n}, (table) => ({\n  drug1Idx: index('idx_drug_interactions_drug1').on(table.drug1_name),\n  drug2Idx: index('idx_drug_interactions_drug2').on(table.drug2_name),\n  severityIdx: index('idx_drug_interactions_severity').on(table.interaction_severity),\n}));\n"],"mappings":"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","ignoreList":[]}