4157536449c2b485a983296916c5e379
/* istanbul ignore next */
function cov_qzauskddy() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/AuditCompliance.controller.js";
  var hash = "e647fbc4927c428439cb5c8ff3721517cbddb276";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/AuditCompliance.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 17,
          column: 35
        },
        end: {
          line: 79,
          column: 1
        }
      },
      "1": {
        start: {
          line: 18,
          column: 2
        },
        end: {
          line: 78,
          column: 3
        }
      },
      "2": {
        start: {
          line: 19,
          column: 35
        },
        end: {
          line: 19,
          column: 48
        }
      },
      "3": {
        start: {
          line: 21,
          column: 4
        },
        end: {
          line: 28,
          column: 5
        }
      },
      "4": {
        start: {
          line: 22,
          column: 6
        },
        end: {
          line: 22,
          column: 22
        }
      },
      "5": {
        start: {
          line: 23,
          column: 6
        },
        end: {
          line: 27,
          column: 8
        }
      },
      "6": {
        start: {
          line: 30,
          column: 18
        },
        end: {
          line: 30,
          column: 37
        }
      },
      "7": {
        start: {
          line: 31,
          column: 16
        },
        end: {
          line: 31,
          column: 33
        }
      },
      "8": {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 40,
          column: 5
        }
      },
      "9": {
        start: {
          line: 34,
          column: 6
        },
        end: {
          line: 34,
          column: 22
        }
      },
      "10": {
        start: {
          line: 35,
          column: 6
        },
        end: {
          line: 39,
          column: 8
        }
      },
      "11": {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 49,
          column: 5
        }
      },
      "12": {
        start: {
          line: 43,
          column: 6
        },
        end: {
          line: 43,
          column: 22
        }
      },
      "13": {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 48,
          column: 8
        }
      },
      "14": {
        start: {
          line: 51,
          column: 19
        },
        end: {
          line: 51,
          column: 69
        }
      },
      "15": {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 63,
          column: 32
        }
      },
      "16": {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 69,
          column: 6
        }
      },
      "17": {
        start: {
          line: 71,
          column: 4
        },
        end: {
          line: 71,
          column: 56
        }
      },
      "18": {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 20
        }
      },
      "19": {
        start: {
          line: 73,
          column: 4
        },
        end: {
          line: 77,
          column: 6
        }
      },
      "20": {
        start: {
          line: 85,
          column: 37
        },
        end: {
          line: 134,
          column: 1
        }
      },
      "21": {
        start: {
          line: 86,
          column: 2
        },
        end: {
          line: 133,
          column: 3
        }
      },
      "22": {
        start: {
          line: 87,
          column: 23
        },
        end: {
          line: 87,
          column: 37
        }
      },
      "23": {
        start: {
          line: 88,
          column: 35
        },
        end: {
          line: 88,
          column: 48
        }
      },
      "24": {
        start: {
          line: 90,
          column: 16
        },
        end: {
          line: 90,
          column: 20
        }
      },
      "25": {
        start: {
          line: 91,
          column: 14
        },
        end: {
          line: 91,
          column: 18
        }
      },
      "26": {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 105,
          column: 5
        }
      },
      "27": {
        start: {
          line: 94,
          column: 6
        },
        end: {
          line: 94,
          column: 34
        }
      },
      "28": {
        start: {
          line: 95,
          column: 6
        },
        end: {
          line: 95,
          column: 30
        }
      },
      "29": {
        start: {
          line: 97,
          column: 6
        },
        end: {
          line: 104,
          column: 7
        }
      },
      "30": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 98,
          column: 24
        }
      },
      "31": {
        start: {
          line: 99,
          column: 8
        },
        end: {
          line: 103,
          column: 10
        }
      },
      "32": {
        start: {
          line: 107,
          column: 19
        },
        end: {
          line: 107,
          column: 79
        }
      },
      "33": {
        start: {
          line: 110,
          column: 4
        },
        end: {
          line: 118,
          column: 32
        }
      },
      "34": {
        start: {
          line: 120,
          column: 4
        },
        end: {
          line: 124,
          column: 6
        }
      },
      "35": {
        start: {
          line: 126,
          column: 4
        },
        end: {
          line: 126,
          column: 59
        }
      },
      "36": {
        start: {
          line: 127,
          column: 4
        },
        end: {
          line: 127,
          column: 20
        }
      },
      "37": {
        start: {
          line: 128,
          column: 4
        },
        end: {
          line: 132,
          column: 6
        }
      },
      "38": {
        start: {
          line: 140,
          column: 40
        },
        end: {
          line: 171,
          column: 1
        }
      },
      "39": {
        start: {
          line: 141,
          column: 2
        },
        end: {
          line: 170,
          column: 3
        }
      },
      "40": {
        start: {
          line: 142,
          column: 41
        },
        end: {
          line: 142,
          column: 55
        }
      },
      "41": {
        start: {
          line: 144,
          column: 20
        },
        end: {
          line: 144,
          column: 89
        }
      },
      "42": {
        start: {
          line: 147,
          column: 4
        },
        end: {
          line: 155,
          column: 32
        }
      },
      "43": {
        start: {
          line: 157,
          column: 4
        },
        end: {
          line: 161,
          column: 6
        }
      },
      "44": {
        start: {
          line: 163,
          column: 4
        },
        end: {
          line: 163,
          column: 62
        }
      },
      "45": {
        start: {
          line: 164,
          column: 4
        },
        end: {
          line: 164,
          column: 20
        }
      },
      "46": {
        start: {
          line: 165,
          column: 4
        },
        end: {
          line: 169,
          column: 6
        }
      },
      "47": {
        start: {
          line: 177,
          column: 34
        },
        end: {
          line: 201,
          column: 1
        }
      },
      "48": {
        start: {
          line: 178,
          column: 2
        },
        end: {
          line: 200,
          column: 3
        }
      },
      "49": {
        start: {
          line: 179,
          column: 33
        },
        end: {
          line: 182,
          column: 6
        }
      },
      "50": {
        start: {
          line: 184,
          column: 4
        },
        end: {
          line: 191,
          column: 6
        }
      },
      "51": {
        start: {
          line: 193,
          column: 4
        },
        end: {
          line: 193,
          column: 55
        }
      },
      "52": {
        start: {
          line: 194,
          column: 4
        },
        end: {
          line: 194,
          column: 20
        }
      },
      "53": {
        start: {
          line: 195,
          column: 4
        },
        end: {
          line: 199,
          column: 6
        }
      },
      "54": {
        start: {
          line: 207,
          column: 29
        },
        end: {
          line: 225,
          column: 1
        }
      },
      "55": {
        start: {
          line: 208,
          column: 2
        },
        end: {
          line: 224,
          column: 3
        }
      },
      "56": {
        start: {
          line: 209,
          column: 18
        },
        end: {
          line: 209,
          column: 41
        }
      },
      "57": {
        start: {
          line: 211,
          column: 4
        },
        end: {
          line: 215,
          column: 6
        }
      },
      "58": {
        start: {
          line: 217,
          column: 4
        },
        end: {
          line: 217,
          column: 50
        }
      },
      "59": {
        start: {
          line: 218,
          column: 4
        },
        end: {
          line: 218,
          column: 20
        }
      },
      "60": {
        start: {
          line: 219,
          column: 4
        },
        end: {
          line: 223,
          column: 6
        }
      },
      "61": {
        start: {
          line: 231,
          column: 37
        },
        end: {
          line: 261,
          column: 1
        }
      },
      "62": {
        start: {
          line: 232,
          column: 2
        },
        end: {
          line: 260,
          column: 3
        }
      },
      "63": {
        start: {
          line: 233,
          column: 35
        },
        end: {
          line: 233,
          column: 48
        }
      },
      "64": {
        start: {
          line: 234,
          column: 18
        },
        end: {
          line: 234,
          column: 46
        }
      },
      "65": {
        start: {
          line: 236,
          column: 4
        },
        end: {
          line: 243,
          column: 5
        }
      },
      "66": {
        start: {
          line: 237,
          column: 6
        },
        end: {
          line: 237,
          column: 22
        }
      },
      "67": {
        start: {
          line: 238,
          column: 6
        },
        end: {
          line: 242,
          column: 8
        }
      },
      "68": {
        start: {
          line: 245,
          column: 23
        },
        end: {
          line: 245,
          column: 70
        }
      },
      "69": {
        start: {
          line: 247,
          column: 4
        },
        end: {
          line: 251,
          column: 6
        }
      },
      "70": {
        start: {
          line: 253,
          column: 4
        },
        end: {
          line: 253,
          column: 58
        }
      },
      "71": {
        start: {
          line: 254,
          column: 4
        },
        end: {
          line: 254,
          column: 20
        }
      },
      "72": {
        start: {
          line: 255,
          column: 4
        },
        end: {
          line: 259,
          column: 6
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 17,
            column: 35
          },
          end: {
            line: 17,
            column: 36
          }
        },
        loc: {
          start: {
            line: 17,
            column: 61
          },
          end: {
            line: 79,
            column: 1
          }
        },
        line: 17
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 85,
            column: 37
          },
          end: {
            line: 85,
            column: 38
          }
        },
        loc: {
          start: {
            line: 85,
            column: 63
          },
          end: {
            line: 134,
            column: 1
          }
        },
        line: 85
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 140,
            column: 40
          },
          end: {
            line: 140,
            column: 41
          }
        },
        loc: {
          start: {
            line: 140,
            column: 66
          },
          end: {
            line: 171,
            column: 1
          }
        },
        line: 140
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 177,
            column: 34
          },
          end: {
            line: 177,
            column: 35
          }
        },
        loc: {
          start: {
            line: 177,
            column: 60
          },
          end: {
            line: 201,
            column: 1
          }
        },
        line: 177
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 207,
            column: 29
          },
          end: {
            line: 207,
            column: 30
          }
        },
        loc: {
          start: {
            line: 207,
            column: 55
          },
          end: {
            line: 225,
            column: 1
          }
        },
        line: 207
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 231,
            column: 37
          },
          end: {
            line: 231,
            column: 38
          }
        },
        loc: {
          start: {
            line: 231,
            column: 63
          },
          end: {
            line: 261,
            column: 1
          }
        },
        line: 231
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 28,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 28,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 21
      },
      "1": {
        loc: {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 21,
            column: 30
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 21,
            column: 18
          }
        }, {
          start: {
            line: 21,
            column: 22
          },
          end: {
            line: 21,
            column: 30
          }
        }],
        line: 21
      },
      "2": {
        loc: {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 40,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 40,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 33
      },
      "3": {
        loc: {
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 33,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 33,
            column: 30
          }
        }, {
          start: {
            line: 33,
            column: 34
          },
          end: {
            line: 33,
            column: 54
          }
        }],
        line: 33
      },
      "4": {
        loc: {
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 49,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 49,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 42
      },
      "5": {
        loc: {
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 105,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 105,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 93
      },
      "6": {
        loc: {
          start: {
            line: 93,
            column: 8
          },
          end: {
            line: 93,
            column: 28
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 93,
            column: 8
          },
          end: {
            line: 93,
            column: 17
          }
        }, {
          start: {
            line: 93,
            column: 21
          },
          end: {
            line: 93,
            column: 28
          }
        }],
        line: 93
      },
      "7": {
        loc: {
          start: {
            line: 97,
            column: 6
          },
          end: {
            line: 104,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 6
          },
          end: {
            line: 104,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 97
      },
      "8": {
        loc: {
          start: {
            line: 97,
            column: 10
          },
          end: {
            line: 97,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 97,
            column: 10
          },
          end: {
            line: 97,
            column: 32
          }
        }, {
          start: {
            line: 97,
            column: 36
          },
          end: {
            line: 97,
            column: 56
          }
        }],
        line: 97
      },
      "9": {
        loc: {
          start: {
            line: 233,
            column: 12
          },
          end: {
            line: 233,
            column: 30
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 233,
            column: 29
          },
          end: {
            line: 233,
            column: 30
          }
        }],
        line: 233
      },
      "10": {
        loc: {
          start: {
            line: 236,
            column: 4
          },
          end: {
            line: 243,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 236,
            column: 4
          },
          end: {
            line: 243,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 236
      },
      "11": {
        loc: {
          start: {
            line: 236,
            column: 8
          },
          end: {
            line: 236,
            column: 47
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 236,
            column: 8
          },
          end: {
            line: 236,
            column: 20
          }
        }, {
          start: {
            line: 236,
            column: 24
          },
          end: {
            line: 236,
            column: 33
          }
        }, {
          start: {
            line: 236,
            column: 37
          },
          end: {
            line: 236,
            column: 47
          }
        }],
        line: 236
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0],
      "10": [0, 0],
      "11": [0, 0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e647fbc4927c428439cb5c8ff3721517cbddb276"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_qzauskddy = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_qzauskddy();
/**
 * Audit Compliance Controller
 *
 * HIPAA-compliant audit reporting endpoints for compliance officers
 * and administrators.
 */

import AuditService from '../services/AuditService.js';
import { generateRetentionReport, checkRetentionCompliance } from '../jobs/auditRetention.job.js';
import { logger } from '../utils/logger.js';
import { AuditActions } from '../constants/auditActions.js';

/**
 * Get compliance report for a date range
 * GET /api/audit/compliance/report
 */
/* istanbul ignore next */
cov_qzauskddy().s[0]++;
export const getComplianceReport = async (request, reply) => {
  /* istanbul ignore next */
  cov_qzauskddy().f[0]++;
  cov_qzauskddy().s[1]++;
  try {
    const {
      startDate,
      endDate
    } =
    /* istanbul ignore next */
    (cov_qzauskddy().s[2]++, request.query);
    /* istanbul ignore next */
    cov_qzauskddy().s[3]++;
    if (
    /* istanbul ignore next */
    (cov_qzauskddy().b[1][0]++, !startDate) ||
    /* istanbul ignore next */
    (cov_qzauskddy().b[1][1]++, !endDate)) {
      /* istanbul ignore next */
      cov_qzauskddy().b[0][0]++;
      cov_qzauskddy().s[4]++;
      reply.code(400);
      /* istanbul ignore next */
      cov_qzauskddy().s[5]++;
      return {
        success: false,
        status: 400,
        message: 'startDate and endDate query parameters are required'
      };
    } else
    /* istanbul ignore next */
    {
      cov_qzauskddy().b[0][1]++;
    }
    const start =
    /* istanbul ignore next */
    (cov_qzauskddy().s[6]++, new Date(startDate));
    const end =
    /* istanbul ignore next */
    (cov_qzauskddy().s[7]++, new Date(endDate));
    /* istanbul ignore next */
    cov_qzauskddy().s[8]++;
    if (
    /* istanbul ignore next */
    (cov_qzauskddy().b[3][0]++, isNaN(start.getTime())) ||
    /* istanbul ignore next */
    (cov_qzauskddy().b[3][1]++, isNaN(end.getTime()))) {
      /* istanbul ignore next */
      cov_qzauskddy().b[2][0]++;
      cov_qzauskddy().s[9]++;
      reply.code(400);
      /* istanbul ignore next */
      cov_qzauskddy().s[10]++;
      return {
        success: false,
        status: 400,
        message: 'Invalid date format. Use ISO 8601 format (YYYY-MM-DD)'
      };
    } else
    /* istanbul ignore next */
    {
      cov_qzauskddy().b[2][1]++;
    }
    cov_qzauskddy().s[11]++;
    if (start > end) {
      /* istanbul ignore next */
      cov_qzauskddy().b[4][0]++;
      cov_qzauskddy().s[12]++;
      reply.code(400);
      /* istanbul ignore next */
      cov_qzauskddy().s[13]++;
      return {
        success: false,
        status: 400,
        message: 'startDate must be before endDate'
      };
    } else
    /* istanbul ignore next */
    {
      cov_qzauskddy().b[4][1]++;
    }
    const report =
    /* istanbul ignore next */
    (cov_qzauskddy().s[14]++, await AuditService.getComplianceReport(start, end));

    // Log this access
    /* istanbul ignore next */
    cov_qzauskddy().s[15]++;
    await AuditService.createAuditLog({
      user_id: request.user?.id,
      action: AuditActions.COMPLIANCE_AUDIT_EXPORT,
      resource_type: 'audit_logs',
      resource_id: null,
      ip_address: request.ip,
      user_agent: request.headers['user-agent'],
      status: 'success',
      metadata: JSON.stringify({
        startDate,
        endDate
      })
    }, {}, {
      immediate: true
    });
    /* istanbul ignore next */
    cov_qzauskddy().s[16]++;
    return {
      success: true,
      status: 200,
      data: report
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_qzauskddy().s[17]++;
    logger.error('Get compliance report error:', error);
    /* istanbul ignore next */
    cov_qzauskddy().s[18]++;
    reply.code(500);
    /* istanbul ignore next */
    cov_qzauskddy().s[19]++;
    return {
      success: false,
      status: 500,
      message: 'Server error while generating compliance report'
    };
  }
};

/**
 * Get user activity report
 * GET /api/audit/compliance/user/:userId
 */
/* istanbul ignore next */
cov_qzauskddy().s[20]++;
export const getUserActivityReport = async (request, reply) => {
  /* istanbul ignore next */
  cov_qzauskddy().f[1]++;
  cov_qzauskddy().s[21]++;
  try {
    const {
      userId
    } =
    /* istanbul ignore next */
    (cov_qzauskddy().s[22]++, request.params);
    const {
      startDate,
      endDate
    } =
    /* istanbul ignore next */
    (cov_qzauskddy().s[23]++, request.query);
    let start =
    /* istanbul ignore next */
    (cov_qzauskddy().s[24]++, null);
    let end =
    /* istanbul ignore next */
    (cov_qzauskddy().s[25]++, null);
    /* istanbul ignore next */
    cov_qzauskddy().s[26]++;
    if (
    /* istanbul ignore next */
    (cov_qzauskddy().b[6][0]++, startDate) &&
    /* istanbul ignore next */
    (cov_qzauskddy().b[6][1]++, endDate)) {
      /* istanbul ignore next */
      cov_qzauskddy().b[5][0]++;
      cov_qzauskddy().s[27]++;
      start = new Date(startDate);
      /* istanbul ignore next */
      cov_qzauskddy().s[28]++;
      end = new Date(endDate);
      /* istanbul ignore next */
      cov_qzauskddy().s[29]++;
      if (
      /* istanbul ignore next */
      (cov_qzauskddy().b[8][0]++, isNaN(start.getTime())) ||
      /* istanbul ignore next */
      (cov_qzauskddy().b[8][1]++, isNaN(end.getTime()))) {
        /* istanbul ignore next */
        cov_qzauskddy().b[7][0]++;
        cov_qzauskddy().s[30]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_qzauskddy().s[31]++;
        return {
          success: false,
          status: 400,
          message: 'Invalid date format. Use ISO 8601 format (YYYY-MM-DD)'
        };
      } else
      /* istanbul ignore next */
      {
        cov_qzauskddy().b[7][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_qzauskddy().b[5][1]++;
    }
    const report =
    /* istanbul ignore next */
    (cov_qzauskddy().s[32]++, await AuditService.getUserActivityReport(userId, start, end));

    // Log this access
    /* istanbul ignore next */
    cov_qzauskddy().s[33]++;
    await AuditService.createAuditLog({
      user_id: request.user?.id,
      action: AuditActions.COMPLIANCE_HIPAA_REVIEW,
      resource_type: 'users',
      resource_id: userId,
      ip_address: request.ip,
      user_agent: request.headers['user-agent'],
      status: 'success'
    }, {}, {
      immediate: true
    });
    /* istanbul ignore next */
    cov_qzauskddy().s[34]++;
    return {
      success: true,
      status: 200,
      data: report
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_qzauskddy().s[35]++;
    logger.error('Get user activity report error:', error);
    /* istanbul ignore next */
    cov_qzauskddy().s[36]++;
    reply.code(500);
    /* istanbul ignore next */
    cov_qzauskddy().s[37]++;
    return {
      success: false,
      status: 500,
      message: 'Server error while generating user activity report'
    };
  }
};

/**
 * Get resource access history
 * GET /api/audit/compliance/resource/:resourceType/:resourceId
 */
/* istanbul ignore next */
cov_qzauskddy().s[38]++;
export const getResourceAccessHistory = async (request, reply) => {
  /* istanbul ignore next */
  cov_qzauskddy().f[2]++;
  cov_qzauskddy().s[39]++;
  try {
    const {
      resourceType,
      resourceId
    } =
    /* istanbul ignore next */
    (cov_qzauskddy().s[40]++, request.params);
    const history =
    /* istanbul ignore next */
    (cov_qzauskddy().s[41]++, await AuditService.getResourceAccessHistory(resourceType, resourceId));

    // Log this access
    /* istanbul ignore next */
    cov_qzauskddy().s[42]++;
    await AuditService.createAuditLog({
      user_id: request.user?.id,
      action: AuditActions.COMPLIANCE_HIPAA_REVIEW,
      resource_type: resourceType,
      resource_id: resourceId,
      ip_address: request.ip,
      user_agent: request.headers['user-agent'],
      status: 'success'
    }, {}, {
      immediate: true
    });
    /* istanbul ignore next */
    cov_qzauskddy().s[43]++;
    return {
      success: true,
      status: 200,
      data: history
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_qzauskddy().s[44]++;
    logger.error('Get resource access history error:', error);
    /* istanbul ignore next */
    cov_qzauskddy().s[45]++;
    reply.code(500);
    /* istanbul ignore next */
    cov_qzauskddy().s[46]++;
    return {
      success: false,
      status: 500,
      message: 'Server error while fetching resource access history'
    };
  }
};

/**
 * Get retention compliance status
 * GET /api/audit/compliance/retention
 */
/* istanbul ignore next */
cov_qzauskddy().s[47]++;
export const getRetentionStatus = async (request, reply) => {
  /* istanbul ignore next */
  cov_qzauskddy().f[3]++;
  cov_qzauskddy().s[48]++;
  try {
    const [report, compliance] =
    /* istanbul ignore next */
    (cov_qzauskddy().s[49]++, await Promise.all([generateRetentionReport(), checkRetentionCompliance()]));
    /* istanbul ignore next */
    cov_qzauskddy().s[50]++;
    return {
      success: true,
      status: 200,
      data: {
        report,
        compliance
      }
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_qzauskddy().s[51]++;
    logger.error('Get retention status error:', error);
    /* istanbul ignore next */
    cov_qzauskddy().s[52]++;
    reply.code(500);
    /* istanbul ignore next */
    cov_qzauskddy().s[53]++;
    return {
      success: false,
      status: 500,
      message: 'Server error while checking retention status'
    };
  }
};

/**
 * Get audit service statistics
 * GET /api/audit/compliance/stats
 */
/* istanbul ignore next */
cov_qzauskddy().s[54]++;
export const getAuditStats = async (request, reply) => {
  /* istanbul ignore next */
  cov_qzauskddy().f[4]++;
  cov_qzauskddy().s[55]++;
  try {
    const stats =
    /* istanbul ignore next */
    (cov_qzauskddy().s[56]++, AuditService.getStats());
    /* istanbul ignore next */
    cov_qzauskddy().s[57]++;
    return {
      success: true,
      status: 200,
      data: stats
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_qzauskddy().s[58]++;
    logger.error('Get audit stats error:', error);
    /* istanbul ignore next */
    cov_qzauskddy().s[59]++;
    reply.code(500);
    /* istanbul ignore next */
    cov_qzauskddy().s[60]++;
    return {
      success: false,
      status: 500,
      message: 'Server error while fetching audit statistics'
    };
  }
};

/**
 * Get archival candidates
 * GET /api/audit/compliance/archival
 */
/* istanbul ignore next */
cov_qzauskddy().s[61]++;
export const getArchivalCandidates = async (request, reply) => {
  /* istanbul ignore next */
  cov_qzauskddy().f[5]++;
  cov_qzauskddy().s[62]++;
  try {
    const {
      retentionYears =
      /* istanbul ignore next */
      (cov_qzauskddy().b[9][0]++, 6)
    } =
    /* istanbul ignore next */
    (cov_qzauskddy().s[63]++, request.query);
    const years =
    /* istanbul ignore next */
    (cov_qzauskddy().s[64]++, parseInt(retentionYears, 10));
    /* istanbul ignore next */
    cov_qzauskddy().s[65]++;
    if (
    /* istanbul ignore next */
    (cov_qzauskddy().b[11][0]++, isNaN(years)) ||
    /* istanbul ignore next */
    (cov_qzauskddy().b[11][1]++, years < 1) ||
    /* istanbul ignore next */
    (cov_qzauskddy().b[11][2]++, years > 20)) {
      /* istanbul ignore next */
      cov_qzauskddy().b[10][0]++;
      cov_qzauskddy().s[66]++;
      reply.code(400);
      /* istanbul ignore next */
      cov_qzauskddy().s[67]++;
      return {
        success: false,
        status: 400,
        message: 'retentionYears must be between 1 and 20'
      };
    } else
    /* istanbul ignore next */
    {
      cov_qzauskddy().b[10][1]++;
    }
    const candidates =
    /* istanbul ignore next */
    (cov_qzauskddy().s[68]++, await AuditService.getArchivalCandidates(years));
    /* istanbul ignore next */
    cov_qzauskddy().s[69]++;
    return {
      success: true,
      status: 200,
      data: candidates
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_qzauskddy().s[70]++;
    logger.error('Get archival candidates error:', error);
    /* istanbul ignore next */
    cov_qzauskddy().s[71]++;
    reply.code(500);
    /* istanbul ignore next */
    cov_qzauskddy().s[72]++;
    return {
      success: false,
      status: 500,
      message: 'Server error while checking archival candidates'
    };
  }
};
export default {
  getComplianceReport,
  getUserActivityReport,
  getResourceAccessHistory,
  getRetentionStatus,
  getAuditStats,
  getArchivalCandidates
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfcXphdXNrZGR5IiwiYWN0dWFsQ292ZXJhZ2UiLCJBdWRpdFNlcnZpY2UiLCJnZW5lcmF0ZVJldGVudGlvblJlcG9ydCIsImNoZWNrUmV0ZW50aW9uQ29tcGxpYW5jZSIsImxvZ2dlciIsIkF1ZGl0QWN0aW9ucyIsInMiLCJnZXRDb21wbGlhbmNlUmVwb3J0IiwicmVxdWVzdCIsInJlcGx5IiwiZiIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJxdWVyeSIsImIiLCJjb2RlIiwic3VjY2VzcyIsInN0YXR1cyIsIm1lc3NhZ2UiLCJzdGFydCIsIkRhdGUiLCJlbmQiLCJpc05hTiIsImdldFRpbWUiLCJyZXBvcnQiLCJjcmVhdGVBdWRpdExvZyIsInVzZXJfaWQiLCJ1c2VyIiwiaWQiLCJhY3Rpb24iLCJDT01QTElBTkNFX0FVRElUX0VYUE9SVCIsInJlc291cmNlX3R5cGUiLCJyZXNvdXJjZV9pZCIsImlwX2FkZHJlc3MiLCJpcCIsInVzZXJfYWdlbnQiLCJoZWFkZXJzIiwibWV0YWRhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiaW1tZWRpYXRlIiwiZGF0YSIsImVycm9yIiwiZ2V0VXNlckFjdGl2aXR5UmVwb3J0IiwidXNlcklkIiwicGFyYW1zIiwiQ09NUExJQU5DRV9ISVBBQV9SRVZJRVciLCJnZXRSZXNvdXJjZUFjY2Vzc0hpc3RvcnkiLCJyZXNvdXJjZVR5cGUiLCJyZXNvdXJjZUlkIiwiaGlzdG9yeSIsImdldFJldGVudGlvblN0YXR1cyIsImNvbXBsaWFuY2UiLCJQcm9taXNlIiwiYWxsIiwiZ2V0QXVkaXRTdGF0cyIsInN0YXRzIiwiZ2V0U3RhdHMiLCJnZXRBcmNoaXZhbENhbmRpZGF0ZXMiLCJyZXRlbnRpb25ZZWFycyIsInllYXJzIiwicGFyc2VJbnQiLCJjYW5kaWRhdGVzIl0sInNvdXJjZXMiOlsiQXVkaXRDb21wbGlhbmNlLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdWRpdCBDb21wbGlhbmNlIENvbnRyb2xsZXJcbiAqXG4gKiBISVBBQS1jb21wbGlhbnQgYXVkaXQgcmVwb3J0aW5nIGVuZHBvaW50cyBmb3IgY29tcGxpYW5jZSBvZmZpY2Vyc1xuICogYW5kIGFkbWluaXN0cmF0b3JzLlxuICovXG5cbmltcG9ydCBBdWRpdFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvQXVkaXRTZXJ2aWNlLmpzJztcbmltcG9ydCB7IGdlbmVyYXRlUmV0ZW50aW9uUmVwb3J0LCBjaGVja1JldGVudGlvbkNvbXBsaWFuY2UgfSBmcm9tICcuLi9qb2JzL2F1ZGl0UmV0ZW50aW9uLmpvYi5qcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHsgQXVkaXRBY3Rpb25zIH0gZnJvbSAnLi4vY29uc3RhbnRzL2F1ZGl0QWN0aW9ucy5qcyc7XG5cbi8qKlxuICogR2V0IGNvbXBsaWFuY2UgcmVwb3J0IGZvciBhIGRhdGUgcmFuZ2VcbiAqIEdFVCAvYXBpL2F1ZGl0L2NvbXBsaWFuY2UvcmVwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDb21wbGlhbmNlUmVwb3J0ID0gYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzdGFydERhdGUsIGVuZERhdGUgfSA9IHJlcXVlc3QucXVlcnk7XG5cbiAgICBpZiAoIXN0YXJ0RGF0ZSB8fCAhZW5kRGF0ZSkge1xuICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBtZXNzYWdlOiAnc3RhcnREYXRlIGFuZCBlbmREYXRlIHF1ZXJ5IHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkJyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xuICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGVuZERhdGUpO1xuXG4gICAgaWYgKGlzTmFOKHN0YXJ0LmdldFRpbWUoKSkgfHwgaXNOYU4oZW5kLmdldFRpbWUoKSkpIHtcbiAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZGF0ZSBmb3JtYXQuIFVzZSBJU08gODYwMSBmb3JtYXQgKFlZWVktTU0tREQpJyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG4gICAgICByZXBseS5jb2RlKDQwMCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIG1lc3NhZ2U6ICdzdGFydERhdGUgbXVzdCBiZSBiZWZvcmUgZW5kRGF0ZScsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IEF1ZGl0U2VydmljZS5nZXRDb21wbGlhbmNlUmVwb3J0KHN0YXJ0LCBlbmQpO1xuXG4gICAgLy8gTG9nIHRoaXMgYWNjZXNzXG4gICAgYXdhaXQgQXVkaXRTZXJ2aWNlLmNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIHVzZXJfaWQ6IHJlcXVlc3QudXNlcj8uaWQsXG4gICAgICBhY3Rpb246IEF1ZGl0QWN0aW9ucy5DT01QTElBTkNFX0FVRElUX0VYUE9SVCxcbiAgICAgIHJlc291cmNlX3R5cGU6ICdhdWRpdF9sb2dzJyxcbiAgICAgIHJlc291cmNlX2lkOiBudWxsLFxuICAgICAgaXBfYWRkcmVzczogcmVxdWVzdC5pcCxcbiAgICAgIHVzZXJfYWdlbnQ6IHJlcXVlc3QuaGVhZGVyc1sndXNlci1hZ2VudCddLFxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICBtZXRhZGF0YTogSlNPTi5zdHJpbmdpZnkoeyBzdGFydERhdGUsIGVuZERhdGUgfSksXG4gICAgfSwge30sIHsgaW1tZWRpYXRlOiB0cnVlIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGRhdGE6IHJlcG9ydCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignR2V0IGNvbXBsaWFuY2UgcmVwb3J0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICBtZXNzYWdlOiAnU2VydmVyIGVycm9yIHdoaWxlIGdlbmVyYXRpbmcgY29tcGxpYW5jZSByZXBvcnQnLFxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHVzZXIgYWN0aXZpdHkgcmVwb3J0XG4gKiBHRVQgL2FwaS9hdWRpdC9jb21wbGlhbmNlL3VzZXIvOnVzZXJJZFxuICovXG5leHBvcnQgY29uc3QgZ2V0VXNlckFjdGl2aXR5UmVwb3J0ID0gYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHJlcXVlc3QucGFyYW1zO1xuICAgIGNvbnN0IHsgc3RhcnREYXRlLCBlbmREYXRlIH0gPSByZXF1ZXN0LnF1ZXJ5O1xuXG4gICAgbGV0IHN0YXJ0ID0gbnVsbDtcbiAgICBsZXQgZW5kID0gbnVsbDtcblxuICAgIGlmIChzdGFydERhdGUgJiYgZW5kRGF0ZSkge1xuICAgICAgc3RhcnQgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xuICAgICAgZW5kID0gbmV3IERhdGUoZW5kRGF0ZSk7XG5cbiAgICAgIGlmIChpc05hTihzdGFydC5nZXRUaW1lKCkpIHx8IGlzTmFOKGVuZC5nZXRUaW1lKCkpKSB7XG4gICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBkYXRlIGZvcm1hdC4gVXNlIElTTyA4NjAxIGZvcm1hdCAoWVlZWS1NTS1ERCknLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IEF1ZGl0U2VydmljZS5nZXRVc2VyQWN0aXZpdHlSZXBvcnQodXNlcklkLCBzdGFydCwgZW5kKTtcblxuICAgIC8vIExvZyB0aGlzIGFjY2Vzc1xuICAgIGF3YWl0IEF1ZGl0U2VydmljZS5jcmVhdGVBdWRpdExvZyh7XG4gICAgICB1c2VyX2lkOiByZXF1ZXN0LnVzZXI/LmlkLFxuICAgICAgYWN0aW9uOiBBdWRpdEFjdGlvbnMuQ09NUExJQU5DRV9ISVBBQV9SRVZJRVcsXG4gICAgICByZXNvdXJjZV90eXBlOiAndXNlcnMnLFxuICAgICAgcmVzb3VyY2VfaWQ6IHVzZXJJZCxcbiAgICAgIGlwX2FkZHJlc3M6IHJlcXVlc3QuaXAsXG4gICAgICB1c2VyX2FnZW50OiByZXF1ZXN0LmhlYWRlcnNbJ3VzZXItYWdlbnQnXSxcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIH0sIHt9LCB7IGltbWVkaWF0ZTogdHJ1ZSB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBkYXRhOiByZXBvcnQsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0dldCB1c2VyIGFjdGl2aXR5IHJlcG9ydCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVwbHkuY29kZSg1MDApO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSBnZW5lcmF0aW5nIHVzZXIgYWN0aXZpdHkgcmVwb3J0JyxcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEdldCByZXNvdXJjZSBhY2Nlc3MgaGlzdG9yeVxuICogR0VUIC9hcGkvYXVkaXQvY29tcGxpYW5jZS9yZXNvdXJjZS86cmVzb3VyY2VUeXBlLzpyZXNvdXJjZUlkXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRSZXNvdXJjZUFjY2Vzc0hpc3RvcnkgPSBhc3luYyAocmVxdWVzdCwgcmVwbHkpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJlc291cmNlVHlwZSwgcmVzb3VyY2VJZCB9ID0gcmVxdWVzdC5wYXJhbXM7XG5cbiAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgQXVkaXRTZXJ2aWNlLmdldFJlc291cmNlQWNjZXNzSGlzdG9yeShyZXNvdXJjZVR5cGUsIHJlc291cmNlSWQpO1xuXG4gICAgLy8gTG9nIHRoaXMgYWNjZXNzXG4gICAgYXdhaXQgQXVkaXRTZXJ2aWNlLmNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIHVzZXJfaWQ6IHJlcXVlc3QudXNlcj8uaWQsXG4gICAgICBhY3Rpb246IEF1ZGl0QWN0aW9ucy5DT01QTElBTkNFX0hJUEFBX1JFVklFVyxcbiAgICAgIHJlc291cmNlX3R5cGU6IHJlc291cmNlVHlwZSxcbiAgICAgIHJlc291cmNlX2lkOiByZXNvdXJjZUlkLFxuICAgICAgaXBfYWRkcmVzczogcmVxdWVzdC5pcCxcbiAgICAgIHVzZXJfYWdlbnQ6IHJlcXVlc3QuaGVhZGVyc1sndXNlci1hZ2VudCddLFxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgfSwge30sIHsgaW1tZWRpYXRlOiB0cnVlIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGRhdGE6IGhpc3RvcnksXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0dldCByZXNvdXJjZSBhY2Nlc3MgaGlzdG9yeSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVwbHkuY29kZSg1MDApO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSBmZXRjaGluZyByZXNvdXJjZSBhY2Nlc3MgaGlzdG9yeScsXG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgcmV0ZW50aW9uIGNvbXBsaWFuY2Ugc3RhdHVzXG4gKiBHRVQgL2FwaS9hdWRpdC9jb21wbGlhbmNlL3JldGVudGlvblxuICovXG5leHBvcnQgY29uc3QgZ2V0UmV0ZW50aW9uU3RhdHVzID0gYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgW3JlcG9ydCwgY29tcGxpYW5jZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBnZW5lcmF0ZVJldGVudGlvblJlcG9ydCgpLFxuICAgICAgY2hlY2tSZXRlbnRpb25Db21wbGlhbmNlKCksXG4gICAgXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHN0YXR1czogMjAwLFxuICAgICAgZGF0YToge1xuICAgICAgICByZXBvcnQsXG4gICAgICAgIGNvbXBsaWFuY2UsXG4gICAgICB9LFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdHZXQgcmV0ZW50aW9uIHN0YXR1cyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVwbHkuY29kZSg1MDApO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSBjaGVja2luZyByZXRlbnRpb24gc3RhdHVzJyxcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBhdWRpdCBzZXJ2aWNlIHN0YXRpc3RpY3NcbiAqIEdFVCAvYXBpL2F1ZGl0L2NvbXBsaWFuY2Uvc3RhdHNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEF1ZGl0U3RhdHMgPSBhc3luYyAocmVxdWVzdCwgcmVwbHkpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGF0cyA9IEF1ZGl0U2VydmljZS5nZXRTdGF0cygpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGRhdGE6IHN0YXRzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdHZXQgYXVkaXQgc3RhdHMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3Igd2hpbGUgZmV0Y2hpbmcgYXVkaXQgc3RhdGlzdGljcycsXG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYXJjaGl2YWwgY2FuZGlkYXRlc1xuICogR0VUIC9hcGkvYXVkaXQvY29tcGxpYW5jZS9hcmNoaXZhbFxuICovXG5leHBvcnQgY29uc3QgZ2V0QXJjaGl2YWxDYW5kaWRhdGVzID0gYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyByZXRlbnRpb25ZZWFycyA9IDYgfSA9IHJlcXVlc3QucXVlcnk7XG4gICAgY29uc3QgeWVhcnMgPSBwYXJzZUludChyZXRlbnRpb25ZZWFycywgMTApO1xuXG4gICAgaWYgKGlzTmFOKHllYXJzKSB8fCB5ZWFycyA8IDEgfHwgeWVhcnMgPiAyMCkge1xuICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBtZXNzYWdlOiAncmV0ZW50aW9uWWVhcnMgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDIwJyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IGF3YWl0IEF1ZGl0U2VydmljZS5nZXRBcmNoaXZhbENhbmRpZGF0ZXMoeWVhcnMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGRhdGE6IGNhbmRpZGF0ZXMsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0dldCBhcmNoaXZhbCBjYW5kaWRhdGVzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICBtZXNzYWdlOiAnU2VydmVyIGVycm9yIHdoaWxlIGNoZWNraW5nIGFyY2hpdmFsIGNhbmRpZGF0ZXMnLFxuICAgIH07XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0Q29tcGxpYW5jZVJlcG9ydCxcbiAgZ2V0VXNlckFjdGl2aXR5UmVwb3J0LFxuICBnZXRSZXNvdXJjZUFjY2Vzc0hpc3RvcnksXG4gIGdldFJldGVudGlvblN0YXR1cyxcbiAgZ2V0QXVkaXRTdGF0cyxcbiAgZ2V0QXJjaGl2YWxDYW5kaWRhdGVzLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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