{"version":3,"names":["cov_dve9g5g8o","actualCoverage","yup","ValidationError","ErrorCodes","sanitizeString","value","f","s","b","trim","replace","sanitizedString","string","transform","trimmedString","YUP_ERROR_TYPE_MAP","required","VALIDATION_REQUIRED_FIELD","typeError","VALIDATION_INVALID_FORMAT","email","VALIDATION_INVALID_EMAIL","min","VALIDATION_STRING_TOO_SHORT","max","VALIDATION_STRING_TOO_LONG","matches","oneOf","VALIDATION_INVALID_ENUM","uuid","VALIDATION_INVALID_UUID","date","VALIDATION_INVALID_DATE","getValidationErrorCode","type","path","fieldName","toLowerCase","includes","VALIDATION_INVALID_PHONE","VALIDATION_INVALID_SSN","VALIDATION_INVALID_MRN","VALIDATION_INVALID_NPI","VALIDATION_FAILED","transformYupError","yupError","errors","inner","length","err","push","field","message","code","validationError","validate","schemaOrOptions","options","Schema","body","bodySchema","query","querySchema","params","paramsSchema","stripUnknown","abortEarly","validationMiddleware","request","reply","validationContext","error","validateBody","schema","validateQuery","validateParams","fields","requiredUuid","lowercase","requiredEmail","phone","name","requiredName","password","requiredPassword","requiredDate","text","shortText","mrn","ssn","npi","positiveInt","number","integer","positive","boolean","values","join","paginationSchema","object","page","default","limit","sort","order","idParamSchema","id","searchSchema","q","authSchemas","signIn","rememberMe","signUp","firstName","lastName","forgotPassword","resetPassword","token","confirmPassword","ref","changePassword","currentPassword","newPassword","patientSchemas","create","dateOfBirth","gender","address","city","state","zipCode","primaryDiagnosis","admissionDate","notes","update","dischargeDate","userSchemas","role","isActive","updateProfile","encounterSchemas","patientId","encounterType","encounterDate","vitalSigns","temperature","pulse","respiratoryRate","bloodPressureSystolic","bloodPressureDiastolic","oxygenSaturation","painLevel","undefined","status","medicationSchemas","medicationName","dosage","route","frequency","startDate","endDate","prescriberId","instructions","isPrn","prnReason","certificationSchemas","certification_period","certification_status","start_date","test","thirtyDaysAgo","Date","setDate","getDate","end_date","parent","terminal_illness_narrative","clinical_progression","decline_indicators","noe_id","nullable","alert_recipients","array","of","list","patient_id","period","start_date_from","start_date_to","offset","sort_by","sort_order","revoke","revocation_reason","delete","reason","f2fSchemas","encounter_date","performed_by_id","performed_by_name","performed_by_type","visit_type","findings","terminal_prognosis_confirmed","certification_id","orderSchemas","order_type","order_status","order_priority","order_description","ordered_by_id","is_verbal_order","physician_name","read_back_verified","schemas","auth","patient","user","encounter","medication","certification","f2f","common","pagination","idParam","search","legacyValidate"],"sources":["validation.middleware.js"],"sourcesContent":["/**\n * Yup Validation Middleware\n * TICKET #017: Request Payload Validation and Sanitization\n *\n * Provides comprehensive request validation using Yup schemas with:\n * - Body, query, and params validation\n * - Input sanitization (XSS protection, trimming)\n * - HIPAA-compliant error responses\n * - Proper integration with existing error handling\n *\n * @example\n * import { validate, schemas } from '../middleware/validation.middleware.js';\n *\n * fastify.post('/patients', {\n *   preHandler: [authenticate, validate(schemas.patient.create)]\n * }, patientController.create);\n */\n\nimport * as yup from 'yup';\nimport { ValidationError } from '../utils/errorHandler.js';\nimport { ErrorCodes } from '../constants/errorCodes.js';\n\n/**\n * Sanitize string input to prevent XSS and clean whitespace\n * @param {string} value - Input value to sanitize\n * @returns {string} Sanitized string\n */\nfunction sanitizeString(value) {\n  if (typeof value !== 'string') return value;\n\n  return value\n    .trim()\n    // Remove null bytes\n    .replace(/\\0/g, '')\n    // Escape HTML entities to prevent XSS\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n}\n\n/**\n * Create a sanitized string schema\n * Use this for any user-provided text input\n */\nexport const sanitizedString = () =>\n  yup.string().transform((value) => (value ? sanitizeString(value) : value));\n\n/**\n * Create a trimmed string that preserves HTML entities\n * Use for fields that may legitimately contain special characters\n */\nexport const trimmedString = () =>\n  yup.string().transform((value) => (value ? value.trim() : value));\n\n/**\n * Map Yup error types to application error codes\n */\nconst YUP_ERROR_TYPE_MAP = {\n  required: ErrorCodes.VALIDATION_REQUIRED_FIELD,\n  typeError: ErrorCodes.VALIDATION_INVALID_FORMAT,\n  email: ErrorCodes.VALIDATION_INVALID_EMAIL,\n  min: ErrorCodes.VALIDATION_STRING_TOO_SHORT,\n  max: ErrorCodes.VALIDATION_STRING_TOO_LONG,\n  matches: ErrorCodes.VALIDATION_INVALID_FORMAT,\n  oneOf: ErrorCodes.VALIDATION_INVALID_ENUM,\n  uuid: ErrorCodes.VALIDATION_INVALID_UUID,\n  date: ErrorCodes.VALIDATION_INVALID_DATE\n};\n\n/**\n * Get error code from Yup validation error type\n * @param {string} type - Yup error type\n * @param {string} path - Field path for specific field codes\n * @returns {string} Error code\n */\nfunction getValidationErrorCode(type, path) {\n  // Check for specific field types\n  if (path) {\n    const fieldName = path.toLowerCase();\n    if (fieldName.includes('email')) return ErrorCodes.VALIDATION_INVALID_EMAIL;\n    if (fieldName.includes('phone')) return ErrorCodes.VALIDATION_INVALID_PHONE;\n    if (fieldName.includes('ssn')) return ErrorCodes.VALIDATION_INVALID_SSN;\n    if (fieldName.includes('mrn')) return ErrorCodes.VALIDATION_INVALID_MRN;\n    if (fieldName.includes('npi')) return ErrorCodes.VALIDATION_INVALID_NPI;\n    if (fieldName.includes('date') || fieldName.includes('dob')) return ErrorCodes.VALIDATION_INVALID_DATE;\n  }\n\n  return YUP_ERROR_TYPE_MAP[type] || ErrorCodes.VALIDATION_FAILED;\n}\n\n/**\n * Transform Yup validation errors into application ValidationError\n * @param {yup.ValidationError} yupError - Yup validation error\n * @returns {ValidationError} Application validation error\n */\nfunction transformYupError(yupError) {\n  const errors = [];\n\n  if (yupError.inner && yupError.inner.length > 0) {\n    // Multiple validation errors\n    for (const err of yupError.inner) {\n      errors.push({\n        field: err.path || 'unknown',\n        message: err.message,\n        code: getValidationErrorCode(err.type, err.path)\n      });\n    }\n  } else {\n    // Single validation error\n    errors.push({\n      field: yupError.path || 'unknown',\n      message: yupError.message,\n      code: getValidationErrorCode(yupError.type, yupError.path)\n    });\n  }\n\n  const validationError = new ValidationError('The request contains invalid data', {\n    code: ErrorCodes.VALIDATION_FAILED,\n    errors\n  });\n\n  return validationError;\n}\n\n/**\n * Validation configuration options\n * @typedef {Object} ValidationOptions\n * @property {yup.Schema} [body] - Schema for request body\n * @property {yup.Schema} [query] - Schema for query parameters\n * @property {yup.Schema} [params] - Schema for URL parameters\n * @property {boolean} [stripUnknown=true] - Remove fields not in schema\n * @property {boolean} [abortEarly=false] - Return all errors, not just first\n */\n\n/**\n * Create validation middleware from Yup schema(s)\n *\n * @param {ValidationOptions|yup.Schema} schemaOrOptions - Yup schema or options object\n * @returns {Function} Fastify preHandler middleware\n *\n * @example\n * // Simple body validation\n * validate(yup.object({ name: yup.string().required() }))\n *\n * @example\n * // Full options\n * validate({\n *   body: createPatientSchema,\n *   query: paginationSchema,\n *   params: yup.object({ id: yup.string().uuid().required() })\n * })\n */\nexport function validate(schemaOrOptions) {\n  // Normalize input to options object\n  const options = schemaOrOptions instanceof yup.Schema\n    ? { body: schemaOrOptions }\n    : schemaOrOptions;\n\n  const {\n    body: bodySchema,\n    query: querySchema,\n    params: paramsSchema,\n    stripUnknown = true,\n    abortEarly = false\n  } = options;\n\n  return async function validationMiddleware(request, reply) {\n    const validationContext = {\n      abortEarly,\n      stripUnknown\n    };\n\n    try {\n      // Validate body\n      if (bodySchema && request.body) {\n        request.body = await bodySchema.validate(request.body, validationContext);\n      }\n\n      // Validate query parameters\n      if (querySchema && request.query) {\n        request.query = await querySchema.validate(request.query, validationContext);\n      }\n\n      // Validate URL parameters\n      if (paramsSchema && request.params) {\n        request.params = await paramsSchema.validate(request.params, validationContext);\n      }\n    } catch (error) {\n      if (error instanceof yup.ValidationError) {\n        throw transformYupError(error);\n      }\n      throw error;\n    }\n  };\n}\n\n/**\n * Create a validation middleware that only validates body\n * Convenience wrapper for the most common use case\n *\n * @param {yup.Schema} schema - Yup schema for request body\n * @returns {Function} Fastify preHandler middleware\n */\nexport function validateBody(schema) {\n  return validate({ body: schema });\n}\n\n/**\n * Create a validation middleware that only validates query\n *\n * @param {yup.Schema} schema - Yup schema for query parameters\n * @returns {Function} Fastify preHandler middleware\n */\nexport function validateQuery(schema) {\n  return validate({ query: schema });\n}\n\n/**\n * Create a validation middleware that only validates params\n *\n * @param {yup.Schema} schema - Yup schema for URL parameters\n * @returns {Function} Fastify preHandler middleware\n */\nexport function validateParams(schema) {\n  return validate({ params: schema });\n}\n\n// ============================================================================\n// Common Validation Schemas\n// ============================================================================\n\n/**\n * Common field validators with sanitization\n */\nexport const fields = {\n  /**\n   * UUID field validator\n   */\n  uuid: () => yup.string().uuid('Invalid ID format'),\n\n  /**\n   * Required UUID (for route params)\n   */\n  requiredUuid: () => yup.string().uuid('Invalid ID format').required('ID is required'),\n\n  /**\n   * Email field with sanitization\n   */\n  email: () =>\n    sanitizedString()\n      .email('Please enter a valid email address')\n      .max(255, 'Email must be at most 255 characters')\n      .lowercase(),\n\n  /**\n   * Required email\n   */\n  requiredEmail: () => fields.email().required('Email is required'),\n\n  /**\n   * Phone number with basic formatting validation\n   */\n  phone: () =>\n    sanitizedString()\n      .matches(\n        /^[\\d\\s\\-\\+\\(\\)\\.]+$/,\n        'Please enter a valid phone number'\n      )\n      .max(20, 'Phone number is too long'),\n\n  /**\n   * Name field (first name, last name, etc.)\n   */\n  name: () =>\n    sanitizedString()\n      .min(1, 'Name is required')\n      .max(100, 'Name must be at most 100 characters'),\n\n  /**\n   * Required name\n   */\n  requiredName: () => fields.name().required('Name is required'),\n\n  /**\n   * Password field (no sanitization to preserve special chars)\n   */\n  password: () =>\n    yup.string()\n      .min(8, 'Password must be at least 8 characters')\n      .max(128, 'Password must be at most 128 characters'),\n\n  /**\n   * Required password\n   */\n  requiredPassword: () => fields.password().required('Password is required'),\n\n  /**\n   * Date field (accepts ISO date strings)\n   */\n  date: () => yup.date().typeError('Please enter a valid date'),\n\n  /**\n   * Required date\n   */\n  requiredDate: () => fields.date().required('Date is required'),\n\n  /**\n   * Text area / long text content\n   */\n  text: () =>\n    sanitizedString()\n      .max(10000, 'Text content is too long'),\n\n  /**\n   * Short description or notes\n   */\n  shortText: () =>\n    sanitizedString()\n      .max(500, 'Text must be at most 500 characters'),\n\n  /**\n   * Medical Record Number (MRN)\n   */\n  mrn: () =>\n    sanitizedString()\n      .matches(/^[A-Za-z0-9\\-]+$/, 'Please enter a valid MRN'),\n\n  /**\n   * Social Security Number (format: XXX-XX-XXXX or XXXXXXXXX)\n   */\n  ssn: () =>\n    sanitizedString()\n      .matches(\n        /^(\\d{3}-?\\d{2}-?\\d{4}|\\d{9})$/,\n        'Please enter a valid SSN'\n      ),\n\n  /**\n   * National Provider Identifier (NPI)\n   */\n  npi: () =>\n    sanitizedString()\n      .matches(/^\\d{10}$/, 'Please enter a valid 10-digit NPI'),\n\n  /**\n   * Positive integer\n   */\n  positiveInt: () =>\n    yup.number()\n      .integer('Must be a whole number')\n      .positive('Must be a positive number'),\n\n  /**\n   * Boolean field\n   */\n  boolean: () => yup.boolean(),\n\n  /**\n   * Enum/select field\n   * @param {Array} values - Allowed values\n   * @param {string} [message] - Custom error message\n   */\n  oneOf: (values, message) =>\n    yup.string().oneOf(values, message || `Must be one of: ${values.join(', ')}`)\n};\n\n/**\n * Common pagination schema for list endpoints\n */\nexport const paginationSchema = yup.object({\n  page: yup.number().integer().min(1).default(1),\n  limit: yup.number().integer().min(1).max(100).default(20),\n  sort: sanitizedString(),\n  order: yup.string().oneOf(['asc', 'desc']).default('asc')\n});\n\n/**\n * Common ID parameter schema\n */\nexport const idParamSchema = yup.object({\n  id: fields.requiredUuid()\n});\n\n/**\n * Common search query schema\n */\nexport const searchSchema = yup.object({\n  q: sanitizedString().max(200, 'Search query is too long'),\n  page: yup.number().integer().min(1).default(1),\n  limit: yup.number().integer().min(1).max(100).default(20)\n});\n\n// ============================================================================\n// Domain-Specific Schemas\n// ============================================================================\n\n/**\n * Authentication schemas\n */\nexport const authSchemas = {\n  signIn: yup.object({\n    email: fields.requiredEmail(),\n    password: yup.string().required('Password is required'),\n    rememberMe: yup.boolean().default(false)\n  }),\n\n  signUp: yup.object({\n    email: fields.requiredEmail(),\n    password: fields.requiredPassword(),\n    firstName: fields.requiredName(),\n    lastName: fields.requiredName()\n  }),\n\n  forgotPassword: yup.object({\n    email: fields.requiredEmail()\n  }),\n\n  resetPassword: yup.object({\n    token: yup.string().required('Reset token is required'),\n    password: fields.requiredPassword(),\n    confirmPassword: yup.string()\n      .oneOf([yup.ref('password')], 'Passwords must match')\n      .required('Please confirm your password')\n  }),\n\n  changePassword: yup.object({\n    currentPassword: yup.string().required('Current password is required'),\n    newPassword: fields.requiredPassword(),\n    confirmPassword: yup.string()\n      .oneOf([yup.ref('newPassword')], 'Passwords must match')\n      .required('Please confirm your password')\n  })\n};\n\n/**\n * Patient schemas\n */\nexport const patientSchemas = {\n  create: yup.object({\n    firstName: fields.requiredName(),\n    lastName: fields.requiredName(),\n    dateOfBirth: fields.requiredDate(),\n    gender: fields.oneOf(['male', 'female', 'other', 'unknown']),\n    email: fields.email(),\n    phone: fields.phone(),\n    address: sanitizedString().max(500),\n    city: sanitizedString().max(100),\n    state: sanitizedString().max(50),\n    zipCode: sanitizedString().matches(/^\\d{5}(-\\d{4})?$/, 'Invalid ZIP code'),\n    mrn: fields.mrn(),\n    ssn: fields.ssn(),\n    primaryDiagnosis: sanitizedString().max(500),\n    admissionDate: fields.date(),\n    notes: fields.text()\n  }),\n\n  update: yup.object({\n    firstName: fields.name(),\n    lastName: fields.name(),\n    dateOfBirth: fields.date(),\n    gender: fields.oneOf(['male', 'female', 'other', 'unknown']),\n    email: fields.email(),\n    phone: fields.phone(),\n    address: sanitizedString().max(500),\n    city: sanitizedString().max(100),\n    state: sanitizedString().max(50),\n    zipCode: sanitizedString().matches(/^\\d{5}(-\\d{4})?$/, 'Invalid ZIP code'),\n    mrn: fields.mrn(),\n    ssn: fields.ssn(),\n    primaryDiagnosis: sanitizedString().max(500),\n    admissionDate: fields.date(),\n    dischargeDate: fields.date(),\n    notes: fields.text()\n  })\n};\n\n/**\n * User management schemas\n */\nexport const userSchemas = {\n  create: yup.object({\n    email: fields.requiredEmail(),\n    password: fields.requiredPassword(),\n    firstName: fields.requiredName(),\n    lastName: fields.requiredName(),\n    role: yup.string().required('Role is required')\n  }),\n\n  update: yup.object({\n    email: fields.email(),\n    firstName: fields.name(),\n    lastName: fields.name(),\n    role: yup.string(),\n    isActive: yup.boolean()\n  }),\n\n  updateProfile: yup.object({\n    firstName: fields.name(),\n    lastName: fields.name(),\n    phone: fields.phone()\n  })\n};\n\n/**\n * Encounter/Visit schemas\n */\nexport const encounterSchemas = {\n  create: yup.object({\n    patientId: fields.requiredUuid(),\n    encounterType: fields.oneOf([\n      'routine_visit',\n      'admission',\n      'discharge',\n      'death',\n      'recertification',\n      'idg_review',\n      'phone_call',\n      'medication_review'\n    ]).required('Encounter type is required'),\n    encounterDate: fields.requiredDate(),\n    notes: fields.text(),\n    vitalSigns: yup.object({\n      temperature: yup.number().min(90).max(110),\n      pulse: yup.number().integer().min(20).max(300),\n      respiratoryRate: yup.number().integer().min(5).max(60),\n      bloodPressureSystolic: yup.number().integer().min(50).max(300),\n      bloodPressureDiastolic: yup.number().integer().min(30).max(200),\n      oxygenSaturation: yup.number().integer().min(50).max(100),\n      painLevel: yup.number().integer().min(0).max(10)\n    }).default(undefined)\n  }),\n\n  update: yup.object({\n    encounterType: fields.oneOf([\n      'routine_visit',\n      'admission',\n      'discharge',\n      'death',\n      'recertification',\n      'idg_review',\n      'phone_call',\n      'medication_review'\n    ]),\n    encounterDate: fields.date(),\n    notes: fields.text(),\n    status: fields.oneOf(['draft', 'completed', 'signed', 'amended']),\n    vitalSigns: yup.object({\n      temperature: yup.number().min(90).max(110),\n      pulse: yup.number().integer().min(20).max(300),\n      respiratoryRate: yup.number().integer().min(5).max(60),\n      bloodPressureSystolic: yup.number().integer().min(50).max(300),\n      bloodPressureDiastolic: yup.number().integer().min(30).max(200),\n      oxygenSaturation: yup.number().integer().min(50).max(100),\n      painLevel: yup.number().integer().min(0).max(10)\n    }).default(undefined)\n  })\n};\n\n/**\n * Medication schemas\n */\nexport const medicationSchemas = {\n  create: yup.object({\n    patientId: fields.requiredUuid(),\n    medicationName: sanitizedString().required('Medication name is required').max(200),\n    dosage: sanitizedString().required('Dosage is required').max(100),\n    route: fields.oneOf([\n      'oral',\n      'sublingual',\n      'topical',\n      'transdermal',\n      'subcutaneous',\n      'intramuscular',\n      'intravenous',\n      'rectal',\n      'inhalation',\n      'ophthalmic',\n      'otic',\n      'nasal',\n      'other'\n    ]).required('Route is required'),\n    frequency: sanitizedString().required('Frequency is required').max(100),\n    startDate: fields.requiredDate(),\n    endDate: fields.date(),\n    prescriberId: fields.uuid(),\n    instructions: fields.text(),\n    isPrn: yup.boolean().default(false),\n    prnReason: sanitizedString().max(500)\n  }),\n\n  update: yup.object({\n    medicationName: sanitizedString().max(200),\n    dosage: sanitizedString().max(100),\n    route: fields.oneOf([\n      'oral',\n      'sublingual',\n      'topical',\n      'transdermal',\n      'subcutaneous',\n      'intramuscular',\n      'intravenous',\n      'rectal',\n      'inhalation',\n      'ophthalmic',\n      'otic',\n      'nasal',\n      'other'\n    ]),\n    frequency: sanitizedString().max(100),\n    startDate: fields.date(),\n    endDate: fields.date(),\n    prescriberId: fields.uuid(),\n    instructions: fields.text(),\n    isPrn: yup.boolean(),\n    prnReason: sanitizedString().max(500),\n    isActive: yup.boolean()\n  })\n};\n\n/**\n * Certification schemas (CMS Compliance)\n * Validates Medicare certification data per CMS requirements\n */\nexport const certificationSchemas = {\n  create: yup.object({\n    certification_period: fields.oneOf(\n      ['INITIAL_90', 'SUBSEQUENT_90', 'SUBSEQUENT_60'],\n      'Invalid certification period. CMS allows: INITIAL_90 (first 90 days), SUBSEQUENT_90 (second 90 days), SUBSEQUENT_60 (subsequent 60-day periods)'\n    ).required('Certification period is required per CMS requirements'),\n    certification_status: fields.oneOf(\n      ['PENDING', 'ACTIVE', 'COMPLETED', 'EXPIRED', 'REVOKED']\n    ).default('PENDING'),\n    start_date: fields.requiredDate()\n      .test('not-too-old', 'Retroactive certifications more than 30 days in the past require additional documentation', function(value) {\n        if (!value) return true;\n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n        return new Date(value) >= thirtyDaysAgo;\n      }),\n    end_date: fields.requiredDate()\n      .test('after-start', 'End date must be after start date', function(value) {\n        const { start_date } = this.parent;\n        if (!value || !start_date) return true;\n        return new Date(value) > new Date(start_date);\n      }),\n    terminal_illness_narrative: sanitizedString()\n      .required('Terminal illness narrative is required for CMS certification')\n      .min(50, 'Terminal illness narrative must be at least 50 characters for CMS compliance')\n      .max(5000, 'Terminal illness narrative exceeds maximum length'),\n    clinical_progression: sanitizedString().max(5000),\n    decline_indicators: sanitizedString().max(5000),\n    noe_id: yup.number().integer().positive().nullable(),\n    alert_recipients: yup.array().of(yup.string().email()).default([])\n  }),\n\n  update: yup.object({\n    terminal_illness_narrative: sanitizedString()\n      .min(50, 'Terminal illness narrative must be at least 50 characters for CMS compliance')\n      .max(5000, 'Terminal illness narrative exceeds maximum length'),\n    clinical_progression: sanitizedString().max(5000),\n    decline_indicators: sanitizedString().max(5000)\n  }),\n\n  list: yup.object({\n    status: fields.oneOf(['PENDING', 'ACTIVE', 'COMPLETED', 'EXPIRED', 'REVOKED']),\n    patient_id: yup.number().integer().positive(),\n    period: fields.oneOf(['INITIAL_90', 'SUBSEQUENT_90', 'SUBSEQUENT_60']),\n    start_date_from: fields.date(),\n    start_date_to: fields.date(),\n    limit: yup.number().integer().min(1).max(100).default(50),\n    offset: yup.number().integer().min(0).default(0),\n    sort_by: fields.oneOf(['start_date', 'end_date', 'certification_due_date']).default('start_date'),\n    sort_order: fields.oneOf(['asc', 'desc']).default('desc')\n  }),\n\n  revoke: yup.object({\n    revocation_reason: sanitizedString()\n      .required('Revocation reason is required for audit trail')\n      .min(10, 'Revocation reason must be at least 10 characters')\n      .max(1000, 'Revocation reason exceeds maximum length')\n  }),\n\n  delete: yup.object({\n    reason: sanitizedString()\n      .max(1000, 'Reason exceeds maximum length')\n  })\n};\n\n/**\n * Face-to-Face encounter schemas (CMS Compliance)\n * Validates F2F encounter data per CMS requirements\n */\nexport const f2fSchemas = {\n  create: yup.object({\n    encounter_date: fields.requiredDate(),\n    performed_by_id: fields.uuid(),\n    performed_by_name: sanitizedString()\n      .required('Provider name is required for Face-to-Face encounters')\n      .max(255),\n    performed_by_type: fields.oneOf(\n      ['PHYSICIAN', 'NP', 'PA'],\n      'CMS requires Face-to-Face encounters to be performed by PHYSICIAN, NP, or PA'\n    ).required('Provider type is required'),\n    visit_type: fields.oneOf(['IN_PERSON', 'TELEHEALTH']).default('IN_PERSON'),\n    findings: sanitizedString()\n      .required('Findings documentation is required for Face-to-Face encounters')\n      .min(50, 'Findings must be at least 50 characters')\n      .max(10000),\n    terminal_prognosis_confirmed: yup.boolean().default(true),\n    certification_id: yup.number().integer().positive()\n  })\n};\n\n/**\n * Order schemas\n */\nexport const orderSchemas = {\n  create: yup.object({\n    order_type: fields.oneOf(\n      ['MEDICATION', 'TREATMENT', 'DME', 'LABORATORY', 'IMAGING', 'CONSULTATION', 'OTHER']\n    ).required('Order type is required'),\n    order_status: fields.oneOf(['ACTIVE', 'COMPLETED', 'DISCONTINUED', 'EXPIRED', 'PENDING']).default('ACTIVE'),\n    order_priority: fields.oneOf(['ROUTINE', 'URGENT', 'STAT']).default('ROUTINE'),\n    order_description: sanitizedString()\n      .required('Order description is required')\n      .min(10, 'Order description must be at least 10 characters')\n      .max(5000),\n    start_date: fields.requiredDate(),\n    end_date: fields.date(),\n    ordered_by_id: fields.uuid(),\n    is_verbal_order: yup.boolean().default(false),\n    physician_name: sanitizedString().max(255),\n    read_back_verified: yup.boolean()\n  })\n};\n\n/**\n * All domain schemas organized by resource\n */\nexport const schemas = {\n  auth: authSchemas,\n  patient: patientSchemas,\n  user: userSchemas,\n  encounter: encounterSchemas,\n  medication: medicationSchemas,\n  certification: certificationSchemas,\n  f2f: f2fSchemas,\n  order: orderSchemas,\n  common: {\n    pagination: paginationSchema,\n    idParam: idParamSchema,\n    search: searchSchema\n  }\n};\n\n/**\n * Legacy validation middleware (no-op for backward compatibility)\n * Use the new validate(), validateBody(), validateQuery(), or validateParams()\n * functions with Yup schemas instead.\n *\n * @deprecated Use validate(schema) instead\n */\nconst legacyValidate = async (request, reply) => {\n  // No-op for backward compatibility with existing routes\n  // that import `import validate from '../middleware/validation.middleware.js'`\n  // New code should use: validate(yup.object({ ... }))\n};\n\n// Default export maintains backward compatibility\nexport default legacyValidate;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAfZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,KAAKE,GAAG,MAAM,KAAK;AAC1B,SAASC,eAAe,QAAQ,0BAA0B;AAC1D,SAASC,UAAU,QAAQ,4BAA4B;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAASC,cAAcA,CAACC,KAAK,EAAE;EAAA;EAAAN,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAQ,CAAA;EAC7B,IAAI,OAAOF,KAAK,KAAK,QAAQ,EAAE;IAAA;IAAAN,aAAA,GAAAS,CAAA;IAAAT,aAAA,GAAAQ,CAAA;IAAA,OAAOF,KAAK;EAAA,CAAC;EAAA;EAAA;IAAAN,aAAA,GAAAS,CAAA;EAAA;EAAAT,aAAA,GAAAQ,CAAA;EAE5C,OAAOF,KAAK,CACTI,IAAI,CAAC;EACN;EAAA,CACCC,OAAO,CAAC,KAAK,EAAE,EAAE;EAClB;EAAA,CACCA,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CACtBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CACvBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC;AAC5B;;AAEA;AACA;AACA;AACA;AAHA;AAAAX,aAAA,GAAAQ,CAAA;AAIA,OAAO,MAAMI,eAAe,GAAGA,CAAA,KAC7B;EAAA;EAAAZ,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAQ,CAAA;EAAA,OAAAN,GAAG,CAACW,MAAM,CAAC,CAAC,CAACC,SAAS,CAAER,KAAK,IAAM;IAAA;IAAAN,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAF,KAAK;IAAA;IAAA,CAAAN,aAAA,GAAAS,CAAA,UAAGJ,cAAc,CAACC,KAAK,CAAC;IAAA;IAAA,CAAAN,aAAA,GAAAS,CAAA,UAAGH,KAAK;EAAD,CAAE,CAAC;AAAD,CAAC;;AAE5E;AACA;AACA;AACA;AAHA;AAAAN,aAAA,GAAAQ,CAAA;AAIA,OAAO,MAAMO,aAAa,GAAGA,CAAA,KAC3B;EAAA;EAAAf,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAQ,CAAA;EAAA,OAAAN,GAAG,CAACW,MAAM,CAAC,CAAC,CAACC,SAAS,CAAER,KAAK,IAAM;IAAA;IAAAN,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAF,KAAK;IAAA;IAAA,CAAAN,aAAA,GAAAS,CAAA,UAAGH,KAAK,CAACI,IAAI,CAAC,CAAC;IAAA;IAAA,CAAAV,aAAA,GAAAS,CAAA,UAAGH,KAAK;EAAD,CAAE,CAAC;AAAD,CAAC;;AAEnE;AACA;AACA;AACA,MAAMU,kBAAkB;AAAA;AAAA,CAAAhB,aAAA,GAAAQ,CAAA,OAAG;EACzBS,QAAQ,EAAEb,UAAU,CAACc,yBAAyB;EAC9CC,SAAS,EAAEf,UAAU,CAACgB,yBAAyB;EAC/CC,KAAK,EAAEjB,UAAU,CAACkB,wBAAwB;EAC1CC,GAAG,EAAEnB,UAAU,CAACoB,2BAA2B;EAC3CC,GAAG,EAAErB,UAAU,CAACsB,0BAA0B;EAC1CC,OAAO,EAAEvB,UAAU,CAACgB,yBAAyB;EAC7CQ,KAAK,EAAExB,UAAU,CAACyB,uBAAuB;EACzCC,IAAI,EAAE1B,UAAU,CAAC2B,uBAAuB;EACxCC,IAAI,EAAE5B,UAAU,CAAC6B;AACnB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,sBAAsBA,CAACC,IAAI,EAAEC,IAAI,EAAE;EAAA;EAAApC,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAQ,CAAA;EAC1C;EACA,IAAI4B,IAAI,EAAE;IAAA;IAAApC,aAAA,GAAAS,CAAA;IACR,MAAM4B,SAAS;IAAA;IAAA,CAAArC,aAAA,GAAAQ,CAAA,QAAG4B,IAAI,CAACE,WAAW,CAAC,CAAC;IAAC;IAAAtC,aAAA,GAAAQ,CAAA;IACrC,IAAI6B,SAAS,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAE;MAAA;MAAAvC,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAQ,CAAA;MAAA,OAAOJ,UAAU,CAACkB,wBAAwB;IAAA,CAAC;IAAA;IAAA;MAAAtB,aAAA,GAAAS,CAAA;IAAA;IAAAT,aAAA,GAAAQ,CAAA;IAC5E,IAAI6B,SAAS,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAE;MAAA;MAAAvC,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAQ,CAAA;MAAA,OAAOJ,UAAU,CAACoC,wBAAwB;IAAA,CAAC;IAAA;IAAA;MAAAxC,aAAA,GAAAS,CAAA;IAAA;IAAAT,aAAA,GAAAQ,CAAA;IAC5E,IAAI6B,SAAS,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAE;MAAA;MAAAvC,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAQ,CAAA;MAAA,OAAOJ,UAAU,CAACqC,sBAAsB;IAAA,CAAC;IAAA;IAAA;MAAAzC,aAAA,GAAAS,CAAA;IAAA;IAAAT,aAAA,GAAAQ,CAAA;IACxE,IAAI6B,SAAS,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAE;MAAA;MAAAvC,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAQ,CAAA;MAAA,OAAOJ,UAAU,CAACsC,sBAAsB;IAAA,CAAC;IAAA;IAAA;MAAA1C,aAAA,GAAAS,CAAA;IAAA;IAAAT,aAAA,GAAAQ,CAAA;IACxE,IAAI6B,SAAS,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAE;MAAA;MAAAvC,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAQ,CAAA;MAAA,OAAOJ,UAAU,CAACuC,sBAAsB;IAAA,CAAC;IAAA;IAAA;MAAA3C,aAAA,GAAAS,CAAA;IAAA;IAAAT,aAAA,GAAAQ,CAAA;IACxE;IAAI;IAAA,CAAAR,aAAA,GAAAS,CAAA,WAAA4B,SAAS,CAACE,QAAQ,CAAC,MAAM,CAAC;IAAA;IAAA,CAAAvC,aAAA,GAAAS,CAAA,WAAI4B,SAAS,CAACE,QAAQ,CAAC,KAAK,CAAC,GAAE;MAAA;MAAAvC,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAQ,CAAA;MAAA,OAAOJ,UAAU,CAAC6B,uBAAuB;IAAA,CAAC;IAAA;IAAA;MAAAjC,aAAA,GAAAS,CAAA;IAAA;EACzG,CAAC;EAAA;EAAA;IAAAT,aAAA,GAAAS,CAAA;EAAA;EAAAT,aAAA,GAAAQ,CAAA;EAED,OAAO,2BAAAR,aAAA,GAAAS,CAAA,WAAAO,kBAAkB,CAACmB,IAAI,CAAC;EAAA;EAAA,CAAAnC,aAAA,GAAAS,CAAA,WAAIL,UAAU,CAACwC,iBAAiB;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,iBAAiBA,CAACC,QAAQ,EAAE;EAAA;EAAA9C,aAAA,GAAAO,CAAA;EACnC,MAAMwC,MAAM;EAAA;EAAA,CAAA/C,aAAA,GAAAQ,CAAA,QAAG,EAAE;EAAC;EAAAR,aAAA,GAAAQ,CAAA;EAElB;EAAI;EAAA,CAAAR,aAAA,GAAAS,CAAA,WAAAqC,QAAQ,CAACE,KAAK;EAAA;EAAA,CAAAhD,aAAA,GAAAS,CAAA,WAAIqC,QAAQ,CAACE,KAAK,CAACC,MAAM,GAAG,CAAC,GAAE;IAAA;IAAAjD,aAAA,GAAAS,CAAA;IAAAT,aAAA,GAAAQ,CAAA;IAC/C;IACA,KAAK,MAAM0C,GAAG,IAAIJ,QAAQ,CAACE,KAAK,EAAE;MAAA;MAAAhD,aAAA,GAAAQ,CAAA;MAChCuC,MAAM,CAACI,IAAI,CAAC;QACVC,KAAK;QAAE;QAAA,CAAApD,aAAA,GAAAS,CAAA,WAAAyC,GAAG,CAACd,IAAI;QAAA;QAAA,CAAApC,aAAA,GAAAS,CAAA,WAAI,SAAS;QAC5B4C,OAAO,EAAEH,GAAG,CAACG,OAAO;QACpBC,IAAI,EAAEpB,sBAAsB,CAACgB,GAAG,CAACf,IAAI,EAAEe,GAAG,CAACd,IAAI;MACjD,CAAC,CAAC;IACJ;EACF,CAAC,MAAM;IAAA;IAAApC,aAAA,GAAAS,CAAA;IAAAT,aAAA,GAAAQ,CAAA;IACL;IACAuC,MAAM,CAACI,IAAI,CAAC;MACVC,KAAK;MAAE;MAAA,CAAApD,aAAA,GAAAS,CAAA,WAAAqC,QAAQ,CAACV,IAAI;MAAA;MAAA,CAAApC,aAAA,GAAAS,CAAA,WAAI,SAAS;MACjC4C,OAAO,EAAEP,QAAQ,CAACO,OAAO;MACzBC,IAAI,EAAEpB,sBAAsB,CAACY,QAAQ,CAACX,IAAI,EAAEW,QAAQ,CAACV,IAAI;IAC3D,CAAC,CAAC;EACJ;EAEA,MAAMmB,eAAe;EAAA;EAAA,CAAAvD,aAAA,GAAAQ,CAAA,QAAG,IAAIL,eAAe,CAAC,mCAAmC,EAAE;IAC/EmD,IAAI,EAAElD,UAAU,CAACwC,iBAAiB;IAClCG;EACF,CAAC,CAAC;EAAC;EAAA/C,aAAA,GAAAQ,CAAA;EAEH,OAAO+C,eAAe;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,QAAQA,CAACC,eAAe,EAAE;EAAA;EAAAzD,aAAA,GAAAO,CAAA;EACxC;EACA,MAAMmD,OAAO;EAAA;EAAA,CAAA1D,aAAA,GAAAQ,CAAA,QAAGiD,eAAe,YAAYvD,GAAG,CAACyD,MAAM;EAAA;EAAA,CAAA3D,aAAA,GAAAS,CAAA,WACjD;IAAEmD,IAAI,EAAEH;EAAgB,CAAC;EAAA;EAAA,CAAAzD,aAAA,GAAAS,CAAA,WACzBgD,eAAe;EAEnB,MAAM;IACJG,IAAI,EAAEC,UAAU;IAChBC,KAAK,EAAEC,WAAW;IAClBC,MAAM,EAAEC,YAAY;IACpBC,YAAY;IAAA;IAAA,CAAAlE,aAAA,GAAAS,CAAA,WAAG,IAAI;IACnB0D,UAAU;IAAA;IAAA,CAAAnE,aAAA,GAAAS,CAAA,WAAG,KAAK;EACpB,CAAC;EAAA;EAAA,CAAAT,aAAA,GAAAQ,CAAA,QAAGkD,OAAO;EAAC;EAAA1D,aAAA,GAAAQ,CAAA;EAEZ,OAAO,eAAe4D,oBAAoBA,CAACC,OAAO,EAAEC,KAAK,EAAE;IAAA;IAAAtE,aAAA,GAAAO,CAAA;IACzD,MAAMgE,iBAAiB;IAAA;IAAA,CAAAvE,aAAA,GAAAQ,CAAA,QAAG;MACxB2D,UAAU;MACVD;IACF,CAAC;IAAC;IAAAlE,aAAA,GAAAQ,CAAA;IAEF,IAAI;MAAA;MAAAR,aAAA,GAAAQ,CAAA;MACF;MACA;MAAI;MAAA,CAAAR,aAAA,GAAAS,CAAA,WAAAoD,UAAU;MAAA;MAAA,CAAA7D,aAAA,GAAAS,CAAA,WAAI4D,OAAO,CAACT,IAAI,GAAE;QAAA;QAAA5D,aAAA,GAAAS,CAAA;QAAAT,aAAA,GAAAQ,CAAA;QAC9B6D,OAAO,CAACT,IAAI,GAAG,MAAMC,UAAU,CAACL,QAAQ,CAACa,OAAO,CAACT,IAAI,EAAEW,iBAAiB,CAAC;MAC3E,CAAC;MAAA;MAAA;QAAAvE,aAAA,GAAAS,CAAA;MAAA;;MAED;MAAAT,aAAA,GAAAQ,CAAA;MACA;MAAI;MAAA,CAAAR,aAAA,GAAAS,CAAA,WAAAsD,WAAW;MAAA;MAAA,CAAA/D,aAAA,GAAAS,CAAA,WAAI4D,OAAO,CAACP,KAAK,GAAE;QAAA;QAAA9D,aAAA,GAAAS,CAAA;QAAAT,aAAA,GAAAQ,CAAA;QAChC6D,OAAO,CAACP,KAAK,GAAG,MAAMC,WAAW,CAACP,QAAQ,CAACa,OAAO,CAACP,KAAK,EAAES,iBAAiB,CAAC;MAC9E,CAAC;MAAA;MAAA;QAAAvE,aAAA,GAAAS,CAAA;MAAA;;MAED;MAAAT,aAAA,GAAAQ,CAAA;MACA;MAAI;MAAA,CAAAR,aAAA,GAAAS,CAAA,WAAAwD,YAAY;MAAA;MAAA,CAAAjE,aAAA,GAAAS,CAAA,WAAI4D,OAAO,CAACL,MAAM,GAAE;QAAA;QAAAhE,aAAA,GAAAS,CAAA;QAAAT,aAAA,GAAAQ,CAAA;QAClC6D,OAAO,CAACL,MAAM,GAAG,MAAMC,YAAY,CAACT,QAAQ,CAACa,OAAO,CAACL,MAAM,EAAEO,iBAAiB,CAAC;MACjF,CAAC;MAAA;MAAA;QAAAvE,aAAA,GAAAS,CAAA;MAAA;IACH,CAAC,CAAC,OAAO+D,KAAK,EAAE;MAAA;MAAAxE,aAAA,GAAAQ,CAAA;MACd,IAAIgE,KAAK,YAAYtE,GAAG,CAACC,eAAe,EAAE;QAAA;QAAAH,aAAA,GAAAS,CAAA;QAAAT,aAAA,GAAAQ,CAAA;QACxC,MAAMqC,iBAAiB,CAAC2B,KAAK,CAAC;MAChC,CAAC;MAAA;MAAA;QAAAxE,aAAA,GAAAS,CAAA;MAAA;MAAAT,aAAA,GAAAQ,CAAA;MACD,MAAMgE,KAAK;IACb;EACF,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAACC,MAAM,EAAE;EAAA;EAAA1E,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAQ,CAAA;EACnC,OAAOgD,QAAQ,CAAC;IAAEI,IAAI,EAAEc;EAAO,CAAC,CAAC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,aAAaA,CAACD,MAAM,EAAE;EAAA;EAAA1E,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAQ,CAAA;EACpC,OAAOgD,QAAQ,CAAC;IAAEM,KAAK,EAAEY;EAAO,CAAC,CAAC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,cAAcA,CAACF,MAAM,EAAE;EAAA;EAAA1E,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAQ,CAAA;EACrC,OAAOgD,QAAQ,CAAC;IAAEQ,MAAM,EAAEU;EAAO,CAAC,CAAC;AACrC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO,MAAMG,MAAM;AAAA;AAAA,CAAA7E,aAAA,GAAAQ,CAAA,QAAG;EACpB;AACF;AACA;EACEsB,IAAI,EAAEA,CAAA,KAAM;IAAA;IAAA9B,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAN,GAAG,CAACW,MAAM,CAAC,CAAC,CAACiB,IAAI,CAAC,mBAAmB,CAAC;EAAD,CAAC;EAElD;AACF;AACA;EACEgD,YAAY,EAAEA,CAAA,KAAM;IAAA;IAAA9E,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAN,GAAG,CAACW,MAAM,CAAC,CAAC,CAACiB,IAAI,CAAC,mBAAmB,CAAC,CAACb,QAAQ,CAAC,gBAAgB,CAAC;EAAD,CAAC;EAErF;AACF;AACA;EACEI,KAAK,EAAEA,CAAA,KACL;IAAA;IAAArB,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACdS,KAAK,CAAC,oCAAoC,CAAC,CAC3CI,GAAG,CAAC,GAAG,EAAE,sCAAsC,CAAC,CAChDsD,SAAS,CAAC,CAAC;EAAD,CAAC;EAEhB;AACF;AACA;EACEC,aAAa,EAAEA,CAAA,KAAM;IAAA;IAAAhF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAqE,MAAM,CAACxD,KAAK,CAAC,CAAC,CAACJ,QAAQ,CAAC,mBAAmB,CAAC;EAAD,CAAC;EAEjE;AACF;AACA;EACEgE,KAAK,EAAEA,CAAA,KACL;IAAA;IAAAjF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACde,OAAO,CACN,qBAAqB,EACrB,mCACF,CAAC,CACAF,GAAG,CAAC,EAAE,EAAE,0BAA0B,CAAC;EAAD,CAAC;EAExC;AACF;AACA;EACEyD,IAAI,EAAEA,CAAA,KACJ;IAAA;IAAAlF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACdW,GAAG,CAAC,CAAC,EAAE,kBAAkB,CAAC,CAC1BE,GAAG,CAAC,GAAG,EAAE,qCAAqC,CAAC;EAAD,CAAC;EAEpD;AACF;AACA;EACE0D,YAAY,EAAEA,CAAA,KAAM;IAAA;IAAAnF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAqE,MAAM,CAACK,IAAI,CAAC,CAAC,CAACjE,QAAQ,CAAC,kBAAkB,CAAC;EAAD,CAAC;EAE9D;AACF;AACA;EACEmE,QAAQ,EAAEA,CAAA,KACR;IAAA;IAAApF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAN,GAAG,CAACW,MAAM,CAAC,CAAC,CACTU,GAAG,CAAC,CAAC,EAAE,wCAAwC,CAAC,CAChDE,GAAG,CAAC,GAAG,EAAE,yCAAyC,CAAC;EAAD,CAAC;EAExD;AACF;AACA;EACE4D,gBAAgB,EAAEA,CAAA,KAAM;IAAA;IAAArF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAqE,MAAM,CAACO,QAAQ,CAAC,CAAC,CAACnE,QAAQ,CAAC,sBAAsB,CAAC;EAAD,CAAC;EAE1E;AACF;AACA;EACEe,IAAI,EAAEA,CAAA,KAAM;IAAA;IAAAhC,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAN,GAAG,CAAC8B,IAAI,CAAC,CAAC,CAACb,SAAS,CAAC,2BAA2B,CAAC;EAAD,CAAC;EAE7D;AACF;AACA;EACEmE,YAAY,EAAEA,CAAA,KAAM;IAAA;IAAAtF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAqE,MAAM,CAAC7C,IAAI,CAAC,CAAC,CAACf,QAAQ,CAAC,kBAAkB,CAAC;EAAD,CAAC;EAE9D;AACF;AACA;EACEsE,IAAI,EAAEA,CAAA,KACJ;IAAA;IAAAvF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACda,GAAG,CAAC,KAAK,EAAE,0BAA0B,CAAC;EAAD,CAAC;EAE3C;AACF;AACA;EACE+D,SAAS,EAAEA,CAAA,KACT;IAAA;IAAAxF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACda,GAAG,CAAC,GAAG,EAAE,qCAAqC,CAAC;EAAD,CAAC;EAEpD;AACF;AACA;EACEgE,GAAG,EAAEA,CAAA,KACH;IAAA;IAAAzF,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACde,OAAO,CAAC,kBAAkB,EAAE,0BAA0B,CAAC;EAAD,CAAC;EAE5D;AACF;AACA;EACE+D,GAAG,EAAEA,CAAA,KACH;IAAA;IAAA1F,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACde,OAAO,CACN,+BAA+B,EAC/B,0BACF,CAAC;EAAD,CAAC;EAEL;AACF;AACA;EACEgE,GAAG,EAAEA,CAAA,KACH;IAAA;IAAA3F,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAI,eAAe,CAAC,CAAC,CACde,OAAO,CAAC,UAAU,EAAE,mCAAmC,CAAC;EAAD,CAAC;EAE7D;AACF;AACA;EACEiE,WAAW,EAAEA,CAAA,KACX;IAAA;IAAA5F,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAN,GAAG,CAAC2F,MAAM,CAAC,CAAC,CACTC,OAAO,CAAC,wBAAwB,CAAC,CACjCC,QAAQ,CAAC,2BAA2B,CAAC;EAAD,CAAC;EAE1C;AACF;AACA;EACEC,OAAO,EAAEA,CAAA,KAAM;IAAA;IAAAhG,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAN,GAAG,CAAC8F,OAAO,CAAC,CAAC;EAAD,CAAC;EAE5B;AACF;AACA;AACA;AACA;EACEpE,KAAK,EAAEA,CAACqE,MAAM,EAAE5C,OAAO,KACrB;IAAA;IAAArD,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAA,OAAAN,GAAG,CAACW,MAAM,CAAC,CAAC,CAACe,KAAK,CAACqE,MAAM;IAAE;IAAA,CAAAjG,aAAA,GAAAS,CAAA,WAAA4C,OAAO;IAAA;IAAA,CAAArD,aAAA,GAAAS,CAAA,WAAI,mBAAmBwF,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAC;EAAD;AAChF,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB;AAAA;AAAA,CAAAnG,aAAA,GAAAQ,CAAA,QAAGN,GAAG,CAACkG,MAAM,CAAC;EACzCC,IAAI,EAAEnG,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAAC+E,OAAO,CAAC,CAAC,CAAC;EAC9CC,KAAK,EAAErG,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC,CAAC6E,OAAO,CAAC,EAAE,CAAC;EACzDE,IAAI,EAAE5F,eAAe,CAAC,CAAC;EACvB6F,KAAK,EAAEvG,GAAG,CAACW,MAAM,CAAC,CAAC,CAACe,KAAK,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC0E,OAAO,CAAC,KAAK;AAC1D,CAAC,CAAC;;AAEF;AACA;AACA;AACA,OAAO,MAAMI,aAAa;AAAA;AAAA,CAAA1G,aAAA,GAAAQ,CAAA,QAAGN,GAAG,CAACkG,MAAM,CAAC;EACtCO,EAAE,EAAE9B,MAAM,CAACC,YAAY,CAAC;AAC1B,CAAC,CAAC;;AAEF;AACA;AACA;AACA,OAAO,MAAM8B,YAAY;AAAA;AAAA,CAAA5G,aAAA,GAAAQ,CAAA,QAAGN,GAAG,CAACkG,MAAM,CAAC;EACrCS,CAAC,EAAEjG,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,EAAE,0BAA0B,CAAC;EACzD4E,IAAI,EAAEnG,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAAC+E,OAAO,CAAC,CAAC,CAAC;EAC9CC,KAAK,EAAErG,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC,CAAC6E,OAAO,CAAC,EAAE;AAC1D,CAAC,CAAC;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO,MAAMQ,WAAW;AAAA;AAAA,CAAA9G,aAAA,GAAAQ,CAAA,QAAG;EACzBuG,MAAM,EAAE7G,GAAG,CAACkG,MAAM,CAAC;IACjB/E,KAAK,EAAEwD,MAAM,CAACG,aAAa,CAAC,CAAC;IAC7BI,QAAQ,EAAElF,GAAG,CAACW,MAAM,CAAC,CAAC,CAACI,QAAQ,CAAC,sBAAsB,CAAC;IACvD+F,UAAU,EAAE9G,GAAG,CAAC8F,OAAO,CAAC,CAAC,CAACM,OAAO,CAAC,KAAK;EACzC,CAAC,CAAC;EAEFW,MAAM,EAAE/G,GAAG,CAACkG,MAAM,CAAC;IACjB/E,KAAK,EAAEwD,MAAM,CAACG,aAAa,CAAC,CAAC;IAC7BI,QAAQ,EAAEP,MAAM,CAACQ,gBAAgB,CAAC,CAAC;IACnC6B,SAAS,EAAErC,MAAM,CAACM,YAAY,CAAC,CAAC;IAChCgC,QAAQ,EAAEtC,MAAM,CAACM,YAAY,CAAC;EAChC,CAAC,CAAC;EAEFiC,cAAc,EAAElH,GAAG,CAACkG,MAAM,CAAC;IACzB/E,KAAK,EAAEwD,MAAM,CAACG,aAAa,CAAC;EAC9B,CAAC,CAAC;EAEFqC,aAAa,EAAEnH,GAAG,CAACkG,MAAM,CAAC;IACxBkB,KAAK,EAAEpH,GAAG,CAACW,MAAM,CAAC,CAAC,CAACI,QAAQ,CAAC,yBAAyB,CAAC;IACvDmE,QAAQ,EAAEP,MAAM,CAACQ,gBAAgB,CAAC,CAAC;IACnCkC,eAAe,EAAErH,GAAG,CAACW,MAAM,CAAC,CAAC,CAC1Be,KAAK,CAAC,CAAC1B,GAAG,CAACsH,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,sBAAsB,CAAC,CACpDvG,QAAQ,CAAC,8BAA8B;EAC5C,CAAC,CAAC;EAEFwG,cAAc,EAAEvH,GAAG,CAACkG,MAAM,CAAC;IACzBsB,eAAe,EAAExH,GAAG,CAACW,MAAM,CAAC,CAAC,CAACI,QAAQ,CAAC,8BAA8B,CAAC;IACtE0G,WAAW,EAAE9C,MAAM,CAACQ,gBAAgB,CAAC,CAAC;IACtCkC,eAAe,EAAErH,GAAG,CAACW,MAAM,CAAC,CAAC,CAC1Be,KAAK,CAAC,CAAC1B,GAAG,CAACsH,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE,sBAAsB,CAAC,CACvDvG,QAAQ,CAAC,8BAA8B;EAC5C,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAM2G,cAAc;AAAA;AAAA,CAAA5H,aAAA,GAAAQ,CAAA,QAAG;EAC5BqH,MAAM,EAAE3H,GAAG,CAACkG,MAAM,CAAC;IACjBc,SAAS,EAAErC,MAAM,CAACM,YAAY,CAAC,CAAC;IAChCgC,QAAQ,EAAEtC,MAAM,CAACM,YAAY,CAAC,CAAC;IAC/B2C,WAAW,EAAEjD,MAAM,CAACS,YAAY,CAAC,CAAC;IAClCyC,MAAM,EAAElD,MAAM,CAACjD,KAAK,CAAC,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;IAC5DP,KAAK,EAAEwD,MAAM,CAACxD,KAAK,CAAC,CAAC;IACrB4D,KAAK,EAAEJ,MAAM,CAACI,KAAK,CAAC,CAAC;IACrB+C,OAAO,EAAEpH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IACnCwG,IAAI,EAAErH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IAChCyG,KAAK,EAAEtH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,EAAE,CAAC;IAChC0G,OAAO,EAAEvH,eAAe,CAAC,CAAC,CAACe,OAAO,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;IAC1E8D,GAAG,EAAEZ,MAAM,CAACY,GAAG,CAAC,CAAC;IACjBC,GAAG,EAAEb,MAAM,CAACa,GAAG,CAAC,CAAC;IACjB0C,gBAAgB,EAAExH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IAC5C4G,aAAa,EAAExD,MAAM,CAAC7C,IAAI,CAAC,CAAC;IAC5BsG,KAAK,EAAEzD,MAAM,CAACU,IAAI,CAAC;EACrB,CAAC,CAAC;EAEFgD,MAAM,EAAErI,GAAG,CAACkG,MAAM,CAAC;IACjBc,SAAS,EAAErC,MAAM,CAACK,IAAI,CAAC,CAAC;IACxBiC,QAAQ,EAAEtC,MAAM,CAACK,IAAI,CAAC,CAAC;IACvB4C,WAAW,EAAEjD,MAAM,CAAC7C,IAAI,CAAC,CAAC;IAC1B+F,MAAM,EAAElD,MAAM,CAACjD,KAAK,CAAC,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;IAC5DP,KAAK,EAAEwD,MAAM,CAACxD,KAAK,CAAC,CAAC;IACrB4D,KAAK,EAAEJ,MAAM,CAACI,KAAK,CAAC,CAAC;IACrB+C,OAAO,EAAEpH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IACnCwG,IAAI,EAAErH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IAChCyG,KAAK,EAAEtH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,EAAE,CAAC;IAChC0G,OAAO,EAAEvH,eAAe,CAAC,CAAC,CAACe,OAAO,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;IAC1E8D,GAAG,EAAEZ,MAAM,CAACY,GAAG,CAAC,CAAC;IACjBC,GAAG,EAAEb,MAAM,CAACa,GAAG,CAAC,CAAC;IACjB0C,gBAAgB,EAAExH,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IAC5C4G,aAAa,EAAExD,MAAM,CAAC7C,IAAI,CAAC,CAAC;IAC5BwG,aAAa,EAAE3D,MAAM,CAAC7C,IAAI,CAAC,CAAC;IAC5BsG,KAAK,EAAEzD,MAAM,CAACU,IAAI,CAAC;EACrB,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMkD,WAAW;AAAA;AAAA,CAAAzI,aAAA,GAAAQ,CAAA,QAAG;EACzBqH,MAAM,EAAE3H,GAAG,CAACkG,MAAM,CAAC;IACjB/E,KAAK,EAAEwD,MAAM,CAACG,aAAa,CAAC,CAAC;IAC7BI,QAAQ,EAAEP,MAAM,CAACQ,gBAAgB,CAAC,CAAC;IACnC6B,SAAS,EAAErC,MAAM,CAACM,YAAY,CAAC,CAAC;IAChCgC,QAAQ,EAAEtC,MAAM,CAACM,YAAY,CAAC,CAAC;IAC/BuD,IAAI,EAAExI,GAAG,CAACW,MAAM,CAAC,CAAC,CAACI,QAAQ,CAAC,kBAAkB;EAChD,CAAC,CAAC;EAEFsH,MAAM,EAAErI,GAAG,CAACkG,MAAM,CAAC;IACjB/E,KAAK,EAAEwD,MAAM,CAACxD,KAAK,CAAC,CAAC;IACrB6F,SAAS,EAAErC,MAAM,CAACK,IAAI,CAAC,CAAC;IACxBiC,QAAQ,EAAEtC,MAAM,CAACK,IAAI,CAAC,CAAC;IACvBwD,IAAI,EAAExI,GAAG,CAACW,MAAM,CAAC,CAAC;IAClB8H,QAAQ,EAAEzI,GAAG,CAAC8F,OAAO,CAAC;EACxB,CAAC,CAAC;EAEF4C,aAAa,EAAE1I,GAAG,CAACkG,MAAM,CAAC;IACxBc,SAAS,EAAErC,MAAM,CAACK,IAAI,CAAC,CAAC;IACxBiC,QAAQ,EAAEtC,MAAM,CAACK,IAAI,CAAC,CAAC;IACvBD,KAAK,EAAEJ,MAAM,CAACI,KAAK,CAAC;EACtB,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAM4D,gBAAgB;AAAA;AAAA,CAAA7I,aAAA,GAAAQ,CAAA,QAAG;EAC9BqH,MAAM,EAAE3H,GAAG,CAACkG,MAAM,CAAC;IACjB0C,SAAS,EAAEjE,MAAM,CAACC,YAAY,CAAC,CAAC;IAChCiE,aAAa,EAAElE,MAAM,CAACjD,KAAK,CAAC,CAC1B,eAAe,EACf,WAAW,EACX,WAAW,EACX,OAAO,EACP,iBAAiB,EACjB,YAAY,EACZ,YAAY,EACZ,mBAAmB,CACpB,CAAC,CAACX,QAAQ,CAAC,4BAA4B,CAAC;IACzC+H,aAAa,EAAEnE,MAAM,CAACS,YAAY,CAAC,CAAC;IACpCgD,KAAK,EAAEzD,MAAM,CAACU,IAAI,CAAC,CAAC;IACpB0D,UAAU,EAAE/I,GAAG,CAACkG,MAAM,CAAC;MACrB8C,WAAW,EAAEhJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACtE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC1C0H,KAAK,EAAEjJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC9C2H,eAAe,EAAElJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CAAC,EAAE,CAAC;MACtD4H,qBAAqB,EAAEnJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC9D6H,sBAAsB,EAAEpJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC/D8H,gBAAgB,EAAErJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MACzD+H,SAAS,EAAEtJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CAAC,EAAE;IACjD,CAAC,CAAC,CAAC6E,OAAO,CAACmD,SAAS;EACtB,CAAC,CAAC;EAEFlB,MAAM,EAAErI,GAAG,CAACkG,MAAM,CAAC;IACjB2C,aAAa,EAAElE,MAAM,CAACjD,KAAK,CAAC,CAC1B,eAAe,EACf,WAAW,EACX,WAAW,EACX,OAAO,EACP,iBAAiB,EACjB,YAAY,EACZ,YAAY,EACZ,mBAAmB,CACpB,CAAC;IACFoH,aAAa,EAAEnE,MAAM,CAAC7C,IAAI,CAAC,CAAC;IAC5BsG,KAAK,EAAEzD,MAAM,CAACU,IAAI,CAAC,CAAC;IACpBmE,MAAM,EAAE7E,MAAM,CAACjD,KAAK,CAAC,CAAC,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;IACjEqH,UAAU,EAAE/I,GAAG,CAACkG,MAAM,CAAC;MACrB8C,WAAW,EAAEhJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACtE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC1C0H,KAAK,EAAEjJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC9C2H,eAAe,EAAElJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CAAC,EAAE,CAAC;MACtD4H,qBAAqB,EAAEnJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC9D6H,sBAAsB,EAAEpJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MAC/D8H,gBAAgB,EAAErJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,EAAE,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC;MACzD+H,SAAS,EAAEtJ,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CAAC,EAAE;IACjD,CAAC,CAAC,CAAC6E,OAAO,CAACmD,SAAS;EACtB,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAME,iBAAiB;AAAA;AAAA,CAAA3J,aAAA,GAAAQ,CAAA,QAAG;EAC/BqH,MAAM,EAAE3H,GAAG,CAACkG,MAAM,CAAC;IACjB0C,SAAS,EAAEjE,MAAM,CAACC,YAAY,CAAC,CAAC;IAChC8E,cAAc,EAAEhJ,eAAe,CAAC,CAAC,CAACK,QAAQ,CAAC,6BAA6B,CAAC,CAACQ,GAAG,CAAC,GAAG,CAAC;IAClFoI,MAAM,EAAEjJ,eAAe,CAAC,CAAC,CAACK,QAAQ,CAAC,oBAAoB,CAAC,CAACQ,GAAG,CAAC,GAAG,CAAC;IACjEqI,KAAK,EAAEjF,MAAM,CAACjD,KAAK,CAAC,CAClB,MAAM,EACN,YAAY,EACZ,SAAS,EACT,aAAa,EACb,cAAc,EACd,eAAe,EACf,aAAa,EACb,QAAQ,EACR,YAAY,EACZ,YAAY,EACZ,MAAM,EACN,OAAO,EACP,OAAO,CACR,CAAC,CAACX,QAAQ,CAAC,mBAAmB,CAAC;IAChC8I,SAAS,EAAEnJ,eAAe,CAAC,CAAC,CAACK,QAAQ,CAAC,uBAAuB,CAAC,CAACQ,GAAG,CAAC,GAAG,CAAC;IACvEuI,SAAS,EAAEnF,MAAM,CAACS,YAAY,CAAC,CAAC;IAChC2E,OAAO,EAAEpF,MAAM,CAAC7C,IAAI,CAAC,CAAC;IACtBkI,YAAY,EAAErF,MAAM,CAAC/C,IAAI,CAAC,CAAC;IAC3BqI,YAAY,EAAEtF,MAAM,CAACU,IAAI,CAAC,CAAC;IAC3B6E,KAAK,EAAElK,GAAG,CAAC8F,OAAO,CAAC,CAAC,CAACM,OAAO,CAAC,KAAK,CAAC;IACnC+D,SAAS,EAAEzJ,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG;EACtC,CAAC,CAAC;EAEF8G,MAAM,EAAErI,GAAG,CAACkG,MAAM,CAAC;IACjBwD,cAAc,EAAEhJ,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IAC1CoI,MAAM,EAAEjJ,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IAClCqI,KAAK,EAAEjF,MAAM,CAACjD,KAAK,CAAC,CAClB,MAAM,EACN,YAAY,EACZ,SAAS,EACT,aAAa,EACb,cAAc,EACd,eAAe,EACf,aAAa,EACb,QAAQ,EACR,YAAY,EACZ,YAAY,EACZ,MAAM,EACN,OAAO,EACP,OAAO,CACR,CAAC;IACFmI,SAAS,EAAEnJ,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IACrCuI,SAAS,EAAEnF,MAAM,CAAC7C,IAAI,CAAC,CAAC;IACxBiI,OAAO,EAAEpF,MAAM,CAAC7C,IAAI,CAAC,CAAC;IACtBkI,YAAY,EAAErF,MAAM,CAAC/C,IAAI,CAAC,CAAC;IAC3BqI,YAAY,EAAEtF,MAAM,CAACU,IAAI,CAAC,CAAC;IAC3B6E,KAAK,EAAElK,GAAG,CAAC8F,OAAO,CAAC,CAAC;IACpBqE,SAAS,EAAEzJ,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IACrCkH,QAAQ,EAAEzI,GAAG,CAAC8F,OAAO,CAAC;EACxB,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMsE,oBAAoB;AAAA;AAAA,CAAAtK,aAAA,GAAAQ,CAAA,QAAG;EAClCqH,MAAM,EAAE3H,GAAG,CAACkG,MAAM,CAAC;IACjBmE,oBAAoB,EAAE1F,MAAM,CAACjD,KAAK,CAChC,CAAC,YAAY,EAAE,eAAe,EAAE,eAAe,CAAC,EAChD,iJACF,CAAC,CAACX,QAAQ,CAAC,uDAAuD,CAAC;IACnEuJ,oBAAoB,EAAE3F,MAAM,CAACjD,KAAK,CAChC,CAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE,SAAS,CACzD,CAAC,CAAC0E,OAAO,CAAC,SAAS,CAAC;IACpBmE,UAAU,EAAE5F,MAAM,CAACS,YAAY,CAAC,CAAC,CAC9BoF,IAAI,CAAC,aAAa,EAAE,2FAA2F,EAAE,UAASpK,KAAK,EAAE;MAAA;MAAAN,aAAA,GAAAO,CAAA;MAAAP,aAAA,GAAAQ,CAAA;MAChI,IAAI,CAACF,KAAK,EAAE;QAAA;QAAAN,aAAA,GAAAS,CAAA;QAAAT,aAAA,GAAAQ,CAAA;QAAA,OAAO,IAAI;MAAA,CAAC;MAAA;MAAA;QAAAR,aAAA,GAAAS,CAAA;MAAA;MACxB,MAAMkK,aAAa;MAAA;MAAA,CAAA3K,aAAA,GAAAQ,CAAA,QAAG,IAAIoK,IAAI,CAAC,CAAC;MAAC;MAAA5K,aAAA,GAAAQ,CAAA;MACjCmK,aAAa,CAACE,OAAO,CAACF,aAAa,CAACG,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC;MAAC;MAAA9K,aAAA,GAAAQ,CAAA;MACpD,OAAO,IAAIoK,IAAI,CAACtK,KAAK,CAAC,IAAIqK,aAAa;IACzC,CAAC,CAAC;IACJI,QAAQ,EAAElG,MAAM,CAACS,YAAY,CAAC,CAAC,CAC5BoF,IAAI,CAAC,aAAa,EAAE,mCAAmC,EAAE,UAASpK,KAAK,EAAE;MAAA;MAAAN,aAAA,GAAAO,CAAA;MACxE,MAAM;QAAEkK;MAAW,CAAC;MAAA;MAAA,CAAAzK,aAAA,GAAAQ,CAAA,QAAG,IAAI,CAACwK,MAAM;MAAC;MAAAhL,aAAA,GAAAQ,CAAA;MACnC;MAAI;MAAA,CAAAR,aAAA,GAAAS,CAAA,YAACH,KAAK;MAAA;MAAA,CAAAN,aAAA,GAAAS,CAAA,WAAI,CAACgK,UAAU,GAAE;QAAA;QAAAzK,aAAA,GAAAS,CAAA;QAAAT,aAAA,GAAAQ,CAAA;QAAA,OAAO,IAAI;MAAA,CAAC;MAAA;MAAA;QAAAR,aAAA,GAAAS,CAAA;MAAA;MAAAT,aAAA,GAAAQ,CAAA;MACvC,OAAO,IAAIoK,IAAI,CAACtK,KAAK,CAAC,GAAG,IAAIsK,IAAI,CAACH,UAAU,CAAC;IAC/C,CAAC,CAAC;IACJQ,0BAA0B,EAAErK,eAAe,CAAC,CAAC,CAC1CK,QAAQ,CAAC,8DAA8D,CAAC,CACxEM,GAAG,CAAC,EAAE,EAAE,8EAA8E,CAAC,CACvFE,GAAG,CAAC,IAAI,EAAE,mDAAmD,CAAC;IACjEyJ,oBAAoB,EAAEtK,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,IAAI,CAAC;IACjD0J,kBAAkB,EAAEvK,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,IAAI,CAAC;IAC/C2J,MAAM,EAAElL,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACsF,QAAQ,CAAC,CAAC;IACpDC,gBAAgB,EAAEpL,GAAG,CAACqL,KAAK,CAAC,CAAC,CAACC,EAAE,CAACtL,GAAG,CAACW,MAAM,CAAC,CAAC,CAACQ,KAAK,CAAC,CAAC,CAAC,CAACiF,OAAO,CAAC,EAAE;EACnE,CAAC,CAAC;EAEFiC,MAAM,EAAErI,GAAG,CAACkG,MAAM,CAAC;IACjB6E,0BAA0B,EAAErK,eAAe,CAAC,CAAC,CAC1CW,GAAG,CAAC,EAAE,EAAE,8EAA8E,CAAC,CACvFE,GAAG,CAAC,IAAI,EAAE,mDAAmD,CAAC;IACjEyJ,oBAAoB,EAAEtK,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,IAAI,CAAC;IACjD0J,kBAAkB,EAAEvK,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,IAAI;EAChD,CAAC,CAAC;EAEFgK,IAAI,EAAEvL,GAAG,CAACkG,MAAM,CAAC;IACfsD,MAAM,EAAE7E,MAAM,CAACjD,KAAK,CAAC,CAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;IAC9E8J,UAAU,EAAExL,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IAC7C4F,MAAM,EAAE9G,MAAM,CAACjD,KAAK,CAAC,CAAC,YAAY,EAAE,eAAe,EAAE,eAAe,CAAC,CAAC;IACtEgK,eAAe,EAAE/G,MAAM,CAAC7C,IAAI,CAAC,CAAC;IAC9B6J,aAAa,EAAEhH,MAAM,CAAC7C,IAAI,CAAC,CAAC;IAC5BuE,KAAK,EAAErG,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAACE,GAAG,CAAC,GAAG,CAAC,CAAC6E,OAAO,CAAC,EAAE,CAAC;IACzDwF,MAAM,EAAE5L,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACvE,GAAG,CAAC,CAAC,CAAC,CAAC+E,OAAO,CAAC,CAAC,CAAC;IAChDyF,OAAO,EAAElH,MAAM,CAACjD,KAAK,CAAC,CAAC,YAAY,EAAE,UAAU,EAAE,wBAAwB,CAAC,CAAC,CAAC0E,OAAO,CAAC,YAAY,CAAC;IACjG0F,UAAU,EAAEnH,MAAM,CAACjD,KAAK,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC0E,OAAO,CAAC,MAAM;EAC1D,CAAC,CAAC;EAEF2F,MAAM,EAAE/L,GAAG,CAACkG,MAAM,CAAC;IACjB8F,iBAAiB,EAAEtL,eAAe,CAAC,CAAC,CACjCK,QAAQ,CAAC,+CAA+C,CAAC,CACzDM,GAAG,CAAC,EAAE,EAAE,kDAAkD,CAAC,CAC3DE,GAAG,CAAC,IAAI,EAAE,0CAA0C;EACzD,CAAC,CAAC;EAEF0K,MAAM,EAAEjM,GAAG,CAACkG,MAAM,CAAC;IACjBgG,MAAM,EAAExL,eAAe,CAAC,CAAC,CACtBa,GAAG,CAAC,IAAI,EAAE,+BAA+B;EAC9C,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAM4K,UAAU;AAAA;AAAA,CAAArM,aAAA,GAAAQ,CAAA,QAAG;EACxBqH,MAAM,EAAE3H,GAAG,CAACkG,MAAM,CAAC;IACjBkG,cAAc,EAAEzH,MAAM,CAACS,YAAY,CAAC,CAAC;IACrCiH,eAAe,EAAE1H,MAAM,CAAC/C,IAAI,CAAC,CAAC;IAC9B0K,iBAAiB,EAAE5L,eAAe,CAAC,CAAC,CACjCK,QAAQ,CAAC,uDAAuD,CAAC,CACjEQ,GAAG,CAAC,GAAG,CAAC;IACXgL,iBAAiB,EAAE5H,MAAM,CAACjD,KAAK,CAC7B,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,EACzB,8EACF,CAAC,CAACX,QAAQ,CAAC,2BAA2B,CAAC;IACvCyL,UAAU,EAAE7H,MAAM,CAACjD,KAAK,CAAC,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC,CAAC0E,OAAO,CAAC,WAAW,CAAC;IAC1EqG,QAAQ,EAAE/L,eAAe,CAAC,CAAC,CACxBK,QAAQ,CAAC,gEAAgE,CAAC,CAC1EM,GAAG,CAAC,EAAE,EAAE,yCAAyC,CAAC,CAClDE,GAAG,CAAC,KAAK,CAAC;IACbmL,4BAA4B,EAAE1M,GAAG,CAAC8F,OAAO,CAAC,CAAC,CAACM,OAAO,CAAC,IAAI,CAAC;IACzDuG,gBAAgB,EAAE3M,GAAG,CAAC2F,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAACC,QAAQ,CAAC;EACpD,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAM+G,YAAY;AAAA;AAAA,CAAA9M,aAAA,GAAAQ,CAAA,QAAG;EAC1BqH,MAAM,EAAE3H,GAAG,CAACkG,MAAM,CAAC;IACjB2G,UAAU,EAAElI,MAAM,CAACjD,KAAK,CACtB,CAAC,YAAY,EAAE,WAAW,EAAE,KAAK,EAAE,YAAY,EAAE,SAAS,EAAE,cAAc,EAAE,OAAO,CACrF,CAAC,CAACX,QAAQ,CAAC,wBAAwB,CAAC;IACpC+L,YAAY,EAAEnI,MAAM,CAACjD,KAAK,CAAC,CAAC,QAAQ,EAAE,WAAW,EAAE,cAAc,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC0E,OAAO,CAAC,QAAQ,CAAC;IAC3G2G,cAAc,EAAEpI,MAAM,CAACjD,KAAK,CAAC,CAAC,SAAS,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC0E,OAAO,CAAC,SAAS,CAAC;IAC9E4G,iBAAiB,EAAEtM,eAAe,CAAC,CAAC,CACjCK,QAAQ,CAAC,+BAA+B,CAAC,CACzCM,GAAG,CAAC,EAAE,EAAE,kDAAkD,CAAC,CAC3DE,GAAG,CAAC,IAAI,CAAC;IACZgJ,UAAU,EAAE5F,MAAM,CAACS,YAAY,CAAC,CAAC;IACjCyF,QAAQ,EAAElG,MAAM,CAAC7C,IAAI,CAAC,CAAC;IACvBmL,aAAa,EAAEtI,MAAM,CAAC/C,IAAI,CAAC,CAAC;IAC5BsL,eAAe,EAAElN,GAAG,CAAC8F,OAAO,CAAC,CAAC,CAACM,OAAO,CAAC,KAAK,CAAC;IAC7C+G,cAAc,EAAEzM,eAAe,CAAC,CAAC,CAACa,GAAG,CAAC,GAAG,CAAC;IAC1C6L,kBAAkB,EAAEpN,GAAG,CAAC8F,OAAO,CAAC;EAClC,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMuH,OAAO;AAAA;AAAA,CAAAvN,aAAA,GAAAQ,CAAA,QAAG;EACrBgN,IAAI,EAAE1G,WAAW;EACjB2G,OAAO,EAAE7F,cAAc;EACvB8F,IAAI,EAAEjF,WAAW;EACjBkF,SAAS,EAAE9E,gBAAgB;EAC3B+E,UAAU,EAAEjE,iBAAiB;EAC7BkE,aAAa,EAAEvD,oBAAoB;EACnCwD,GAAG,EAAEzB,UAAU;EACf5F,KAAK,EAAEqG,YAAY;EACnBiB,MAAM,EAAE;IACNC,UAAU,EAAE7H,gBAAgB;IAC5B8H,OAAO,EAAEvH,aAAa;IACtBwH,MAAM,EAAEtH;EACV;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA5G,aAAA,GAAAQ,CAAA;AAOA,MAAM2N,cAAc,GAAG,MAAAA,CAAO9J,OAAO,EAAEC,KAAK,KAAK;EAAA;EAAAtE,aAAA,GAAAO,CAAA;AAIjD,CAAC,CAHC;AACA;AACA;AACD;;AAED;AACA,eAAe4N,cAAc","ignoreList":[]}