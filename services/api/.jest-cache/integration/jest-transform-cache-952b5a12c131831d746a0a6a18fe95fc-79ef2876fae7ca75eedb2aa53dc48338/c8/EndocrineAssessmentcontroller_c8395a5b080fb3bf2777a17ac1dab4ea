4bf4f0201d50c2098d203ca56cb1705b
/* istanbul ignore next */
function cov_17mwowlqb7() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/EndocrineAssessment.controller.js";
  var hash = "6727ca6ccf0f57dd7544e8131a91fcc554a93e53";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/EndocrineAssessment.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 10,
          column: 8
        },
        end: {
          line: 27,
          column: 9
        }
      },
      "1": {
        start: {
          line: 11,
          column: 41
        },
        end: {
          line: 17,
          column: 41
        }
      },
      "2": {
        start: {
          line: 18,
          column: 12
        },
        end: {
          line: 18,
          column: 28
        }
      },
      "3": {
        start: {
          line: 19,
          column: 12
        },
        end: {
          line: 19,
          column: 40
        }
      },
      "4": {
        start: {
          line: 21,
          column: 12
        },
        end: {
          line: 21,
          column: 72
        }
      },
      "5": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 28
        }
      },
      "6": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 26,
          column: 14
        }
      },
      "7": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 48,
          column: 9
        }
      },
      "8": {
        start: {
          line: 33,
          column: 34
        },
        end: {
          line: 38,
          column: 30
        }
      },
      "9": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 39,
          column: 28
        }
      },
      "10": {
        start: {
          line: 40,
          column: 12
        },
        end: {
          line: 40,
          column: 33
        }
      },
      "11": {
        start: {
          line: 42,
          column: 12
        },
        end: {
          line: 42,
          column: 65
        }
      },
      "12": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 43,
          column: 28
        }
      },
      "13": {
        start: {
          line: 44,
          column: 12
        },
        end: {
          line: 47,
          column: 14
        }
      },
      "14": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 116,
          column: 9
        }
      },
      "15": {
        start: {
          line: 54,
          column: 50
        },
        end: {
          line: 54,
          column: 62
        }
      },
      "16": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 62,
          column: 13
        }
      },
      "17": {
        start: {
          line: 58,
          column: 16
        },
        end: {
          line: 58,
          column: 32
        }
      },
      "18": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 61,
          column: 18
        }
      },
      "19": {
        start: {
          line: 64,
          column: 12
        },
        end: {
          line: 69,
          column: 13
        }
      },
      "20": {
        start: {
          line: 65,
          column: 16
        },
        end: {
          line: 65,
          column: 32
        }
      },
      "21": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 68,
          column: 18
        }
      },
      "22": {
        start: {
          line: 72,
          column: 40
        },
        end: {
          line: 72,
          column: 179
        }
      },
      "23": {
        start: {
          line: 73,
          column: 39
        },
        end: {
          line: 73,
          column: 61
        }
      },
      "24": {
        start: {
          line: 76,
          column: 39
        },
        end: {
          line: 78,
          column: 31
        }
      },
      "25": {
        start: {
          line: 81,
          column: 24
        },
        end: {
          line: 81,
          column: 34
        }
      },
      "26": {
        start: {
          line: 83,
          column: 12
        },
        end: {
          line: 102,
          column: 13
        }
      },
      "27": {
        start: {
          line: 85,
          column: 16
        },
        end: {
          line: 91,
          column: 33
        }
      },
      "28": {
        start: {
          line: 92,
          column: 16
        },
        end: {
          line: 92,
          column: 35
        }
      },
      "29": {
        start: {
          line: 95,
          column: 16
        },
        end: {
          line: 100,
          column: 31
        }
      },
      "30": {
        start: {
          line: 101,
          column: 16
        },
        end: {
          line: 101,
          column: 35
        }
      },
      "31": {
        start: {
          line: 104,
          column: 12
        },
        end: {
          line: 104,
          column: 28
        }
      },
      "32": {
        start: {
          line: 105,
          column: 12
        },
        end: {
          line: 108,
          column: 14
        }
      },
      "33": {
        start: {
          line: 110,
          column: 12
        },
        end: {
          line: 110,
          column: 70
        }
      },
      "34": {
        start: {
          line: 111,
          column: 12
        },
        end: {
          line: 111,
          column: 28
        }
      },
      "35": {
        start: {
          line: 112,
          column: 12
        },
        end: {
          line: 115,
          column: 14
        }
      },
      "36": {
        start: {
          line: 122,
          column: 8
        },
        end: {
          line: 155,
          column: 9
        }
      },
      "37": {
        start: {
          line: 123,
          column: 27
        },
        end: {
          line: 123,
          column: 41
        }
      },
      "38": {
        start: {
          line: 125,
          column: 41
        },
        end: {
          line: 131,
          column: 97
        }
      },
      "39": {
        start: {
          line: 132,
          column: 40
        },
        end: {
          line: 132,
          column: 63
        }
      },
      "40": {
        start: {
          line: 134,
          column: 12
        },
        end: {
          line: 144,
          column: 13
        }
      },
      "41": {
        start: {
          line: 136,
          column: 16
        },
        end: {
          line: 136,
          column: 32
        }
      },
      "42": {
        start: {
          line: 137,
          column: 16
        },
        end: {
          line: 143,
          column: 18
        }
      },
      "43": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 146,
          column: 28
        }
      },
      "44": {
        start: {
          line: 147,
          column: 12
        },
        end: {
          line: 147,
          column: 39
        }
      },
      "45": {
        start: {
          line: 149,
          column: 12
        },
        end: {
          line: 149,
          column: 71
        }
      },
      "46": {
        start: {
          line: 150,
          column: 12
        },
        end: {
          line: 150,
          column: 28
        }
      },
      "47": {
        start: {
          line: 151,
          column: 12
        },
        end: {
          line: 154,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 5
          }
        },
        loc: {
          start: {
            line: 9,
            column: 32
          },
          end: {
            line: 28,
            column: 5
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 31,
            column: 5
          }
        },
        loc: {
          start: {
            line: 31,
            column: 40
          },
          end: {
            line: 49,
            column: 5
          }
        },
        line: 31
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 52,
            column: 4
          },
          end: {
            line: 52,
            column: 5
          }
        },
        loc: {
          start: {
            line: 52,
            column: 32
          },
          end: {
            line: 117,
            column: 5
          }
        },
        line: 52
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 121,
            column: 4
          },
          end: {
            line: 121,
            column: 5
          }
        },
        loc: {
          start: {
            line: 121,
            column: 31
          },
          end: {
            line: 156,
            column: 5
          }
        },
        line: 121
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 62,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 62,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "1": {
        loc: {
          start: {
            line: 64,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 64,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 64
      },
      "2": {
        loc: {
          start: {
            line: 76,
            column: 39
          },
          end: {
            line: 78,
            column: 31
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 77,
            column: 18
          },
          end: {
            line: 77,
            column: 41
          }
        }, {
          start: {
            line: 78,
            column: 18
          },
          end: {
            line: 78,
            column: 31
          }
        }],
        line: 76
      },
      "3": {
        loc: {
          start: {
            line: 83,
            column: 12
          },
          end: {
            line: 102,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 83,
            column: 12
          },
          end: {
            line: 102,
            column: 13
          }
        }, {
          start: {
            line: 93,
            column: 19
          },
          end: {
            line: 102,
            column: 13
          }
        }],
        line: 83
      },
      "4": {
        loc: {
          start: {
            line: 134,
            column: 12
          },
          end: {
            line: 144,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 134,
            column: 12
          },
          end: {
            line: 144,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 134
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "6727ca6ccf0f57dd7544e8131a91fcc554a93e53"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_17mwowlqb7 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_17mwowlqb7();
import { db } from "../../config/db.drizzle.js";
import { endocrine_assessment } from "../../db/schemas/endocrineAssessment.schema.js";
import { endocrine } from "../../db/schemas/endocrine.schema.js";
import { eq } from "drizzle-orm";
import { logger } from '../../utils/logger.js';
class EndocrineAssessmentController {
  // Get all endocrine assessments
  async index(request, reply) {
    /* istanbul ignore next */
    cov_17mwowlqb7().f[0]++;
    cov_17mwowlqb7().s[0]++;
    try {
      const endocrineAssessments =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[1]++, await db.select({
        id: endocrine_assessment.id,
        patient_id: endocrine_assessment.patient_id,
        endocrine_ids: endocrine_assessment.endocrine_ids,
        createdAt: endocrine_assessment.createdAt,
        updatedAt: endocrine_assessment.updatedAt
      }).from(endocrine_assessment));
      /* istanbul ignore next */
      cov_17mwowlqb7().s[2]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[3]++;
      return endocrineAssessments;
    } catch (error) {
      /* istanbul ignore next */
      cov_17mwowlqb7().s[4]++;
      logger.error("Error fetching endocrine assessments:", error);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[5]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[6]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Get all endocrine options
  async endocrineList(request, reply) {
    /* istanbul ignore next */
    cov_17mwowlqb7().f[1]++;
    cov_17mwowlqb7().s[7]++;
    try {
      const endocrineList =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[8]++, await db.select({
        id: endocrine.id,
        name: endocrine.name,
        createdAt: endocrine.createdAt,
        updatedAt: endocrine.updatedAt
      }).from(endocrine));
      /* istanbul ignore next */
      cov_17mwowlqb7().s[9]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[10]++;
      return endocrineList;
    } catch (error) {
      /* istanbul ignore next */
      cov_17mwowlqb7().s[11]++;
      logger.error("Error fetching endocrine list:", error);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[12]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[13]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Store or update endocrine assessment
  async store(request, reply) {
    /* istanbul ignore next */
    cov_17mwowlqb7().f[2]++;
    cov_17mwowlqb7().s[14]++;
    try {
      const {
        patient_id,
        endocrine_ids
      } =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[15]++, request.body);

      // Validate required fields
      /* istanbul ignore next */
      cov_17mwowlqb7().s[16]++;
      if (!patient_id) {
        /* istanbul ignore next */
        cov_17mwowlqb7().b[0][0]++;
        cov_17mwowlqb7().s[17]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_17mwowlqb7().s[18]++;
        return {
          message: "Patient ID is required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_17mwowlqb7().b[0][1]++;
      }
      cov_17mwowlqb7().s[19]++;
      if (!endocrine_ids) {
        /* istanbul ignore next */
        cov_17mwowlqb7().b[1][0]++;
        cov_17mwowlqb7().s[20]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_17mwowlqb7().s[21]++;
        return {
          message: "Endocrine IDs are required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_17mwowlqb7().b[1][1]++;
      }

      // Check if endocrine assessment already exists for this patient
      const existingAssessments =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[22]++, await db.select({
        id: endocrine_assessment.id
      }).from(endocrine_assessment).where(eq(endocrine_assessment.patient_id, patient_id)).limit(1));
      const existingAssessment =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[23]++, existingAssessments[0]);

      // Convert endocrine_ids array to comma-separated string
      const endocrineIdsString =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[24]++, Array.isArray(endocrine_ids) ?
      /* istanbul ignore next */
      (cov_17mwowlqb7().b[2][0]++, endocrine_ids.join(",")) :
      /* istanbul ignore next */
      (cov_17mwowlqb7().b[2][1]++, endocrine_ids));
      let result;
      const now =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[25]++, new Date());
      /* istanbul ignore next */
      cov_17mwowlqb7().s[26]++;
      if (existingAssessment) {
        /* istanbul ignore next */
        cov_17mwowlqb7().b[3][0]++;
        cov_17mwowlqb7().s[27]++;
        // Update existing endocrine assessment
        result = await db.update(endocrine_assessment).set({
          endocrine_ids: endocrineIdsString,
          updatedAt: now
        }).where(eq(endocrine_assessment.patient_id, patient_id)).returning();
        /* istanbul ignore next */
        cov_17mwowlqb7().s[28]++;
        result = result[0];
      } else {
        /* istanbul ignore next */
        cov_17mwowlqb7().b[3][1]++;
        cov_17mwowlqb7().s[29]++;
        // Create new endocrine assessment
        result = await db.insert(endocrine_assessment).values({
          patient_id: patient_id,
          endocrine_ids: endocrineIdsString,
          createdAt: now,
          updatedAt: now
        }).returning();
        /* istanbul ignore next */
        cov_17mwowlqb7().s[30]++;
        result = result[0];
      }
      /* istanbul ignore next */
      cov_17mwowlqb7().s[31]++;
      reply.code(201);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[32]++;
      return {
        message: "Endocrine assessment created or updated successfully",
        data: result
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_17mwowlqb7().s[33]++;
      logger.error("Error storing endocrine assessment:", error);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[34]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[35]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Show endocrine assessment for a specific patient
  // Returns empty data if no assessment exists (to allow frontend to render form)
  async show(request, reply) {
    /* istanbul ignore next */
    cov_17mwowlqb7().f[3]++;
    cov_17mwowlqb7().s[36]++;
    try {
      const {
        id
      } =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[37]++, request.params);
      const endocrineAssessments =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[38]++, await db.select({
        id: endocrine_assessment.id,
        patient_id: endocrine_assessment.patient_id,
        endocrine_ids: endocrine_assessment.endocrine_ids,
        createdAt: endocrine_assessment.createdAt,
        updatedAt: endocrine_assessment.updatedAt
      }).from(endocrine_assessment).where(eq(endocrine_assessment.patient_id, id)).limit(1));
      const endocrineAssessment =
      /* istanbul ignore next */
      (cov_17mwowlqb7().s[39]++, endocrineAssessments[0]);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[40]++;
      if (!endocrineAssessment) {
        /* istanbul ignore next */
        cov_17mwowlqb7().b[4][0]++;
        cov_17mwowlqb7().s[41]++;
        // Return 200 with empty data instead of 404, so frontend can render form
        reply.code(200);
        /* istanbul ignore next */
        cov_17mwowlqb7().s[42]++;
        return {
          id: null,
          patient_id: parseInt(id),
          endocrine_ids: "",
          createdAt: null,
          updatedAt: null
        };
      } else
      /* istanbul ignore next */
      {
        cov_17mwowlqb7().b[4][1]++;
      }
      cov_17mwowlqb7().s[43]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[44]++;
      return endocrineAssessment;
    } catch (error) {
      /* istanbul ignore next */
      cov_17mwowlqb7().s[45]++;
      logger.error("Error fetching endocrine assessment:", error);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[46]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_17mwowlqb7().s[47]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }
}
export default new EndocrineAssessmentController();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTdtd293bHFiNyIsImFjdHVhbENvdmVyYWdlIiwiZGIiLCJlbmRvY3JpbmVfYXNzZXNzbWVudCIsImVuZG9jcmluZSIsImVxIiwibG9nZ2VyIiwiRW5kb2NyaW5lQXNzZXNzbWVudENvbnRyb2xsZXIiLCJpbmRleCIsInJlcXVlc3QiLCJyZXBseSIsImYiLCJzIiwiZW5kb2NyaW5lQXNzZXNzbWVudHMiLCJzZWxlY3QiLCJpZCIsInBhdGllbnRfaWQiLCJlbmRvY3JpbmVfaWRzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiZnJvbSIsImNvZGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJlbmRvY3JpbmVMaXN0IiwibmFtZSIsInN0b3JlIiwiYm9keSIsImIiLCJleGlzdGluZ0Fzc2Vzc21lbnRzIiwid2hlcmUiLCJsaW1pdCIsImV4aXN0aW5nQXNzZXNzbWVudCIsImVuZG9jcmluZUlkc1N0cmluZyIsIkFycmF5IiwiaXNBcnJheSIsImpvaW4iLCJyZXN1bHQiLCJub3ciLCJEYXRlIiwidXBkYXRlIiwic2V0IiwicmV0dXJuaW5nIiwiaW5zZXJ0IiwidmFsdWVzIiwiZGF0YSIsInNob3ciLCJwYXJhbXMiLCJlbmRvY3JpbmVBc3Nlc3NtZW50IiwicGFyc2VJbnQiXSwic291cmNlcyI6WyJFbmRvY3JpbmVBc3Nlc3NtZW50LmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2RiLmRyaXp6bGUuanNcIjtcbmltcG9ydCB7IGVuZG9jcmluZV9hc3Nlc3NtZW50IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvZW5kb2NyaW5lQXNzZXNzbWVudC5zY2hlbWEuanNcIjtcbmltcG9ydCB7IGVuZG9jcmluZSB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWFzL2VuZG9jcmluZS5zY2hlbWEuanNcIjtcbmltcG9ydCB7IGVxIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5jbGFzcyBFbmRvY3JpbmVBc3Nlc3NtZW50Q29udHJvbGxlciB7XG4gICAgLy8gR2V0IGFsbCBlbmRvY3JpbmUgYXNzZXNzbWVudHNcbiAgICBhc3luYyBpbmRleChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZW5kb2NyaW5lQXNzZXNzbWVudHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBlbmRvY3JpbmVfYXNzZXNzbWVudC5pZCxcbiAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBlbmRvY3JpbmVfYXNzZXNzbWVudC5wYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgIGVuZG9jcmluZV9pZHM6IGVuZG9jcmluZV9hc3Nlc3NtZW50LmVuZG9jcmluZV9pZHMsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBlbmRvY3JpbmVfYXNzZXNzbWVudC5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBlbmRvY3JpbmVfYXNzZXNzbWVudC51cGRhdGVkQXQsXG4gICAgICAgICAgICB9KS5mcm9tKGVuZG9jcmluZV9hc3Nlc3NtZW50KTtcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoMjAwKTtcbiAgICAgICAgICAgIHJldHVybiBlbmRvY3JpbmVBc3Nlc3NtZW50cztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVuZG9jcmluZSBhc3Nlc3NtZW50czpcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IGFsbCBlbmRvY3JpbmUgb3B0aW9uc1xuICAgIGFzeW5jIGVuZG9jcmluZUxpc3QocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZG9jcmluZUxpc3QgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBlbmRvY3JpbmUuaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogZW5kb2NyaW5lLm5hbWUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBlbmRvY3JpbmUuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogZW5kb2NyaW5lLnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIH0pLmZyb20oZW5kb2NyaW5lKTtcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoMjAwKTtcbiAgICAgICAgICAgIHJldHVybiBlbmRvY3JpbmVMaXN0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZW5kb2NyaW5lIGxpc3Q6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0b3JlIG9yIHVwZGF0ZSBlbmRvY3JpbmUgYXNzZXNzbWVudFxuICAgIGFzeW5jIHN0b3JlKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhdGllbnRfaWQsIGVuZG9jcmluZV9pZHMgfSA9IHJlcXVlc3QuYm9keTtcblxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgICAgICBpZiAoIXBhdGllbnRfaWQpIHtcbiAgICAgICAgICAgICAgICByZXBseS5jb2RlKDQwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlBhdGllbnQgSUQgaXMgcmVxdWlyZWRcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWVuZG9jcmluZV9pZHMpIHtcbiAgICAgICAgICAgICAgICByZXBseS5jb2RlKDQwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkVuZG9jcmluZSBJRHMgYXJlIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZW5kb2NyaW5lIGFzc2Vzc21lbnQgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgcGF0aWVudFxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBc3Nlc3NtZW50cyA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiBlbmRvY3JpbmVfYXNzZXNzbWVudC5pZCB9KS5mcm9tKGVuZG9jcmluZV9hc3Nlc3NtZW50KS53aGVyZShlcShlbmRvY3JpbmVfYXNzZXNzbWVudC5wYXRpZW50X2lkLCBwYXRpZW50X2lkKSkubGltaXQoMSk7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Fzc2Vzc21lbnQgPSBleGlzdGluZ0Fzc2Vzc21lbnRzWzBdO1xuXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGVuZG9jcmluZV9pZHMgYXJyYXkgdG8gY29tbWEtc2VwYXJhdGVkIHN0cmluZ1xuICAgICAgICAgICAgY29uc3QgZW5kb2NyaW5lSWRzU3RyaW5nID0gQXJyYXkuaXNBcnJheShlbmRvY3JpbmVfaWRzKVxuICAgICAgICAgICAgICAgID8gZW5kb2NyaW5lX2lkcy5qb2luKFwiLFwiKVxuICAgICAgICAgICAgICAgIDogZW5kb2NyaW5lX2lkcztcblxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0Fzc2Vzc21lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgZW5kb2NyaW5lIGFzc2Vzc21lbnRcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi51cGRhdGUoZW5kb2NyaW5lX2Fzc2Vzc21lbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXQoeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZG9jcmluZV9pZHM6IGVuZG9jcmluZUlkc1N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbm93XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZShlcShlbmRvY3JpbmVfYXNzZXNzbWVudC5wYXRpZW50X2lkLCBwYXRpZW50X2lkKSlcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybmluZygpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBlbmRvY3JpbmUgYXNzZXNzbWVudFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLmluc2VydChlbmRvY3JpbmVfYXNzZXNzbWVudCkudmFsdWVzKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aWVudF9pZDogcGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICAgICAgZW5kb2NyaW5lX2lkczogZW5kb2NyaW5lSWRzU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBub3csXG4gICAgICAgICAgICAgICAgfSkucmV0dXJuaW5nKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXBseS5jb2RlKDIwMSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRW5kb2NyaW5lIGFzc2Vzc21lbnQgY3JlYXRlZCBvciB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBzdG9yaW5nIGVuZG9jcmluZSBhc3Nlc3NtZW50OlwiLCBlcnJvcilcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaG93IGVuZG9jcmluZSBhc3Nlc3NtZW50IGZvciBhIHNwZWNpZmljIHBhdGllbnRcbiAgICAvLyBSZXR1cm5zIGVtcHR5IGRhdGEgaWYgbm8gYXNzZXNzbWVudCBleGlzdHMgKHRvIGFsbG93IGZyb250ZW5kIHRvIHJlbmRlciBmb3JtKVxuICAgIGFzeW5jIHNob3cocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcXVlc3QucGFyYW1zO1xuXG4gICAgICAgICAgICBjb25zdCBlbmRvY3JpbmVBc3Nlc3NtZW50cyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgaWQ6IGVuZG9jcmluZV9hc3Nlc3NtZW50LmlkLFxuICAgICAgICAgICAgICAgIHBhdGllbnRfaWQ6IGVuZG9jcmluZV9hc3Nlc3NtZW50LnBhdGllbnRfaWQsXG4gICAgICAgICAgICAgICAgZW5kb2NyaW5lX2lkczogZW5kb2NyaW5lX2Fzc2Vzc21lbnQuZW5kb2NyaW5lX2lkcyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGVuZG9jcmluZV9hc3Nlc3NtZW50LmNyZWF0ZWRBdCxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGVuZG9jcmluZV9hc3Nlc3NtZW50LnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIH0pLmZyb20oZW5kb2NyaW5lX2Fzc2Vzc21lbnQpLndoZXJlKGVxKGVuZG9jcmluZV9hc3Nlc3NtZW50LnBhdGllbnRfaWQsIGlkKSkubGltaXQoMSk7XG4gICAgICAgICAgICBjb25zdCBlbmRvY3JpbmVBc3Nlc3NtZW50ID0gZW5kb2NyaW5lQXNzZXNzbWVudHNbMF07XG5cbiAgICAgICAgICAgIGlmICghZW5kb2NyaW5lQXNzZXNzbWVudCkge1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiAyMDAgd2l0aCBlbXB0eSBkYXRhIGluc3RlYWQgb2YgNDA0LCBzbyBmcm9udGVuZCBjYW4gcmVuZGVyIGZvcm1cbiAgICAgICAgICAgICAgICByZXBseS5jb2RlKDIwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHBhdGllbnRfaWQ6IHBhcnNlSW50KGlkKSxcbiAgICAgICAgICAgICAgICAgICAgZW5kb2NyaW5lX2lkczogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIGVuZG9jcmluZUFzc2Vzc21lbnQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBlbmRvY3JpbmUgYXNzZXNzbWVudDpcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgRW5kb2NyaW5lQXNzZXNzbWVudENvbnRyb2xsZXIoKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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