{"version":3,"names":["cov_1okvyt6wki","actualCoverage","pgTable","bigint","varchar","timestamp","boolean","index","patients","patientAddresses","s","id","mode","primaryKey","generatedByDefaultAsIdentity","patient_id","references","f","notNull","address_type","length","default","address_line_1","address_line_2","city","state","zip_code","county","cbsa_code","latitude","longitude","phone_number","alternate_phone","is_primary","is_verified","is_active","effective_from","effective_to","notes","deleted_at","createdAt","defaultNow","updatedAt","table","patientIdx","on","typeIdx","zipCodeIdx","stateIdx","cbsaIdx","patientTypeIdx","patientActiveIdx","address"],"sources":["address.schema.js"],"sourcesContent":["import { pgTable, bigint, varchar, timestamp, boolean, index } from 'drizzle-orm/pg-core';\nimport { patients } from './patient.schema.js';\n\n/**\n * Patient Addresses - Multiple address types per patient\n * Supports primary, billing, and mailing addresses\n * COMPLIANCE: Required for Medicare billing and CBSA determination\n *\n * Address types:\n * - PRIMARY: Patient's primary residence (used for CBSA determination)\n * - BILLING: Address for billing/invoices (may be family member)\n * - MAILING: Address for correspondence (may differ from primary)\n * - FACILITY: Care facility address (nursing home, ALF, etc.)\n * - TEMPORARY: Temporary address (respite, vacation, etc.)\n */\nexport const patientAddresses = pgTable('patient_addresses', {\n  id: bigint('id', { mode: 'number' }).primaryKey().generatedByDefaultAsIdentity(),\n  patient_id: bigint('patient_id', { mode: 'number' }).references(() => patients.id).notNull(),\n\n  // Address type\n  address_type: varchar('address_type', { length: 50 }).default('PRIMARY').notNull(), // PRIMARY, BILLING, MAILING, FACILITY, TEMPORARY\n\n  // Address components\n  address_line_1: varchar('address_line_1', { length: 255 }).notNull(),\n  address_line_2: varchar('address_line_2', { length: 255 }),\n  city: varchar('city', { length: 100 }).notNull(),\n  state: varchar('state', { length: 2 }).notNull(), // Two-letter state code (e.g., CA, TX, NY)\n  zip_code: varchar('zip_code', { length: 10 }).notNull(), // Format: 12345 or 12345-6789\n  county: varchar('county', { length: 100 }), // County name for CBSA lookup\n\n  // Geographic data for CBSA determination\n  cbsa_code: varchar('cbsa_code', { length: 10 }), // Core Based Statistical Area code (affects Medicare reimbursement)\n  latitude: varchar('latitude', { length: 20 }),\n  longitude: varchar('longitude', { length: 20 }),\n\n  // Contact information at this address\n  phone_number: varchar('phone_number', { length: 20 }), // Format: (XXX) XXX-XXXX or +1XXXXXXXXXX\n  alternate_phone: varchar('alternate_phone', { length: 20 }),\n\n  // Status flags\n  is_primary: boolean('is_primary').default(false), // True if this is the primary address for its type\n  is_verified: boolean('is_verified').default(false), // Address has been verified (USPS, etc.)\n  is_active: boolean('is_active').default(true), // Address is currently active\n\n  // Effective dates (for tracking address history)\n  effective_from: timestamp('effective_from'),\n  effective_to: timestamp('effective_to'),\n\n  // Notes\n  notes: varchar('notes', { length: 500 }),\n\n  // Audit fields\n  deleted_at: timestamp('deleted_at'), // Soft delete\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n}, (table) => ({\n  // Indexes for common query patterns\n  patientIdx: index('idx_patient_addresses_patient_id').on(table.patient_id),\n  typeIdx: index('idx_patient_addresses_type').on(table.address_type),\n  zipCodeIdx: index('idx_patient_addresses_zip_code').on(table.zip_code),\n  stateIdx: index('idx_patient_addresses_state').on(table.state),\n  cbsaIdx: index('idx_patient_addresses_cbsa_code').on(table.cbsa_code),\n\n  // Composite indexes\n  patientTypeIdx: index('idx_patient_addresses_patient_type')\n    .on(table.patient_id, table.address_type),\n  patientActiveIdx: index('idx_patient_addresses_patient_active')\n    .on(table.patient_id, table.is_active),\n}));\n\n// Keep the old table name as an alias for backwards compatibility during migration\nexport const address = patientAddresses;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,SAASE,OAAO,EAAEC,MAAM,EAAEC,OAAO,EAAEC,SAAS,EAAEC,OAAO,EAAEC,KAAK,QAAQ,qBAAqB;AACzF,SAASC,QAAQ,QAAQ,qBAAqB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB;AAAA;AAAA,CAAAT,cAAA,GAAAU,CAAA,OAAGR,OAAO,CAAC,mBAAmB,EAAE;EAC3DS,EAAE,EAAER,MAAM,CAAC,IAAI,EAAE;IAAES,IAAI,EAAE;EAAS,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC,CAACC,4BAA4B,CAAC,CAAC;EAChFC,UAAU,EAAEZ,MAAM,CAAC,YAAY,EAAE;IAAES,IAAI,EAAE;EAAS,CAAC,CAAC,CAACI,UAAU,CAAC,MAAM;IAAA;IAAAhB,cAAA,GAAAiB,CAAA;IAAAjB,cAAA,GAAAU,CAAA;IAAA,OAAAF,QAAQ,CAACG,EAAE;EAAD,CAAC,CAAC,CAACO,OAAO,CAAC,CAAC;EAE5F;EACAC,YAAY,EAAEf,OAAO,CAAC,cAAc,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC,CAACC,OAAO,CAAC,SAAS,CAAC,CAACH,OAAO,CAAC,CAAC;EAAE;;EAEpF;EACAI,cAAc,EAAElB,OAAO,CAAC,gBAAgB,EAAE;IAAEgB,MAAM,EAAE;EAAI,CAAC,CAAC,CAACF,OAAO,CAAC,CAAC;EACpEK,cAAc,EAAEnB,OAAO,CAAC,gBAAgB,EAAE;IAAEgB,MAAM,EAAE;EAAI,CAAC,CAAC;EAC1DI,IAAI,EAAEpB,OAAO,CAAC,MAAM,EAAE;IAAEgB,MAAM,EAAE;EAAI,CAAC,CAAC,CAACF,OAAO,CAAC,CAAC;EAChDO,KAAK,EAAErB,OAAO,CAAC,OAAO,EAAE;IAAEgB,MAAM,EAAE;EAAE,CAAC,CAAC,CAACF,OAAO,CAAC,CAAC;EAAE;EAClDQ,QAAQ,EAAEtB,OAAO,CAAC,UAAU,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC,CAACF,OAAO,CAAC,CAAC;EAAE;EACzDS,MAAM,EAAEvB,OAAO,CAAC,QAAQ,EAAE;IAAEgB,MAAM,EAAE;EAAI,CAAC,CAAC;EAAE;;EAE5C;EACAQ,SAAS,EAAExB,OAAO,CAAC,WAAW,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC;EAAE;EACjDS,QAAQ,EAAEzB,OAAO,CAAC,UAAU,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC;EAC7CU,SAAS,EAAE1B,OAAO,CAAC,WAAW,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC;EAE/C;EACAW,YAAY,EAAE3B,OAAO,CAAC,cAAc,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC;EAAE;EACvDY,eAAe,EAAE5B,OAAO,CAAC,iBAAiB,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC;EAE3D;EACAa,UAAU,EAAE3B,OAAO,CAAC,YAAY,CAAC,CAACe,OAAO,CAAC,KAAK,CAAC;EAAE;EAClDa,WAAW,EAAE5B,OAAO,CAAC,aAAa,CAAC,CAACe,OAAO,CAAC,KAAK,CAAC;EAAE;EACpDc,SAAS,EAAE7B,OAAO,CAAC,WAAW,CAAC,CAACe,OAAO,CAAC,IAAI,CAAC;EAAE;;EAE/C;EACAe,cAAc,EAAE/B,SAAS,CAAC,gBAAgB,CAAC;EAC3CgC,YAAY,EAAEhC,SAAS,CAAC,cAAc,CAAC;EAEvC;EACAiC,KAAK,EAAElC,OAAO,CAAC,OAAO,EAAE;IAAEgB,MAAM,EAAE;EAAI,CAAC,CAAC;EAExC;EACAmB,UAAU,EAAElC,SAAS,CAAC,YAAY,CAAC;EAAE;EACrCmC,SAAS,EAAEnC,SAAS,CAAC,YAAY,CAAC,CAACoC,UAAU,CAAC,CAAC,CAACvB,OAAO,CAAC,CAAC;EACzDwB,SAAS,EAAErC,SAAS,CAAC,YAAY,CAAC,CAACoC,UAAU,CAAC,CAAC,CAACvB,OAAO,CAAC;AAC1D,CAAC,EAAGyB,KAAK,IAAM;EAAA;EAAA3C,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAU,CAAA;EAAA;IACb;IACAkC,UAAU,EAAErC,KAAK,CAAC,kCAAkC,CAAC,CAACsC,EAAE,CAACF,KAAK,CAAC5B,UAAU,CAAC;IAC1E+B,OAAO,EAAEvC,KAAK,CAAC,4BAA4B,CAAC,CAACsC,EAAE,CAACF,KAAK,CAACxB,YAAY,CAAC;IACnE4B,UAAU,EAAExC,KAAK,CAAC,gCAAgC,CAAC,CAACsC,EAAE,CAACF,KAAK,CAACjB,QAAQ,CAAC;IACtEsB,QAAQ,EAAEzC,KAAK,CAAC,6BAA6B,CAAC,CAACsC,EAAE,CAACF,KAAK,CAAClB,KAAK,CAAC;IAC9DwB,OAAO,EAAE1C,KAAK,CAAC,iCAAiC,CAAC,CAACsC,EAAE,CAACF,KAAK,CAACf,SAAS,CAAC;IAErE;IACAsB,cAAc,EAAE3C,KAAK,CAAC,oCAAoC,CAAC,CACxDsC,EAAE,CAACF,KAAK,CAAC5B,UAAU,EAAE4B,KAAK,CAACxB,YAAY,CAAC;IAC3CgC,gBAAgB,EAAE5C,KAAK,CAAC,sCAAsC,CAAC,CAC5DsC,EAAE,CAACF,KAAK,CAAC5B,UAAU,EAAE4B,KAAK,CAACR,SAAS;EACzC,CAAC;AAAD,CAAE,CAAC;;AAEH;AACA,OAAO,MAAMiB,OAAO;AAAA;AAAA,CAAApD,cAAA,GAAAU,CAAA,OAAGD,gBAAgB","ignoreList":[]}