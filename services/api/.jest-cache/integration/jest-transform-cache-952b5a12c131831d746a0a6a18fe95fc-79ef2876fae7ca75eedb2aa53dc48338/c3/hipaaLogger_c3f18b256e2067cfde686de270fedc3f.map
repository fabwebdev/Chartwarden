{"version":3,"names":["cov_2hyl9o93rk","actualCoverage","logger","phiRedactionService","PHI_FIELD_PATTERNS","s","SAFE_FIELDS","isPHIField","fieldName","f","b","lowerField","toLowerCase","some","pattern","includes","isSafeField","deepRedactPHI","data","depth","undefined","redactPatterns","Array","isArray","map","item","result","key","value","Object","entries","safeRedact","createSafeLogEntry","message","timestamp","Date","toISOString","hipaaLogger","info","safe","warn","error","Error","errorMessage","errorCode","code","process","env","NODE_ENV","stack","debug","request","context","method","path","url","split","userId","user","id","ip","response","statusCode","duration","dbOperation","operation","table","recordId","security","event","details"],"sources":["hipaaLogger.js"],"sourcesContent":["/**\n * HIPAA-Compliant Logger Utility\n *\n * This logger automatically redacts PHI/PII from log messages before output.\n * Use this instead of console.log/console.error for any logging that might\n * contain patient data.\n *\n * HIPAA Reference: 45 CFR ยง164.312(b) - Audit Controls\n *\n * Usage:\n *   import { hipaaLogger } from '../utils/hipaaLogger.js';\n *\n *   // Instead of: console.log(\"Request body:\", request.body);\n *   // Use: hipaaLogger.info(\"Request received\", { context: \"PatientController\" });\n *\n *   // For debugging (development only):\n *   hipaaLogger.debug(\"Processing patient\", { patientId: patient.id });\n */\n\nimport { logger } from './logger.js';\nimport { phiRedactionService } from '../services/PHIRedactionService.js';\n\n/**\n * PHI field patterns that should trigger redaction\n */\nconst PHI_FIELD_PATTERNS = [\n  'ssn',\n  'social_security',\n  'medicare',\n  'medicaid',\n  'date_of_birth',\n  'dob',\n  'phone',\n  'email',\n  'address',\n  'first_name',\n  'last_name',\n  'name',\n  'mrn',\n  'medical_record',\n  'member_id',\n  'policy_number',\n  'bank',\n  'credit',\n  'password',\n  'token',\n  'secret',\n  'key',\n];\n\n/**\n * Safe fields that can be logged without redaction\n */\nconst SAFE_FIELDS = [\n  'id',\n  'action',\n  'method',\n  'path',\n  'statusCode',\n  'status',\n  'error_code',\n  'message',\n  'timestamp',\n  'duration',\n  'count',\n  'page',\n  'limit',\n  'offset',\n];\n\n/**\n * Checks if a field name suggests it contains PHI\n * @param {string} fieldName - The field name to check\n * @returns {boolean}\n */\nfunction isPHIField(fieldName) {\n  if (!fieldName) return false;\n  const lowerField = fieldName.toLowerCase();\n  return PHI_FIELD_PATTERNS.some(pattern => lowerField.includes(pattern));\n}\n\n/**\n * Checks if a field is safe to log\n * @param {string} fieldName - The field name to check\n * @returns {boolean}\n */\nfunction isSafeField(fieldName) {\n  if (!fieldName) return false;\n  const lowerField = fieldName.toLowerCase();\n  return SAFE_FIELDS.includes(lowerField);\n}\n\n/**\n * Deeply redacts PHI from an object, keeping only safe metadata\n * @param {*} data - Data to redact\n * @param {number} depth - Current recursion depth (to prevent infinite loops)\n * @returns {*} Redacted data\n */\nfunction deepRedactPHI(data, depth = 0) {\n  if (depth > 10) return '[MAX_DEPTH_REACHED]';\n\n  if (data === null || data === undefined) {\n    return data;\n  }\n\n  if (typeof data === 'string') {\n    // Redact common PHI patterns in strings\n    return phiRedactionService.redactPatterns(data);\n  }\n\n  if (typeof data === 'number' || typeof data === 'boolean') {\n    return data;\n  }\n\n  if (Array.isArray(data)) {\n    return data.map(item => deepRedactPHI(item, depth + 1));\n  }\n\n  if (typeof data === 'object') {\n    const result = {};\n    for (const [key, value] of Object.entries(data)) {\n      if (isPHIField(key)) {\n        // Redact PHI fields completely\n        result[key] = '[REDACTED]';\n      } else if (isSafeField(key)) {\n        // Safe fields can pass through\n        result[key] = value;\n      } else if (typeof value === 'object') {\n        // Recursively process nested objects\n        result[key] = deepRedactPHI(value, depth + 1);\n      } else {\n        // For other fields, use the PHI redaction service\n        result[key] = phiRedactionService.safeRedact(value);\n      }\n    }\n    return result;\n  }\n\n  return '[UNKNOWN_TYPE]';\n}\n\n/**\n * Creates a safe log message by redacting PHI\n * @param {string} message - Log message\n * @param {object} data - Additional data to log\n * @returns {object} Safe log entry\n */\nfunction createSafeLogEntry(message, data = {}) {\n  return {\n    message: phiRedactionService.redactPatterns(message),\n    data: deepRedactPHI(data),\n    timestamp: new Date().toISOString(),\n  };\n}\n\n/**\n * HIPAA-Compliant Logger\n *\n * All methods automatically redact PHI before logging.\n * Use this instead of console.log for any patient-related logging.\n */\nexport const hipaaLogger = {\n  /**\n   * Log informational message (production safe)\n   * @param {string} message - Log message\n   * @param {object} data - Additional safe metadata (will be redacted if PHI detected)\n   */\n  info(message, data = {}) {\n    const safe = createSafeLogEntry(message, data);\n    logger.info(safe.message, safe.data);\n  },\n\n  /**\n   * Log warning message (production safe)\n   * @param {string} message - Log message\n   * @param {object} data - Additional safe metadata (will be redacted if PHI detected)\n   */\n  warn(message, data = {}) {\n    const safe = createSafeLogEntry(message, data);\n    logger.warn(safe.message, safe.data);\n  },\n\n  /**\n   * Log error message (production safe)\n   * @param {string} message - Log message\n   * @param {object} data - Additional safe metadata (will be redacted if PHI detected)\n   */\n  error(message, data = {}) {\n    const safe = createSafeLogEntry(message, data);\n    // For errors, also include safe error details\n    if (data.error instanceof Error) {\n      safe.data.errorMessage = data.error.message;\n      safe.data.errorCode = data.error.code;\n      // Explicitly exclude stack trace in production\n      if (process.env.NODE_ENV === 'development') {\n        safe.data.stack = data.error.stack;\n      }\n    }\n    logger.error(safe.message, safe.data);\n  },\n\n  /**\n   * Log debug message (development only - disabled in production)\n   * @param {string} message - Log message\n   * @param {object} data - Additional safe metadata (will be redacted if PHI detected)\n   */\n  debug(message, data = {}) {\n    if (process.env.NODE_ENV === 'production') {\n      return; // Never log debug in production\n    }\n    const safe = createSafeLogEntry(message, data);\n    logger.debug?.(safe.message, safe.data) || logger.info(safe.message, safe.data);\n  },\n\n  /**\n   * Log API request (safe for production)\n   * Logs request metadata without body content\n   * @param {object} request - Fastify request object\n   * @param {string} context - Controller/route context\n   */\n  request(request, context = 'API') {\n    this.info(`${context} request`, {\n      method: request.method,\n      path: request.url?.split('?')[0], // Remove query params\n      userId: request.user?.id,\n      ip: request.ip,\n      // Explicitly do NOT log: body, headers, query params\n    });\n  },\n\n  /**\n   * Log API response (safe for production)\n   * @param {string} context - Controller/route context\n   * @param {number} statusCode - Response status code\n   * @param {number} duration - Request duration in ms\n   */\n  response(context, statusCode, duration = null) {\n    this.info(`${context} response`, {\n      statusCode,\n      duration: duration ? `${duration}ms` : undefined,\n    });\n  },\n\n  /**\n   * Log database operation (safe for production)\n   * @param {string} operation - Operation type (create, read, update, delete)\n   * @param {string} table - Table name\n   * @param {string|number} recordId - Record ID (safe to log)\n   */\n  dbOperation(operation, table, recordId = null) {\n    this.info(`Database ${operation}`, {\n      table,\n      recordId,\n    });\n  },\n\n  /**\n   * Log security event (always logged, safe for production)\n   * @param {string} event - Security event type\n   * @param {object} details - Safe event details\n   */\n  security(event, details = {}) {\n    const safe = createSafeLogEntry(`SECURITY: ${event}`, details);\n    logger.warn(safe.message, safe.data);\n  },\n};\n\nexport default hipaaLogger;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}