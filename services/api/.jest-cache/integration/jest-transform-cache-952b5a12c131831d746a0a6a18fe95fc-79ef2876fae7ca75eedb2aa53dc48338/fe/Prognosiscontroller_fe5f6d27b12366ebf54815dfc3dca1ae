f9716630f34c244c88dca815752ab95f
/* istanbul ignore next */
function cov_z4tvlhw66() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/Prognosis.controller.js";
  var hash = "c59af5daf4fb913b0218942a93d7180c4e22461b";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/Prognosis.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 12,
          column: 8
        },
        end: {
          line: 32,
          column: 9
        }
      },
      "1": {
        start: {
          line: 13,
          column: 30
        },
        end: {
          line: 22,
          column: 30
        }
      },
      "2": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 23,
          column: 28
        }
      },
      "3": {
        start: {
          line: 24,
          column: 12
        },
        end: {
          line: 24,
          column: 29
        }
      },
      "4": {
        start: {
          line: 26,
          column: 12
        },
        end: {
          line: 26,
          column: 60
        }
      },
      "5": {
        start: {
          line: 27,
          column: 12
        },
        end: {
          line: 27,
          column: 28
        }
      },
      "6": {
        start: {
          line: 28,
          column: 12
        },
        end: {
          line: 31,
          column: 14
        }
      },
      "7": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 131,
          column: 9
        }
      },
      "8": {
        start: {
          line: 44,
          column: 16
        },
        end: {
          line: 44,
          column: 28
        }
      },
      "9": {
        start: {
          line: 47,
          column: 12
        },
        end: {
          line: 52,
          column: 13
        }
      },
      "10": {
        start: {
          line: 48,
          column: 16
        },
        end: {
          line: 48,
          column: 32
        }
      },
      "11": {
        start: {
          line: 49,
          column: 16
        },
        end: {
          line: 51,
          column: 18
        }
      },
      "12": {
        start: {
          line: 55,
          column: 33
        },
        end: {
          line: 55,
          column: 99
        }
      },
      "13": {
        start: {
          line: 56,
          column: 12
        },
        end: {
          line: 61,
          column: 13
        }
      },
      "14": {
        start: {
          line: 57,
          column: 16
        },
        end: {
          line: 57,
          column: 32
        }
      },
      "15": {
        start: {
          line: 58,
          column: 16
        },
        end: {
          line: 60,
          column: 18
        }
      },
      "16": {
        start: {
          line: 64,
          column: 38
        },
        end: {
          line: 66,
          column: 85
        }
      },
      "17": {
        start: {
          line: 67,
          column: 38
        },
        end: {
          line: 67,
          column: 58
        }
      },
      "18": {
        start: {
          line: 70,
          column: 45
        },
        end: {
          line: 72,
          column: 38
        }
      },
      "19": {
        start: {
          line: 74,
          column: 47
        },
        end: {
          line: 78,
          column: 40
        }
      },
      "20": {
        start: {
          line: 80,
          column: 47
        },
        end: {
          line: 84,
          column: 40
        }
      },
      "21": {
        start: {
          line: 87,
          column: 24
        },
        end: {
          line: 87,
          column: 34
        }
      },
      "22": {
        start: {
          line: 89,
          column: 12
        },
        end: {
          line: 117,
          column: 13
        }
      },
      "23": {
        start: {
          line: 91,
          column: 16
        },
        end: {
          line: 101,
          column: 33
        }
      },
      "24": {
        start: {
          line: 102,
          column: 16
        },
        end: {
          line: 102,
          column: 35
        }
      },
      "25": {
        start: {
          line: 105,
          column: 16
        },
        end: {
          line: 115,
          column: 33
        }
      },
      "26": {
        start: {
          line: 116,
          column: 16
        },
        end: {
          line: 116,
          column: 35
        }
      },
      "27": {
        start: {
          line: 119,
          column: 12
        },
        end: {
          line: 119,
          column: 28
        }
      },
      "28": {
        start: {
          line: 120,
          column: 12
        },
        end: {
          line: 123,
          column: 14
        }
      },
      "29": {
        start: {
          line: 125,
          column: 12
        },
        end: {
          line: 125,
          column: 58
        }
      },
      "30": {
        start: {
          line: 126,
          column: 12
        },
        end: {
          line: 126,
          column: 28
        }
      },
      "31": {
        start: {
          line: 127,
          column: 12
        },
        end: {
          line: 130,
          column: 14
        }
      },
      "32": {
        start: {
          line: 137,
          column: 8
        },
        end: {
          line: 184,
          column: 9
        }
      },
      "33": {
        start: {
          line: 138,
          column: 27
        },
        end: {
          line: 138,
          column: 41
        }
      },
      "34": {
        start: {
          line: 139,
          column: 30
        },
        end: {
          line: 139,
          column: 42
        }
      },
      "35": {
        start: {
          line: 141,
          column: 12
        },
        end: {
          line: 146,
          column: 13
        }
      },
      "36": {
        start: {
          line: 142,
          column: 16
        },
        end: {
          line: 142,
          column: 32
        }
      },
      "37": {
        start: {
          line: 143,
          column: 16
        },
        end: {
          line: 145,
          column: 18
        }
      },
      "38": {
        start: {
          line: 148,
          column: 37
        },
        end: {
          line: 157,
          column: 82
        }
      },
      "39": {
        start: {
          line: 158,
          column: 36
        },
        end: {
          line: 158,
          column: 55
        }
      },
      "40": {
        start: {
          line: 160,
          column: 12
        },
        end: {
          line: 173,
          column: 13
        }
      },
      "41": {
        start: {
          line: 162,
          column: 16
        },
        end: {
          line: 162,
          column: 32
        }
      },
      "42": {
        start: {
          line: 163,
          column: 16
        },
        end: {
          line: 172,
          column: 18
        }
      },
      "43": {
        start: {
          line: 175,
          column: 12
        },
        end: {
          line: 175,
          column: 28
        }
      },
      "44": {
        start: {
          line: 176,
          column: 12
        },
        end: {
          line: 176,
          column: 35
        }
      },
      "45": {
        start: {
          line: 178,
          column: 12
        },
        end: {
          line: 178,
          column: 60
        }
      },
      "46": {
        start: {
          line: 179,
          column: 12
        },
        end: {
          line: 179,
          column: 28
        }
      },
      "47": {
        start: {
          line: 180,
          column: 12
        },
        end: {
          line: 183,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 11,
            column: 4
          },
          end: {
            line: 11,
            column: 5
          }
        },
        loc: {
          start: {
            line: 11,
            column: 32
          },
          end: {
            line: 33,
            column: 5
          }
        },
        line: 11
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 36,
            column: 4
          },
          end: {
            line: 36,
            column: 5
          }
        },
        loc: {
          start: {
            line: 36,
            column: 32
          },
          end: {
            line: 132,
            column: 5
          }
        },
        line: 36
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 136,
            column: 4
          },
          end: {
            line: 136,
            column: 5
          }
        },
        loc: {
          start: {
            line: 136,
            column: 31
          },
          end: {
            line: 185,
            column: 5
          }
        },
        line: 136
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 47,
            column: 12
          },
          end: {
            line: 52,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 47,
            column: 12
          },
          end: {
            line: 52,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 47
      },
      "1": {
        loc: {
          start: {
            line: 55,
            column: 33
          },
          end: {
            line: 55,
            column: 99
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 55,
            column: 66
          },
          end: {
            line: 55,
            column: 86
          }
        }, {
          start: {
            line: 55,
            column: 89
          },
          end: {
            line: 55,
            column: 99
          }
        }],
        line: 55
      },
      "2": {
        loc: {
          start: {
            line: 56,
            column: 12
          },
          end: {
            line: 61,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 56,
            column: 12
          },
          end: {
            line: 61,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 56
      },
      "3": {
        loc: {
          start: {
            line: 70,
            column: 45
          },
          end: {
            line: 72,
            column: 38
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 71,
            column: 18
          },
          end: {
            line: 71,
            column: 48
          }
        }, {
          start: {
            line: 72,
            column: 18
          },
          end: {
            line: 72,
            column: 38
          }
        }],
        line: 70
      },
      "4": {
        loc: {
          start: {
            line: 74,
            column: 47
          },
          end: {
            line: 78,
            column: 40
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 77,
            column: 18
          },
          end: {
            line: 77,
            column: 50
          }
        }, {
          start: {
            line: 78,
            column: 18
          },
          end: {
            line: 78,
            column: 40
          }
        }],
        line: 74
      },
      "5": {
        loc: {
          start: {
            line: 80,
            column: 47
          },
          end: {
            line: 84,
            column: 40
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 83,
            column: 18
          },
          end: {
            line: 83,
            column: 50
          }
        }, {
          start: {
            line: 84,
            column: 18
          },
          end: {
            line: 84,
            column: 40
          }
        }],
        line: 80
      },
      "6": {
        loc: {
          start: {
            line: 89,
            column: 12
          },
          end: {
            line: 117,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 89,
            column: 12
          },
          end: {
            line: 117,
            column: 13
          }
        }, {
          start: {
            line: 103,
            column: 19
          },
          end: {
            line: 117,
            column: 13
          }
        }],
        line: 89
      },
      "7": {
        loc: {
          start: {
            line: 94,
            column: 55
          },
          end: {
            line: 94,
            column: 92
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 94,
            column: 55
          },
          end: {
            line: 94,
            column: 84
          }
        }, {
          start: {
            line: 94,
            column: 88
          },
          end: {
            line: 94,
            column: 92
          }
        }],
        line: 94
      },
      "8": {
        loc: {
          start: {
            line: 95,
            column: 46
          },
          end: {
            line: 95,
            column: 78
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 95,
            column: 46
          },
          end: {
            line: 95,
            column: 70
          }
        }, {
          start: {
            line: 95,
            column: 74
          },
          end: {
            line: 95,
            column: 78
          }
        }],
        line: 95
      },
      "9": {
        loc: {
          start: {
            line: 96,
            column: 48
          },
          end: {
            line: 96,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 96,
            column: 48
          },
          end: {
            line: 96,
            column: 74
          }
        }, {
          start: {
            line: 96,
            column: 78
          },
          end: {
            line: 96,
            column: 82
          }
        }],
        line: 96
      },
      "10": {
        loc: {
          start: {
            line: 97,
            column: 48
          },
          end: {
            line: 97,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 97,
            column: 48
          },
          end: {
            line: 97,
            column: 74
          }
        }, {
          start: {
            line: 97,
            column: 78
          },
          end: {
            line: 97,
            column: 82
          }
        }],
        line: 97
      },
      "11": {
        loc: {
          start: {
            line: 108,
            column: 55
          },
          end: {
            line: 108,
            column: 92
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 108,
            column: 55
          },
          end: {
            line: 108,
            column: 84
          }
        }, {
          start: {
            line: 108,
            column: 88
          },
          end: {
            line: 108,
            column: 92
          }
        }],
        line: 108
      },
      "12": {
        loc: {
          start: {
            line: 109,
            column: 46
          },
          end: {
            line: 109,
            column: 78
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 109,
            column: 46
          },
          end: {
            line: 109,
            column: 70
          }
        }, {
          start: {
            line: 109,
            column: 74
          },
          end: {
            line: 109,
            column: 78
          }
        }],
        line: 109
      },
      "13": {
        loc: {
          start: {
            line: 110,
            column: 48
          },
          end: {
            line: 110,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 110,
            column: 48
          },
          end: {
            line: 110,
            column: 74
          }
        }, {
          start: {
            line: 110,
            column: 78
          },
          end: {
            line: 110,
            column: 82
          }
        }],
        line: 110
      },
      "14": {
        loc: {
          start: {
            line: 111,
            column: 48
          },
          end: {
            line: 111,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 111,
            column: 48
          },
          end: {
            line: 111,
            column: 74
          }
        }, {
          start: {
            line: 111,
            column: 78
          },
          end: {
            line: 111,
            column: 82
          }
        }],
        line: 111
      },
      "15": {
        loc: {
          start: {
            line: 141,
            column: 12
          },
          end: {
            line: 146,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 141,
            column: 12
          },
          end: {
            line: 146,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 141
      },
      "16": {
        loc: {
          start: {
            line: 160,
            column: 12
          },
          end: {
            line: 173,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 160,
            column: 12
          },
          end: {
            line: 173,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 160
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c59af5daf4fb913b0218942a93d7180c4e22461b"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_z4tvlhw66 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_z4tvlhw66();
import { db } from "../../config/db.drizzle.js";
import { prognosis } from "../../db/schemas/prognosis.schema.js";
import { prognosis_patient } from "../../db/schemas/prognosisPatient.schema.js";
import { prognosis_caregiver } from "../../db/schemas/prognosisCaregiver.schema.js";
import { prognosis_imminence_of_death } from "../../db/schemas/prognosisImminence.schema.js";
import { eq } from "drizzle-orm";
import { logger } from '../../utils/logger.js';
class PrognosisController {
  // Get all prognoses
  async index(request, reply) {
    /* istanbul ignore next */
    cov_z4tvlhw66().f[0]++;
    cov_z4tvlhw66().s[0]++;
    try {
      const prognoses =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[1]++, await db.select({
        id: prognosis.id,
        patient_id: prognosis.patient_id,
        prognosis_patient_is_imminent: prognosis.prognosis_patient_is_imminent,
        prognosis_patient_id: prognosis.prognosis_patient_id,
        prognosis_caregiver_id: prognosis.prognosis_caregiver_id,
        prognosis_imminence_id: prognosis.prognosis_imminence_id,
        createdAt: prognosis.createdAt,
        updatedAt: prognosis.updatedAt
      }).from(prognosis));
      /* istanbul ignore next */
      cov_z4tvlhw66().s[2]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[3]++;
      return prognoses;
    } catch (error) {
      /* istanbul ignore next */
      cov_z4tvlhw66().s[4]++;
      logger.error("Error fetching prognoses:", error);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[5]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[6]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Store or update prognosis
  async store(request, reply) {
    /* istanbul ignore next */
    cov_z4tvlhw66().f[1]++;
    cov_z4tvlhw66().s[7]++;
    try {
      const {
        patient_id,
        prognosis_patient_is_imminent,
        prognosis_patient_id,
        prognosis_caregiver_id,
        prognosis_imminence_id
      } =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[8]++, request.body);

      // Validate required fields
      /* istanbul ignore next */
      cov_z4tvlhw66().s[9]++;
      if (!patient_id) {
        /* istanbul ignore next */
        cov_z4tvlhw66().b[0][0]++;
        cov_z4tvlhw66().s[10]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_z4tvlhw66().s[11]++;
        return {
          message: "Patient ID is required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_z4tvlhw66().b[0][1]++;
      }

      // Convert patient_id to number
      const patientIdNum =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[12]++, typeof patient_id === 'string' ?
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[1][0]++, parseInt(patient_id)) :
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[1][1]++, patient_id));
      /* istanbul ignore next */
      cov_z4tvlhw66().s[13]++;
      if (isNaN(patientIdNum)) {
        /* istanbul ignore next */
        cov_z4tvlhw66().b[2][0]++;
        cov_z4tvlhw66().s[14]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_z4tvlhw66().s[15]++;
        return {
          message: "Invalid patient ID"
        };
      } else
      /* istanbul ignore next */
      {
        cov_z4tvlhw66().b[2][1]++;
      }

      // Check if prognosis already exists for this patient
      const existingPrognoses =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[16]++, await db.select({
        id: prognosis.id
      }).from(prognosis).where(eq(prognosis.patient_id, patientIdNum)).limit(1));
      const existingPrognosis =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[17]++, existingPrognoses[0]);

      // Convert arrays to comma-separated strings if they are arrays
      const prognosisPatientIdString =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[18]++, Array.isArray(prognosis_patient_id) ?
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[3][0]++, prognosis_patient_id.join(",")) :
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[3][1]++, prognosis_patient_id));
      const prognosisCaregiverIdString =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[19]++, Array.isArray(prognosis_caregiver_id) ?
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[4][0]++, prognosis_caregiver_id.join(",")) :
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[4][1]++, prognosis_caregiver_id));
      const prognosisImminenceIdString =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[20]++, Array.isArray(prognosis_imminence_id) ?
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[5][0]++, prognosis_imminence_id.join(",")) :
      /* istanbul ignore next */
      (cov_z4tvlhw66().b[5][1]++, prognosis_imminence_id));
      let result;
      const now =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[21]++, new Date());
      /* istanbul ignore next */
      cov_z4tvlhw66().s[22]++;
      if (existingPrognosis) {
        /* istanbul ignore next */
        cov_z4tvlhw66().b[6][0]++;
        cov_z4tvlhw66().s[23]++;
        // Update existing prognosis
        result = await db.update(prognosis).set({
          patient_id: patientIdNum,
          prognosis_patient_is_imminent:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[7][0]++, prognosis_patient_is_imminent) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[7][1]++, null),
          prognosis_patient_id:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[8][0]++, prognosisPatientIdString) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[8][1]++, null),
          prognosis_caregiver_id:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[9][0]++, prognosisCaregiverIdString) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[9][1]++, null),
          prognosis_imminence_id:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[10][0]++, prognosisImminenceIdString) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[10][1]++, null),
          updatedAt: now
        }).where(eq(prognosis.patient_id, patientIdNum)).returning();
        /* istanbul ignore next */
        cov_z4tvlhw66().s[24]++;
        result = result[0];
      } else {
        /* istanbul ignore next */
        cov_z4tvlhw66().b[6][1]++;
        cov_z4tvlhw66().s[25]++;
        // Create new prognosis
        result = await db.insert(prognosis).values({
          patient_id: patientIdNum,
          prognosis_patient_is_imminent:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[11][0]++, prognosis_patient_is_imminent) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[11][1]++, null),
          prognosis_patient_id:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[12][0]++, prognosisPatientIdString) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[12][1]++, null),
          prognosis_caregiver_id:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[13][0]++, prognosisCaregiverIdString) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[13][1]++, null),
          prognosis_imminence_id:
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[14][0]++, prognosisImminenceIdString) ||
          /* istanbul ignore next */
          (cov_z4tvlhw66().b[14][1]++, null),
          createdAt: now,
          updatedAt: now
        }).returning();
        /* istanbul ignore next */
        cov_z4tvlhw66().s[26]++;
        result = result[0];
      }
      /* istanbul ignore next */
      cov_z4tvlhw66().s[27]++;
      reply.code(201);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[28]++;
      return {
        message: "Prognosis créé ou mis à jour avec succès.",
        data: result
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_z4tvlhw66().s[29]++;
      logger.error("Error saving prognosis:", error);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[30]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[31]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Show prognosis for a specific patient
  // Returns empty data if no prognosis exists (to allow frontend to render form)
  async show(request, reply) {
    /* istanbul ignore next */
    cov_z4tvlhw66().f[2]++;
    cov_z4tvlhw66().s[32]++;
    try {
      const {
        id
      } =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[33]++, request.params);
      const patientId =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[34]++, parseInt(id));
      /* istanbul ignore next */
      cov_z4tvlhw66().s[35]++;
      if (isNaN(patientId)) {
        /* istanbul ignore next */
        cov_z4tvlhw66().b[15][0]++;
        cov_z4tvlhw66().s[36]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_z4tvlhw66().s[37]++;
        return {
          error: "Invalid patient ID"
        };
      } else
      /* istanbul ignore next */
      {
        cov_z4tvlhw66().b[15][1]++;
      }
      const prognosisRecords =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[38]++, await db.select({
        id: prognosis.id,
        patient_id: prognosis.patient_id,
        prognosis_patient_is_imminent: prognosis.prognosis_patient_is_imminent,
        prognosis_patient_id: prognosis.prognosis_patient_id,
        prognosis_caregiver_id: prognosis.prognosis_caregiver_id,
        prognosis_imminence_id: prognosis.prognosis_imminence_id,
        createdAt: prognosis.createdAt,
        updatedAt: prognosis.updatedAt
      }).from(prognosis).where(eq(prognosis.patient_id, patientId)).limit(1));
      const prognosisRecord =
      /* istanbul ignore next */
      (cov_z4tvlhw66().s[39]++, prognosisRecords[0]);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[40]++;
      if (!prognosisRecord) {
        /* istanbul ignore next */
        cov_z4tvlhw66().b[16][0]++;
        cov_z4tvlhw66().s[41]++;
        // Return 200 with empty data instead of 404, so frontend can render form
        reply.code(200);
        /* istanbul ignore next */
        cov_z4tvlhw66().s[42]++;
        return {
          id: null,
          patient_id: parseInt(id),
          prognosis_patient_is_imminent: null,
          prognosis_patient_id: null,
          prognosis_caregiver_id: null,
          prognosis_imminence_id: null,
          createdAt: null,
          updatedAt: null
        };
      } else
      /* istanbul ignore next */
      {
        cov_z4tvlhw66().b[16][1]++;
      }
      cov_z4tvlhw66().s[43]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[44]++;
      return prognosisRecord;
    } catch (error) {
      /* istanbul ignore next */
      cov_z4tvlhw66().s[45]++;
      logger.error("Error fetching prognosis:", error);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[46]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_z4tvlhw66().s[47]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }
}
export default new PrognosisController();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfejR0dmxodzY2IiwiYWN0dWFsQ292ZXJhZ2UiLCJkYiIsInByb2dub3NpcyIsInByb2dub3Npc19wYXRpZW50IiwicHJvZ25vc2lzX2NhcmVnaXZlciIsInByb2dub3Npc19pbW1pbmVuY2Vfb2ZfZGVhdGgiLCJlcSIsImxvZ2dlciIsIlByb2dub3Npc0NvbnRyb2xsZXIiLCJpbmRleCIsInJlcXVlc3QiLCJyZXBseSIsImYiLCJzIiwicHJvZ25vc2VzIiwic2VsZWN0IiwiaWQiLCJwYXRpZW50X2lkIiwicHJvZ25vc2lzX3BhdGllbnRfaXNfaW1taW5lbnQiLCJwcm9nbm9zaXNfcGF0aWVudF9pZCIsInByb2dub3Npc19jYXJlZ2l2ZXJfaWQiLCJwcm9nbm9zaXNfaW1taW5lbmNlX2lkIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiZnJvbSIsImNvZGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdG9yZSIsImJvZHkiLCJiIiwicGF0aWVudElkTnVtIiwicGFyc2VJbnQiLCJpc05hTiIsImV4aXN0aW5nUHJvZ25vc2VzIiwid2hlcmUiLCJsaW1pdCIsImV4aXN0aW5nUHJvZ25vc2lzIiwicHJvZ25vc2lzUGF0aWVudElkU3RyaW5nIiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsInByb2dub3Npc0NhcmVnaXZlcklkU3RyaW5nIiwicHJvZ25vc2lzSW1taW5lbmNlSWRTdHJpbmciLCJyZXN1bHQiLCJub3ciLCJEYXRlIiwidXBkYXRlIiwic2V0IiwicmV0dXJuaW5nIiwiaW5zZXJ0IiwidmFsdWVzIiwiZGF0YSIsInNob3ciLCJwYXJhbXMiLCJwYXRpZW50SWQiLCJwcm9nbm9zaXNSZWNvcmRzIiwicHJvZ25vc2lzUmVjb3JkIl0sInNvdXJjZXMiOlsiUHJvZ25vc2lzLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2RiLmRyaXp6bGUuanNcIjtcbmltcG9ydCB7IHByb2dub3NpcyB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWFzL3Byb2dub3Npcy5zY2hlbWEuanNcIjtcbmltcG9ydCB7IHByb2dub3Npc19wYXRpZW50IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvcHJvZ25vc2lzUGF0aWVudC5zY2hlbWEuanNcIjtcbmltcG9ydCB7IHByb2dub3Npc19jYXJlZ2l2ZXIgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hcy9wcm9nbm9zaXNDYXJlZ2l2ZXIuc2NoZW1hLmpzXCI7XG5pbXBvcnQgeyBwcm9nbm9zaXNfaW1taW5lbmNlX29mX2RlYXRoIH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvcHJvZ25vc2lzSW1taW5lbmNlLnNjaGVtYS5qc1wiO1xuaW1wb3J0IHsgZXEgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyLmpzJztcbmNsYXNzIFByb2dub3Npc0NvbnRyb2xsZXIge1xuICAgIC8vIEdldCBhbGwgcHJvZ25vc2VzXG4gICAgYXN5bmMgaW5kZXgocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2dub3NlcyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgaWQ6IHByb2dub3Npcy5pZCxcbiAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBwcm9nbm9zaXMucGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICBwcm9nbm9zaXNfcGF0aWVudF9pc19pbW1pbmVudDogcHJvZ25vc2lzLnByb2dub3Npc19wYXRpZW50X2lzX2ltbWluZW50LFxuICAgICAgICAgICAgICAgIHByb2dub3Npc19wYXRpZW50X2lkOiBwcm9nbm9zaXMucHJvZ25vc2lzX3BhdGllbnRfaWQsXG4gICAgICAgICAgICAgICAgcHJvZ25vc2lzX2NhcmVnaXZlcl9pZDogcHJvZ25vc2lzLnByb2dub3Npc19jYXJlZ2l2ZXJfaWQsXG4gICAgICAgICAgICAgICAgcHJvZ25vc2lzX2ltbWluZW5jZV9pZDogcHJvZ25vc2lzLnByb2dub3Npc19pbW1pbmVuY2VfaWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBwcm9nbm9zaXMuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogcHJvZ25vc2lzLnVwZGF0ZWRBdFxuICAgICAgICAgICAgfSkuZnJvbShwcm9nbm9zaXMpO1xuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIHByb2dub3NlcztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2dub3NlczpcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgb3IgdXBkYXRlIHByb2dub3Npc1xuICAgIGFzeW5jIHN0b3JlKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgcGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICBwcm9nbm9zaXNfcGF0aWVudF9pc19pbW1pbmVudCxcbiAgICAgICAgICAgICAgICBwcm9nbm9zaXNfcGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICBwcm9nbm9zaXNfY2FyZWdpdmVyX2lkLFxuICAgICAgICAgICAgICAgIHByb2dub3Npc19pbW1pbmVuY2VfaWQsXG4gICAgICAgICAgICB9ID0gcmVxdWVzdC5ib2R5O1xuXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICAgICAgICAgIGlmICghcGF0aWVudF9pZCkge1xuICAgICAgICAgICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlBhdGllbnQgSUQgaXMgcmVxdWlyZWRcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHBhdGllbnRfaWQgdG8gbnVtYmVyXG4gICAgICAgICAgICBjb25zdCBwYXRpZW50SWROdW0gPSB0eXBlb2YgcGF0aWVudF9pZCA9PT0gJ3N0cmluZycgPyBwYXJzZUludChwYXRpZW50X2lkKSA6IHBhdGllbnRfaWQ7XG4gICAgICAgICAgICBpZiAoaXNOYU4ocGF0aWVudElkTnVtKSkge1xuICAgICAgICAgICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcGF0aWVudCBJRFwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHByb2dub3NpcyBhbHJlYWR5IGV4aXN0cyBmb3IgdGhpcyBwYXRpZW50XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1Byb2dub3NlcyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgaWQ6IHByb2dub3Npcy5pZFxuICAgICAgICAgICAgfSkuZnJvbShwcm9nbm9zaXMpLndoZXJlKGVxKHByb2dub3Npcy5wYXRpZW50X2lkLCBwYXRpZW50SWROdW0pKS5saW1pdCgxKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUHJvZ25vc2lzID0gZXhpc3RpbmdQcm9nbm9zZXNbMF07XG5cbiAgICAgICAgICAgIC8vIENvbnZlcnQgYXJyYXlzIHRvIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdzIGlmIHRoZXkgYXJlIGFycmF5c1xuICAgICAgICAgICAgY29uc3QgcHJvZ25vc2lzUGF0aWVudElkU3RyaW5nID0gQXJyYXkuaXNBcnJheShwcm9nbm9zaXNfcGF0aWVudF9pZClcbiAgICAgICAgICAgICAgICA/IHByb2dub3Npc19wYXRpZW50X2lkLmpvaW4oXCIsXCIpXG4gICAgICAgICAgICAgICAgOiBwcm9nbm9zaXNfcGF0aWVudF9pZDtcblxuICAgICAgICAgICAgY29uc3QgcHJvZ25vc2lzQ2FyZWdpdmVySWRTdHJpbmcgPSBBcnJheS5pc0FycmF5KFxuICAgICAgICAgICAgICAgIHByb2dub3Npc19jYXJlZ2l2ZXJfaWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICA/IHByb2dub3Npc19jYXJlZ2l2ZXJfaWQuam9pbihcIixcIilcbiAgICAgICAgICAgICAgICA6IHByb2dub3Npc19jYXJlZ2l2ZXJfaWQ7XG5cbiAgICAgICAgICAgIGNvbnN0IHByb2dub3Npc0ltbWluZW5jZUlkU3RyaW5nID0gQXJyYXkuaXNBcnJheShcbiAgICAgICAgICAgICAgICBwcm9nbm9zaXNfaW1taW5lbmNlX2lkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgPyBwcm9nbm9zaXNfaW1taW5lbmNlX2lkLmpvaW4oXCIsXCIpXG4gICAgICAgICAgICAgICAgOiBwcm9nbm9zaXNfaW1taW5lbmNlX2lkO1xuXG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nUHJvZ25vc2lzKSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHByb2dub3Npc1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLnVwZGF0ZShwcm9nbm9zaXMpXG4gICAgICAgICAgICAgICAgICAgIC5zZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudF9pZDogcGF0aWVudElkTnVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ25vc2lzX3BhdGllbnRfaXNfaW1taW5lbnQ6IHByb2dub3Npc19wYXRpZW50X2lzX2ltbWluZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9nbm9zaXNfcGF0aWVudF9pZDogcHJvZ25vc2lzUGF0aWVudElkU3RyaW5nIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9nbm9zaXNfY2FyZWdpdmVyX2lkOiBwcm9nbm9zaXNDYXJlZ2l2ZXJJZFN0cmluZyB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ25vc2lzX2ltbWluZW5jZV9pZDogcHJvZ25vc2lzSW1taW5lbmNlSWRTdHJpbmcgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbm93LFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAud2hlcmUoZXEocHJvZ25vc2lzLnBhdGllbnRfaWQsIHBhdGllbnRJZE51bSkpXG4gICAgICAgICAgICAgICAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgcHJvZ25vc2lzXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGIuaW5zZXJ0KHByb2dub3NpcylcbiAgICAgICAgICAgICAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBwYXRpZW50SWROdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9nbm9zaXNfcGF0aWVudF9pc19pbW1pbmVudDogcHJvZ25vc2lzX3BhdGllbnRfaXNfaW1taW5lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dub3Npc19wYXRpZW50X2lkOiBwcm9nbm9zaXNQYXRpZW50SWRTdHJpbmcgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dub3Npc19jYXJlZ2l2ZXJfaWQ6IHByb2dub3Npc0NhcmVnaXZlcklkU3RyaW5nIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9nbm9zaXNfaW1taW5lbmNlX2lkOiBwcm9nbm9zaXNJbW1pbmVuY2VJZFN0cmluZyB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybmluZygpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDEpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlByb2dub3NpcyBjcsOpw6kgb3UgbWlzIMOgIGpvdXIgYXZlYyBzdWNjw6hzLlwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBzYXZpbmcgcHJvZ25vc2lzOlwiLCBlcnJvcilcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaG93IHByb2dub3NpcyBmb3IgYSBzcGVjaWZpYyBwYXRpZW50XG4gICAgLy8gUmV0dXJucyBlbXB0eSBkYXRhIGlmIG5vIHByb2dub3NpcyBleGlzdHMgKHRvIGFsbG93IGZyb250ZW5kIHRvIHJlbmRlciBmb3JtKVxuICAgIGFzeW5jIHNob3cocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcXVlc3QucGFyYW1zO1xuICAgICAgICAgICAgY29uc3QgcGF0aWVudElkID0gcGFyc2VJbnQoaWQpO1xuXG4gICAgICAgICAgICBpZiAoaXNOYU4ocGF0aWVudElkKSkge1xuICAgICAgICAgICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjogXCJJbnZhbGlkIHBhdGllbnQgSURcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcm9nbm9zaXNSZWNvcmRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICBpZDogcHJvZ25vc2lzLmlkLFxuICAgICAgICAgICAgICAgIHBhdGllbnRfaWQ6IHByb2dub3Npcy5wYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgIHByb2dub3Npc19wYXRpZW50X2lzX2ltbWluZW50OiBwcm9nbm9zaXMucHJvZ25vc2lzX3BhdGllbnRfaXNfaW1taW5lbnQsXG4gICAgICAgICAgICAgICAgcHJvZ25vc2lzX3BhdGllbnRfaWQ6IHByb2dub3Npcy5wcm9nbm9zaXNfcGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICBwcm9nbm9zaXNfY2FyZWdpdmVyX2lkOiBwcm9nbm9zaXMucHJvZ25vc2lzX2NhcmVnaXZlcl9pZCxcbiAgICAgICAgICAgICAgICBwcm9nbm9zaXNfaW1taW5lbmNlX2lkOiBwcm9nbm9zaXMucHJvZ25vc2lzX2ltbWluZW5jZV9pZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHByb2dub3Npcy5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBwcm9nbm9zaXMudXBkYXRlZEF0XG4gICAgICAgICAgICB9KS5mcm9tKHByb2dub3Npcykud2hlcmUoZXEocHJvZ25vc2lzLnBhdGllbnRfaWQsIHBhdGllbnRJZCkpLmxpbWl0KDEpO1xuICAgICAgICAgICAgY29uc3QgcHJvZ25vc2lzUmVjb3JkID0gcHJvZ25vc2lzUmVjb3Jkc1swXTtcblxuICAgICAgICAgICAgaWYgKCFwcm9nbm9zaXNSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gMjAwIHdpdGggZW1wdHkgZGF0YSBpbnN0ZWFkIG9mIDQwNCwgc28gZnJvbnRlbmQgY2FuIHJlbmRlciBmb3JtXG4gICAgICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBwYXJzZUludChpZCksXG4gICAgICAgICAgICAgICAgICAgIHByb2dub3Npc19wYXRpZW50X2lzX2ltbWluZW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBwcm9nbm9zaXNfcGF0aWVudF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ25vc2lzX2NhcmVnaXZlcl9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ25vc2lzX2ltbWluZW5jZV9pZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIHByb2dub3Npc1JlY29yZDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2dub3NpczpcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgUHJvZ25vc2lzQ29udHJvbGxlcigpOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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