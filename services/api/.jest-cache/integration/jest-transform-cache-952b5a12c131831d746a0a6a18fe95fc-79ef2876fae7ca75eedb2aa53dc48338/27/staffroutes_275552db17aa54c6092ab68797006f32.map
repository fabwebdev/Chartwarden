{"version":3,"names":["cov_umwp4764j","actualCoverage","controller","PERMISSIONS","requireAnyPermission","staffRoutes","fastify","options","f","s","get","preHandler","VIEW_USERS","getStaffMissingCredentials","getAllStaff","post","CREATE_USER","createStaff","getStaffById","patch","UPDATE_USER","updateStaff","delete","DELETE_USER","deleteStaff","getExpiringCredentials","getExpiredCredentials","getStaffCredentials","addCredential","put","updateCredential","deleteCredential","getCredentialHistory","uploadCredentialDocument","getStaffAuditLog","VIEW_PATIENT","getStaffCaseload","UPDATE_PATIENT","assignPatient","getStaffSchedule","createSchedule","getStaffProductivity","recordProductivity","getStaffTraining","addTraining"],"sources":["staff.routes.js"],"sourcesContent":["import controller from '../controllers/Staff.controller.js';\nimport { PERMISSIONS } from '../config/rbac.js';\nimport { requireAnyPermission } from '../middleware/rbac.middleware.js';\n\n/**\n * Staff Management Routes\n * Module H - MEDIUM Priority\n *\n * Purpose: Employee tracking, credential expiration alerts, caseload management\n * Compliance: State licensing requirements, HIPAA workforce security\n *\n * Endpoints:\n * - Staff profile management (5 endpoints)\n * - Credential tracking (10 endpoints)\n * - Caseload management (2 endpoints)\n * - Schedule management (2 endpoints)\n * - Productivity tracking (2 endpoints)\n * - Training management (2 endpoints)\n * - Audit (1 endpoint)\n * Total: 24 endpoints\n */\nexport default async function staffRoutes(fastify, options) {\n  // ============================================================================\n  // STAFF PROFILE ROUTES\n  // ============================================================================\n\n  // Get staff missing required credentials (must be before /staff/:id to avoid conflict)\n  fastify.get('/staff/missing-credentials', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getStaffMissingCredentials);\n\n  // Get all staff\n  fastify.get('/staff', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getAllStaff);\n\n  // Create staff profile\n  fastify.post('/staff', {\n    preHandler: [requireAnyPermission(PERMISSIONS.CREATE_USER)]\n  }, controller.createStaff);\n\n  // Get staff by ID\n  fastify.get('/staff/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getStaffById);\n\n  // Update staff profile\n  fastify.patch('/staff/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.updateStaff);\n\n  // Delete (soft delete) staff profile\n  fastify.delete('/staff/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.DELETE_USER)]\n  }, controller.deleteStaff);\n\n  // ============================================================================\n  // CREDENTIAL ROUTES\n  // ============================================================================\n\n  // Get expiring credentials (all staff) - must be before /credentials/:id routes\n  fastify.get('/credentials/expiring', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getExpiringCredentials);\n\n  // Get expired credentials (all staff) - must be before /credentials/:id routes\n  fastify.get('/credentials/expired', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getExpiredCredentials);\n\n  // Get staff credentials\n  fastify.get('/staff/:id/credentials', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getStaffCredentials);\n\n  // Add credential to staff\n  fastify.post('/staff/:id/credentials', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.addCredential);\n\n  // Update credential\n  fastify.put('/credentials/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.updateCredential);\n\n  // Delete/revoke credential\n  fastify.delete('/credentials/:id', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.deleteCredential);\n\n  // Get credential history\n  fastify.get('/credentials/:id/history', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getCredentialHistory);\n\n  // Upload credential document\n  fastify.post('/credentials/:id/documents', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.uploadCredentialDocument);\n\n  // ============================================================================\n  // AUDIT LOG ROUTES\n  // ============================================================================\n\n  // Get staff audit log\n  fastify.get('/staff/:id/audit-log', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getStaffAuditLog);\n\n  // ============================================================================\n  // CASELOAD ROUTES\n  // ============================================================================\n\n  // Get staff caseload\n  fastify.get('/staff/:id/caseload', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_PATIENT)]\n  }, controller.getStaffCaseload);\n\n  // Assign patient to staff\n  fastify.post('/staff/:id/caseload', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_PATIENT)]\n  }, controller.assignPatient);\n\n  // ============================================================================\n  // SCHEDULE ROUTES\n  // ============================================================================\n\n  // Get staff schedule\n  fastify.get('/staff/:id/schedule', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getStaffSchedule);\n\n  // Create schedule entry\n  fastify.post('/staff/:id/schedule', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.createSchedule);\n\n  // ============================================================================\n  // PRODUCTIVITY ROUTES\n  // ============================================================================\n\n  // Get staff productivity metrics\n  fastify.get('/staff/:id/productivity', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getStaffProductivity);\n\n  // Record productivity metrics\n  fastify.post('/staff/:id/productivity', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.recordProductivity);\n\n  // ============================================================================\n  // TRAINING ROUTES\n  // ============================================================================\n\n  // Get staff training records\n  fastify.get('/staff/:id/training', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_USERS)]\n  }, controller.getStaffTraining);\n\n  // Add training record\n  fastify.post('/staff/:id/training', {\n    preHandler: [requireAnyPermission(PERMISSIONS.UPDATE_USER)]\n  }, controller.addTraining);\n}\n"],"mappings":"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","ignoreList":[]}