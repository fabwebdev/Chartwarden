{"version":3,"names":["cov_2kqlqnp975","actualCoverage","db","nursing_clinical_notes","patients","users","eq","and","desc","or","isNull","gte","lte","sql","count","crypto","logger","logAudit","hipaaLogger","VALID_NOTE_TYPES","s","VALID_STATUSES","MAX_CONTENT_LENGTH","MODIFICATION_THRESHOLD_HOURS","NursingNoteController","index","request","reply","f","patient_id","nurse_id","note_type","status","date_from","date_to","limit","b","offset","page","sort","order","query","conditions","deleted_at","push","parseInt","includes","toUpperCase","code","message","error","field","validValues","note_status","fromDate","Date","isNaN","getTime","note_timestamp","toDate","totalCountResult","select","value","from","where","totalCount","parsedLimit","Math","min","max","parsedOffset","undefined","sortColumn","createdAt","sortOrder","results","orderBy","data","length","total","pagination","floor","totalPages","ceil","hasMore","context","process","env","NODE_ENV","store","body","fields","contentFields","maxLength","noteTimestamp","patient","id","nurse","signature_hash","signed_at","signed_by_id","cosigned_at","cosigned_by_id","amended","amended_at","amended_by_id","safeData","result","insert","values","user","nurse_name","firstName","lastName","trim","nurse_credentials","credentials","created_by_id","updated_by_id","updatedAt","returning","dbOperation","header","show","params","noteId","update","existing","noteCreatedAt","hoursSinceCreation","now","userRole","role","toLowerCase","hoursOld","round","thresholdHours","_id","_patientId","_createdById","_createdAt","_signatureHash","_signedAt","_signedById","_cosignedAt","_cosignedById","_deletedAt","_amended","_amendedAt","_amendedById","amendment_reason","_amendmentReason","set","destroy","security","deletedBy","sign","dataToSign","JSON","stringify","content","subjective","objective","assessment","plan","toISOString","signatureHash","createHash","digest","signedBy","cosign","cosignedBy","amend","amended_content","updateData","amendedBy","amendmentReason","getUnsigned","getPatientNotes","patientId"],"sources":["NursingNote.controller.js"],"sourcesContent":["/**\n * Nursing Note Controller\n *\n * Manages nursing note documentation with comprehensive HIPAA compliance,\n * audit logging, and 21 CFR Part 11 signature compliance.\n *\n * Features:\n * - Full CRUD operations with soft delete\n * - Pagination with total counts\n * - Comprehensive filtering (patient, nurse, date range, status, note type)\n * - 21 CFR Part 11 electronic signature compliance\n * - Amendment tracking for signed notes\n * - Cosignature support for supervision\n * - Time-based modification restrictions\n * - HIPAA-compliant audit logging\n */\n\nimport { db } from '../config/db.drizzle.js';\nimport { nursing_clinical_notes, patients, users } from '../db/schemas/index.js';\nimport { eq, and, desc, or, isNull, gte, lte, sql, count } from 'drizzle-orm';\nimport crypto from 'crypto';\n\nimport { logger } from '../utils/logger.js';\nimport { logAudit } from '../middleware/audit.middleware.js';\nimport { hipaaLogger } from '../utils/hipaaLogger.js';\n\n// Valid note types\nconst VALID_NOTE_TYPES = ['ASSESSMENT', 'PROGRESS', 'DISCHARGE', 'ADMISSION', 'ROUTINE', 'PRN'];\n\n// Valid note statuses\nconst VALID_STATUSES = ['DRAFT', 'IN_PROGRESS', 'COMPLETED', 'PENDING_SIGNATURE', 'SIGNED', 'COSIGNED', 'AMENDED', 'VOID'];\n\n// Maximum note content length\nconst MAX_CONTENT_LENGTH = 10000;\n\n// Note modification threshold in hours (24 hours without supervisor approval)\nconst MODIFICATION_THRESHOLD_HOURS = 24;\n\n/**\n * Nursing Note Controller\n * Manages clinical nursing documentation\n */\nclass NursingNoteController {\n  /**\n   * Get all nursing notes (with pagination and filters)\n   * GET /nursing-notes\n   *\n   * Query Parameters:\n   * - patient_id: Filter by patient\n   * - nurse_id: Filter by nurse\n   * - note_type: Filter by note type (ASSESSMENT, PROGRESS, DISCHARGE)\n   * - status: Filter by status\n   * - date_from: Filter notes from this date (ISO format)\n   * - date_to: Filter notes up to this date (ISO format)\n   * - limit: Number of records to return (default 20, max 100)\n   * - offset: Number of records to skip for pagination\n   * - page: Page number (alternative to offset)\n   * - sort: Sort field (note_timestamp, createdAt)\n   * - order: Sort order (asc, desc - default desc)\n   */\n  async index(request, reply) {\n    try {\n      const {\n        patient_id,\n        nurse_id,\n        note_type,\n        status,\n        date_from,\n        date_to,\n        limit = 20,\n        offset,\n        page = 1,\n        sort = 'note_timestamp',\n        order = 'desc'\n      } = request.query;\n\n      // Build filter conditions\n      const conditions = [isNull(nursing_clinical_notes.deleted_at)];\n\n      if (patient_id) {\n        conditions.push(eq(nursing_clinical_notes.patient_id, parseInt(patient_id)));\n      }\n      if (nurse_id) {\n        conditions.push(eq(nursing_clinical_notes.nurse_id, nurse_id));\n      }\n      if (note_type) {\n        // Validate note_type\n        if (!VALID_NOTE_TYPES.includes(note_type.toUpperCase())) {\n          reply.code(400);\n          return {\n            status: 400,\n            message: 'Invalid note type',\n            error: {\n              code: 'VALIDATION_ERROR',\n              field: 'note_type',\n              validValues: VALID_NOTE_TYPES\n            }\n          };\n        }\n        conditions.push(eq(nursing_clinical_notes.note_status, note_type.toUpperCase()));\n      }\n      if (status) {\n        if (!VALID_STATUSES.includes(status.toUpperCase())) {\n          reply.code(400);\n          return {\n            status: 400,\n            message: 'Invalid status',\n            error: {\n              code: 'VALIDATION_ERROR',\n              field: 'status',\n              validValues: VALID_STATUSES\n            }\n          };\n        }\n        conditions.push(eq(nursing_clinical_notes.note_status, status.toUpperCase()));\n      }\n      if (date_from) {\n        const fromDate = new Date(date_from);\n        if (isNaN(fromDate.getTime())) {\n          reply.code(400);\n          return {\n            status: 400,\n            message: 'Invalid date_from format',\n            error: { code: 'VALIDATION_ERROR', field: 'date_from' }\n          };\n        }\n        conditions.push(gte(nursing_clinical_notes.note_timestamp, fromDate));\n      }\n      if (date_to) {\n        const toDate = new Date(date_to);\n        if (isNaN(toDate.getTime())) {\n          reply.code(400);\n          return {\n            status: 400,\n            message: 'Invalid date_to format',\n            error: { code: 'VALIDATION_ERROR', field: 'date_to' }\n          };\n        }\n        conditions.push(lte(nursing_clinical_notes.note_timestamp, toDate));\n      }\n\n      // Get total count for pagination\n      const totalCountResult = await db\n        .select({ value: count() })\n        .from(nursing_clinical_notes)\n        .where(and(...conditions));\n      const totalCount = totalCountResult[0]?.value || 0;\n\n      // Validate and cap limit\n      const parsedLimit = Math.min(Math.max(1, parseInt(limit) || 20), 100);\n\n      // Calculate offset from page if offset not provided\n      const parsedOffset = offset !== undefined\n        ? parseInt(offset) || 0\n        : (Math.max(1, parseInt(page) || 1) - 1) * parsedLimit;\n\n      // Determine sort order\n      const sortColumn = sort === 'createdAt' ? nursing_clinical_notes.createdAt : nursing_clinical_notes.note_timestamp;\n      const sortOrder = order === 'asc' ? sortColumn : desc(sortColumn);\n\n      const results = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(...conditions))\n        .orderBy(sortOrder)\n        .limit(parsedLimit)\n        .offset(parsedOffset);\n\n      // Log audit for PHI access\n      await logAudit(request, 'READ', 'nursing_clinical_notes', null);\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: results,\n        count: results.length,\n        total: totalCount,\n        pagination: {\n          limit: parsedLimit,\n          offset: parsedOffset,\n          page: Math.floor(parsedOffset / parsedLimit) + 1,\n          totalPages: Math.ceil(totalCount / parsedLimit),\n          hasMore: parsedOffset + results.length < totalCount\n        }\n      };\n    } catch (error) {\n      hipaaLogger.error('Error fetching nursing notes', { context: 'NursingNoteController.index', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching nursing notes',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Create new nursing note\n   * POST /nursing-notes\n   *\n   * Required fields:\n   * - patient_id: Patient ID (must exist)\n   * - note_content or content: Main note content\n   * - note_timestamp or note_date: When the note was created\n   *\n   * Optional fields:\n   * - nurse_id: Nurse ID (defaults to current user)\n   * - note_type: Type of note (ASSESSMENT, PROGRESS, DISCHARGE)\n   * - subjective, objective, assessment, plan: SOAP sections\n   * - interventions, patient_response, patient_education, communication\n   */\n  async store(request, reply) {\n    try {\n      const data = request.body;\n\n      // Validate required fields\n      if (!data.patient_id) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Missing required field: patient_id',\n          error: {\n            code: 'VALIDATION_ERROR',\n            fields: ['patient_id']\n          }\n        };\n      }\n\n      // Validate note content length\n      const contentFields = ['content', 'subjective', 'objective', 'assessment', 'plan',\n        'interventions', 'patient_response', 'patient_education', 'communication'];\n      for (const field of contentFields) {\n        if (data[field] && data[field].length > MAX_CONTENT_LENGTH) {\n          reply.code(400);\n          return {\n            status: 400,\n            message: `${field} exceeds maximum length of ${MAX_CONTENT_LENGTH} characters`,\n            error: {\n              code: 'VALIDATION_ERROR',\n              field: field,\n              maxLength: MAX_CONTENT_LENGTH\n            }\n          };\n        }\n      }\n\n      // Validate timestamp is not in future\n      const noteTimestamp = data.note_timestamp ? new Date(data.note_timestamp) : new Date();\n      if (noteTimestamp > new Date()) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Note timestamp cannot be in the future',\n          error: { code: 'VALIDATION_ERROR', field: 'note_timestamp' }\n        };\n      }\n\n      // Verify patient exists\n      const patient = await db\n        .select({ id: patients.id, status: patients.status })\n        .from(patients)\n        .where(eq(patients.id, parseInt(data.patient_id)))\n        .limit(1);\n\n      if (!patient[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Patient not found',\n          error: { code: 'PATIENT_NOT_FOUND' }\n        };\n      }\n\n      // Verify nurse exists if provided\n      if (data.nurse_id) {\n        const nurse = await db\n          .select({ id: users.id })\n          .from(users)\n          .where(eq(users.id, data.nurse_id))\n          .limit(1);\n\n        if (!nurse[0]) {\n          reply.code(404);\n          return {\n            status: 404,\n            message: 'Nurse not found',\n            error: { code: 'NURSE_NOT_FOUND' }\n          };\n        }\n      }\n\n      // Prevent immutable field injection\n      const { id, createdAt, deleted_at, signature_hash, signed_at, signed_by_id,\n              cosigned_at, cosigned_by_id, amended, amended_at, amended_by_id, ...safeData } = data;\n\n      const result = await db\n        .insert(nursing_clinical_notes)\n        .values({\n          ...safeData,\n          patient_id: parseInt(data.patient_id),\n          nurse_id: data.nurse_id || request.user?.id,\n          nurse_name: data.nurse_name || `${request.user?.firstName || ''} ${request.user?.lastName || ''}`.trim(),\n          nurse_credentials: data.nurse_credentials || request.user?.credentials || null,\n          note_status: data.note_status || 'DRAFT',\n          note_timestamp: noteTimestamp,\n          created_by_id: request.user?.id,\n          updated_by_id: request.user?.id,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        })\n        .returning();\n\n      // Log audit for PHI creation\n      await logAudit(request, 'CREATE', 'nursing_clinical_notes', result[0].id);\n      hipaaLogger.dbOperation('create', 'nursing_clinical_notes', result[0].id);\n\n      reply.code(201);\n      reply.header('Location', `/api/nursing-notes/${result[0].id}`);\n      return {\n        status: 201,\n        message: 'Nursing note created successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error creating nursing note', { context: 'NursingNoteController.store', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error creating nursing note',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get nursing note by ID\n   * GET /nursing-notes/:id\n   */\n  async show(request, reply) {\n    try {\n      const { id } = request.params;\n\n      // Validate ID parameter\n      const noteId = parseInt(id);\n      if (isNaN(noteId)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid nursing note ID',\n          error: { code: 'INVALID_ID' }\n        };\n      }\n\n      const result = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(\n          eq(nursing_clinical_notes.id, noteId),\n          isNull(nursing_clinical_notes.deleted_at)\n        ))\n        .limit(1);\n\n      if (!result[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Nursing note not found',\n          error: { code: 'NOTE_NOT_FOUND' }\n        };\n      }\n\n      // Log audit for PHI access\n      await logAudit(request, 'READ', 'nursing_clinical_notes', noteId);\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error fetching nursing note', { context: 'NursingNoteController.show', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching nursing note',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Update nursing note\n   * PUT/PATCH /nursing-notes/:id\n   *\n   * Notes older than 24 hours require supervisor approval (note_status check).\n   * Signed/cosigned notes cannot be updated - use amendments instead.\n   */\n  async update(request, reply) {\n    try {\n      const { id } = request.params;\n      const data = request.body;\n\n      // Validate ID parameter\n      const noteId = parseInt(id);\n      if (isNaN(noteId)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid nursing note ID',\n          error: { code: 'INVALID_ID' }\n        };\n      }\n\n      const existing = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(\n          eq(nursing_clinical_notes.id, noteId),\n          isNull(nursing_clinical_notes.deleted_at)\n        ))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Nursing note not found',\n          error: { code: 'NOTE_NOT_FOUND' }\n        };\n      }\n\n      // Don't allow updates to signed/cosigned notes (must use amendments)\n      if (['SIGNED', 'COSIGNED'].includes(existing[0].note_status)) {\n        reply.code(403);\n        return {\n          status: 403,\n          message: 'Cannot update signed notes. Use amendments instead.',\n          error: { code: 'SIGNED_NOTE_IMMUTABLE' }\n        };\n      }\n\n      // Check time-based modification restriction (24 hours)\n      const noteCreatedAt = new Date(existing[0].createdAt);\n      const hoursSinceCreation = (Date.now() - noteCreatedAt.getTime()) / (1000 * 60 * 60);\n\n      if (hoursSinceCreation > MODIFICATION_THRESHOLD_HOURS) {\n        // Check if user is supervisor/admin\n        const userRole = request.user?.role?.toLowerCase();\n        if (!['admin', 'supervisor', 'doctor'].includes(userRole)) {\n          reply.code(422);\n          return {\n            status: 422,\n            message: `Notes older than ${MODIFICATION_THRESHOLD_HOURS} hours require supervisor approval`,\n            error: {\n              code: 'MODIFICATION_THRESHOLD_EXCEEDED',\n              hoursOld: Math.round(hoursSinceCreation),\n              thresholdHours: MODIFICATION_THRESHOLD_HOURS\n            }\n          };\n        }\n      }\n\n      // Validate note content length\n      const contentFields = ['content', 'subjective', 'objective', 'assessment', 'plan',\n        'interventions', 'patient_response', 'patient_education', 'communication'];\n      for (const field of contentFields) {\n        if (data[field] && data[field].length > MAX_CONTENT_LENGTH) {\n          reply.code(400);\n          return {\n            status: 400,\n            message: `${field} exceeds maximum length of ${MAX_CONTENT_LENGTH} characters`,\n            error: {\n              code: 'VALIDATION_ERROR',\n              field: field,\n              maxLength: MAX_CONTENT_LENGTH\n            }\n          };\n        }\n      }\n\n      // Validate timestamp if provided\n      if (data.note_timestamp) {\n        const noteTimestamp = new Date(data.note_timestamp);\n        if (noteTimestamp > new Date()) {\n          reply.code(400);\n          return {\n            status: 400,\n            message: 'Note timestamp cannot be in the future',\n            error: { code: 'VALIDATION_ERROR', field: 'note_timestamp' }\n          };\n        }\n      }\n\n      // Remove immutable fields from update data\n      const {\n        id: _id,\n        patient_id: _patientId,\n        created_by_id: _createdById,\n        createdAt: _createdAt,\n        signature_hash: _signatureHash,\n        signed_at: _signedAt,\n        signed_by_id: _signedById,\n        cosigned_at: _cosignedAt,\n        cosigned_by_id: _cosignedById,\n        deleted_at: _deletedAt,\n        amended: _amended,\n        amended_at: _amendedAt,\n        amended_by_id: _amendedById,\n        amendment_reason: _amendmentReason,\n        ...safeData\n      } = data;\n\n      // Parse note_timestamp if provided\n      if (safeData.note_timestamp) {\n        safeData.note_timestamp = new Date(safeData.note_timestamp);\n      }\n\n      const result = await db\n        .update(nursing_clinical_notes)\n        .set({\n          ...safeData,\n          updated_by_id: request.user?.id,\n          updatedAt: new Date()\n        })\n        .where(eq(nursing_clinical_notes.id, noteId))\n        .returning();\n\n      // Log audit for PHI update\n      await logAudit(request, 'UPDATE', 'nursing_clinical_notes', noteId);\n      hipaaLogger.dbOperation('update', 'nursing_clinical_notes', noteId);\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Nursing note updated successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error updating nursing note', { context: 'NursingNoteController.update', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error updating nursing note',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Delete nursing note (soft delete)\n   * DELETE /nursing-notes/:id\n   *\n   * Only unsigned notes can be deleted.\n   * Signed notes cannot be deleted for compliance.\n   */\n  async destroy(request, reply) {\n    try {\n      const { id } = request.params;\n\n      // Validate ID parameter\n      const noteId = parseInt(id);\n      if (isNaN(noteId)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid nursing note ID',\n          error: { code: 'INVALID_ID' }\n        };\n      }\n\n      const existing = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(\n          eq(nursing_clinical_notes.id, noteId),\n          isNull(nursing_clinical_notes.deleted_at)\n        ))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Nursing note not found',\n          error: { code: 'NOTE_NOT_FOUND' }\n        };\n      }\n\n      // Only allow deletion of unsigned notes\n      if (['SIGNED', 'COSIGNED', 'AMENDED'].includes(existing[0].note_status)) {\n        reply.code(403);\n        return {\n          status: 403,\n          message: 'Cannot delete signed clinical records. Signed records must be retained for compliance.',\n          error: { code: 'SIGNED_NOTE_PROTECTED' }\n        };\n      }\n\n      // Soft delete the note\n      await db\n        .update(nursing_clinical_notes)\n        .set({\n          deleted_at: new Date(),\n          updated_by_id: request.user?.id,\n          updatedAt: new Date()\n        })\n        .where(eq(nursing_clinical_notes.id, noteId));\n\n      // Log audit for PHI deletion\n      await logAudit(request, 'DELETE', 'nursing_clinical_notes', noteId);\n      hipaaLogger.dbOperation('delete', 'nursing_clinical_notes', noteId);\n      hipaaLogger.security('NURSING_NOTE_DELETED', {\n        noteId,\n        deletedBy: request.user?.id\n      });\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Nursing note deleted successfully'\n      };\n    } catch (error) {\n      hipaaLogger.error('Error deleting nursing note', { context: 'NursingNoteController.destroy', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error deleting nursing note',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Sign nursing note (21 CFR Part 11 compliance)\n   * POST /nursing-notes/:id/sign\n   */\n  async sign(request, reply) {\n    try {\n      const { id } = request.params;\n\n      // Validate ID parameter\n      const noteId = parseInt(id);\n      if (isNaN(noteId)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid nursing note ID',\n          error: { code: 'INVALID_ID' }\n        };\n      }\n\n      const existing = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(\n          eq(nursing_clinical_notes.id, noteId),\n          isNull(nursing_clinical_notes.deleted_at)\n        ))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Nursing note not found',\n          error: { code: 'NOTE_NOT_FOUND' }\n        };\n      }\n\n      if (['SIGNED', 'COSIGNED'].includes(existing[0].note_status)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Note is already signed',\n          error: { code: 'ALREADY_SIGNED' }\n        };\n      }\n\n      // Generate signature hash (21 CFR Part 11)\n      const dataToSign = JSON.stringify({\n        id: existing[0].id,\n        patient_id: existing[0].patient_id,\n        content: existing[0].content,\n        subjective: existing[0].subjective,\n        objective: existing[0].objective,\n        assessment: existing[0].assessment,\n        plan: existing[0].plan,\n        signed_at: new Date().toISOString()\n      });\n      const signatureHash = crypto.createHash('sha256').update(dataToSign).digest('hex');\n\n      const result = await db\n        .update(nursing_clinical_notes)\n        .set({\n          note_status: 'SIGNED',\n          signed_at: new Date(),\n          signed_by_id: request.user?.id,\n          signature_hash: signatureHash,\n          updated_by_id: request.user?.id,\n          updatedAt: new Date()\n        })\n        .where(eq(nursing_clinical_notes.id, noteId))\n        .returning();\n\n      // Log audit for clinical note signing (critical for 21 CFR Part 11)\n      await logAudit(request, 'SIGN', 'nursing_clinical_notes', noteId);\n      hipaaLogger.security('NURSING_NOTE_SIGNED', {\n        noteId,\n        signedBy: request.user?.id,\n        signatureHash\n      });\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Nursing note signed successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error signing nursing note', { context: 'NursingNoteController.sign', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error signing nursing note',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Cosign nursing note (for supervision)\n   * POST /nursing-notes/:id/cosign\n   */\n  async cosign(request, reply) {\n    try {\n      const { id } = request.params;\n\n      // Validate ID parameter\n      const noteId = parseInt(id);\n      if (isNaN(noteId)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid nursing note ID',\n          error: { code: 'INVALID_ID' }\n        };\n      }\n\n      const existing = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(\n          eq(nursing_clinical_notes.id, noteId),\n          isNull(nursing_clinical_notes.deleted_at)\n        ))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Nursing note not found',\n          error: { code: 'NOTE_NOT_FOUND' }\n        };\n      }\n\n      if (existing[0].note_status !== 'SIGNED') {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Note must be signed before cosigning',\n          error: { code: 'NOT_SIGNED' }\n        };\n      }\n\n      if (existing[0].note_status === 'COSIGNED') {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Note is already cosigned',\n          error: { code: 'ALREADY_COSIGNED' }\n        };\n      }\n\n      const result = await db\n        .update(nursing_clinical_notes)\n        .set({\n          note_status: 'COSIGNED',\n          cosigned_at: new Date(),\n          cosigned_by_id: request.user?.id,\n          updated_by_id: request.user?.id,\n          updatedAt: new Date()\n        })\n        .where(eq(nursing_clinical_notes.id, noteId))\n        .returning();\n\n      // Log audit for cosigning\n      await logAudit(request, 'COSIGN', 'nursing_clinical_notes', noteId);\n      hipaaLogger.security('NURSING_NOTE_COSIGNED', {\n        noteId,\n        cosignedBy: request.user?.id\n      });\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Nursing note cosigned successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error cosigning nursing note', { context: 'NursingNoteController.cosign', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error cosigning nursing note',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Add amendment to signed nursing note\n   * POST /nursing-notes/:id/amend\n   *\n   * Body:\n   * - amendment_reason: Required - Reason for the amendment\n   * - amended_content: Updated content (for specific field being amended)\n   */\n  async amend(request, reply) {\n    try {\n      const { id } = request.params;\n      const { amendment_reason, amended_content } = request.body;\n\n      // Validate ID parameter\n      const noteId = parseInt(id);\n      if (isNaN(noteId)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid nursing note ID',\n          error: { code: 'INVALID_ID' }\n        };\n      }\n\n      // Validate amendment_reason\n      if (!amendment_reason || amendment_reason.trim().length === 0) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Amendment reason is required',\n          error: { code: 'VALIDATION_ERROR', field: 'amendment_reason' }\n        };\n      }\n\n      const existing = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(\n          eq(nursing_clinical_notes.id, noteId),\n          isNull(nursing_clinical_notes.deleted_at)\n        ))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Nursing note not found',\n          error: { code: 'NOTE_NOT_FOUND' }\n        };\n      }\n\n      // Can only amend signed or cosigned notes\n      if (!['SIGNED', 'COSIGNED'].includes(existing[0].note_status)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Only signed notes can be amended',\n          error: { code: 'NOT_SIGNED' }\n        };\n      }\n\n      const updateData = {\n        note_status: 'AMENDED',\n        amended: true,\n        amendment_reason: amendment_reason,\n        amended_at: new Date(),\n        amended_by_id: request.user?.id,\n        updated_by_id: request.user?.id,\n        updatedAt: new Date()\n      };\n\n      // If amended_content is provided, update the content field\n      if (amended_content) {\n        updateData.content = amended_content;\n      }\n\n      const result = await db\n        .update(nursing_clinical_notes)\n        .set(updateData)\n        .where(eq(nursing_clinical_notes.id, noteId))\n        .returning();\n\n      // Log audit for amendment (critical for compliance)\n      await logAudit(request, 'AMEND', 'nursing_clinical_notes', noteId);\n      hipaaLogger.security('NURSING_NOTE_AMENDED', {\n        noteId,\n        amendedBy: request.user?.id,\n        amendmentReason: amendment_reason\n      });\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Nursing note amended successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error amending nursing note', { context: 'NursingNoteController.amend', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error amending nursing note',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get unsigned nursing notes\n   * GET /nursing-notes/unsigned\n   */\n  async getUnsigned(request, reply) {\n    try {\n      const { nurse_id, limit = 50, offset = 0 } = request.query;\n\n      const conditions = [\n        isNull(nursing_clinical_notes.deleted_at),\n        or(\n          eq(nursing_clinical_notes.note_status, 'COMPLETED'),\n          eq(nursing_clinical_notes.note_status, 'PENDING_SIGNATURE')\n        )\n      ];\n\n      if (nurse_id) {\n        conditions.push(eq(nursing_clinical_notes.nurse_id, nurse_id));\n      }\n\n      const results = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(...conditions))\n        .orderBy(desc(nursing_clinical_notes.note_timestamp))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      // Log audit for PHI access\n      await logAudit(request, 'READ', 'nursing_clinical_notes', null);\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: results,\n        count: results.length\n      };\n    } catch (error) {\n      hipaaLogger.error('Error fetching unsigned nursing notes', { context: 'NursingNoteController.getUnsigned', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching unsigned nursing notes',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get patient nursing notes\n   * GET /patients/:id/nursing-notes\n   */\n  async getPatientNotes(request, reply) {\n    try {\n      const { id } = request.params;\n      const { status, limit = 50, offset = 0 } = request.query;\n\n      const patientId = parseInt(id);\n      if (isNaN(patientId)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid patient ID',\n          error: { code: 'INVALID_ID' }\n        };\n      }\n\n      // Verify patient exists\n      const patient = await db\n        .select({ id: patients.id })\n        .from(patients)\n        .where(eq(patients.id, patientId))\n        .limit(1);\n\n      if (!patient[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Patient not found',\n          error: { code: 'PATIENT_NOT_FOUND' }\n        };\n      }\n\n      const conditions = [\n        eq(nursing_clinical_notes.patient_id, patientId),\n        isNull(nursing_clinical_notes.deleted_at)\n      ];\n\n      if (status) {\n        conditions.push(eq(nursing_clinical_notes.note_status, status.toUpperCase()));\n      }\n\n      const results = await db\n        .select()\n        .from(nursing_clinical_notes)\n        .where(and(...conditions))\n        .orderBy(desc(nursing_clinical_notes.note_timestamp))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      // Log audit for patient PHI access\n      await logAudit(request, 'READ', 'nursing_clinical_notes', null);\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: results,\n        count: results.length\n      };\n    } catch (error) {\n      hipaaLogger.error('Error fetching patient nursing notes', { context: 'NursingNoteController.getPatientNotes', error });\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching nursing notes',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n}\n\nexport default new NursingNoteController();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}