{"version":3,"names":["cov_15s080udtp","actualCoverage","db","users","roles","permissions","role_has_permissions","sql","bcrypt","nanoid","logger","roleDefinitions","s","name","display_name","hierarchy_level","is_system","permissionDefinitions","resource","action","description","rolePermissionMappings","admin","doctor","nurse","staff","patient","user","seedDatabase","f","info","role","execute","perm","roleName","permissionNames","Object","entries","roleResult","rows","length","b","roleId","parseInt","id","permName","permResult","permId","existingUsers","hashedPassword","hash","userId","newUser","adminRole","error","import","meta","url","process","argv"],"sources":["seed.js"],"sourcesContent":["import { db } from \"../config/db.drizzle.js\";\nimport { users } from \"../db/schemas/user.schema.js\";\nimport { roles } from \"../db/schemas/role.schema.js\";\nimport { permissions } from \"../db/schemas/permission.schema.js\";\nimport { role_has_permissions } from \"../db/schemas/rolePermission.schema.js\";\nimport { sql } from \"drizzle-orm\";\nimport bcrypt from \"bcryptjs\";\nimport { nanoid } from \"nanoid\";\n\nimport { logger } from '../utils/logger.js';\n\n// Role definitions with hierarchy levels\nconst roleDefinitions = [\n  { name: \"admin\", display_name: \"Administrator\", hierarchy_level: 1, is_system: true },\n  { name: \"doctor\", display_name: \"Doctor\", hierarchy_level: 10, is_system: true },\n  { name: \"nurse\", display_name: \"Nurse\", hierarchy_level: 20, is_system: true },\n  { name: \"staff\", display_name: \"Staff\", hierarchy_level: 50, is_system: true },\n  { name: \"patient\", display_name: \"Patient\", hierarchy_level: 100, is_system: true },\n  { name: \"user\", display_name: \"User\", hierarchy_level: 100, is_system: false },\n];\n\n// Permission definitions with resource and action breakdown\nconst permissionDefinitions = [\n  // Patient Management\n  { name: \"view:patient\", resource: \"patient\", action: \"view\", description: \"View patient records\" },\n  { name: \"create:patient\", resource: \"patient\", action: \"create\", description: \"Create new patients\" },\n  { name: \"update:patient\", resource: \"patient\", action: \"update\", description: \"Update patient information\" },\n  { name: \"delete:patient\", resource: \"patient\", action: \"delete\", description: \"Delete patient records\" },\n\n  // Clinical Notes\n  { name: \"view:clinical_notes\", resource: \"clinical_notes\", action: \"view\", description: \"View clinical notes\" },\n  { name: \"create:clinical_notes\", resource: \"clinical_notes\", action: \"create\", description: \"Create clinical notes\" },\n  { name: \"update:clinical_notes\", resource: \"clinical_notes\", action: \"update\", description: \"Update clinical notes\" },\n  { name: \"delete:clinical_notes\", resource: \"clinical_notes\", action: \"delete\", description: \"Delete clinical notes\" },\n\n  // Vital Signs\n  { name: \"view:vital_signs\", resource: \"vital_signs\", action: \"view\", description: \"View vital signs\" },\n  { name: \"create:vital_signs\", resource: \"vital_signs\", action: \"create\", description: \"Record vital signs\" },\n  { name: \"update:vital_signs\", resource: \"vital_signs\", action: \"update\", description: \"Update vital signs\" },\n  { name: \"delete:vital_signs\", resource: \"vital_signs\", action: \"delete\", description: \"Delete vital signs\" },\n\n  // Medications\n  { name: \"view:medications\", resource: \"medications\", action: \"view\", description: \"View medications\" },\n  { name: \"create:medications\", resource: \"medications\", action: \"create\", description: \"Prescribe medications\" },\n  { name: \"update:medications\", resource: \"medications\", action: \"update\", description: \"Update medications\" },\n  { name: \"delete:medications\", resource: \"medications\", action: \"delete\", description: \"Remove medications\" },\n\n  // Reports\n  { name: \"view:reports\", resource: \"reports\", action: \"view\", description: \"View reports\" },\n  { name: \"generate:reports\", resource: \"reports\", action: \"generate\", description: \"Generate reports\" },\n\n  // User Management (Admin)\n  { name: \"manage:users\", resource: \"users\", action: \"manage\", description: \"Manage user accounts\" },\n  { name: \"manage:roles\", resource: \"roles\", action: \"manage\", description: \"Manage roles\" },\n  { name: \"manage:permissions\", resource: \"permissions\", action: \"manage\", description: \"Manage permissions\" },\n  { name: \"view:audit_logs\", resource: \"audit_logs\", action: \"view\", description: \"View audit logs\" },\n];\n\n// Role-permission mappings (which permissions each role has)\nconst rolePermissionMappings = {\n  admin: [\n    \"view:patient\", \"create:patient\", \"update:patient\", \"delete:patient\",\n    \"view:clinical_notes\", \"create:clinical_notes\", \"update:clinical_notes\", \"delete:clinical_notes\",\n    \"view:vital_signs\", \"create:vital_signs\", \"update:vital_signs\", \"delete:vital_signs\",\n    \"view:medications\", \"create:medications\", \"update:medications\", \"delete:medications\",\n    \"view:reports\", \"generate:reports\",\n    \"manage:users\", \"manage:roles\", \"manage:permissions\", \"view:audit_logs\",\n  ],\n  doctor: [\n    \"view:patient\", \"create:patient\", \"update:patient\",\n    \"view:clinical_notes\", \"create:clinical_notes\", \"update:clinical_notes\",\n    \"view:vital_signs\", \"create:vital_signs\", \"update:vital_signs\",\n    \"view:medications\", \"create:medications\", \"update:medications\",\n    \"view:reports\", \"generate:reports\",\n  ],\n  nurse: [\n    \"view:patient\", \"update:patient\",\n    \"view:clinical_notes\", \"create:clinical_notes\", \"update:clinical_notes\",\n    \"view:vital_signs\", \"create:vital_signs\", \"update:vital_signs\",\n    \"view:medications\",\n  ],\n  staff: [\n    \"view:patient\",\n    \"view:clinical_notes\",\n    \"view:vital_signs\",\n    \"view:medications\",\n  ],\n  patient: [\n    \"view:patient\",\n  ],\n  user: [\n    \"view:patient\",\n  ],\n};\n\nconst seedDatabase = async () => {\n  try {\n    logger.info(\"Database connection has been established successfully.\")\n\n    // Create default roles with full definition\n    for (const role of roleDefinitions) {\n      await db.execute(sql`\n        INSERT INTO roles (name, display_name, hierarchy_level, is_system, guard_name, created_at, updated_at)\n        VALUES (${role.name}, ${role.display_name}, ${role.hierarchy_level}, ${role.is_system}, 'web', NOW(), NOW())\n        ON CONFLICT (name) DO UPDATE SET\n          display_name = ${role.display_name},\n          hierarchy_level = ${role.hierarchy_level},\n          is_system = ${role.is_system},\n          updated_at = NOW()\n      `);\n    }\n\n    logger.info(\"Roles seeded successfully.\")\n\n    // Create default permissions with resource and action\n    for (const perm of permissionDefinitions) {\n      await db.execute(sql`\n        INSERT INTO permissions (name, resource, action, description, guard_name, created_at, updated_at)\n        VALUES (${perm.name}, ${perm.resource}, ${perm.action}, ${perm.description}, 'web', NOW(), NOW())\n        ON CONFLICT (name) DO UPDATE SET\n          resource = ${perm.resource},\n          action = ${perm.action},\n          description = ${perm.description},\n          updated_at = NOW()\n      `);\n    }\n\n    logger.info(\"Permissions seeded successfully.\")\n\n    // Create role-permission associations\n    for (const [roleName, permissionNames] of Object.entries(rolePermissionMappings)) {\n      // Get role ID\n      const roleResult = await db.execute(sql`SELECT id FROM roles WHERE name = ${roleName}`);\n      if (roleResult.rows.length === 0) continue;\n      const roleId = parseInt(roleResult.rows[0].id);\n\n      for (const permName of permissionNames) {\n        // Get permission ID\n        const permResult = await db.execute(sql`SELECT id FROM permissions WHERE name = ${permName}`);\n        if (permResult.rows.length === 0) continue;\n        const permId = parseInt(permResult.rows[0].id);\n\n        // Insert role-permission association\n        await db.execute(sql`\n          INSERT INTO role_has_permissions (role_id, permission_id, assigned_at)\n          VALUES (${roleId}, ${permId}, NOW())\n          ON CONFLICT (role_id, permission_id) DO NOTHING\n        `);\n      }\n    }\n\n    logger.info(\"Role-permission associations seeded successfully.\")\n\n    // Create admin user if not exists\n    const existingUsers = await db.execute(sql`\n            SELECT * FROM ${users} WHERE email = 'admin@example.com'\n        `);\n\n    if (existingUsers.rows.length === 0) {\n      const hashedPassword = await bcrypt.hash(\"password\", 10);\n      const userId = nanoid(); // Generate a unique ID for the user\n\n      const newUser = await db.execute(sql`\n                INSERT INTO ${users} (id, name, email, password, \"createdAt\", \"updatedAt\")\n                VALUES (${userId}, 'Admin User', 'admin@example.com', ${hashedPassword}, NOW(), NOW())\n                RETURNING id\n            `);\n\n      // Get admin role id\n      const adminRole = await db.execute(sql`\n                SELECT id FROM ${roles} WHERE name = 'admin'\n            `);\n\n      if (adminRole.rows.length > 0) {\n        const roleId = parseInt(adminRole.rows[0].id); // Convert to integer\n\n        // Assign admin role to admin user using user_has_roles table\n        await db.execute(sql`\n                    INSERT INTO user_has_roles (user_id, role_id)\n                    VALUES (${userId}, ${roleId})\n                `);\n\n        logger.info(\"Admin user created and assigned admin role.\")\n      } else {\n        logger.info(\"Admin role not found, skipping role assignment.\")\n      }\n    } else {\n      logger.info(\"Admin user already exists.\")\n    }\n\n    logger.info(\"Database seeding completed successfully.\")\n  } catch (error) {\n    logger.error(\"Error seeding database:\", error)\n  }\n};\n\n// Run the seed if this file is executed directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedDatabase();\n}\n\nexport default seedDatabase;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,SAASE,EAAE,QAAQ,yBAAyB;AAC5C,SAASC,KAAK,QAAQ,8BAA8B;AACpD,SAASC,KAAK,QAAQ,8BAA8B;AACpD,SAASC,WAAW,QAAQ,oCAAoC;AAChE,SAASC,oBAAoB,QAAQ,wCAAwC;AAC7E,SAASC,GAAG,QAAQ,aAAa;AACjC,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,MAAM,QAAQ,QAAQ;AAE/B,SAASC,MAAM,QAAQ,oBAAoB;;AAE3C;AACA,MAAMC,eAAe;AAAA;AAAA,CAAAX,cAAA,GAAAY,CAAA,OAAG,CACtB;EAAEC,IAAI,EAAE,OAAO;EAAEC,YAAY,EAAE,eAAe;EAAEC,eAAe,EAAE,CAAC;EAAEC,SAAS,EAAE;AAAK,CAAC,EACrF;EAAEH,IAAI,EAAE,QAAQ;EAAEC,YAAY,EAAE,QAAQ;EAAEC,eAAe,EAAE,EAAE;EAAEC,SAAS,EAAE;AAAK,CAAC,EAChF;EAAEH,IAAI,EAAE,OAAO;EAAEC,YAAY,EAAE,OAAO;EAAEC,eAAe,EAAE,EAAE;EAAEC,SAAS,EAAE;AAAK,CAAC,EAC9E;EAAEH,IAAI,EAAE,OAAO;EAAEC,YAAY,EAAE,OAAO;EAAEC,eAAe,EAAE,EAAE;EAAEC,SAAS,EAAE;AAAK,CAAC,EAC9E;EAAEH,IAAI,EAAE,SAAS;EAAEC,YAAY,EAAE,SAAS;EAAEC,eAAe,EAAE,GAAG;EAAEC,SAAS,EAAE;AAAK,CAAC,EACnF;EAAEH,IAAI,EAAE,MAAM;EAAEC,YAAY,EAAE,MAAM;EAAEC,eAAe,EAAE,GAAG;EAAEC,SAAS,EAAE;AAAM,CAAC,CAC/E;;AAED;AACA,MAAMC,qBAAqB;AAAA;AAAA,CAAAjB,cAAA,GAAAY,CAAA,OAAG;AAC5B;AACA;EAAEC,IAAI,EAAE,cAAc;EAAEK,QAAQ,EAAE,SAAS;EAAEC,MAAM,EAAE,MAAM;EAAEC,WAAW,EAAE;AAAuB,CAAC,EAClG;EAAEP,IAAI,EAAE,gBAAgB;EAAEK,QAAQ,EAAE,SAAS;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAsB,CAAC,EACrG;EAAEP,IAAI,EAAE,gBAAgB;EAAEK,QAAQ,EAAE,SAAS;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAA6B,CAAC,EAC5G;EAAEP,IAAI,EAAE,gBAAgB;EAAEK,QAAQ,EAAE,SAAS;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAyB,CAAC;AAExG;AACA;EAAEP,IAAI,EAAE,qBAAqB;EAAEK,QAAQ,EAAE,gBAAgB;EAAEC,MAAM,EAAE,MAAM;EAAEC,WAAW,EAAE;AAAsB,CAAC,EAC/G;EAAEP,IAAI,EAAE,uBAAuB;EAAEK,QAAQ,EAAE,gBAAgB;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAwB,CAAC,EACrH;EAAEP,IAAI,EAAE,uBAAuB;EAAEK,QAAQ,EAAE,gBAAgB;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAwB,CAAC,EACrH;EAAEP,IAAI,EAAE,uBAAuB;EAAEK,QAAQ,EAAE,gBAAgB;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAwB,CAAC;AAErH;AACA;EAAEP,IAAI,EAAE,kBAAkB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,MAAM;EAAEC,WAAW,EAAE;AAAmB,CAAC,EACtG;EAAEP,IAAI,EAAE,oBAAoB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAqB,CAAC,EAC5G;EAAEP,IAAI,EAAE,oBAAoB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAqB,CAAC,EAC5G;EAAEP,IAAI,EAAE,oBAAoB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAqB,CAAC;AAE5G;AACA;EAAEP,IAAI,EAAE,kBAAkB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,MAAM;EAAEC,WAAW,EAAE;AAAmB,CAAC,EACtG;EAAEP,IAAI,EAAE,oBAAoB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAwB,CAAC,EAC/G;EAAEP,IAAI,EAAE,oBAAoB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAqB,CAAC,EAC5G;EAAEP,IAAI,EAAE,oBAAoB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAqB,CAAC;AAE5G;AACA;EAAEP,IAAI,EAAE,cAAc;EAAEK,QAAQ,EAAE,SAAS;EAAEC,MAAM,EAAE,MAAM;EAAEC,WAAW,EAAE;AAAe,CAAC,EAC1F;EAAEP,IAAI,EAAE,kBAAkB;EAAEK,QAAQ,EAAE,SAAS;EAAEC,MAAM,EAAE,UAAU;EAAEC,WAAW,EAAE;AAAmB,CAAC;AAEtG;AACA;EAAEP,IAAI,EAAE,cAAc;EAAEK,QAAQ,EAAE,OAAO;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAuB,CAAC,EAClG;EAAEP,IAAI,EAAE,cAAc;EAAEK,QAAQ,EAAE,OAAO;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAe,CAAC,EAC1F;EAAEP,IAAI,EAAE,oBAAoB;EAAEK,QAAQ,EAAE,aAAa;EAAEC,MAAM,EAAE,QAAQ;EAAEC,WAAW,EAAE;AAAqB,CAAC,EAC5G;EAAEP,IAAI,EAAE,iBAAiB;EAAEK,QAAQ,EAAE,YAAY;EAAEC,MAAM,EAAE,MAAM;EAAEC,WAAW,EAAE;AAAkB,CAAC,CACpG;;AAED;AACA,MAAMC,sBAAsB;AAAA;AAAA,CAAArB,cAAA,GAAAY,CAAA,OAAG;EAC7BU,KAAK,EAAE,CACL,cAAc,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,gBAAgB,EACpE,qBAAqB,EAAE,uBAAuB,EAAE,uBAAuB,EAAE,uBAAuB,EAChG,kBAAkB,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,oBAAoB,EACpF,kBAAkB,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,oBAAoB,EACpF,cAAc,EAAE,kBAAkB,EAClC,cAAc,EAAE,cAAc,EAAE,oBAAoB,EAAE,iBAAiB,CACxE;EACDC,MAAM,EAAE,CACN,cAAc,EAAE,gBAAgB,EAAE,gBAAgB,EAClD,qBAAqB,EAAE,uBAAuB,EAAE,uBAAuB,EACvE,kBAAkB,EAAE,oBAAoB,EAAE,oBAAoB,EAC9D,kBAAkB,EAAE,oBAAoB,EAAE,oBAAoB,EAC9D,cAAc,EAAE,kBAAkB,CACnC;EACDC,KAAK,EAAE,CACL,cAAc,EAAE,gBAAgB,EAChC,qBAAqB,EAAE,uBAAuB,EAAE,uBAAuB,EACvE,kBAAkB,EAAE,oBAAoB,EAAE,oBAAoB,EAC9D,kBAAkB,CACnB;EACDC,KAAK,EAAE,CACL,cAAc,EACd,qBAAqB,EACrB,kBAAkB,EAClB,kBAAkB,CACnB;EACDC,OAAO,EAAE,CACP,cAAc,CACf;EACDC,IAAI,EAAE,CACJ,cAAc;AAElB,CAAC;AAAC;AAAA3B,cAAA,GAAAY,CAAA;AAEF,MAAMgB,YAAY,GAAG,MAAAA,CAAA,KAAY;EAAA;EAAA5B,cAAA,GAAA6B,CAAA;EAAA7B,cAAA,GAAAY,CAAA;EAC/B,IAAI;IAAA;IAAAZ,cAAA,GAAAY,CAAA;IACFF,MAAM,CAACoB,IAAI,CAAC,wDAAwD,CAAC;;IAErE;IAAA;IAAA9B,cAAA,GAAAY,CAAA;IACA,KAAK,MAAMmB,IAAI,IAAIpB,eAAe,EAAE;MAAA;MAAAX,cAAA,GAAAY,CAAA;MAClC,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG;AAC1B;AACA,kBAAkBwB,IAAI,CAAClB,IAAI,KAAKkB,IAAI,CAACjB,YAAY,KAAKiB,IAAI,CAAChB,eAAe,KAAKgB,IAAI,CAACf,SAAS;AAC7F;AACA,2BAA2Be,IAAI,CAACjB,YAAY;AAC5C,8BAA8BiB,IAAI,CAAChB,eAAe;AAClD,wBAAwBgB,IAAI,CAACf,SAAS;AACtC;AACA,OAAO,CAAC;IACJ;IAAC;IAAAhB,cAAA,GAAAY,CAAA;IAEDF,MAAM,CAACoB,IAAI,CAAC,4BAA4B,CAAC;;IAEzC;IAAA;IAAA9B,cAAA,GAAAY,CAAA;IACA,KAAK,MAAMqB,IAAI,IAAIhB,qBAAqB,EAAE;MAAA;MAAAjB,cAAA,GAAAY,CAAA;MACxC,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG;AAC1B;AACA,kBAAkB0B,IAAI,CAACpB,IAAI,KAAKoB,IAAI,CAACf,QAAQ,KAAKe,IAAI,CAACd,MAAM,KAAKc,IAAI,CAACb,WAAW;AAClF;AACA,uBAAuBa,IAAI,CAACf,QAAQ;AACpC,qBAAqBe,IAAI,CAACd,MAAM;AAChC,0BAA0Bc,IAAI,CAACb,WAAW;AAC1C;AACA,OAAO,CAAC;IACJ;IAAC;IAAApB,cAAA,GAAAY,CAAA;IAEDF,MAAM,CAACoB,IAAI,CAAC,kCAAkC,CAAC;;IAE/C;IAAA;IAAA9B,cAAA,GAAAY,CAAA;IACA,KAAK,MAAM,CAACsB,QAAQ,EAAEC,eAAe,CAAC,IAAIC,MAAM,CAACC,OAAO,CAAChB,sBAAsB,CAAC,EAAE;MAChF;MACA,MAAMiB,UAAU;MAAA;MAAA,CAAAtC,cAAA,GAAAY,CAAA,QAAG,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG,qCAAqC2B,QAAQ,EAAE,CAAC;MAAC;MAAAlC,cAAA,GAAAY,CAAA;MACxF,IAAI0B,UAAU,CAACC,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;QAAA;QAAAxC,cAAA,GAAAyC,CAAA;QAAAzC,cAAA,GAAAY,CAAA;QAAA;MAAQ,CAAC;MAAA;MAAA;QAAAZ,cAAA,GAAAyC,CAAA;MAAA;MAC3C,MAAMC,MAAM;MAAA;MAAA,CAAA1C,cAAA,GAAAY,CAAA,QAAG+B,QAAQ,CAACL,UAAU,CAACC,IAAI,CAAC,CAAC,CAAC,CAACK,EAAE,CAAC;MAAC;MAAA5C,cAAA,GAAAY,CAAA;MAE/C,KAAK,MAAMiC,QAAQ,IAAIV,eAAe,EAAE;QACtC;QACA,MAAMW,UAAU;QAAA;QAAA,CAAA9C,cAAA,GAAAY,CAAA,QAAG,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG,2CAA2CsC,QAAQ,EAAE,CAAC;QAAC;QAAA7C,cAAA,GAAAY,CAAA;QAC9F,IAAIkC,UAAU,CAACP,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;UAAA;UAAAxC,cAAA,GAAAyC,CAAA;UAAAzC,cAAA,GAAAY,CAAA;UAAA;QAAQ,CAAC;QAAA;QAAA;UAAAZ,cAAA,GAAAyC,CAAA;QAAA;QAC3C,MAAMM,MAAM;QAAA;QAAA,CAAA/C,cAAA,GAAAY,CAAA,QAAG+B,QAAQ,CAACG,UAAU,CAACP,IAAI,CAAC,CAAC,CAAC,CAACK,EAAE,CAAC;;QAE9C;QAAA;QAAA5C,cAAA,GAAAY,CAAA;QACA,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG;AAC5B;AACA,oBAAoBmC,MAAM,KAAKK,MAAM;AACrC;AACA,SAAS,CAAC;MACJ;IACF;IAAC;IAAA/C,cAAA,GAAAY,CAAA;IAEDF,MAAM,CAACoB,IAAI,CAAC,mDAAmD,CAAC;;IAEhE;IACA,MAAMkB,aAAa;IAAA;IAAA,CAAAhD,cAAA,GAAAY,CAAA,QAAG,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG;AAC9C,4BAA4BJ,KAAK;AACjC,SAAS,CAAC;IAAC;IAAAH,cAAA,GAAAY,CAAA;IAEP,IAAIoC,aAAa,CAACT,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MAAA;MAAAxC,cAAA,GAAAyC,CAAA;MACnC,MAAMQ,cAAc;MAAA;MAAA,CAAAjD,cAAA,GAAAY,CAAA,QAAG,MAAMJ,MAAM,CAAC0C,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC;MACxD,MAAMC,MAAM;MAAA;MAAA,CAAAnD,cAAA,GAAAY,CAAA,QAAGH,MAAM,CAAC,CAAC,EAAC,CAAC;;MAEzB,MAAM2C,OAAO;MAAA;MAAA,CAAApD,cAAA,GAAAY,CAAA,QAAG,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG;AAC1C,8BAA8BJ,KAAK;AACnC,0BAA0BgD,MAAM,wCAAwCF,cAAc;AACtF;AACA,aAAa,CAAC;;MAER;MACA,MAAMI,SAAS;MAAA;MAAA,CAAArD,cAAA,GAAAY,CAAA,QAAG,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG;AAC5C,iCAAiCH,KAAK;AACtC,aAAa,CAAC;MAAC;MAAAJ,cAAA,GAAAY,CAAA;MAET,IAAIyC,SAAS,CAACd,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;QAAA;QAAAxC,cAAA,GAAAyC,CAAA;QAC7B,MAAMC,MAAM;QAAA;QAAA,CAAA1C,cAAA,GAAAY,CAAA,QAAG+B,QAAQ,CAACU,SAAS,CAACd,IAAI,CAAC,CAAC,CAAC,CAACK,EAAE,CAAC,EAAC,CAAC;;QAE/C;QAAA;QAAA5C,cAAA,GAAAY,CAAA;QACA,MAAMV,EAAE,CAAC8B,OAAO,CAACzB,GAAG;AAC5B;AACA,8BAA8B4C,MAAM,KAAKT,MAAM;AAC/C,iBAAiB,CAAC;QAAC;QAAA1C,cAAA,GAAAY,CAAA;QAEXF,MAAM,CAACoB,IAAI,CAAC,6CAA6C,CAAC;MAC5D,CAAC,MAAM;QAAA;QAAA9B,cAAA,GAAAyC,CAAA;QAAAzC,cAAA,GAAAY,CAAA;QACLF,MAAM,CAACoB,IAAI,CAAC,iDAAiD,CAAC;MAChE;IACF,CAAC,MAAM;MAAA;MAAA9B,cAAA,GAAAyC,CAAA;MAAAzC,cAAA,GAAAY,CAAA;MACLF,MAAM,CAACoB,IAAI,CAAC,4BAA4B,CAAC;IAC3C;IAAC;IAAA9B,cAAA,GAAAY,CAAA;IAEDF,MAAM,CAACoB,IAAI,CAAC,0CAA0C,CAAC;EACzD,CAAC,CAAC,OAAOwB,KAAK,EAAE;IAAA;IAAAtD,cAAA,GAAAY,CAAA;IACdF,MAAM,CAAC4C,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;EAChD;AACF,CAAC;;AAED;AAAA;AAAAtD,cAAA,GAAAY,CAAA;AACA,IAAI2C,MAAM,CAACC,IAAI,CAACC,GAAG,KAAK,UAAUC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE;EAAA;EAAA3D,cAAA,GAAAyC,CAAA;EAAAzC,cAAA,GAAAY,CAAA;EACnDgB,YAAY,CAAC,CAAC;AAChB,CAAC;AAAA;AAAA;EAAA5B,cAAA,GAAAyC,CAAA;AAAA;AAED,eAAeb,YAAY","ignoreList":[]}