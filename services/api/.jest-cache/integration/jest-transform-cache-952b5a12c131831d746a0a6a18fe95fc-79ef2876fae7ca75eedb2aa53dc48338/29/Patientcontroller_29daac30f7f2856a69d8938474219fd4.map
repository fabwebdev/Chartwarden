{"version":3,"names":["cov_1v95g6f5kz","actualCoverage","db","patients","eq","and","or","isNull","gte","lte","desc","asc","like","ilike","count","sql","logger","logAudit","hipaaLogger","ROLES","PatientController","index","request","reply","f","s","first_name","last_name","date_of_birth","status","medical_record_number","limit","b","offset","sort","order","include_deleted","query","conditions","isAdmin","user","role","ADMIN","push","deleted_at","PATIENT","patientId","id","totalCountResult","select","value","from","where","length","undefined","totalCount","parsedLimit","Math","min","parseInt","parsedOffset","sortColumn","createdAt","sortOrder","results","middle_name","mi","preferred_name","suffix","gender","marital_status","preferred_language","ssn","medicare_beneficiary_id","medicaid_id","email","primary_phone","emergency_contact_name","emergency_contact_phone","emergency_contact_relationship","oxygen_dependent","patient_consents","hipaa_received","veterans_status","dme_provider","patient_pharmacy_id","primary_diagnosis_id","race_ethnicity_id","liaison_primary_id","liaison_secondary_id","dnr_id","emergency_preparedness_level_id","patient_identifier_id","updatedAt","orderBy","code","success","data","total","pagination","hasMore","error","context","message","store","body","requiredFields","missingFields","filter","field","fields","map","replace","dob","Date","isNaN","getTime","test","existingSSN","existingMRN","safeData","result","insert","values","returning","dbOperation","header","show","params","update","_updatePatient","patch","mode","existing","clientUpdatedAt","serverUpdatedAt","toISOString","_id","_createdAt","_deletedAt","_updatedAt","set","destroy","hard","reason","security","deletedBy","delete","restore","restoredBy","search","q","trim","searchTerm","searchConditions"],"sources":["Patient.controller.js"],"sourcesContent":["import { db } from '../config/db.drizzle.js';\nimport { patients } from '../db/schemas/index.js';\nimport { eq, and, or, isNull, gte, lte, desc, asc, like, ilike, count, sql } from 'drizzle-orm';\n\nimport { logger } from '../utils/logger.js';\nimport { logAudit } from '../middleware/audit.middleware.js';\nimport { hipaaLogger } from '../utils/hipaaLogger.js';\nimport { ROLES } from '../config/rbac.js';\n\n/**\n * Patient Controller\n * HIPAA-compliant CRUD operations for patient medical records\n *\n * Features:\n * - Full CRUD operations with role-based access control\n * - Soft delete with deleted_at timestamp\n * - Optimistic locking via version/updated_at\n * - Comprehensive audit logging\n * - Pagination, filtering, and sorting\n * - Duplicate prevention (SSN, MRN)\n */\nclass PatientController {\n  /**\n   * Get all patients (with pagination and filters)\n   * GET /patients\n   *\n   * Query Parameters:\n   * - first_name: Filter by first name (partial match)\n   * - last_name: Filter by last name (partial match)\n   * - date_of_birth: Filter by exact date of birth\n   * - status: Filter by status (active, inactive, discharged, deceased)\n   * - medical_record_number: Filter by MRN\n   * - limit: Number of records to return (default 50, max 100)\n   * - offset: Number of records to skip for pagination\n   * - sort: Sort field (first_name, last_name, date_of_birth, createdAt)\n   * - order: Sort order (asc, desc - default desc)\n   * - include_deleted: Include soft-deleted records (admin only)\n   */\n  async index(request, reply) {\n    try {\n      const {\n        first_name,\n        last_name,\n        date_of_birth,\n        status,\n        medical_record_number,\n        limit = 50,\n        offset = 0,\n        sort = 'createdAt',\n        order = 'desc',\n        include_deleted = false\n      } = request.query;\n\n      // Build filter conditions\n      const conditions = [];\n\n      // By default, exclude soft-deleted records unless admin requests them\n      const isAdmin = request.user?.role === ROLES.ADMIN;\n      if (!include_deleted || !isAdmin) {\n        conditions.push(isNull(patients.deleted_at));\n      }\n\n      // Apply filters\n      if (first_name) {\n        conditions.push(ilike(patients.first_name, `%${first_name}%`));\n      }\n      if (last_name) {\n        conditions.push(ilike(patients.last_name, `%${last_name}%`));\n      }\n      if (date_of_birth) {\n        conditions.push(eq(patients.date_of_birth, date_of_birth));\n      }\n      if (status) {\n        conditions.push(eq(patients.status, status));\n      }\n      if (medical_record_number) {\n        conditions.push(eq(patients.medical_record_number, medical_record_number));\n      }\n\n      // Role-based data scoping for patients role (can only see own record)\n      if (request.user?.role === ROLES.PATIENT && request.user?.patientId) {\n        conditions.push(eq(patients.id, request.user.patientId));\n      }\n\n      // Get total count for pagination\n      const totalCountResult = await db\n        .select({ value: count() })\n        .from(patients)\n        .where(conditions.length > 0 ? and(...conditions) : undefined);\n      const totalCount = totalCountResult[0]?.value || 0;\n\n      // Validate and cap limit\n      const parsedLimit = Math.min(parseInt(limit) || 50, 100);\n      const parsedOffset = parseInt(offset) || 0;\n\n      // Determine sort column\n      let sortColumn;\n      switch (sort) {\n        case 'first_name':\n          sortColumn = patients.first_name;\n          break;\n        case 'last_name':\n          sortColumn = patients.last_name;\n          break;\n        case 'date_of_birth':\n          sortColumn = patients.date_of_birth;\n          break;\n        default:\n          sortColumn = patients.createdAt;\n      }\n      const sortOrder = order === 'asc' ? asc(sortColumn) : desc(sortColumn);\n\n      const results = await db.select({\n        id: patients.id,\n        first_name: patients.first_name,\n        last_name: patients.last_name,\n        middle_name: patients.middle_name,\n        mi: patients.mi,\n        preferred_name: patients.preferred_name,\n        suffix: patients.suffix,\n        date_of_birth: patients.date_of_birth,\n        gender: patients.gender,\n        marital_status: patients.marital_status,\n        preferred_language: patients.preferred_language,\n        ssn: patients.ssn,\n        medicare_beneficiary_id: patients.medicare_beneficiary_id,\n        medicaid_id: patients.medicaid_id,\n        medical_record_number: patients.medical_record_number,\n        email: patients.email,\n        primary_phone: patients.primary_phone,\n        emergency_contact_name: patients.emergency_contact_name,\n        emergency_contact_phone: patients.emergency_contact_phone,\n        emergency_contact_relationship: patients.emergency_contact_relationship,\n        oxygen_dependent: patients.oxygen_dependent,\n        patient_consents: patients.patient_consents,\n        hipaa_received: patients.hipaa_received,\n        veterans_status: patients.veterans_status,\n        dme_provider: patients.dme_provider,\n        patient_pharmacy_id: patients.patient_pharmacy_id,\n        primary_diagnosis_id: patients.primary_diagnosis_id,\n        race_ethnicity_id: patients.race_ethnicity_id,\n        liaison_primary_id: patients.liaison_primary_id,\n        liaison_secondary_id: patients.liaison_secondary_id,\n        dnr_id: patients.dnr_id,\n        emergency_preparedness_level_id: patients.emergency_preparedness_level_id,\n        patient_identifier_id: patients.patient_identifier_id,\n        status: patients.status,\n        deleted_at: patients.deleted_at,\n        createdAt: patients.createdAt,\n        updatedAt: patients.updatedAt\n      })\n        .from(patients)\n        .where(conditions.length > 0 ? and(...conditions) : undefined)\n        .orderBy(sortOrder)\n        .limit(parsedLimit)\n        .offset(parsedOffset);\n\n      // Log audit for PHI access\n      await logAudit(request, 'READ', 'patients', null);\n\n      reply.code(200);\n      return {\n        success: true,\n        data: results,\n        count: results.length,\n        total: totalCount,\n        pagination: {\n          limit: parsedLimit,\n          offset: parsedOffset,\n          hasMore: parsedOffset + results.length < totalCount\n        }\n      };\n    } catch (error) {\n      hipaaLogger.error('Error fetching patients', { context: 'PatientController.index', error });\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: 'INTERNAL_SERVER_ERROR',\n          message: 'Error fetching patients'\n        }\n      };\n    }\n  }\n\n  /**\n   * Create new patient\n   * POST /patients\n   *\n   * Required fields:\n   * - first_name: Patient's first name\n   * - last_name: Patient's last name\n   * - date_of_birth: Date of birth (must be in the past)\n   *\n   * Optional fields:\n   * - All other patient fields (contact info, identifiers, etc.)\n   */\n  async store(request, reply) {\n    try {\n      const data = request.body;\n\n      // Validate required fields\n      const requiredFields = ['first_name', 'last_name', 'date_of_birth'];\n      const missingFields = requiredFields.filter(field => !data[field]);\n\n      if (missingFields.length > 0) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Missing required fields',\n            fields: missingFields.map(field => ({\n              field,\n              message: `${field.replace(/_/g, ' ')} is required`\n            }))\n          }\n        };\n      }\n\n      // Validate date of birth is in the past\n      const dob = new Date(data.date_of_birth);\n      if (isNaN(dob.getTime())) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Invalid date format',\n            fields: [{ field: 'date_of_birth', message: 'Date of birth must be a valid date' }]\n          }\n        };\n      }\n      if (dob >= new Date()) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Invalid date of birth',\n            fields: [{ field: 'date_of_birth', message: 'Date of birth must be in the past' }]\n          }\n        };\n      }\n\n      // Validate email format if provided\n      if (data.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(data.email)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Invalid email format',\n            fields: [{ field: 'email', message: 'Please provide a valid email address' }]\n          }\n        };\n      }\n\n      // Validate phone format if provided (basic validation)\n      if (data.primary_phone && !/^[\\d\\s\\-\\+\\(\\)\\.]+$/.test(data.primary_phone)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Invalid phone format',\n            fields: [{ field: 'primary_phone', message: 'Please provide a valid phone number' }]\n          }\n        };\n      }\n\n      // Check for duplicate SSN if provided\n      if (data.ssn) {\n        const existingSSN = await db\n          .select({ id: patients.id })\n          .from(patients)\n          .where(and(\n            eq(patients.ssn, data.ssn),\n            isNull(patients.deleted_at)\n          ))\n          .limit(1);\n\n        if (existingSSN.length > 0) {\n          reply.code(409);\n          return {\n            success: false,\n            error: {\n              code: 'DUPLICATE_RECORD',\n              message: 'A patient with this SSN already exists',\n              fields: [{ field: 'ssn', message: 'SSN must be unique' }]\n            }\n          };\n        }\n      }\n\n      // Check for duplicate medical record number if provided\n      if (data.medical_record_number) {\n        const existingMRN = await db\n          .select({ id: patients.id })\n          .from(patients)\n          .where(and(\n            eq(patients.medical_record_number, data.medical_record_number),\n            isNull(patients.deleted_at)\n          ))\n          .limit(1);\n\n        if (existingMRN.length > 0) {\n          reply.code(409);\n          return {\n            success: false,\n            error: {\n              code: 'DUPLICATE_RECORD',\n              message: 'A patient with this medical record number already exists',\n              fields: [{ field: 'medical_record_number', message: 'Medical record number must be unique' }]\n            }\n          };\n        }\n      }\n\n      // Prevent immutable field injection\n      const { id, createdAt, deleted_at, ...safeData } = data;\n\n      const result = await db\n        .insert(patients)\n        .values({\n          ...safeData,\n          status: data.status || 'active',\n          createdAt: new Date(),\n          updatedAt: new Date()\n        })\n        .returning();\n\n      // Log audit for PHI creation\n      await logAudit(request, 'CREATE', 'patients', result[0].id);\n      hipaaLogger.dbOperation('create', 'patients', result[0].id);\n\n      reply.code(201).header('Location', `/api/patients/${result[0].id}`);\n      return {\n        success: true,\n        message: 'Patient created successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error creating patient', { context: 'PatientController.store', error });\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: 'INTERNAL_SERVER_ERROR',\n          message: 'Error creating patient'\n        }\n      };\n    }\n  }\n\n  /**\n   * Get patient by ID\n   * GET /patients/:id\n   */\n  async show(request, reply) {\n    try {\n      const { id } = request.params;\n\n      // Validate ID parameter\n      const patientId = parseInt(id);\n      if (isNaN(patientId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'INVALID_ID',\n            message: 'Invalid patient ID format'\n          }\n        };\n      }\n\n      // Role-based access check for patient role\n      if (request.user?.role === ROLES.PATIENT && request.user?.patientId !== patientId) {\n        reply.code(403);\n        return {\n          success: false,\n          error: {\n            code: 'ACCESS_DENIED',\n            message: 'You can only view your own records'\n          }\n        };\n      }\n\n      // Check if admin is requesting deleted records\n      const isAdmin = request.user?.role === ROLES.ADMIN;\n      const conditions = [eq(patients.id, patientId)];\n      if (!isAdmin) {\n        conditions.push(isNull(patients.deleted_at));\n      }\n\n      const result = await db\n        .select({\n          id: patients.id,\n          first_name: patients.first_name,\n          last_name: patients.last_name,\n          middle_name: patients.middle_name,\n          mi: patients.mi,\n          preferred_name: patients.preferred_name,\n          suffix: patients.suffix,\n          date_of_birth: patients.date_of_birth,\n          gender: patients.gender,\n          marital_status: patients.marital_status,\n          preferred_language: patients.preferred_language,\n          ssn: patients.ssn,\n          medicare_beneficiary_id: patients.medicare_beneficiary_id,\n          medicaid_id: patients.medicaid_id,\n          medical_record_number: patients.medical_record_number,\n          email: patients.email,\n          primary_phone: patients.primary_phone,\n          emergency_contact_name: patients.emergency_contact_name,\n          emergency_contact_phone: patients.emergency_contact_phone,\n          emergency_contact_relationship: patients.emergency_contact_relationship,\n          oxygen_dependent: patients.oxygen_dependent,\n          patient_consents: patients.patient_consents,\n          hipaa_received: patients.hipaa_received,\n          veterans_status: patients.veterans_status,\n          dme_provider: patients.dme_provider,\n          patient_pharmacy_id: patients.patient_pharmacy_id,\n          primary_diagnosis_id: patients.primary_diagnosis_id,\n          race_ethnicity_id: patients.race_ethnicity_id,\n          liaison_primary_id: patients.liaison_primary_id,\n          liaison_secondary_id: patients.liaison_secondary_id,\n          dnr_id: patients.dnr_id,\n          emergency_preparedness_level_id: patients.emergency_preparedness_level_id,\n          patient_identifier_id: patients.patient_identifier_id,\n          status: patients.status,\n          deleted_at: patients.deleted_at,\n          createdAt: patients.createdAt,\n          updatedAt: patients.updatedAt\n        })\n        .from(patients)\n        .where(and(...conditions))\n        .limit(1);\n\n      if (!result[0]) {\n        reply.code(404);\n        return {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'Patient not found'\n          }\n        };\n      }\n\n      // Log audit for PHI access\n      await logAudit(request, 'READ', 'patients', patientId);\n\n      reply.code(200);\n      return {\n        success: true,\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error fetching patient', { context: 'PatientController.show', error });\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: 'INTERNAL_SERVER_ERROR',\n          message: 'Error fetching patient'\n        }\n      };\n    }\n  }\n\n  /**\n   * Update patient by ID (full update - PUT)\n   * PUT /patients/:id\n   */\n  async update(request, reply) {\n    return this._updatePatient(request, reply, 'full');\n  }\n\n  /**\n   * Partial update patient by ID (PATCH)\n   * PATCH /patients/:id\n   */\n  async patch(request, reply) {\n    return this._updatePatient(request, reply, 'partial');\n  }\n\n  /**\n   * Internal method for updating patient\n   * @param {Object} request - Fastify request\n   * @param {Object} reply - Fastify reply\n   * @param {string} mode - 'full' for PUT, 'partial' for PATCH\n   */\n  async _updatePatient(request, reply, mode = 'partial') {\n    try {\n      const { id } = request.params;\n      const data = request.body;\n\n      // Validate ID parameter\n      const patientId = parseInt(id);\n      if (isNaN(patientId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'INVALID_ID',\n            message: 'Invalid patient ID format'\n          }\n        };\n      }\n\n      // For full update (PUT), validate required fields\n      if (mode === 'full') {\n        const requiredFields = ['first_name', 'last_name', 'date_of_birth'];\n        const missingFields = requiredFields.filter(field => !data[field]);\n        if (missingFields.length > 0) {\n          reply.code(400);\n          return {\n            success: false,\n            error: {\n              code: 'VALIDATION_ERROR',\n              message: 'Missing required fields for full update',\n              fields: missingFields.map(field => ({\n                field,\n                message: `${field.replace(/_/g, ' ')} is required`\n              }))\n            }\n          };\n        }\n      }\n\n      // Check if patient exists and is not deleted\n      const existing = await db\n        .select({\n          id: patients.id,\n          status: patients.status,\n          updatedAt: patients.updatedAt,\n          deleted_at: patients.deleted_at\n        })\n        .from(patients)\n        .where(eq(patients.id, patientId))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'Patient not found'\n          }\n        };\n      }\n\n      // Check if patient is soft-deleted (only admin can update deleted records)\n      if (existing[0].deleted_at && request.user?.role !== ROLES.ADMIN) {\n        reply.code(404);\n        return {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'Patient not found'\n          }\n        };\n      }\n\n      // Optimistic locking check\n      if (data.updatedAt) {\n        const clientUpdatedAt = new Date(data.updatedAt);\n        const serverUpdatedAt = new Date(existing[0].updatedAt);\n        if (clientUpdatedAt.getTime() !== serverUpdatedAt.getTime()) {\n          reply.code(409);\n          return {\n            success: false,\n            error: {\n              code: 'CONCURRENT_MODIFICATION',\n              message: 'This record has been modified by another user. Please refresh and try again.',\n              serverUpdatedAt: serverUpdatedAt.toISOString()\n            }\n          };\n        }\n      }\n\n      // Validate date of birth if provided\n      if (data.date_of_birth) {\n        const dob = new Date(data.date_of_birth);\n        if (isNaN(dob.getTime())) {\n          reply.code(400);\n          return {\n            success: false,\n            error: {\n              code: 'VALIDATION_ERROR',\n              message: 'Invalid date format',\n              fields: [{ field: 'date_of_birth', message: 'Date of birth must be a valid date' }]\n            }\n          };\n        }\n        if (dob >= new Date()) {\n          reply.code(400);\n          return {\n            success: false,\n            error: {\n              code: 'VALIDATION_ERROR',\n              message: 'Invalid date of birth',\n              fields: [{ field: 'date_of_birth', message: 'Date of birth must be in the past' }]\n            }\n          };\n        }\n      }\n\n      // Check for duplicate SSN if being updated\n      if (data.ssn && data.ssn !== existing[0].ssn) {\n        const existingSSN = await db\n          .select({ id: patients.id })\n          .from(patients)\n          .where(and(\n            eq(patients.ssn, data.ssn),\n            isNull(patients.deleted_at)\n          ))\n          .limit(1);\n\n        if (existingSSN.length > 0 && existingSSN[0].id !== patientId) {\n          reply.code(409);\n          return {\n            success: false,\n            error: {\n              code: 'DUPLICATE_RECORD',\n              message: 'A patient with this SSN already exists',\n              fields: [{ field: 'ssn', message: 'SSN must be unique' }]\n            }\n          };\n        }\n      }\n\n      // Check for duplicate MRN if being updated\n      if (data.medical_record_number && data.medical_record_number !== existing[0].medical_record_number) {\n        const existingMRN = await db\n          .select({ id: patients.id })\n          .from(patients)\n          .where(and(\n            eq(patients.medical_record_number, data.medical_record_number),\n            isNull(patients.deleted_at)\n          ))\n          .limit(1);\n\n        if (existingMRN.length > 0 && existingMRN[0].id !== patientId) {\n          reply.code(409);\n          return {\n            success: false,\n            error: {\n              code: 'DUPLICATE_RECORD',\n              message: 'A patient with this medical record number already exists',\n              fields: [{ field: 'medical_record_number', message: 'Medical record number must be unique' }]\n            }\n          };\n        }\n      }\n\n      // Remove immutable fields from update data\n      const {\n        id: _id,\n        createdAt: _createdAt,\n        deleted_at: _deletedAt,\n        updatedAt: _updatedAt,\n        ...safeData\n      } = data;\n\n      const result = await db\n        .update(patients)\n        .set({\n          ...safeData,\n          updatedAt: new Date()\n        })\n        .where(eq(patients.id, patientId))\n        .returning();\n\n      // Log audit for PHI update\n      await logAudit(request, 'UPDATE', 'patients', patientId);\n      hipaaLogger.dbOperation('update', 'patients', patientId);\n\n      reply.code(200);\n      return {\n        success: true,\n        message: 'Patient updated successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error updating patient', { context: 'PatientController.update', error });\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: 'INTERNAL_SERVER_ERROR',\n          message: 'Error updating patient'\n        }\n      };\n    }\n  }\n\n  /**\n   * Delete patient (soft delete)\n   * DELETE /patients/:id\n   *\n   * Implements soft delete by setting deleted_at timestamp.\n   * Only admins can perform hard deletes.\n   *\n   * Query Parameters:\n   * - hard: Set to 'true' to permanently delete (admin only)\n   * - reason: Deletion reason for audit trail\n   */\n  async destroy(request, reply) {\n    try {\n      const { id } = request.params;\n      const { hard = false, reason } = request.query;\n\n      // Validate ID parameter\n      const patientId = parseInt(id);\n      if (isNaN(patientId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'INVALID_ID',\n            message: 'Invalid patient ID format'\n          }\n        };\n      }\n\n      // Check if patient exists\n      const existing = await db\n        .select({\n          id: patients.id,\n          first_name: patients.first_name,\n          last_name: patients.last_name,\n          status: patients.status,\n          deleted_at: patients.deleted_at\n        })\n        .from(patients)\n        .where(eq(patients.id, patientId))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'Patient not found'\n          }\n        };\n      }\n\n      // Check if already soft-deleted\n      if (existing[0].deleted_at && hard !== 'true') {\n        reply.code(404);\n        return {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'Patient not found'\n          }\n        };\n      }\n\n      // Hard delete requires admin role\n      if (hard === 'true') {\n        if (request.user?.role !== ROLES.ADMIN) {\n          reply.code(403);\n          return {\n            success: false,\n            error: {\n              code: 'ACCESS_DENIED',\n              message: 'Only administrators can permanently delete patient records'\n            }\n          };\n        }\n\n        // Note: In HIPAA-compliant systems, hard delete should rarely be used\n        // For compliance, we log this security event\n        hipaaLogger.security('PATIENT_HARD_DELETE_ATTEMPT', {\n          patientId,\n          deletedBy: request.user?.id,\n          reason: reason || 'No reason provided'\n        });\n\n        // Perform hard delete\n        await db\n          .delete(patients)\n          .where(eq(patients.id, patientId));\n\n        await logAudit(request, 'HARD_DELETE', 'patients', patientId);\n\n        reply.code(204);\n        return;\n      }\n\n      // Soft delete\n      await db\n        .update(patients)\n        .set({\n          deleted_at: new Date(),\n          updatedAt: new Date()\n        })\n        .where(eq(patients.id, patientId));\n\n      // Log audit for PHI deletion\n      await logAudit(request, 'DELETE', 'patients', patientId);\n      hipaaLogger.dbOperation('delete', 'patients', patientId);\n      hipaaLogger.security('PATIENT_SOFT_DELETE', {\n        patientId,\n        deletedBy: request.user?.id,\n        reason: reason || 'No reason provided'\n      });\n\n      reply.code(200);\n      return {\n        success: true,\n        message: 'Patient deleted successfully'\n      };\n    } catch (error) {\n      hipaaLogger.error('Error deleting patient', { context: 'PatientController.destroy', error });\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: 'INTERNAL_SERVER_ERROR',\n          message: 'Error deleting patient'\n        }\n      };\n    }\n  }\n\n  /**\n   * Restore soft-deleted patient (admin only)\n   * POST /patients/:id/restore\n   */\n  async restore(request, reply) {\n    try {\n      const { id } = request.params;\n\n      // Validate ID parameter\n      const patientId = parseInt(id);\n      if (isNaN(patientId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'INVALID_ID',\n            message: 'Invalid patient ID format'\n          }\n        };\n      }\n\n      // Only admin can restore\n      if (request.user?.role !== ROLES.ADMIN) {\n        reply.code(403);\n        return {\n          success: false,\n          error: {\n            code: 'ACCESS_DENIED',\n            message: 'Only administrators can restore deleted patient records'\n          }\n        };\n      }\n\n      // Check if patient exists and is deleted\n      const existing = await db\n        .select({\n          id: patients.id,\n          deleted_at: patients.deleted_at\n        })\n        .from(patients)\n        .where(eq(patients.id, patientId))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          success: false,\n          error: {\n            code: 'NOT_FOUND',\n            message: 'Patient not found'\n          }\n        };\n      }\n\n      if (!existing[0].deleted_at) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'NOT_DELETED',\n            message: 'Patient is not deleted'\n          }\n        };\n      }\n\n      // Restore patient\n      const result = await db\n        .update(patients)\n        .set({\n          deleted_at: null,\n          updatedAt: new Date()\n        })\n        .where(eq(patients.id, patientId))\n        .returning();\n\n      // Log audit for restore\n      await logAudit(request, 'RESTORE', 'patients', patientId);\n      hipaaLogger.security('PATIENT_RESTORED', {\n        patientId,\n        restoredBy: request.user?.id\n      });\n\n      reply.code(200);\n      return {\n        success: true,\n        message: 'Patient restored successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      hipaaLogger.error('Error restoring patient', { context: 'PatientController.restore', error });\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: 'INTERNAL_SERVER_ERROR',\n          message: 'Error restoring patient'\n        }\n      };\n    }\n  }\n\n  /**\n   * Search patients\n   * GET /patients/search\n   *\n   * Query Parameters:\n   * - q: Search query (searches first_name, last_name, MRN, email)\n   * - limit: Number of records to return (default 20, max 50)\n   * - offset: Number of records to skip\n   */\n  async search(request, reply) {\n    try {\n      const { q, limit = 20, offset = 0 } = request.query;\n\n      if (!q || q.trim().length < 2) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Search query must be at least 2 characters'\n          }\n        };\n      }\n\n      const searchTerm = `%${q.trim()}%`;\n      const parsedLimit = Math.min(parseInt(limit) || 20, 50);\n      const parsedOffset = parseInt(offset) || 0;\n\n      // Build search conditions\n      const searchConditions = or(\n        ilike(patients.first_name, searchTerm),\n        ilike(patients.last_name, searchTerm),\n        ilike(patients.medical_record_number, searchTerm),\n        ilike(patients.email, searchTerm)\n      );\n\n      // Role-based filtering\n      const conditions = [\n        searchConditions,\n        isNull(patients.deleted_at)\n      ];\n\n      // Patients can only search for themselves\n      if (request.user?.role === ROLES.PATIENT && request.user?.patientId) {\n        conditions.push(eq(patients.id, request.user.patientId));\n      }\n\n      const results = await db\n        .select({\n          id: patients.id,\n          first_name: patients.first_name,\n          last_name: patients.last_name,\n          date_of_birth: patients.date_of_birth,\n          medical_record_number: patients.medical_record_number,\n          email: patients.email,\n          primary_phone: patients.primary_phone,\n          status: patients.status\n        })\n        .from(patients)\n        .where(and(...conditions))\n        .limit(parsedLimit)\n        .offset(parsedOffset);\n\n      // Log audit for PHI search\n      await logAudit(request, 'SEARCH', 'patients', null);\n\n      reply.code(200);\n      return {\n        success: true,\n        data: results,\n        count: results.length\n      };\n    } catch (error) {\n      hipaaLogger.error('Error searching patients', { context: 'PatientController.search', error });\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: 'INTERNAL_SERVER_ERROR',\n          message: 'Error searching patients'\n        }\n      };\n    }\n  }\n}\n\nexport default new PatientController();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}