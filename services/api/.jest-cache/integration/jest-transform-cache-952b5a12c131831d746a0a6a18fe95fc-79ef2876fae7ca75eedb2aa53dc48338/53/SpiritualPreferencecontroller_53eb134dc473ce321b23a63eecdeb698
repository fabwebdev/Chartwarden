37579410048bd000f2b80ba6a9d7c652
/* istanbul ignore next */
function cov_1s62bxqtph() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/SpiritualPreference.controller.js";
  var hash = "4b4880d395391a7e8692a8376d69b9b2e8005773";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/SpiritualPreference.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 9,
          column: 8
        },
        end: {
          line: 28,
          column: 9
        }
      },
      "1": {
        start: {
          line: 10,
          column: 41
        },
        end: {
          line: 18,
          column: 41
        }
      },
      "2": {
        start: {
          line: 19,
          column: 12
        },
        end: {
          line: 19,
          column: 28
        }
      },
      "3": {
        start: {
          line: 20,
          column: 12
        },
        end: {
          line: 20,
          column: 40
        }
      },
      "4": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 72
        }
      },
      "5": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 23,
          column: 28
        }
      },
      "6": {
        start: {
          line: 24,
          column: 12
        },
        end: {
          line: 27,
          column: 14
        }
      },
      "7": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 87,
          column: 9
        }
      },
      "8": {
        start: {
          line: 35,
          column: 16
        },
        end: {
          line: 35,
          column: 28
        }
      },
      "9": {
        start: {
          line: 38,
          column: 12
        },
        end: {
          line: 43,
          column: 13
        }
      },
      "10": {
        start: {
          line: 39,
          column: 16
        },
        end: {
          line: 39,
          column: 32
        }
      },
      "11": {
        start: {
          line: 40,
          column: 12
        },
        end: {
          line: 42,
          column: 18
        }
      },
      "12": {
        start: {
          line: 46,
          column: 40
        },
        end: {
          line: 48,
          column: 105
        }
      },
      "13": {
        start: {
          line: 49,
          column: 39
        },
        end: {
          line: 49,
          column: 61
        }
      },
      "14": {
        start: {
          line: 52,
          column: 24
        },
        end: {
          line: 52,
          column: 34
        }
      },
      "15": {
        start: {
          line: 53,
          column: 44
        },
        end: {
          line: 59,
          column: 13
        }
      },
      "16": {
        start: {
          line: 62,
          column: 12
        },
        end: {
          line: 73,
          column: 13
        }
      },
      "17": {
        start: {
          line: 64,
          column: 16
        },
        end: {
          line: 64,
          column: 56
        }
      },
      "18": {
        start: {
          line: 65,
          column: 16
        },
        end: {
          line: 65,
          column: 159
        }
      },
      "19": {
        start: {
          line: 66,
          column: 16
        },
        end: {
          line: 66,
          column: 35
        }
      },
      "20": {
        start: {
          line: 69,
          column: 16
        },
        end: {
          line: 69,
          column: 56
        }
      },
      "21": {
        start: {
          line: 70,
          column: 16
        },
        end: {
          line: 70,
          column: 56
        }
      },
      "22": {
        start: {
          line: 71,
          column: 16
        },
        end: {
          line: 71,
          column: 107
        }
      },
      "23": {
        start: {
          line: 72,
          column: 16
        },
        end: {
          line: 72,
          column: 35
        }
      },
      "24": {
        start: {
          line: 75,
          column: 12
        },
        end: {
          line: 75,
          column: 28
        }
      },
      "25": {
        start: {
          line: 76,
          column: 12
        },
        end: {
          line: 79,
          column: 14
        }
      },
      "26": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 81,
          column: 69
        }
      },
      "27": {
        start: {
          line: 82,
          column: 12
        },
        end: {
          line: 82,
          column: 28
        }
      },
      "28": {
        start: {
          line: 83,
          column: 12
        },
        end: {
          line: 86,
          column: 14
        }
      },
      "29": {
        start: {
          line: 93,
          column: 8
        },
        end: {
          line: 130,
          column: 9
        }
      },
      "30": {
        start: {
          line: 94,
          column: 27
        },
        end: {
          line: 94,
          column: 41
        }
      },
      "31": {
        start: {
          line: 96,
          column: 41
        },
        end: {
          line: 104,
          column: 97
        }
      },
      "32": {
        start: {
          line: 105,
          column: 46
        },
        end: {
          line: 105,
          column: 69
        }
      },
      "33": {
        start: {
          line: 107,
          column: 12
        },
        end: {
          line: 119,
          column: 13
        }
      },
      "34": {
        start: {
          line: 109,
          column: 16
        },
        end: {
          line: 109,
          column: 32
        }
      },
      "35": {
        start: {
          line: 110,
          column: 16
        },
        end: {
          line: 118,
          column: 18
        }
      },
      "36": {
        start: {
          line: 121,
          column: 12
        },
        end: {
          line: 121,
          column: 28
        }
      },
      "37": {
        start: {
          line: 122,
          column: 12
        },
        end: {
          line: 122,
          column: 45
        }
      },
      "38": {
        start: {
          line: 124,
          column: 12
        },
        end: {
          line: 124,
          column: 71
        }
      },
      "39": {
        start: {
          line: 125,
          column: 12
        },
        end: {
          line: 125,
          column: 28
        }
      },
      "40": {
        start: {
          line: 126,
          column: 12
        },
        end: {
          line: 129,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 8,
            column: 4
          },
          end: {
            line: 8,
            column: 5
          }
        },
        loc: {
          start: {
            line: 8,
            column: 32
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 8
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 32,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        loc: {
          start: {
            line: 32,
            column: 32
          },
          end: {
            line: 88,
            column: 5
          }
        },
        line: 32
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 92,
            column: 4
          },
          end: {
            line: 92,
            column: 5
          }
        },
        loc: {
          start: {
            line: 92,
            column: 31
          },
          end: {
            line: 131,
            column: 5
          }
        },
        line: 92
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 38,
            column: 12
          },
          end: {
            line: 43,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 38,
            column: 12
          },
          end: {
            line: 43,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 38
      },
      "1": {
        loc: {
          start: {
            line: 55,
            column: 35
          },
          end: {
            line: 55,
            column: 60
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 55,
            column: 35
          },
          end: {
            line: 55,
            column: 52
          }
        }, {
          start: {
            line: 55,
            column: 56
          },
          end: {
            line: 55,
            column: 60
          }
        }],
        line: 55
      },
      "2": {
        loc: {
          start: {
            line: 57,
            column: 20
          },
          end: {
            line: 57,
            column: 70
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 57,
            column: 50
          },
          end: {
            line: 57,
            column: 63
          }
        }, {
          start: {
            line: 57,
            column: 66
          },
          end: {
            line: 57,
            column: 70
          }
        }],
        line: 57
      },
      "3": {
        loc: {
          start: {
            line: 58,
            column: 26
          },
          end: {
            line: 58,
            column: 42
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 58,
            column: 26
          },
          end: {
            line: 58,
            column: 34
          }
        }, {
          start: {
            line: 58,
            column: 38
          },
          end: {
            line: 58,
            column: 42
          }
        }],
        line: 58
      },
      "4": {
        loc: {
          start: {
            line: 62,
            column: 12
          },
          end: {
            line: 73,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 62,
            column: 12
          },
          end: {
            line: 73,
            column: 13
          }
        }, {
          start: {
            line: 67,
            column: 19
          },
          end: {
            line: 73,
            column: 13
          }
        }],
        line: 62
      },
      "5": {
        loc: {
          start: {
            line: 107,
            column: 12
          },
          end: {
            line: 119,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 107,
            column: 12
          },
          end: {
            line: 119,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 107
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "4b4880d395391a7e8692a8376d69b9b2e8005773"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1s62bxqtph = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1s62bxqtph();
import { db } from "../../config/db.drizzle.js";
import { spiritual_preference } from "../../db/schemas/spiritualPreference.schema.js";
import { eq } from "drizzle-orm";
import { logger } from '../../utils/logger.js';
class SpiritualPreferenceController {
  // Get all spiritual preferences
  async index(request, reply) {
    /* istanbul ignore next */
    cov_1s62bxqtph().f[0]++;
    cov_1s62bxqtph().s[0]++;
    try {
      const spiritualPreferences =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[1]++, await db.select({
        id: spiritual_preference.id,
        patient_id: spiritual_preference.patient_id,
        patient_spiritual: spiritual_preference.patient_spiritual,
        not_religious: spiritual_preference.not_religious,
        comments: spiritual_preference.comments,
        createdAt: spiritual_preference.createdAt,
        updatedAt: spiritual_preference.updatedAt
      }).from(spiritual_preference));
      /* istanbul ignore next */
      cov_1s62bxqtph().s[2]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[3]++;
      return spiritualPreferences;
    } catch (error) {
      /* istanbul ignore next */
      cov_1s62bxqtph().s[4]++;
      logger.error("Error fetching spiritual preferences:", error);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[5]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[6]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Store or update spiritual preference
  async store(request, reply) {
    /* istanbul ignore next */
    cov_1s62bxqtph().f[1]++;
    cov_1s62bxqtph().s[7]++;
    try {
      const {
        patient_id,
        patient_spiritual,
        not_religious,
        comments
      } =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[8]++, request.body);

      // Validate required fields
      /* istanbul ignore next */
      cov_1s62bxqtph().s[9]++;
      if (!patient_id) {
        /* istanbul ignore next */
        cov_1s62bxqtph().b[0][0]++;
        cov_1s62bxqtph().s[10]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_1s62bxqtph().s[11]++;
        return {
          message: "Patient ID is required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_1s62bxqtph().b[0][1]++;
      }

      // Check if spiritual preference already exists for this patient
      const existingPreferences =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[12]++, await db.select({
        id: spiritual_preference.id
      }).from(spiritual_preference).where(eq(spiritual_preference.patient_id, patient_id)).limit(1));
      const existingPreference =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[13]++, existingPreferences[0]);

      // Prepare data for update or create
      const now =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[14]++, new Date());
      const spiritualPreferenceData =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[15]++, {
        patient_id: patient_id,
        patient_spiritual:
        /* istanbul ignore next */
        (cov_1s62bxqtph().b[1][0]++, patient_spiritual) ||
        /* istanbul ignore next */
        (cov_1s62bxqtph().b[1][1]++, null),
        not_religious: not_religious !== undefined ?
        /* istanbul ignore next */
        (cov_1s62bxqtph().b[2][0]++, not_religious) :
        /* istanbul ignore next */
        (cov_1s62bxqtph().b[2][1]++, null),
        comments:
        /* istanbul ignore next */
        (cov_1s62bxqtph().b[3][0]++, comments) ||
        /* istanbul ignore next */
        (cov_1s62bxqtph().b[3][1]++, null)
      });
      let result;
      /* istanbul ignore next */
      cov_1s62bxqtph().s[16]++;
      if (existingPreference) {
        /* istanbul ignore next */
        cov_1s62bxqtph().b[4][0]++;
        cov_1s62bxqtph().s[17]++;
        // Update existing spiritual preference
        spiritualPreferenceData.updatedAt = now;
        /* istanbul ignore next */
        cov_1s62bxqtph().s[18]++;
        result = await db.update(spiritual_preference).set(spiritualPreferenceData).where(eq(spiritual_preference.patient_id, patient_id)).returning();
        /* istanbul ignore next */
        cov_1s62bxqtph().s[19]++;
        result = result[0];
      } else {
        /* istanbul ignore next */
        cov_1s62bxqtph().b[4][1]++;
        cov_1s62bxqtph().s[20]++;
        // Create new spiritual preference
        spiritualPreferenceData.createdAt = now;
        /* istanbul ignore next */
        cov_1s62bxqtph().s[21]++;
        spiritualPreferenceData.updatedAt = now;
        /* istanbul ignore next */
        cov_1s62bxqtph().s[22]++;
        result = await db.insert(spiritual_preference).values(spiritualPreferenceData).returning();
        /* istanbul ignore next */
        cov_1s62bxqtph().s[23]++;
        result = result[0];
      }
      /* istanbul ignore next */
      cov_1s62bxqtph().s[24]++;
      reply.code(201);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[25]++;
      return {
        message: "Spiritual Preference créé ou mis à jour avec succès.",
        data: result
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1s62bxqtph().s[26]++;
      logger.error("Error saving spiritual preference:", error);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[27]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[28]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Show spiritual preference for a specific patient
  // Returns empty data if no preference exists (to allow frontend to render form)
  async show(request, reply) {
    /* istanbul ignore next */
    cov_1s62bxqtph().f[2]++;
    cov_1s62bxqtph().s[29]++;
    try {
      const {
        id
      } =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[30]++, request.params);
      const spiritualPreferences =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[31]++, await db.select({
        id: spiritual_preference.id,
        patient_id: spiritual_preference.patient_id,
        patient_spiritual: spiritual_preference.patient_spiritual,
        not_religious: spiritual_preference.not_religious,
        comments: spiritual_preference.comments,
        createdAt: spiritual_preference.createdAt,
        updatedAt: spiritual_preference.updatedAt
      }).from(spiritual_preference).where(eq(spiritual_preference.patient_id, id)).limit(1));
      const spiritualPreferenceRecord =
      /* istanbul ignore next */
      (cov_1s62bxqtph().s[32]++, spiritualPreferences[0]);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[33]++;
      if (!spiritualPreferenceRecord) {
        /* istanbul ignore next */
        cov_1s62bxqtph().b[5][0]++;
        cov_1s62bxqtph().s[34]++;
        // Return 200 with empty data instead of 404, so frontend can render form
        reply.code(200);
        /* istanbul ignore next */
        cov_1s62bxqtph().s[35]++;
        return {
          id: null,
          patient_id: parseInt(id),
          patient_spiritual: null,
          not_religious: null,
          comments: null,
          createdAt: null,
          updatedAt: null
        };
      } else
      /* istanbul ignore next */
      {
        cov_1s62bxqtph().b[5][1]++;
      }
      cov_1s62bxqtph().s[36]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[37]++;
      return spiritualPreferenceRecord;
    } catch (error) {
      /* istanbul ignore next */
      cov_1s62bxqtph().s[38]++;
      logger.error("Error fetching spiritual preference:", error);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[39]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1s62bxqtph().s[40]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }
}
export default new SpiritualPreferenceController();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXM2MmJ4cXRwaCIsImFjdHVhbENvdmVyYWdlIiwiZGIiLCJzcGlyaXR1YWxfcHJlZmVyZW5jZSIsImVxIiwibG9nZ2VyIiwiU3Bpcml0dWFsUHJlZmVyZW5jZUNvbnRyb2xsZXIiLCJpbmRleCIsInJlcXVlc3QiLCJyZXBseSIsImYiLCJzIiwic3Bpcml0dWFsUHJlZmVyZW5jZXMiLCJzZWxlY3QiLCJpZCIsInBhdGllbnRfaWQiLCJwYXRpZW50X3NwaXJpdHVhbCIsIm5vdF9yZWxpZ2lvdXMiLCJjb21tZW50cyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImZyb20iLCJjb2RlIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RvcmUiLCJib2R5IiwiYiIsImV4aXN0aW5nUHJlZmVyZW5jZXMiLCJ3aGVyZSIsImxpbWl0IiwiZXhpc3RpbmdQcmVmZXJlbmNlIiwibm93IiwiRGF0ZSIsInNwaXJpdHVhbFByZWZlcmVuY2VEYXRhIiwidW5kZWZpbmVkIiwicmVzdWx0IiwidXBkYXRlIiwic2V0IiwicmV0dXJuaW5nIiwiaW5zZXJ0IiwidmFsdWVzIiwiZGF0YSIsInNob3ciLCJwYXJhbXMiLCJzcGlyaXR1YWxQcmVmZXJlbmNlUmVjb3JkIiwicGFyc2VJbnQiXSwic291cmNlcyI6WyJTcGlyaXR1YWxQcmVmZXJlbmNlLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2RiLmRyaXp6bGUuanNcIjtcbmltcG9ydCB7IHNwaXJpdHVhbF9wcmVmZXJlbmNlIH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvc3Bpcml0dWFsUHJlZmVyZW5jZS5zY2hlbWEuanNcIjtcbmltcG9ydCB7IGVxIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5jbGFzcyBTcGlyaXR1YWxQcmVmZXJlbmNlQ29udHJvbGxlciB7XG4gICAgLy8gR2V0IGFsbCBzcGlyaXR1YWwgcHJlZmVyZW5jZXNcbiAgICBhc3luYyBpbmRleChyZXF1ZXN0LCByZXBseSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3Bpcml0dWFsUHJlZmVyZW5jZXMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBzcGlyaXR1YWxfcHJlZmVyZW5jZS5pZCxcbiAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBzcGlyaXR1YWxfcHJlZmVyZW5jZS5wYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgIHBhdGllbnRfc3Bpcml0dWFsOiBzcGlyaXR1YWxfcHJlZmVyZW5jZS5wYXRpZW50X3NwaXJpdHVhbCxcbiAgICAgICAgICAgICAgICBub3RfcmVsaWdpb3VzOiBzcGlyaXR1YWxfcHJlZmVyZW5jZS5ub3RfcmVsaWdpb3VzLFxuICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBzcGlyaXR1YWxfcHJlZmVyZW5jZS5jb21tZW50cyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHNwaXJpdHVhbF9wcmVmZXJlbmNlLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IHNwaXJpdHVhbF9wcmVmZXJlbmNlLnVwZGF0ZWRBdFxuICAgICAgICAgICAgfSkuZnJvbShzcGlyaXR1YWxfcHJlZmVyZW5jZSk7XG4gICAgICAgICAgICByZXBseS5jb2RlKDIwMCk7XG4gICAgICAgICAgICByZXR1cm4gc3Bpcml0dWFsUHJlZmVyZW5jZXM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzcGlyaXR1YWwgcHJlZmVyZW5jZXM6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0b3JlIG9yIHVwZGF0ZSBzcGlyaXR1YWwgcHJlZmVyZW5jZVxuICAgIGFzeW5jIHN0b3JlKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhdGllbnRfaWQsIHBhdGllbnRfc3Bpcml0dWFsLCBub3RfcmVsaWdpb3VzLCBjb21tZW50cyB9ID1cbiAgICAgICAgICAgICAgICByZXF1ZXN0LmJvZHk7XG5cbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgICAgICAgaWYgKCFwYXRpZW50X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJQYXRpZW50IElEIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3Bpcml0dWFsIHByZWZlcmVuY2UgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgcGF0aWVudFxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdQcmVmZXJlbmNlcyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgaWQ6IHNwaXJpdHVhbF9wcmVmZXJlbmNlLmlkXG4gICAgICAgICAgICB9KS5mcm9tKHNwaXJpdHVhbF9wcmVmZXJlbmNlKS53aGVyZShlcShzcGlyaXR1YWxfcHJlZmVyZW5jZS5wYXRpZW50X2lkLCBwYXRpZW50X2lkKSkubGltaXQoMSk7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1ByZWZlcmVuY2UgPSBleGlzdGluZ1ByZWZlcmVuY2VzWzBdO1xuXG4gICAgICAgICAgICAvLyBQcmVwYXJlIGRhdGEgZm9yIHVwZGF0ZSBvciBjcmVhdGVcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBjb25zdCBzcGlyaXR1YWxQcmVmZXJlbmNlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBwYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgIHBhdGllbnRfc3Bpcml0dWFsOiBwYXRpZW50X3NwaXJpdHVhbCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIG5vdF9yZWxpZ2lvdXM6XG4gICAgICAgICAgICAgICAgICAgIG5vdF9yZWxpZ2lvdXMgIT09IHVuZGVmaW5lZCA/IG5vdF9yZWxpZ2lvdXMgOiBudWxsLFxuICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBjb21tZW50cyB8fCBudWxsLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1ByZWZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZXhpc3Rpbmcgc3Bpcml0dWFsIHByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICBzcGlyaXR1YWxQcmVmZXJlbmNlRGF0YS51cGRhdGVkQXQgPSBub3c7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGIudXBkYXRlKHNwaXJpdHVhbF9wcmVmZXJlbmNlKS5zZXQoc3Bpcml0dWFsUHJlZmVyZW5jZURhdGEpLndoZXJlKGVxKHNwaXJpdHVhbF9wcmVmZXJlbmNlLnBhdGllbnRfaWQsIHBhdGllbnRfaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgc3Bpcml0dWFsIHByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICBzcGlyaXR1YWxQcmVmZXJlbmNlRGF0YS5jcmVhdGVkQXQgPSBub3c7XG4gICAgICAgICAgICAgICAgc3Bpcml0dWFsUHJlZmVyZW5jZURhdGEudXBkYXRlZEF0ID0gbm93O1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLmluc2VydChzcGlyaXR1YWxfcHJlZmVyZW5jZSkudmFsdWVzKHNwaXJpdHVhbFByZWZlcmVuY2VEYXRhKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcGx5LmNvZGUoMjAxKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTcGlyaXR1YWwgUHJlZmVyZW5jZSBjcsOpw6kgb3UgbWlzIMOgIGpvdXIgYXZlYyBzdWNjw6hzLlwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBzYXZpbmcgc3Bpcml0dWFsIHByZWZlcmVuY2U6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNob3cgc3Bpcml0dWFsIHByZWZlcmVuY2UgZm9yIGEgc3BlY2lmaWMgcGF0aWVudFxuICAgIC8vIFJldHVybnMgZW1wdHkgZGF0YSBpZiBubyBwcmVmZXJlbmNlIGV4aXN0cyAodG8gYWxsb3cgZnJvbnRlbmQgdG8gcmVuZGVyIGZvcm0pXG4gICAgYXN5bmMgc2hvdyhyZXF1ZXN0LCByZXBseSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBpZCB9ID0gcmVxdWVzdC5wYXJhbXM7XG5cbiAgICAgICAgICAgIGNvbnN0IHNwaXJpdHVhbFByZWZlcmVuY2VzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICBpZDogc3Bpcml0dWFsX3ByZWZlcmVuY2UuaWQsXG4gICAgICAgICAgICAgICAgcGF0aWVudF9pZDogc3Bpcml0dWFsX3ByZWZlcmVuY2UucGF0aWVudF9pZCxcbiAgICAgICAgICAgICAgICBwYXRpZW50X3NwaXJpdHVhbDogc3Bpcml0dWFsX3ByZWZlcmVuY2UucGF0aWVudF9zcGlyaXR1YWwsXG4gICAgICAgICAgICAgICAgbm90X3JlbGlnaW91czogc3Bpcml0dWFsX3ByZWZlcmVuY2Uubm90X3JlbGlnaW91cyxcbiAgICAgICAgICAgICAgICBjb21tZW50czogc3Bpcml0dWFsX3ByZWZlcmVuY2UuY29tbWVudHMsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBzcGlyaXR1YWxfcHJlZmVyZW5jZS5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBzcGlyaXR1YWxfcHJlZmVyZW5jZS51cGRhdGVkQXRcbiAgICAgICAgICAgIH0pLmZyb20oc3Bpcml0dWFsX3ByZWZlcmVuY2UpLndoZXJlKGVxKHNwaXJpdHVhbF9wcmVmZXJlbmNlLnBhdGllbnRfaWQsIGlkKSkubGltaXQoMSk7XG4gICAgICAgICAgICBjb25zdCBzcGlyaXR1YWxQcmVmZXJlbmNlUmVjb3JkID0gc3Bpcml0dWFsUHJlZmVyZW5jZXNbMF07XG5cbiAgICAgICAgICAgIGlmICghc3Bpcml0dWFsUHJlZmVyZW5jZVJlY29yZCkge1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiAyMDAgd2l0aCBlbXB0eSBkYXRhIGluc3RlYWQgb2YgNDA0LCBzbyBmcm9udGVuZCBjYW4gcmVuZGVyIGZvcm1cbiAgICAgICAgICAgICAgICByZXBseS5jb2RlKDIwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHBhdGllbnRfaWQ6IHBhcnNlSW50KGlkKSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aWVudF9zcGlyaXR1YWw6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG5vdF9yZWxpZ2lvdXM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXBseS5jb2RlKDIwMCk7XG4gICAgICAgICAgICByZXR1cm4gc3Bpcml0dWFsUHJlZmVyZW5jZVJlY29yZDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZldGNoaW5nIHNwaXJpdHVhbCBwcmVmZXJlbmNlOlwiLCBlcnJvcilcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBTcGlyaXR1YWxQcmVmZXJlbmNlQ29udHJvbGxlcigpOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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