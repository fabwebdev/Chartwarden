{"version":3,"names":["cov_1k3e614kme","actualCoverage","controller","PERMISSIONS","requireAnyPermission","cbsaRoutes","fastify","options","f","s","get","preHandler","VIEW_CLINICAL_NOTES","autocomplete","lookupByZip","post","CREATE_CLINICAL_NOTES","autoPopulateClaim","validateClaim","VIEW_REPORTS","getAllCodes","MANAGE_SYSTEM","bulkImport","clearCache","getCacheStats"],"sources":["cbsa.routes.js"],"sourcesContent":["import controller from '../controllers/CBSA.controller.js';\nimport { PERMISSIONS } from '../config/rbac.js';\nimport { requireAnyPermission } from '../middleware/rbac.middleware.js';\n\n/**\n * CBSA Routes\n * Phase 2A - Electronic Submission Features\n *\n * CBSA (Core Based Statistical Area) tracking for UB-04 Value Codes 61 and G8\n * CMS Requirement: Track CBSA for routine/continuous home care and inpatient care\n */\nexport default async function cbsaRoutes(fastify, options) {\n\n  // Autocomplete search for CBSA titles/cities\n  fastify.get('/cbsa/autocomplete', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_CLINICAL_NOTES)]\n  }, controller.autocomplete);\n\n  // Lookup CBSA by ZIP code\n  fastify.get('/cbsa/lookup/:zip', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_CLINICAL_NOTES)]\n  }, controller.lookupByZip);\n\n  // Auto-populate CBSA on claim service lines\n  fastify.post('/cbsa/auto-populate/:claimId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.CREATE_CLINICAL_NOTES)]\n  }, controller.autoPopulateClaim);\n\n  // Validate CBSA completeness on claim\n  fastify.get('/cbsa/validate/:claimId', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_CLINICAL_NOTES)]\n  }, controller.validateClaim);\n\n  // Get all CBSA codes (paginated)\n  fastify.get('/cbsa/codes', {\n    preHandler: [requireAnyPermission(PERMISSIONS.VIEW_REPORTS)]\n  }, controller.getAllCodes);\n\n  // Bulk import CBSA codes (admin only)\n  fastify.post('/cbsa/bulk-import', {\n    preHandler: [requireAnyPermission(PERMISSIONS.MANAGE_SYSTEM)]\n  }, controller.bulkImport);\n\n  // Clear CBSA cache (admin only)\n  fastify.post('/cbsa/clear-cache', {\n    preHandler: [requireAnyPermission(PERMISSIONS.MANAGE_SYSTEM)]\n  }, controller.clearCache);\n\n  // Get CBSA cache statistics (admin only)\n  fastify.get('/cbsa/cache-stats', {\n    preHandler: [requireAnyPermission(PERMISSIONS.MANAGE_SYSTEM)]\n  }, controller.getCacheStats);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,OAAOE,UAAU,MAAM,mCAAmC;AAC1D,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,oBAAoB,QAAQ,kCAAkC;;AAEvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAeC,UAAUA,CAACC,OAAO,EAAEC,OAAO,EAAE;EAAA;EAAAP,cAAA,GAAAQ,CAAA;EAAAR,cAAA,GAAAS,CAAA;EAEzD;EACAH,OAAO,CAACI,GAAG,CAAC,oBAAoB,EAAE;IAChCC,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACS,mBAAmB,CAAC;EACpE,CAAC,EAAEV,UAAU,CAACW,YAAY,CAAC;;EAE3B;EAAA;EAAAb,cAAA,GAAAS,CAAA;EACAH,OAAO,CAACI,GAAG,CAAC,mBAAmB,EAAE;IAC/BC,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACS,mBAAmB,CAAC;EACpE,CAAC,EAAEV,UAAU,CAACY,WAAW,CAAC;;EAE1B;EAAA;EAAAd,cAAA,GAAAS,CAAA;EACAH,OAAO,CAACS,IAAI,CAAC,8BAA8B,EAAE;IAC3CJ,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACa,qBAAqB,CAAC;EACtE,CAAC,EAAEd,UAAU,CAACe,iBAAiB,CAAC;;EAEhC;EAAA;EAAAjB,cAAA,GAAAS,CAAA;EACAH,OAAO,CAACI,GAAG,CAAC,yBAAyB,EAAE;IACrCC,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACS,mBAAmB,CAAC;EACpE,CAAC,EAAEV,UAAU,CAACgB,aAAa,CAAC;;EAE5B;EAAA;EAAAlB,cAAA,GAAAS,CAAA;EACAH,OAAO,CAACI,GAAG,CAAC,aAAa,EAAE;IACzBC,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACgB,YAAY,CAAC;EAC7D,CAAC,EAAEjB,UAAU,CAACkB,WAAW,CAAC;;EAE1B;EAAA;EAAApB,cAAA,GAAAS,CAAA;EACAH,OAAO,CAACS,IAAI,CAAC,mBAAmB,EAAE;IAChCJ,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACkB,aAAa,CAAC;EAC9D,CAAC,EAAEnB,UAAU,CAACoB,UAAU,CAAC;;EAEzB;EAAA;EAAAtB,cAAA,GAAAS,CAAA;EACAH,OAAO,CAACS,IAAI,CAAC,mBAAmB,EAAE;IAChCJ,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACkB,aAAa,CAAC;EAC9D,CAAC,EAAEnB,UAAU,CAACqB,UAAU,CAAC;;EAEzB;EAAA;EAAAvB,cAAA,GAAAS,CAAA;EACAH,OAAO,CAACI,GAAG,CAAC,mBAAmB,EAAE;IAC/BC,UAAU,EAAE,CAACP,oBAAoB,CAACD,WAAW,CAACkB,aAAa,CAAC;EAC9D,CAAC,EAAEnB,UAAU,CAACsB,aAAa,CAAC;AAC9B","ignoreList":[]}