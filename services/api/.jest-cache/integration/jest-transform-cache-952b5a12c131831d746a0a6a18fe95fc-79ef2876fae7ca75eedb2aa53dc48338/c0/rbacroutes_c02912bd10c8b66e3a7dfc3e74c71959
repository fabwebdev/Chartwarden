aad2901cbfbe379dd51fc5c2cb1c2eb3
/* istanbul ignore next */
function cov_1ibgcgx9ra() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/routes/rbac.routes.js";
  var hash = "7f12fab94494cd85f825299c0fe31c0d0314504d";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/routes/rbac.routes.js",
    statementMap: {
      "0": {
        start: {
          line: 12,
          column: 2
        },
        end: {
          line: 30,
          column: 5
        }
      },
      "1": {
        start: {
          line: 15,
          column: 4
        },
        end: {
          line: 29,
          column: 5
        }
      },
      "2": {
        start: {
          line: 16,
          column: 6
        },
        end: {
          line: 21,
          column: 8
        }
      },
      "3": {
        start: {
          line: 23,
          column: 6
        },
        end: {
          line: 23,
          column: 50
        }
      },
      "4": {
        start: {
          line: 24,
          column: 6
        },
        end: {
          line: 24,
          column: 22
        }
      },
      "5": {
        start: {
          line: 25,
          column: 6
        },
        end: {
          line: 28,
          column: 8
        }
      },
      "6": {
        start: {
          line: 33,
          column: 2
        },
        end: {
          line: 51,
          column: 5
        }
      },
      "7": {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 50,
          column: 5
        }
      },
      "8": {
        start: {
          line: 37,
          column: 6
        },
        end: {
          line: 42,
          column: 8
        }
      },
      "9": {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 44,
          column: 56
        }
      },
      "10": {
        start: {
          line: 45,
          column: 6
        },
        end: {
          line: 45,
          column: 22
        }
      },
      "11": {
        start: {
          line: 46,
          column: 6
        },
        end: {
          line: 49,
          column: 8
        }
      },
      "12": {
        start: {
          line: 54,
          column: 2
        },
        end: {
          line: 76,
          column: 5
        }
      },
      "13": {
        start: {
          line: 57,
          column: 4
        },
        end: {
          line: 75,
          column: 5
        }
      },
      "14": {
        start: {
          line: 58,
          column: 23
        },
        end: {
          line: 58,
          column: 57
        }
      },
      "15": {
        start: {
          line: 59,
          column: 26
        },
        end: {
          line: 59,
          column: 58
        }
      },
      "16": {
        start: {
          line: 61,
          column: 6
        },
        end: {
          line: 67,
          column: 8
        }
      },
      "17": {
        start: {
          line: 69,
          column: 6
        },
        end: {
          line: 69,
          column: 61
        }
      },
      "18": {
        start: {
          line: 70,
          column: 6
        },
        end: {
          line: 70,
          column: 22
        }
      },
      "19": {
        start: {
          line: 71,
          column: 6
        },
        end: {
          line: 74,
          column: 8
        }
      },
      "20": {
        start: {
          line: 79,
          column: 2
        },
        end: {
          line: 111,
          column: 5
        }
      },
      "21": {
        start: {
          line: 82,
          column: 4
        },
        end: {
          line: 110,
          column: 5
        }
      },
      "22": {
        start: {
          line: 83,
          column: 23
        },
        end: {
          line: 83,
          column: 37
        }
      },
      "23": {
        start: {
          line: 86,
          column: 6
        },
        end: {
          line: 92,
          column: 7
        }
      },
      "24": {
        start: {
          line: 87,
          column: 8
        },
        end: {
          line: 87,
          column: 24
        }
      },
      "25": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 91,
          column: 10
        }
      },
      "26": {
        start: {
          line: 94,
          column: 26
        },
        end: {
          line: 94,
          column: 54
        }
      },
      "27": {
        start: {
          line: 96,
          column: 6
        },
        end: {
          line: 102,
          column: 8
        }
      },
      "28": {
        start: {
          line: 104,
          column: 6
        },
        end: {
          line: 104,
          column: 61
        }
      },
      "29": {
        start: {
          line: 105,
          column: 6
        },
        end: {
          line: 105,
          column: 22
        }
      },
      "30": {
        start: {
          line: 106,
          column: 6
        },
        end: {
          line: 109,
          column: 8
        }
      },
      "31": {
        start: {
          line: 115,
          column: 2
        },
        end: {
          line: 234,
          column: 5
        }
      },
      "32": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 233,
          column: 5
        }
      },
      "33": {
        start: {
          line: 119,
          column: 33
        },
        end: {
          line: 119,
          column: 47
        }
      },
      "34": {
        start: {
          line: 120,
          column: 45
        },
        end: {
          line: 120,
          column: 57
        }
      },
      "35": {
        start: {
          line: 123,
          column: 6
        },
        end: {
          line: 129,
          column: 7
        }
      },
      "36": {
        start: {
          line: 124,
          column: 8
        },
        end: {
          line: 124,
          column: 24
        }
      },
      "37": {
        start: {
          line: 125,
          column: 8
        },
        end: {
          line: 128,
          column: 10
        }
      },
      "38": {
        start: {
          line: 132,
          column: 25
        },
        end: {
          line: 136,
          column: 17
        }
      },
      "39": {
        start: {
          line: 138,
          column: 6
        },
        end: {
          line: 144,
          column: 7
        }
      },
      "40": {
        start: {
          line: 139,
          column: 8
        },
        end: {
          line: 139,
          column: 24
        }
      },
      "41": {
        start: {
          line: 140,
          column: 8
        },
        end: {
          line: 143,
          column: 10
        }
      },
      "42": {
        start: {
          line: 146,
          column: 21
        },
        end: {
          line: 146,
          column: 37
        }
      },
      "43": {
        start: {
          line: 149,
          column: 6
        },
        end: {
          line: 155,
          column: 7
        }
      },
      "44": {
        start: {
          line: 150,
          column: 8
        },
        end: {
          line: 150,
          column: 24
        }
      },
      "45": {
        start: {
          line: 151,
          column: 8
        },
        end: {
          line: 154,
          column: 10
        }
      },
      "46": {
        start: {
          line: 158,
          column: 6
        },
        end: {
          line: 160,
          column: 57
        }
      },
      "47": {
        start: {
          line: 163,
          column: 6
        },
        end: {
          line: 199,
          column: 7
        }
      },
      "48": {
        start: {
          line: 165,
          column: 35
        },
        end: {
          line: 172,
          column: 36
        }
      },
      "49": {
        start: {
          line: 166,
          column: 24
        },
        end: {
          line: 166,
          column: 55
        }
      },
      "50": {
        start: {
          line: 168,
          column: 12
        },
        end: {
          line: 168,
          column: 50
        }
      },
      "51": {
        start: {
          line: 168,
          column: 40
        },
        end: {
          line: 168,
          column: 50
        }
      },
      "52": {
        start: {
          line: 169,
          column: 12
        },
        end: {
          line: 169,
          column: 74
        }
      },
      "53": {
        start: {
          line: 169,
          column: 54
        },
        end: {
          line: 169,
          column: 74
        }
      },
      "54": {
        start: {
          line: 170,
          column: 12
        },
        end: {
          line: 170,
          column: 24
        }
      },
      "55": {
        start: {
          line: 172,
          column: 24
        },
        end: {
          line: 172,
          column: 35
        }
      },
      "56": {
        start: {
          line: 174,
          column: 8
        },
        end: {
          line: 198,
          column: 9
        }
      },
      "57": {
        start: {
          line: 176,
          column: 38
        },
        end: {
          line: 179,
          column: 61
        }
      },
      "58": {
        start: {
          line: 182,
          column: 39
        },
        end: {
          line: 185,
          column: 13
        }
      },
      "59": {
        start: {
          line: 182,
          column: 79
        },
        end: {
          line: 185,
          column: 11
        }
      },
      "60": {
        start: {
          line: 187,
          column: 10
        },
        end: {
          line: 197,
          column: 11
        }
      },
      "61": {
        start: {
          line: 188,
          column: 12
        },
        end: {
          line: 188,
          column: 79
        }
      },
      "62": {
        start: {
          line: 191,
          column: 12
        },
        end: {
          line: 191,
          column: 74
        }
      },
      "63": {
        start: {
          line: 192,
          column: 12
        },
        end: {
          line: 192,
          column: 28
        }
      },
      "64": {
        start: {
          line: 193,
          column: 12
        },
        end: {
          line: 196,
          column: 14
        }
      },
      "65": {
        start: {
          line: 202,
          column: 30
        },
        end: {
          line: 205,
          column: 56
        }
      },
      "66": {
        start: {
          line: 207,
          column: 32
        },
        end: {
          line: 207,
          column: 34
        }
      },
      "67": {
        start: {
          line: 208,
          column: 6
        },
        end: {
          line: 216,
          column: 7
        }
      },
      "68": {
        start: {
          line: 209,
          column: 21
        },
        end: {
          line: 212,
          column: 54
        }
      },
      "69": {
        start: {
          line: 213,
          column: 8
        },
        end: {
          line: 215,
          column: 9
        }
      },
      "70": {
        start: {
          line: 214,
          column: 10
        },
        end: {
          line: 214,
          column: 42
        }
      },
      "71": {
        start: {
          line: 218,
          column: 6
        },
        end: {
          line: 225,
          column: 8
        }
      },
      "72": {
        start: {
          line: 227,
          column: 6
        },
        end: {
          line: 227,
          column: 61
        }
      },
      "73": {
        start: {
          line: 228,
          column: 6
        },
        end: {
          line: 228,
          column: 22
        }
      },
      "74": {
        start: {
          line: 229,
          column: 6
        },
        end: {
          line: 232,
          column: 8
        }
      },
      "75": {
        start: {
          line: 237,
          column: 2
        },
        end: {
          line: 311,
          column: 5
        }
      },
      "76": {
        start: {
          line: 240,
          column: 4
        },
        end: {
          line: 310,
          column: 5
        }
      },
      "77": {
        start: {
          line: 241,
          column: 25
        },
        end: {
          line: 241,
          column: 39
        }
      },
      "78": {
        start: {
          line: 242,
          column: 33
        },
        end: {
          line: 242,
          column: 45
        }
      },
      "79": {
        start: {
          line: 245,
          column: 6
        },
        end: {
          line: 251,
          column: 7
        }
      },
      "80": {
        start: {
          line: 246,
          column: 8
        },
        end: {
          line: 246,
          column: 24
        }
      },
      "81": {
        start: {
          line: 247,
          column: 8
        },
        end: {
          line: 250,
          column: 10
        }
      },
      "82": {
        start: {
          line: 254,
          column: 25
        },
        end: {
          line: 258,
          column: 17
        }
      },
      "83": {
        start: {
          line: 260,
          column: 6
        },
        end: {
          line: 266,
          column: 7
        }
      },
      "84": {
        start: {
          line: 261,
          column: 8
        },
        end: {
          line: 261,
          column: 24
        }
      },
      "85": {
        start: {
          line: 262,
          column: 8
        },
        end: {
          line: 265,
          column: 10
        }
      },
      "86": {
        start: {
          line: 268,
          column: 21
        },
        end: {
          line: 268,
          column: 37
        }
      },
      "87": {
        start: {
          line: 271,
          column: 33
        },
        end: {
          line: 271,
          column: 71
        }
      },
      "88": {
        start: {
          line: 274,
          column: 6
        },
        end: {
          line: 276,
          column: 51
        }
      },
      "89": {
        start: {
          line: 279,
          column: 6
        },
        end: {
          line: 285,
          column: 11
        }
      },
      "90": {
        start: {
          line: 288,
          column: 39
        },
        end: {
          line: 288,
          column: 87
        }
      },
      "91": {
        start: {
          line: 289,
          column: 6
        },
        end: {
          line: 289,
          column: 35
        }
      },
      "92": {
        start: {
          line: 291,
          column: 6
        },
        end: {
          line: 291,
          column: 87
        }
      },
      "93": {
        start: {
          line: 293,
          column: 6
        },
        end: {
          line: 302,
          column: 8
        }
      },
      "94": {
        start: {
          line: 304,
          column: 6
        },
        end: {
          line: 304,
          column: 50
        }
      },
      "95": {
        start: {
          line: 305,
          column: 6
        },
        end: {
          line: 305,
          column: 22
        }
      },
      "96": {
        start: {
          line: 306,
          column: 6
        },
        end: {
          line: 309,
          column: 8
        }
      },
      "97": {
        start: {
          line: 314,
          column: 2
        },
        end: {
          line: 349,
          column: 5
        }
      },
      "98": {
        start: {
          line: 317,
          column: 4
        },
        end: {
          line: 348,
          column: 5
        }
      },
      "99": {
        start: {
          line: 318,
          column: 25
        },
        end: {
          line: 318,
          column: 39
        }
      },
      "100": {
        start: {
          line: 321,
          column: 33
        },
        end: {
          line: 321,
          column: 71
        }
      },
      "101": {
        start: {
          line: 324,
          column: 6
        },
        end: {
          line: 326,
          column: 51
        }
      },
      "102": {
        start: {
          line: 329,
          column: 39
        },
        end: {
          line: 329,
          column: 87
        }
      },
      "103": {
        start: {
          line: 330,
          column: 6
        },
        end: {
          line: 330,
          column: 35
        }
      },
      "104": {
        start: {
          line: 332,
          column: 6
        },
        end: {
          line: 332,
          column: 81
        }
      },
      "105": {
        start: {
          line: 334,
          column: 6
        },
        end: {
          line: 340,
          column: 8
        }
      },
      "106": {
        start: {
          line: 342,
          column: 6
        },
        end: {
          line: 342,
          column: 49
        }
      },
      "107": {
        start: {
          line: 343,
          column: 6
        },
        end: {
          line: 343,
          column: 22
        }
      },
      "108": {
        start: {
          line: 344,
          column: 6
        },
        end: {
          line: 347,
          column: 8
        }
      },
      "109": {
        start: {
          line: 352,
          column: 2
        },
        end: {
          line: 435,
          column: 5
        }
      },
      "110": {
        start: {
          line: 355,
          column: 4
        },
        end: {
          line: 434,
          column: 5
        }
      },
      "111": {
        start: {
          line: 356,
          column: 25
        },
        end: {
          line: 356,
          column: 39
        }
      },
      "112": {
        start: {
          line: 359,
          column: 55
        },
        end: {
          line: 359,
          column: 93
        }
      },
      "113": {
        start: {
          line: 360,
          column: 26
        },
        end: {
          line: 360,
          column: 53
        }
      },
      "114": {
        start: {
          line: 363,
          column: 24
        },
        end: {
          line: 370,
          column: 50
        }
      },
      "115": {
        start: {
          line: 372,
          column: 6
        },
        end: {
          line: 381,
          column: 7
        }
      },
      "116": {
        start: {
          line: 373,
          column: 8
        },
        end: {
          line: 380,
          column: 10
        }
      },
      "117": {
        start: {
          line: 384,
          column: 22
        },
        end: {
          line: 384,
          column: 51
        }
      },
      "118": {
        start: {
          line: 384,
          column: 41
        },
        end: {
          line: 384,
          column: 50
        }
      },
      "119": {
        start: {
          line: 385,
          column: 26
        },
        end: {
          line: 388,
          column: 42
        }
      },
      "120": {
        start: {
          line: 391,
          column: 30
        },
        end: {
          line: 394,
          column: 62
        }
      },
      "121": {
        start: {
          line: 396,
          column: 28
        },
        end: {
          line: 396,
          column: 85
        }
      },
      "122": {
        start: {
          line: 396,
          column: 66
        },
        end: {
          line: 396,
          column: 82
        }
      },
      "123": {
        start: {
          line: 398,
          column: 30
        },
        end: {
          line: 398,
          column: 32
        }
      },
      "124": {
        start: {
          line: 399,
          column: 6
        },
        end: {
          line: 404,
          column: 7
        }
      },
      "125": {
        start: {
          line: 400,
          column: 8
        },
        end: {
          line: 403,
          column: 57
        }
      },
      "126": {
        start: {
          line: 406,
          column: 6
        },
        end: {
          line: 426,
          column: 8
        }
      },
      "127": {
        start: {
          line: 410,
          column: 39
        },
        end: {
          line: 417,
          column: 11
        }
      },
      "128": {
        start: {
          line: 415,
          column: 46
        },
        end: {
          line: 415,
          column: 65
        }
      },
      "129": {
        start: {
          line: 416,
          column: 46
        },
        end: {
          line: 416,
          column: 65
        }
      },
      "130": {
        start: {
          line: 418,
          column: 51
        },
        end: {
          line: 424,
          column: 11
        }
      },
      "131": {
        start: {
          line: 428,
          column: 6
        },
        end: {
          line: 428,
          column: 61
        }
      },
      "132": {
        start: {
          line: 429,
          column: 6
        },
        end: {
          line: 429,
          column: 22
        }
      },
      "133": {
        start: {
          line: 430,
          column: 6
        },
        end: {
          line: 433,
          column: 8
        }
      }
    },
    fnMap: {
      "0": {
        name: "rbacRoutes",
        decl: {
          start: {
            line: 10,
            column: 15
          },
          end: {
            line: 10,
            column: 25
          }
        },
        loc: {
          start: {
            line: 10,
            column: 44
          },
          end: {
            line: 436,
            column: 1
          }
        },
        line: 10
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 14,
            column: 5
          },
          end: {
            line: 14,
            column: 6
          }
        },
        loc: {
          start: {
            line: 14,
            column: 31
          },
          end: {
            line: 30,
            column: 3
          }
        },
        line: 14
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 35,
            column: 5
          },
          end: {
            line: 35,
            column: 6
          }
        },
        loc: {
          start: {
            line: 35,
            column: 31
          },
          end: {
            line: 51,
            column: 3
          }
        },
        line: 35
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 56,
            column: 5
          },
          end: {
            line: 56,
            column: 6
          }
        },
        loc: {
          start: {
            line: 56,
            column: 31
          },
          end: {
            line: 76,
            column: 3
          }
        },
        line: 56
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 81,
            column: 5
          },
          end: {
            line: 81,
            column: 6
          }
        },
        loc: {
          start: {
            line: 81,
            column: 31
          },
          end: {
            line: 111,
            column: 3
          }
        },
        line: 81
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 117,
            column: 5
          },
          end: {
            line: 117,
            column: 6
          }
        },
        loc: {
          start: {
            line: 117,
            column: 31
          },
          end: {
            line: 234,
            column: 3
          }
        },
        line: 117
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 166,
            column: 18
          },
          end: {
            line: 166,
            column: 19
          }
        },
        loc: {
          start: {
            line: 166,
            column: 24
          },
          end: {
            line: 166,
            column: 55
          }
        },
        line: 166
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 167,
            column: 15
          },
          end: {
            line: 167,
            column: 16
          }
        },
        loc: {
          start: {
            line: 167,
            column: 21
          },
          end: {
            line: 171,
            column: 11
          }
        },
        line: 167
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 172,
            column: 18
          },
          end: {
            line: 172,
            column: 19
          }
        },
        loc: {
          start: {
            line: 172,
            column: 24
          },
          end: {
            line: 172,
            column: 35
          }
        },
        line: 172
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 182,
            column: 62
          },
          end: {
            line: 182,
            column: 63
          }
        },
        loc: {
          start: {
            line: 182,
            column: 79
          },
          end: {
            line: 185,
            column: 11
          }
        },
        line: 182
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 239,
            column: 5
          },
          end: {
            line: 239,
            column: 6
          }
        },
        loc: {
          start: {
            line: 239,
            column: 31
          },
          end: {
            line: 311,
            column: 3
          }
        },
        line: 239
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 316,
            column: 5
          },
          end: {
            line: 316,
            column: 6
          }
        },
        loc: {
          start: {
            line: 316,
            column: 31
          },
          end: {
            line: 349,
            column: 3
          }
        },
        line: 316
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 354,
            column: 5
          },
          end: {
            line: 354,
            column: 6
          }
        },
        loc: {
          start: {
            line: 354,
            column: 31
          },
          end: {
            line: 435,
            column: 3
          }
        },
        line: 354
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 384,
            column: 36
          },
          end: {
            line: 384,
            column: 37
          }
        },
        loc: {
          start: {
            line: 384,
            column: 41
          },
          end: {
            line: 384,
            column: 50
          }
        },
        line: 384
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 396,
            column: 60
          },
          end: {
            line: 396,
            column: 61
          }
        },
        loc: {
          start: {
            line: 396,
            column: 66
          },
          end: {
            line: 396,
            column: 82
          }
        },
        line: 396
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 410,
            column: 33
          },
          end: {
            line: 410,
            column: 34
          }
        },
        loc: {
          start: {
            line: 410,
            column: 39
          },
          end: {
            line: 417,
            column: 11
          }
        },
        line: 410
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 415,
            column: 40
          },
          end: {
            line: 415,
            column: 41
          }
        },
        loc: {
          start: {
            line: 415,
            column: 46
          },
          end: {
            line: 415,
            column: 65
          }
        },
        line: 415
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 416,
            column: 40
          },
          end: {
            line: 416,
            column: 41
          }
        },
        loc: {
          start: {
            line: 416,
            column: 46
          },
          end: {
            line: 416,
            column: 65
          }
        },
        line: 416
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 418,
            column: 45
          },
          end: {
            line: 418,
            column: 46
          }
        },
        loc: {
          start: {
            line: 418,
            column: 51
          },
          end: {
            line: 424,
            column: 11
          }
        },
        line: 418
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 58,
            column: 23
          },
          end: {
            line: 58,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 58,
            column: 23
          },
          end: {
            line: 58,
            column: 40
          }
        }, {
          start: {
            line: 58,
            column: 44
          },
          end: {
            line: 58,
            column: 57
          }
        }],
        line: 58
      },
      "1": {
        loc: {
          start: {
            line: 59,
            column: 26
          },
          end: {
            line: 59,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 59,
            column: 26
          },
          end: {
            line: 59,
            column: 52
          }
        }, {
          start: {
            line: 59,
            column: 56
          },
          end: {
            line: 59,
            column: 58
          }
        }],
        line: 59
      },
      "2": {
        loc: {
          start: {
            line: 86,
            column: 6
          },
          end: {
            line: 92,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 86,
            column: 6
          },
          end: {
            line: 92,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 86
      },
      "3": {
        loc: {
          start: {
            line: 94,
            column: 26
          },
          end: {
            line: 94,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 94,
            column: 26
          },
          end: {
            line: 94,
            column: 48
          }
        }, {
          start: {
            line: 94,
            column: 52
          },
          end: {
            line: 94,
            column: 54
          }
        }],
        line: 94
      },
      "4": {
        loc: {
          start: {
            line: 123,
            column: 6
          },
          end: {
            line: 129,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 123,
            column: 6
          },
          end: {
            line: 129,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 123
      },
      "5": {
        loc: {
          start: {
            line: 138,
            column: 6
          },
          end: {
            line: 144,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 138,
            column: 6
          },
          end: {
            line: 144,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 138
      },
      "6": {
        loc: {
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 155,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 155,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 149
      },
      "7": {
        loc: {
          start: {
            line: 163,
            column: 6
          },
          end: {
            line: 199,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 163,
            column: 6
          },
          end: {
            line: 199,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 163
      },
      "8": {
        loc: {
          start: {
            line: 166,
            column: 24
          },
          end: {
            line: 166,
            column: 55
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 166,
            column: 24
          },
          end: {
            line: 166,
            column: 35
          }
        }, {
          start: {
            line: 166,
            column: 39
          },
          end: {
            line: 166,
            column: 55
          }
        }],
        line: 166
      },
      "9": {
        loc: {
          start: {
            line: 168,
            column: 12
          },
          end: {
            line: 168,
            column: 50
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 168,
            column: 12
          },
          end: {
            line: 168,
            column: 50
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 168
      },
      "10": {
        loc: {
          start: {
            line: 169,
            column: 12
          },
          end: {
            line: 169,
            column: 74
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 169,
            column: 12
          },
          end: {
            line: 169,
            column: 74
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 169
      },
      "11": {
        loc: {
          start: {
            line: 169,
            column: 16
          },
          end: {
            line: 169,
            column: 52
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 169,
            column: 16
          },
          end: {
            line: 169,
            column: 38
          }
        }, {
          start: {
            line: 169,
            column: 42
          },
          end: {
            line: 169,
            column: 52
          }
        }],
        line: 169
      },
      "12": {
        loc: {
          start: {
            line: 174,
            column: 8
          },
          end: {
            line: 198,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 174,
            column: 8
          },
          end: {
            line: 198,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 174
      },
      "13": {
        loc: {
          start: {
            line: 213,
            column: 8
          },
          end: {
            line: 215,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 213,
            column: 8
          },
          end: {
            line: 215,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 213
      },
      "14": {
        loc: {
          start: {
            line: 245,
            column: 6
          },
          end: {
            line: 251,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 245,
            column: 6
          },
          end: {
            line: 251,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 245
      },
      "15": {
        loc: {
          start: {
            line: 260,
            column: 6
          },
          end: {
            line: 266,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 260,
            column: 6
          },
          end: {
            line: 266,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 260
      },
      "16": {
        loc: {
          start: {
            line: 372,
            column: 6
          },
          end: {
            line: 381,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 372,
            column: 6
          },
          end: {
            line: 381,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 372
      },
      "17": {
        loc: {
          start: {
            line: 399,
            column: 6
          },
          end: {
            line: 404,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 399,
            column: 6
          },
          end: {
            line: 404,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 399
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0,
      "120": 0,
      "121": 0,
      "122": 0,
      "123": 0,
      "124": 0,
      "125": 0,
      "126": 0,
      "127": 0,
      "128": 0,
      "129": 0,
      "130": 0,
      "131": 0,
      "132": 0,
      "133": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "7f12fab94494cd85f825299c0fe31c0d0314504d"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1ibgcgx9ra = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1ibgcgx9ra();
import { ROLES, PERMISSIONS, ROLE_PERMISSIONS } from '../config/rbac.js';
import { verifyToken } from '../middleware/betterAuth.middleware.js';
import { requireAdmin } from '../middleware/rbac.middleware.js';
import { db } from '../config/db.drizzle.js';
import { roles, permissions, role_has_permissions } from '../db/schemas/index.js';
import { eq, and } from 'drizzle-orm';
import { logger } from '../utils/logger.js';
// Fastify plugin for RBAC routes
async function rbacRoutes(fastify, options) {
  /* istanbul ignore next */
  cov_1ibgcgx9ra().f[0]++;
  cov_1ibgcgx9ra().s[0]++;
  // Get all roles
  fastify.get('/roles', {
    preHandler: [verifyToken, requireAdmin]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[1]++;
    cov_1ibgcgx9ra().s[1]++;
    try {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[2]++;
      return {
        status: 200,
        data: {
          roles: Object.values(ROLES)
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[3]++;
      logger.error('Error fetching roles:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[4]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[5]++;
      return {
        status: 500,
        message: 'Server error while fetching roles'
      };
    }
  });

  // Get all permissions (admin only)
  /* istanbul ignore next */
  cov_1ibgcgx9ra().s[6]++;
  fastify.get('/permissions', {
    preHandler: [verifyToken, requireAdmin]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[2]++;
    cov_1ibgcgx9ra().s[7]++;
    try {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[8]++;
      return {
        status: 200,
        data: {
          permissions: Object.values(PERMISSIONS)
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[9]++;
      logger.error('Error fetching permissions:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[10]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[11]++;
      return {
        status: 500,
        message: 'Server error while fetching permissions'
      };
    }
  });

  // Get current user's permissions (any authenticated user)
  /* istanbul ignore next */
  cov_1ibgcgx9ra().s[12]++;
  fastify.get('/my-permissions', {
    preHandler: [verifyToken]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[3]++;
    cov_1ibgcgx9ra().s[13]++;
    try {
      const userRole =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[14]++,
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().b[0][0]++, request.user.role) ||
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().b[0][1]++, ROLES.PATIENT));
      const permissions =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[15]++,
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().b[1][0]++, ROLE_PERMISSIONS[userRole]) ||
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().b[1][1]++, []));
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[16]++;
      return {
        status: 200,
        data: {
          role: userRole,
          permissions: permissions
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[17]++;
      logger.error('Error fetching user permissions:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[18]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[19]++;
      return {
        status: 500,
        message: 'Server error while fetching user permissions'
      };
    }
  });

  // Get role permissions
  /* istanbul ignore next */
  cov_1ibgcgx9ra().s[20]++;
  fastify.get('/roles/:role/permissions', {
    preHandler: [verifyToken, requireAdmin]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[4]++;
    cov_1ibgcgx9ra().s[21]++;
    try {
      const {
        role
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[22]++, request.params);

      // Check if role exists
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[23]++;
      if (!Object.values(ROLES).includes(role)) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[2][0]++;
        cov_1ibgcgx9ra().s[24]++;
        reply.code(404);
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[25]++;
        return {
          status: 404,
          message: 'Role not found'
        };
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[2][1]++;
      }
      const permissions =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[26]++,
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().b[3][0]++, ROLE_PERMISSIONS[role]) ||
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().b[3][1]++, []));
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[27]++;
      return {
        status: 200,
        data: {
          role,
          permissions
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[28]++;
      logger.error('Error fetching role permissions:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[29]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[30]++;
      return {
        status: 500,
        message: 'Server error while fetching role permissions'
      };
    }
  });

  // Update role permissions (PUT /api/rbac/roles/:role)
  // This route handles both /api/rbac/roles/:role and /api/rbac/roles/:role/permissions
  /* istanbul ignore next */
  cov_1ibgcgx9ra().s[31]++;
  fastify.put('/roles/:role', {
    preHandler: [verifyToken, requireAdmin]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[5]++;
    cov_1ibgcgx9ra().s[32]++;
    try {
      const {
        role: roleName
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[33]++, request.params);
      const {
        permissions: permissionIds
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[34]++, request.body);

      // Validate role name
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[35]++;
      if (!Object.values(ROLES).includes(roleName)) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[4][0]++;
        cov_1ibgcgx9ra().s[36]++;
        reply.code(404);
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[37]++;
        return {
          status: 404,
          message: 'Role not found'
        };
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[4][1]++;
      }

      // Find role by name to get role ID
      const roleResult =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[38]++, await db.select().from(roles).where(eq(roles.name, roleName)).limit(1));
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[39]++;
      if (roleResult.length === 0) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[5][0]++;
        cov_1ibgcgx9ra().s[40]++;
        reply.code(404);
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[41]++;
        return {
          status: 404,
          message: 'Role not found in database'
        };
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[5][1]++;
      }
      const roleId =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[42]++, roleResult[0].id);

      // Validate permissions array
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[43]++;
      if (!Array.isArray(permissionIds)) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[6][0]++;
        cov_1ibgcgx9ra().s[44]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[45]++;
        return {
          status: 400,
          message: 'Permissions must be an array'
        };
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[6][1]++;
      }

      // Remove all existing permissions for this role
      cov_1ibgcgx9ra().s[46]++;
      await db.delete(role_has_permissions).where(eq(role_has_permissions.role_id, roleId));

      // Add new permissions if provided
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[47]++;
      if (permissionIds.length > 0) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[7][0]++;
        // Validate and convert permission IDs to numbers
        const validPermissionIds =
        /* istanbul ignore next */
        (cov_1ibgcgx9ra().s[48]++, permissionIds.filter(id => {
          /* istanbul ignore next */
          cov_1ibgcgx9ra().f[6]++;
          cov_1ibgcgx9ra().s[49]++;
          return /* istanbul ignore next */(cov_1ibgcgx9ra().b[8][0]++, id !== null) &&
          /* istanbul ignore next */
          (cov_1ibgcgx9ra().b[8][1]++, id !== undefined);
        }).map(id => {
          /* istanbul ignore next */
          cov_1ibgcgx9ra().f[7]++;
          cov_1ibgcgx9ra().s[50]++;
          if (typeof id === 'number') {
            /* istanbul ignore next */
            cov_1ibgcgx9ra().b[9][0]++;
            cov_1ibgcgx9ra().s[51]++;
            return id;
          } else
          /* istanbul ignore next */
          {
            cov_1ibgcgx9ra().b[9][1]++;
          }
          cov_1ibgcgx9ra().s[52]++;
          if (
          /* istanbul ignore next */
          (cov_1ibgcgx9ra().b[11][0]++, typeof id === 'string') &&
          /* istanbul ignore next */
          (cov_1ibgcgx9ra().b[11][1]++, !isNaN(id))) {
            /* istanbul ignore next */
            cov_1ibgcgx9ra().b[10][0]++;
            cov_1ibgcgx9ra().s[53]++;
            return parseInt(id);
          } else
          /* istanbul ignore next */
          {
            cov_1ibgcgx9ra().b[10][1]++;
          }
          cov_1ibgcgx9ra().s[54]++;
          return null;
        }).filter(id => {
          /* istanbul ignore next */
          cov_1ibgcgx9ra().f[8]++;
          cov_1ibgcgx9ra().s[55]++;
          return id !== null;
        }));
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[56]++;
        if (validPermissionIds.length > 0) {
          /* istanbul ignore next */
          cov_1ibgcgx9ra().b[12][0]++;
          // Verify all permission IDs exist in database
          const existingPermissions =
          /* istanbul ignore next */
          (cov_1ibgcgx9ra().s[57]++, await db.select().from(permissions).where(eq(permissions.id, validPermissionIds[0]))); // Sample check

          // Insert new role-permission associations
          const rolePermissionValues =
          /* istanbul ignore next */
          (cov_1ibgcgx9ra().s[58]++, validPermissionIds.map(permissionId => {
            /* istanbul ignore next */
            cov_1ibgcgx9ra().f[9]++;
            cov_1ibgcgx9ra().s[59]++;
            return {
              role_id: roleId,
              permission_id: permissionId
            };
          }));
          /* istanbul ignore next */
          cov_1ibgcgx9ra().s[60]++;
          try {
            /* istanbul ignore next */
            cov_1ibgcgx9ra().s[61]++;
            await db.insert(role_has_permissions).values(rolePermissionValues);
          } catch (insertError) {
            /* istanbul ignore next */
            cov_1ibgcgx9ra().s[62]++;
            // If insert fails (e.g., invalid permission ID), return error
            logger.error('Error inserting role permissions:', insertError);
            /* istanbul ignore next */
            cov_1ibgcgx9ra().s[63]++;
            reply.code(400);
            /* istanbul ignore next */
            cov_1ibgcgx9ra().s[64]++;
            return {
              status: 400,
              message: 'Invalid permission IDs provided. Some permissions may not exist.'
            };
          }
        } else
        /* istanbul ignore next */
        {
          cov_1ibgcgx9ra().b[12][1]++;
        }
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[7][1]++;
      }

      // Fetch updated role with permissions
      const rolePermissions =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[65]++, await db.select().from(role_has_permissions).where(eq(role_has_permissions.role_id, roleId)));
      const permissionDetails =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[66]++, []);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[67]++;
      for (const rp of rolePermissions) {
        const perm =
        /* istanbul ignore next */
        (cov_1ibgcgx9ra().s[68]++, await db.select().from(permissions).where(eq(permissions.id, rp.permission_id)));
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[69]++;
        if (perm.length > 0) {
          /* istanbul ignore next */
          cov_1ibgcgx9ra().b[13][0]++;
          cov_1ibgcgx9ra().s[70]++;
          permissionDetails.push(perm[0]);
        } else
        /* istanbul ignore next */
        {
          cov_1ibgcgx9ra().b[13][1]++;
        }
      }
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[71]++;
      return {
        status: 200,
        message: `Permissions updated for role ${roleName}`,
        data: {
          role: roleResult[0],
          permissions: permissionDetails
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[72]++;
      logger.error('Error updating role permissions:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[73]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[74]++;
      return {
        status: 500,
        message: 'Server error while updating role permissions'
      };
    }
  });

  // Assign role to user (this would typically be done by an admin)
  /* istanbul ignore next */
  cov_1ibgcgx9ra().s[75]++;
  fastify.post('/users/:userId/role', {
    preHandler: [verifyToken, requireAdmin]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[10]++;
    cov_1ibgcgx9ra().s[76]++;
    try {
      const {
        userId
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[77]++, request.params);
      const {
        role: roleName
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[78]++, request.body);

      // Validate role name
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[79]++;
      if (!Object.values(ROLES).includes(roleName)) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[14][0]++;
        cov_1ibgcgx9ra().s[80]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[81]++;
        return {
          status: 400,
          message: 'Invalid role'
        };
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[14][1]++;
      }

      // Get the role ID from database
      const roleResult =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[82]++, await db.select().from(roles).where(eq(roles.name, roleName)).limit(1));
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[83]++;
      if (roleResult.length === 0) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[15][0]++;
        cov_1ibgcgx9ra().s[84]++;
        reply.code(404);
        /* istanbul ignore next */
        cov_1ibgcgx9ra().s[85]++;
        return {
          status: 404,
          message: 'Role not found in database'
        };
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[15][1]++;
      }
      const roleId =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[86]++, roleResult[0].id);

      // Import user_has_roles for the operation
      const {
        user_has_roles
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[87]++, await import('../db/schemas/index.js'));

      // Remove any existing roles for this user (single role per user model)
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[88]++;
      await db.delete(user_has_roles).where(eq(user_has_roles.user_id, userId));

      // Assign new role
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[89]++;
      await db.insert(user_has_roles).values({
        user_id: userId,
        role_id: roleId,
        assigned_by: request.user.id
      });

      // Clear the permission cache for this user
      const {
        clearPermissionCache
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[90]++, await import('../middleware/rbac.middleware.js'));
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[91]++;
      clearPermissionCache(userId);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[92]++;
      logger.info(`Role ${roleName} assigned to user ${userId} by ${request.user.id}`);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[93]++;
      return {
        status: 200,
        message: `Role ${roleName} assigned to user ${userId}`,
        data: {
          userId,
          role: roleName,
          roleId,
          assignedBy: request.user.id
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[94]++;
      logger.error('Error assigning role:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[95]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[96]++;
      return {
        status: 500,
        message: 'Server error while assigning role'
      };
    }
  });

  // Remove role from user
  /* istanbul ignore next */
  cov_1ibgcgx9ra().s[97]++;
  fastify.delete('/users/:userId/role', {
    preHandler: [verifyToken, requireAdmin]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[11]++;
    cov_1ibgcgx9ra().s[98]++;
    try {
      const {
        userId
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[99]++, request.params);

      // Import user_has_roles for the operation
      const {
        user_has_roles
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[100]++, await import('../db/schemas/index.js'));

      // Remove all roles for this user
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[101]++;
      await db.delete(user_has_roles).where(eq(user_has_roles.user_id, userId));

      // Clear the permission cache for this user
      const {
        clearPermissionCache
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[102]++, await import('../middleware/rbac.middleware.js'));
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[103]++;
      clearPermissionCache(userId);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[104]++;
      logger.info(`All roles removed from user ${userId} by ${request.user.id}`);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[105]++;
      return {
        status: 200,
        message: `All roles removed from user ${userId}`,
        data: {
          userId
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[106]++;
      logger.error('Error removing role:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[107]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[108]++;
      return {
        status: 500,
        message: 'Server error while removing role'
      };
    }
  });

  // Get user's roles and permissions
  /* istanbul ignore next */
  cov_1ibgcgx9ra().s[109]++;
  fastify.get('/users/:userId/permissions', {
    preHandler: [verifyToken, requireAdmin]
  }, async (request, reply) => {
    /* istanbul ignore next */
    cov_1ibgcgx9ra().f[12]++;
    cov_1ibgcgx9ra().s[110]++;
    try {
      const {
        userId
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[111]++, request.params);

      // Import necessary schemas
      const {
        user_has_roles,
        role_has_permissions
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[112]++, await import('../db/schemas/index.js'));
      const {
        inArray
      } =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[113]++, await import('drizzle-orm'));

      // Get user's roles
      const userRoles =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[114]++, await db.select({
        role_id: user_has_roles.role_id,
        assigned_at: user_has_roles.assigned_at,
        assigned_by: user_has_roles.assigned_by
      }).from(user_has_roles).where(eq(user_has_roles.user_id, userId)));
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[115]++;
      if (userRoles.length === 0) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[16][0]++;
        cov_1ibgcgx9ra().s[116]++;
        return {
          status: 200,
          data: {
            userId,
            roles: [],
            permissions: []
          }
        };
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[16][1]++;
      }

      // Get role details
      const roleIds =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[117]++, userRoles.map(r => {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().f[13]++;
        cov_1ibgcgx9ra().s[118]++;
        return r.role_id;
      }));
      const roleDetails =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[119]++, await db.select().from(roles).where(inArray(roles.id, roleIds)));

      // Get permissions for all roles
      const rolePermissions =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[120]++, await db.select({
        permission_id: role_has_permissions.permission_id
      }).from(role_has_permissions).where(inArray(role_has_permissions.role_id, roleIds)));
      const permissionIds =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[121]++, [...new Set(rolePermissions.map(rp => {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().f[14]++;
        cov_1ibgcgx9ra().s[122]++;
        return rp.permission_id;
      }))]);
      let permissionDetails =
      /* istanbul ignore next */
      (cov_1ibgcgx9ra().s[123]++, []);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[124]++;
      if (permissionIds.length > 0) {
        /* istanbul ignore next */
        cov_1ibgcgx9ra().b[17][0]++;
        cov_1ibgcgx9ra().s[125]++;
        permissionDetails = await db.select().from(permissions).where(inArray(permissions.id, permissionIds));
      } else
      /* istanbul ignore next */
      {
        cov_1ibgcgx9ra().b[17][1]++;
      }
      cov_1ibgcgx9ra().s[126]++;
      return {
        status: 200,
        data: {
          userId,
          roles: roleDetails.map(r => {
            /* istanbul ignore next */
            cov_1ibgcgx9ra().f[15]++;
            cov_1ibgcgx9ra().s[127]++;
            return {
              id: r.id,
              name: r.name,
              display_name: r.display_name,
              hierarchy_level: r.hierarchy_level,
              assigned_at: userRoles.find(ur => {
                /* istanbul ignore next */
                cov_1ibgcgx9ra().f[16]++;
                cov_1ibgcgx9ra().s[128]++;
                return ur.role_id === r.id;
              })?.assigned_at,
              assigned_by: userRoles.find(ur => {
                /* istanbul ignore next */
                cov_1ibgcgx9ra().f[17]++;
                cov_1ibgcgx9ra().s[129]++;
                return ur.role_id === r.id;
              })?.assigned_by
            };
          }),
          permissions: permissionDetails.map(p => {
            /* istanbul ignore next */
            cov_1ibgcgx9ra().f[18]++;
            cov_1ibgcgx9ra().s[130]++;
            return {
              id: p.id,
              name: p.name,
              resource: p.resource,
              action: p.action,
              description: p.description
            };
          })
        }
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[131]++;
      logger.error('Error fetching user permissions:', error);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[132]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_1ibgcgx9ra().s[133]++;
      return {
        status: 500,
        message: 'Server error while fetching user permissions'
      };
    }
  });
}
export default rbacRoutes;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWliZ2NneDlyYSIsImFjdHVhbENvdmVyYWdlIiwiUk9MRVMiLCJQRVJNSVNTSU9OUyIsIlJPTEVfUEVSTUlTU0lPTlMiLCJ2ZXJpZnlUb2tlbiIsInJlcXVpcmVBZG1pbiIsImRiIiwicm9sZXMiLCJwZXJtaXNzaW9ucyIsInJvbGVfaGFzX3Blcm1pc3Npb25zIiwiZXEiLCJhbmQiLCJsb2dnZXIiLCJyYmFjUm91dGVzIiwiZmFzdGlmeSIsIm9wdGlvbnMiLCJmIiwicyIsImdldCIsInByZUhhbmRsZXIiLCJyZXF1ZXN0IiwicmVwbHkiLCJzdGF0dXMiLCJkYXRhIiwiT2JqZWN0IiwidmFsdWVzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInVzZXJSb2xlIiwiYiIsInVzZXIiLCJyb2xlIiwiUEFUSUVOVCIsInBhcmFtcyIsImluY2x1ZGVzIiwicHV0Iiwicm9sZU5hbWUiLCJwZXJtaXNzaW9uSWRzIiwiYm9keSIsInJvbGVSZXN1bHQiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJuYW1lIiwibGltaXQiLCJsZW5ndGgiLCJyb2xlSWQiLCJpZCIsIkFycmF5IiwiaXNBcnJheSIsImRlbGV0ZSIsInJvbGVfaWQiLCJ2YWxpZFBlcm1pc3Npb25JZHMiLCJmaWx0ZXIiLCJ1bmRlZmluZWQiLCJtYXAiLCJpc05hTiIsInBhcnNlSW50IiwiZXhpc3RpbmdQZXJtaXNzaW9ucyIsInJvbGVQZXJtaXNzaW9uVmFsdWVzIiwicGVybWlzc2lvbklkIiwicGVybWlzc2lvbl9pZCIsImluc2VydCIsImluc2VydEVycm9yIiwicm9sZVBlcm1pc3Npb25zIiwicGVybWlzc2lvbkRldGFpbHMiLCJycCIsInBlcm0iLCJwdXNoIiwicG9zdCIsInVzZXJJZCIsInVzZXJfaGFzX3JvbGVzIiwidXNlcl9pZCIsImFzc2lnbmVkX2J5IiwiY2xlYXJQZXJtaXNzaW9uQ2FjaGUiLCJpbmZvIiwiYXNzaWduZWRCeSIsImluQXJyYXkiLCJ1c2VyUm9sZXMiLCJhc3NpZ25lZF9hdCIsInJvbGVJZHMiLCJyIiwicm9sZURldGFpbHMiLCJTZXQiLCJkaXNwbGF5X25hbWUiLCJoaWVyYXJjaHlfbGV2ZWwiLCJmaW5kIiwidXIiLCJwIiwicmVzb3VyY2UiLCJhY3Rpb24iLCJkZXNjcmlwdGlvbiJdLCJzb3VyY2VzIjpbInJiYWMucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJPTEVTLCBQRVJNSVNTSU9OUywgUk9MRV9QRVJNSVNTSU9OUyB9IGZyb20gJy4uL2NvbmZpZy9yYmFjLmpzJztcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnLi4vbWlkZGxld2FyZS9iZXR0ZXJBdXRoLm1pZGRsZXdhcmUuanMnO1xuaW1wb3J0IHsgcmVxdWlyZUFkbWluIH0gZnJvbSAnLi4vbWlkZGxld2FyZS9yYmFjLm1pZGRsZXdhcmUuanMnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcvZGIuZHJpenpsZS5qcyc7XG5pbXBvcnQgeyByb2xlcywgcGVybWlzc2lvbnMsIHJvbGVfaGFzX3Blcm1pc3Npb25zIH0gZnJvbSAnLi4vZGIvc2NoZW1hcy9pbmRleC5qcyc7XG5pbXBvcnQgeyBlcSwgYW5kIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xuLy8gRmFzdGlmeSBwbHVnaW4gZm9yIFJCQUMgcm91dGVzXG5hc3luYyBmdW5jdGlvbiByYmFjUm91dGVzKGZhc3RpZnksIG9wdGlvbnMpIHtcbiAgLy8gR2V0IGFsbCByb2xlc1xuICBmYXN0aWZ5LmdldCgnL3JvbGVzJywge1xuICAgIHByZUhhbmRsZXI6IFt2ZXJpZnlUb2tlbiwgcmVxdWlyZUFkbWluXSxcbiAgfSwgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcm9sZXM6IE9iamVjdC52YWx1ZXMoUk9MRVMpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcm9sZXM6JywgZXJyb3IpXG4gICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSBmZXRjaGluZyByb2xlcydcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxuICAvLyBHZXQgYWxsIHBlcm1pc3Npb25zIChhZG1pbiBvbmx5KVxuICBmYXN0aWZ5LmdldCgnL3Blcm1pc3Npb25zJywge1xuICAgIHByZUhhbmRsZXI6IFt2ZXJpZnlUb2tlbiwgcmVxdWlyZUFkbWluXSxcbiAgfSwgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcGVybWlzc2lvbnM6IE9iamVjdC52YWx1ZXMoUEVSTUlTU0lPTlMpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGVybWlzc2lvbnM6JywgZXJyb3IpXG4gICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSBmZXRjaGluZyBwZXJtaXNzaW9ucydcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxuICAvLyBHZXQgY3VycmVudCB1c2VyJ3MgcGVybWlzc2lvbnMgKGFueSBhdXRoZW50aWNhdGVkIHVzZXIpXG4gIGZhc3RpZnkuZ2V0KCcvbXktcGVybWlzc2lvbnMnLCB7XG4gICAgcHJlSGFuZGxlcjogW3ZlcmlmeVRva2VuXSxcbiAgfSwgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJSb2xlID0gcmVxdWVzdC51c2VyLnJvbGUgfHwgUk9MRVMuUEFUSUVOVDtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gUk9MRV9QRVJNSVNTSU9OU1t1c2VyUm9sZV0gfHwgW107XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcm9sZTogdXNlclJvbGUsXG4gICAgICAgICAgcGVybWlzc2lvbnM6IHBlcm1pc3Npb25zXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBwZXJtaXNzaW9uczonLCBlcnJvcilcbiAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICBtZXNzYWdlOiAnU2VydmVyIGVycm9yIHdoaWxlIGZldGNoaW5nIHVzZXIgcGVybWlzc2lvbnMnXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gR2V0IHJvbGUgcGVybWlzc2lvbnNcbiAgZmFzdGlmeS5nZXQoJy9yb2xlcy86cm9sZS9wZXJtaXNzaW9ucycsIHtcbiAgICBwcmVIYW5kbGVyOiBbdmVyaWZ5VG9rZW4sIHJlcXVpcmVBZG1pbl0sXG4gIH0sIGFzeW5jIChyZXF1ZXN0LCByZXBseSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHJvbGUgfSA9IHJlcXVlc3QucGFyYW1zO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiByb2xlIGV4aXN0c1xuICAgICAgaWYgKCFPYmplY3QudmFsdWVzKFJPTEVTKS5pbmNsdWRlcyhyb2xlKSkge1xuICAgICAgICByZXBseS5jb2RlKDQwNCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgbWVzc2FnZTogJ1JvbGUgbm90IGZvdW5kJ1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IFJPTEVfUEVSTUlTU0lPTlNbcm9sZV0gfHwgW107XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcm9sZSxcbiAgICAgICAgICBwZXJtaXNzaW9uc1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJvbGUgcGVybWlzc2lvbnM6JywgZXJyb3IpXG4gICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSBmZXRjaGluZyByb2xlIHBlcm1pc3Npb25zJ1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSByb2xlIHBlcm1pc3Npb25zIChQVVQgL2FwaS9yYmFjL3JvbGVzLzpyb2xlKVxuICAvLyBUaGlzIHJvdXRlIGhhbmRsZXMgYm90aCAvYXBpL3JiYWMvcm9sZXMvOnJvbGUgYW5kIC9hcGkvcmJhYy9yb2xlcy86cm9sZS9wZXJtaXNzaW9uc1xuICBmYXN0aWZ5LnB1dCgnL3JvbGVzLzpyb2xlJywge1xuICAgIHByZUhhbmRsZXI6IFt2ZXJpZnlUb2tlbiwgcmVxdWlyZUFkbWluXSxcbiAgfSwgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgcm9sZTogcm9sZU5hbWUgfSA9IHJlcXVlc3QucGFyYW1zO1xuICAgICAgY29uc3QgeyBwZXJtaXNzaW9uczogcGVybWlzc2lvbklkcyB9ID0gcmVxdWVzdC5ib2R5O1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSByb2xlIG5hbWVcbiAgICAgIGlmICghT2JqZWN0LnZhbHVlcyhST0xFUykuaW5jbHVkZXMocm9sZU5hbWUpKSB7XG4gICAgICAgIHJlcGx5LmNvZGUoNDA0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgICBtZXNzYWdlOiAnUm9sZSBub3QgZm91bmQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgcm9sZSBieSBuYW1lIHRvIGdldCByb2xlIElEXG4gICAgICBjb25zdCByb2xlUmVzdWx0ID0gYXdhaXQgZGJcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5mcm9tKHJvbGVzKVxuICAgICAgICAud2hlcmUoZXEocm9sZXMubmFtZSwgcm9sZU5hbWUpKVxuICAgICAgICAubGltaXQoMSk7XG5cbiAgICAgIGlmIChyb2xlUmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXBseS5jb2RlKDQwNCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgbWVzc2FnZTogJ1JvbGUgbm90IGZvdW5kIGluIGRhdGFiYXNlJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCByb2xlSWQgPSByb2xlUmVzdWx0WzBdLmlkO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBwZXJtaXNzaW9ucyBhcnJheVxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBlcm1pc3Npb25JZHMpKSB7XG4gICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnUGVybWlzc2lvbnMgbXVzdCBiZSBhbiBhcnJheSdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGFsbCBleGlzdGluZyBwZXJtaXNzaW9ucyBmb3IgdGhpcyByb2xlXG4gICAgICBhd2FpdCBkYlxuICAgICAgICAuZGVsZXRlKHJvbGVfaGFzX3Blcm1pc3Npb25zKVxuICAgICAgICAud2hlcmUoZXEocm9sZV9oYXNfcGVybWlzc2lvbnMucm9sZV9pZCwgcm9sZUlkKSk7XG5cbiAgICAgIC8vIEFkZCBuZXcgcGVybWlzc2lvbnMgaWYgcHJvdmlkZWRcbiAgICAgIGlmIChwZXJtaXNzaW9uSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gVmFsaWRhdGUgYW5kIGNvbnZlcnQgcGVybWlzc2lvbiBJRHMgdG8gbnVtYmVyc1xuICAgICAgICBjb25zdCB2YWxpZFBlcm1pc3Npb25JZHMgPSBwZXJtaXNzaW9uSWRzXG4gICAgICAgICAgLmZpbHRlcihpZCA9PiBpZCAhPT0gbnVsbCAmJiBpZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgIC5tYXAoaWQgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIHJldHVybiBpZDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdzdHJpbmcnICYmICFpc05hTihpZCkpIHJldHVybiBwYXJzZUludChpZCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IG51bGwpO1xuXG4gICAgICAgIGlmICh2YWxpZFBlcm1pc3Npb25JZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIFZlcmlmeSBhbGwgcGVybWlzc2lvbiBJRHMgZXhpc3QgaW4gZGF0YWJhc2VcbiAgICAgICAgICBjb25zdCBleGlzdGluZ1Blcm1pc3Npb25zID0gYXdhaXQgZGJcbiAgICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgICAgLmZyb20ocGVybWlzc2lvbnMpXG4gICAgICAgICAgICAud2hlcmUoZXEocGVybWlzc2lvbnMuaWQsIHZhbGlkUGVybWlzc2lvbklkc1swXSkpOyAvLyBTYW1wbGUgY2hlY2tcblxuICAgICAgICAgIC8vIEluc2VydCBuZXcgcm9sZS1wZXJtaXNzaW9uIGFzc29jaWF0aW9uc1xuICAgICAgICAgIGNvbnN0IHJvbGVQZXJtaXNzaW9uVmFsdWVzID0gdmFsaWRQZXJtaXNzaW9uSWRzLm1hcChwZXJtaXNzaW9uSWQgPT4gKHtcbiAgICAgICAgICAgIHJvbGVfaWQ6IHJvbGVJZCxcbiAgICAgICAgICAgIHBlcm1pc3Npb25faWQ6IHBlcm1pc3Npb25JZFxuICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5pbnNlcnQocm9sZV9oYXNfcGVybWlzc2lvbnMpLnZhbHVlcyhyb2xlUGVybWlzc2lvblZhbHVlcyk7XG4gICAgICAgICAgfSBjYXRjaCAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgICAgIC8vIElmIGluc2VydCBmYWlscyAoZS5nLiwgaW52YWxpZCBwZXJtaXNzaW9uIElEKSwgcmV0dXJuIGVycm9yXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluc2VydGluZyByb2xlIHBlcm1pc3Npb25zOicsIGluc2VydEVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIHBlcm1pc3Npb24gSURzIHByb3ZpZGVkLiBTb21lIHBlcm1pc3Npb25zIG1heSBub3QgZXhpc3QuJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmV0Y2ggdXBkYXRlZCByb2xlIHdpdGggcGVybWlzc2lvbnNcbiAgICAgIGNvbnN0IHJvbGVQZXJtaXNzaW9ucyA9IGF3YWl0IGRiXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuZnJvbShyb2xlX2hhc19wZXJtaXNzaW9ucylcbiAgICAgICAgLndoZXJlKGVxKHJvbGVfaGFzX3Blcm1pc3Npb25zLnJvbGVfaWQsIHJvbGVJZCkpO1xuXG4gICAgICBjb25zdCBwZXJtaXNzaW9uRGV0YWlscyA9IFtdO1xuICAgICAgZm9yIChjb25zdCBycCBvZiByb2xlUGVybWlzc2lvbnMpIHtcbiAgICAgICAgY29uc3QgcGVybSA9IGF3YWl0IGRiXG4gICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgLmZyb20ocGVybWlzc2lvbnMpXG4gICAgICAgICAgLndoZXJlKGVxKHBlcm1pc3Npb25zLmlkLCBycC5wZXJtaXNzaW9uX2lkKSk7XG4gICAgICAgIGlmIChwZXJtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBwZXJtaXNzaW9uRGV0YWlscy5wdXNoKHBlcm1bMF0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBtZXNzYWdlOiBgUGVybWlzc2lvbnMgdXBkYXRlZCBmb3Igcm9sZSAke3JvbGVOYW1lfWAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByb2xlOiByb2xlUmVzdWx0WzBdLFxuICAgICAgICAgIHBlcm1pc3Npb25zOiBwZXJtaXNzaW9uRGV0YWlsc1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJvbGUgcGVybWlzc2lvbnM6JywgZXJyb3IpXG4gICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciB3aGlsZSB1cGRhdGluZyByb2xlIHBlcm1pc3Npb25zJ1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEFzc2lnbiByb2xlIHRvIHVzZXIgKHRoaXMgd291bGQgdHlwaWNhbGx5IGJlIGRvbmUgYnkgYW4gYWRtaW4pXG4gIGZhc3RpZnkucG9zdCgnL3VzZXJzLzp1c2VySWQvcm9sZScsIHtcbiAgICBwcmVIYW5kbGVyOiBbdmVyaWZ5VG9rZW4sIHJlcXVpcmVBZG1pbl0sXG4gIH0sIGFzeW5jIChyZXF1ZXN0LCByZXBseSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxdWVzdC5wYXJhbXM7XG4gICAgICBjb25zdCB7IHJvbGU6IHJvbGVOYW1lIH0gPSByZXF1ZXN0LmJvZHk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHJvbGUgbmFtZVxuICAgICAgaWYgKCFPYmplY3QudmFsdWVzKFJPTEVTKS5pbmNsdWRlcyhyb2xlTmFtZSkpIHtcbiAgICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIHJvbGUnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgcm9sZSBJRCBmcm9tIGRhdGFiYXNlXG4gICAgICBjb25zdCByb2xlUmVzdWx0ID0gYXdhaXQgZGJcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5mcm9tKHJvbGVzKVxuICAgICAgICAud2hlcmUoZXEocm9sZXMubmFtZSwgcm9sZU5hbWUpKVxuICAgICAgICAubGltaXQoMSk7XG5cbiAgICAgIGlmIChyb2xlUmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXBseS5jb2RlKDQwNCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgbWVzc2FnZTogJ1JvbGUgbm90IGZvdW5kIGluIGRhdGFiYXNlJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCByb2xlSWQgPSByb2xlUmVzdWx0WzBdLmlkO1xuXG4gICAgICAvLyBJbXBvcnQgdXNlcl9oYXNfcm9sZXMgZm9yIHRoZSBvcGVyYXRpb25cbiAgICAgIGNvbnN0IHsgdXNlcl9oYXNfcm9sZXMgfSA9IGF3YWl0IGltcG9ydCgnLi4vZGIvc2NoZW1hcy9pbmRleC5qcycpO1xuXG4gICAgICAvLyBSZW1vdmUgYW55IGV4aXN0aW5nIHJvbGVzIGZvciB0aGlzIHVzZXIgKHNpbmdsZSByb2xlIHBlciB1c2VyIG1vZGVsKVxuICAgICAgYXdhaXQgZGJcbiAgICAgICAgLmRlbGV0ZSh1c2VyX2hhc19yb2xlcylcbiAgICAgICAgLndoZXJlKGVxKHVzZXJfaGFzX3JvbGVzLnVzZXJfaWQsIHVzZXJJZCkpO1xuXG4gICAgICAvLyBBc3NpZ24gbmV3IHJvbGVcbiAgICAgIGF3YWl0IGRiXG4gICAgICAgIC5pbnNlcnQodXNlcl9oYXNfcm9sZXMpXG4gICAgICAgIC52YWx1ZXMoe1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICByb2xlX2lkOiByb2xlSWQsXG4gICAgICAgICAgYXNzaWduZWRfYnk6IHJlcXVlc3QudXNlci5pZFxuICAgICAgICB9KTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIHBlcm1pc3Npb24gY2FjaGUgZm9yIHRoaXMgdXNlclxuICAgICAgY29uc3QgeyBjbGVhclBlcm1pc3Npb25DYWNoZSB9ID0gYXdhaXQgaW1wb3J0KCcuLi9taWRkbGV3YXJlL3JiYWMubWlkZGxld2FyZS5qcycpO1xuICAgICAgY2xlYXJQZXJtaXNzaW9uQ2FjaGUodXNlcklkKTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFJvbGUgJHtyb2xlTmFtZX0gYXNzaWduZWQgdG8gdXNlciAke3VzZXJJZH0gYnkgJHtyZXF1ZXN0LnVzZXIuaWR9YCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBtZXNzYWdlOiBgUm9sZSAke3JvbGVOYW1lfSBhc3NpZ25lZCB0byB1c2VyICR7dXNlcklkfWAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgcm9sZTogcm9sZU5hbWUsXG4gICAgICAgICAgcm9sZUlkLFxuICAgICAgICAgIGFzc2lnbmVkQnk6IHJlcXVlc3QudXNlci5pZFxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGFzc2lnbmluZyByb2xlOicsIGVycm9yKVxuICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgIG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3Igd2hpbGUgYXNzaWduaW5nIHJvbGUnXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUmVtb3ZlIHJvbGUgZnJvbSB1c2VyXG4gIGZhc3RpZnkuZGVsZXRlKCcvdXNlcnMvOnVzZXJJZC9yb2xlJywge1xuICAgIHByZUhhbmRsZXI6IFt2ZXJpZnlUb2tlbiwgcmVxdWlyZUFkbWluXSxcbiAgfSwgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXF1ZXN0LnBhcmFtcztcblxuICAgICAgLy8gSW1wb3J0IHVzZXJfaGFzX3JvbGVzIGZvciB0aGUgb3BlcmF0aW9uXG4gICAgICBjb25zdCB7IHVzZXJfaGFzX3JvbGVzIH0gPSBhd2FpdCBpbXBvcnQoJy4uL2RiL3NjaGVtYXMvaW5kZXguanMnKTtcblxuICAgICAgLy8gUmVtb3ZlIGFsbCByb2xlcyBmb3IgdGhpcyB1c2VyXG4gICAgICBhd2FpdCBkYlxuICAgICAgICAuZGVsZXRlKHVzZXJfaGFzX3JvbGVzKVxuICAgICAgICAud2hlcmUoZXEodXNlcl9oYXNfcm9sZXMudXNlcl9pZCwgdXNlcklkKSk7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBwZXJtaXNzaW9uIGNhY2hlIGZvciB0aGlzIHVzZXJcbiAgICAgIGNvbnN0IHsgY2xlYXJQZXJtaXNzaW9uQ2FjaGUgfSA9IGF3YWl0IGltcG9ydCgnLi4vbWlkZGxld2FyZS9yYmFjLm1pZGRsZXdhcmUuanMnKTtcbiAgICAgIGNsZWFyUGVybWlzc2lvbkNhY2hlKHVzZXJJZCk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBBbGwgcm9sZXMgcmVtb3ZlZCBmcm9tIHVzZXIgJHt1c2VySWR9IGJ5ICR7cmVxdWVzdC51c2VyLmlkfWApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgbWVzc2FnZTogYEFsbCByb2xlcyByZW1vdmVkIGZyb20gdXNlciAke3VzZXJJZH1gLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcmVtb3Zpbmcgcm9sZTonLCBlcnJvcilcbiAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICBtZXNzYWdlOiAnU2VydmVyIGVycm9yIHdoaWxlIHJlbW92aW5nIHJvbGUnXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gR2V0IHVzZXIncyByb2xlcyBhbmQgcGVybWlzc2lvbnNcbiAgZmFzdGlmeS5nZXQoJy91c2Vycy86dXNlcklkL3Blcm1pc3Npb25zJywge1xuICAgIHByZUhhbmRsZXI6IFt2ZXJpZnlUb2tlbiwgcmVxdWlyZUFkbWluXSxcbiAgfSwgYXN5bmMgKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXF1ZXN0LnBhcmFtcztcblxuICAgICAgLy8gSW1wb3J0IG5lY2Vzc2FyeSBzY2hlbWFzXG4gICAgICBjb25zdCB7IHVzZXJfaGFzX3JvbGVzLCByb2xlX2hhc19wZXJtaXNzaW9ucyB9ID0gYXdhaXQgaW1wb3J0KCcuLi9kYi9zY2hlbWFzL2luZGV4LmpzJyk7XG4gICAgICBjb25zdCB7IGluQXJyYXkgfSA9IGF3YWl0IGltcG9ydCgnZHJpenpsZS1vcm0nKTtcblxuICAgICAgLy8gR2V0IHVzZXIncyByb2xlc1xuICAgICAgY29uc3QgdXNlclJvbGVzID0gYXdhaXQgZGJcbiAgICAgICAgLnNlbGVjdCh7XG4gICAgICAgICAgcm9sZV9pZDogdXNlcl9oYXNfcm9sZXMucm9sZV9pZCxcbiAgICAgICAgICBhc3NpZ25lZF9hdDogdXNlcl9oYXNfcm9sZXMuYXNzaWduZWRfYXQsXG4gICAgICAgICAgYXNzaWduZWRfYnk6IHVzZXJfaGFzX3JvbGVzLmFzc2lnbmVkX2J5XG4gICAgICAgIH0pXG4gICAgICAgIC5mcm9tKHVzZXJfaGFzX3JvbGVzKVxuICAgICAgICAud2hlcmUoZXEodXNlcl9oYXNfcm9sZXMudXNlcl9pZCwgdXNlcklkKSk7XG5cbiAgICAgIGlmICh1c2VyUm9sZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgcm9sZXM6IFtdLFxuICAgICAgICAgICAgcGVybWlzc2lvbnM6IFtdXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgcm9sZSBkZXRhaWxzXG4gICAgICBjb25zdCByb2xlSWRzID0gdXNlclJvbGVzLm1hcChyID0+IHIucm9sZV9pZCk7XG4gICAgICBjb25zdCByb2xlRGV0YWlscyA9IGF3YWl0IGRiXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuZnJvbShyb2xlcylcbiAgICAgICAgLndoZXJlKGluQXJyYXkocm9sZXMuaWQsIHJvbGVJZHMpKTtcblxuICAgICAgLy8gR2V0IHBlcm1pc3Npb25zIGZvciBhbGwgcm9sZXNcbiAgICAgIGNvbnN0IHJvbGVQZXJtaXNzaW9ucyA9IGF3YWl0IGRiXG4gICAgICAgIC5zZWxlY3QoeyBwZXJtaXNzaW9uX2lkOiByb2xlX2hhc19wZXJtaXNzaW9ucy5wZXJtaXNzaW9uX2lkIH0pXG4gICAgICAgIC5mcm9tKHJvbGVfaGFzX3Blcm1pc3Npb25zKVxuICAgICAgICAud2hlcmUoaW5BcnJheShyb2xlX2hhc19wZXJtaXNzaW9ucy5yb2xlX2lkLCByb2xlSWRzKSk7XG5cbiAgICAgIGNvbnN0IHBlcm1pc3Npb25JZHMgPSBbLi4ubmV3IFNldChyb2xlUGVybWlzc2lvbnMubWFwKHJwID0+IHJwLnBlcm1pc3Npb25faWQpKV07XG5cbiAgICAgIGxldCBwZXJtaXNzaW9uRGV0YWlscyA9IFtdO1xuICAgICAgaWYgKHBlcm1pc3Npb25JZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBwZXJtaXNzaW9uRGV0YWlscyA9IGF3YWl0IGRiXG4gICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgLmZyb20ocGVybWlzc2lvbnMpXG4gICAgICAgICAgLndoZXJlKGluQXJyYXkocGVybWlzc2lvbnMuaWQsIHBlcm1pc3Npb25JZHMpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgcm9sZXM6IHJvbGVEZXRhaWxzLm1hcChyID0+ICh7XG4gICAgICAgICAgICBpZDogci5pZCxcbiAgICAgICAgICAgIG5hbWU6IHIubmFtZSxcbiAgICAgICAgICAgIGRpc3BsYXlfbmFtZTogci5kaXNwbGF5X25hbWUsXG4gICAgICAgICAgICBoaWVyYXJjaHlfbGV2ZWw6IHIuaGllcmFyY2h5X2xldmVsLFxuICAgICAgICAgICAgYXNzaWduZWRfYXQ6IHVzZXJSb2xlcy5maW5kKHVyID0+IHVyLnJvbGVfaWQgPT09IHIuaWQpPy5hc3NpZ25lZF9hdCxcbiAgICAgICAgICAgIGFzc2lnbmVkX2J5OiB1c2VyUm9sZXMuZmluZCh1ciA9PiB1ci5yb2xlX2lkID09PSByLmlkKT8uYXNzaWduZWRfYnlcbiAgICAgICAgICB9KSksXG4gICAgICAgICAgcGVybWlzc2lvbnM6IHBlcm1pc3Npb25EZXRhaWxzLm1hcChwID0+ICh7XG4gICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgIG5hbWU6IHAubmFtZSxcbiAgICAgICAgICAgIHJlc291cmNlOiBwLnJlc291cmNlLFxuICAgICAgICAgICAgYWN0aW9uOiBwLmFjdGlvbixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwLmRlc2NyaXB0aW9uXG4gICAgICAgICAgfSkpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBwZXJtaXNzaW9uczonLCBlcnJvcilcbiAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICBtZXNzYWdlOiAnU2VydmVyIGVycm9yIHdoaWxlIGZldGNoaW5nIHVzZXIgcGVybWlzc2lvbnMnXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJiYWNSb3V0ZXM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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