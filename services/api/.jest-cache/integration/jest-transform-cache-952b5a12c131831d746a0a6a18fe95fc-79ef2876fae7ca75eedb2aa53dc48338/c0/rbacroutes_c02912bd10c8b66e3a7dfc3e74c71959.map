{"version":3,"names":["cov_1ibgcgx9ra","actualCoverage","ROLES","PERMISSIONS","ROLE_PERMISSIONS","verifyToken","requireAdmin","db","roles","permissions","role_has_permissions","eq","and","logger","rbacRoutes","fastify","options","f","s","get","preHandler","request","reply","status","data","Object","values","error","code","message","userRole","b","user","role","PATIENT","params","includes","put","roleName","permissionIds","body","roleResult","select","from","where","name","limit","length","roleId","id","Array","isArray","delete","role_id","validPermissionIds","filter","undefined","map","isNaN","parseInt","existingPermissions","rolePermissionValues","permissionId","permission_id","insert","insertError","rolePermissions","permissionDetails","rp","perm","push","post","userId","user_has_roles","user_id","assigned_by","clearPermissionCache","info","assignedBy","inArray","userRoles","assigned_at","roleIds","r","roleDetails","Set","display_name","hierarchy_level","find","ur","p","resource","action","description"],"sources":["rbac.routes.js"],"sourcesContent":["import { ROLES, PERMISSIONS, ROLE_PERMISSIONS } from '../config/rbac.js';\nimport { verifyToken } from '../middleware/betterAuth.middleware.js';\nimport { requireAdmin } from '../middleware/rbac.middleware.js';\nimport { db } from '../config/db.drizzle.js';\nimport { roles, permissions, role_has_permissions } from '../db/schemas/index.js';\nimport { eq, and } from 'drizzle-orm';\n\nimport { logger } from '../utils/logger.js';\n// Fastify plugin for RBAC routes\nasync function rbacRoutes(fastify, options) {\n  // Get all roles\n  fastify.get('/roles', {\n    preHandler: [verifyToken, requireAdmin],\n  }, async (request, reply) => {\n    try {\n      return {\n        status: 200,\n        data: {\n          roles: Object.values(ROLES)\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching roles:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while fetching roles'\n      };\n    }\n  });\n\n  // Get all permissions (admin only)\n  fastify.get('/permissions', {\n    preHandler: [verifyToken, requireAdmin],\n  }, async (request, reply) => {\n    try {\n      return {\n        status: 200,\n        data: {\n          permissions: Object.values(PERMISSIONS)\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching permissions:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while fetching permissions'\n      };\n    }\n  });\n\n  // Get current user's permissions (any authenticated user)\n  fastify.get('/my-permissions', {\n    preHandler: [verifyToken],\n  }, async (request, reply) => {\n    try {\n      const userRole = request.user.role || ROLES.PATIENT;\n      const permissions = ROLE_PERMISSIONS[userRole] || [];\n      \n      return {\n        status: 200,\n        data: {\n          role: userRole,\n          permissions: permissions\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching user permissions:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while fetching user permissions'\n      };\n    }\n  });\n\n  // Get role permissions\n  fastify.get('/roles/:role/permissions', {\n    preHandler: [verifyToken, requireAdmin],\n  }, async (request, reply) => {\n    try {\n      const { role } = request.params;\n      \n      // Check if role exists\n      if (!Object.values(ROLES).includes(role)) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Role not found'\n        };\n      }\n      \n      const permissions = ROLE_PERMISSIONS[role] || [];\n      \n      return {\n        status: 200,\n        data: {\n          role,\n          permissions\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching role permissions:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while fetching role permissions'\n      };\n    }\n  });\n\n  // Update role permissions (PUT /api/rbac/roles/:role)\n  // This route handles both /api/rbac/roles/:role and /api/rbac/roles/:role/permissions\n  fastify.put('/roles/:role', {\n    preHandler: [verifyToken, requireAdmin],\n  }, async (request, reply) => {\n    try {\n      const { role: roleName } = request.params;\n      const { permissions: permissionIds } = request.body;\n      \n      // Validate role name\n      if (!Object.values(ROLES).includes(roleName)) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Role not found'\n        };\n      }\n\n      // Find role by name to get role ID\n      const roleResult = await db\n        .select()\n        .from(roles)\n        .where(eq(roles.name, roleName))\n        .limit(1);\n\n      if (roleResult.length === 0) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Role not found in database'\n        };\n      }\n\n      const roleId = roleResult[0].id;\n\n      // Validate permissions array\n      if (!Array.isArray(permissionIds)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Permissions must be an array'\n        };\n      }\n\n      // Remove all existing permissions for this role\n      await db\n        .delete(role_has_permissions)\n        .where(eq(role_has_permissions.role_id, roleId));\n\n      // Add new permissions if provided\n      if (permissionIds.length > 0) {\n        // Validate and convert permission IDs to numbers\n        const validPermissionIds = permissionIds\n          .filter(id => id !== null && id !== undefined)\n          .map(id => {\n            if (typeof id === 'number') return id;\n            if (typeof id === 'string' && !isNaN(id)) return parseInt(id);\n            return null;\n          })\n          .filter(id => id !== null);\n\n        if (validPermissionIds.length > 0) {\n          // Verify all permission IDs exist in database\n          const existingPermissions = await db\n            .select()\n            .from(permissions)\n            .where(eq(permissions.id, validPermissionIds[0])); // Sample check\n\n          // Insert new role-permission associations\n          const rolePermissionValues = validPermissionIds.map(permissionId => ({\n            role_id: roleId,\n            permission_id: permissionId\n          }));\n\n          try {\n            await db.insert(role_has_permissions).values(rolePermissionValues);\n          } catch (insertError) {\n            // If insert fails (e.g., invalid permission ID), return error\n            logger.error('Error inserting role permissions:', insertError)\n            reply.code(400);\n            return {\n              status: 400,\n              message: 'Invalid permission IDs provided. Some permissions may not exist.'\n            };\n          }\n        }\n      }\n\n      // Fetch updated role with permissions\n      const rolePermissions = await db\n        .select()\n        .from(role_has_permissions)\n        .where(eq(role_has_permissions.role_id, roleId));\n\n      const permissionDetails = [];\n      for (const rp of rolePermissions) {\n        const perm = await db\n          .select()\n          .from(permissions)\n          .where(eq(permissions.id, rp.permission_id));\n        if (perm.length > 0) {\n          permissionDetails.push(perm[0]);\n        }\n      }\n\n      return {\n        status: 200,\n        message: `Permissions updated for role ${roleName}`,\n        data: {\n          role: roleResult[0],\n          permissions: permissionDetails\n        }\n      };\n    } catch (error) {\n      logger.error('Error updating role permissions:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while updating role permissions'\n      };\n    }\n  });\n\n  // Assign role to user (this would typically be done by an admin)\n  fastify.post('/users/:userId/role', {\n    preHandler: [verifyToken, requireAdmin],\n  }, async (request, reply) => {\n    try {\n      const { userId } = request.params;\n      const { role: roleName } = request.body;\n\n      // Validate role name\n      if (!Object.values(ROLES).includes(roleName)) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Invalid role'\n        };\n      }\n\n      // Get the role ID from database\n      const roleResult = await db\n        .select()\n        .from(roles)\n        .where(eq(roles.name, roleName))\n        .limit(1);\n\n      if (roleResult.length === 0) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Role not found in database'\n        };\n      }\n\n      const roleId = roleResult[0].id;\n\n      // Import user_has_roles for the operation\n      const { user_has_roles } = await import('../db/schemas/index.js');\n\n      // Remove any existing roles for this user (single role per user model)\n      await db\n        .delete(user_has_roles)\n        .where(eq(user_has_roles.user_id, userId));\n\n      // Assign new role\n      await db\n        .insert(user_has_roles)\n        .values({\n          user_id: userId,\n          role_id: roleId,\n          assigned_by: request.user.id\n        });\n\n      // Clear the permission cache for this user\n      const { clearPermissionCache } = await import('../middleware/rbac.middleware.js');\n      clearPermissionCache(userId);\n\n      logger.info(`Role ${roleName} assigned to user ${userId} by ${request.user.id}`);\n\n      return {\n        status: 200,\n        message: `Role ${roleName} assigned to user ${userId}`,\n        data: {\n          userId,\n          role: roleName,\n          roleId,\n          assignedBy: request.user.id\n        }\n      };\n    } catch (error) {\n      logger.error('Error assigning role:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while assigning role'\n      };\n    }\n  });\n\n  // Remove role from user\n  fastify.delete('/users/:userId/role', {\n    preHandler: [verifyToken, requireAdmin],\n  }, async (request, reply) => {\n    try {\n      const { userId } = request.params;\n\n      // Import user_has_roles for the operation\n      const { user_has_roles } = await import('../db/schemas/index.js');\n\n      // Remove all roles for this user\n      await db\n        .delete(user_has_roles)\n        .where(eq(user_has_roles.user_id, userId));\n\n      // Clear the permission cache for this user\n      const { clearPermissionCache } = await import('../middleware/rbac.middleware.js');\n      clearPermissionCache(userId);\n\n      logger.info(`All roles removed from user ${userId} by ${request.user.id}`);\n\n      return {\n        status: 200,\n        message: `All roles removed from user ${userId}`,\n        data: {\n          userId\n        }\n      };\n    } catch (error) {\n      logger.error('Error removing role:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while removing role'\n      };\n    }\n  });\n\n  // Get user's roles and permissions\n  fastify.get('/users/:userId/permissions', {\n    preHandler: [verifyToken, requireAdmin],\n  }, async (request, reply) => {\n    try {\n      const { userId } = request.params;\n\n      // Import necessary schemas\n      const { user_has_roles, role_has_permissions } = await import('../db/schemas/index.js');\n      const { inArray } = await import('drizzle-orm');\n\n      // Get user's roles\n      const userRoles = await db\n        .select({\n          role_id: user_has_roles.role_id,\n          assigned_at: user_has_roles.assigned_at,\n          assigned_by: user_has_roles.assigned_by\n        })\n        .from(user_has_roles)\n        .where(eq(user_has_roles.user_id, userId));\n\n      if (userRoles.length === 0) {\n        return {\n          status: 200,\n          data: {\n            userId,\n            roles: [],\n            permissions: []\n          }\n        };\n      }\n\n      // Get role details\n      const roleIds = userRoles.map(r => r.role_id);\n      const roleDetails = await db\n        .select()\n        .from(roles)\n        .where(inArray(roles.id, roleIds));\n\n      // Get permissions for all roles\n      const rolePermissions = await db\n        .select({ permission_id: role_has_permissions.permission_id })\n        .from(role_has_permissions)\n        .where(inArray(role_has_permissions.role_id, roleIds));\n\n      const permissionIds = [...new Set(rolePermissions.map(rp => rp.permission_id))];\n\n      let permissionDetails = [];\n      if (permissionIds.length > 0) {\n        permissionDetails = await db\n          .select()\n          .from(permissions)\n          .where(inArray(permissions.id, permissionIds));\n      }\n\n      return {\n        status: 200,\n        data: {\n          userId,\n          roles: roleDetails.map(r => ({\n            id: r.id,\n            name: r.name,\n            display_name: r.display_name,\n            hierarchy_level: r.hierarchy_level,\n            assigned_at: userRoles.find(ur => ur.role_id === r.id)?.assigned_at,\n            assigned_by: userRoles.find(ur => ur.role_id === r.id)?.assigned_by\n          })),\n          permissions: permissionDetails.map(p => ({\n            id: p.id,\n            name: p.name,\n            resource: p.resource,\n            action: p.action,\n            description: p.description\n          }))\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching user permissions:', error)\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Server error while fetching user permissions'\n      };\n    }\n  });\n}\n\nexport default rbacRoutes;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}