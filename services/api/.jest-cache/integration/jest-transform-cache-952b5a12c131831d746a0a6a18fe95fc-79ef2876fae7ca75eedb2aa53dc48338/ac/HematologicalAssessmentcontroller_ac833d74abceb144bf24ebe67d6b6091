091a8d095977ea462118ef8d95411c57
/* istanbul ignore next */
function cov_ooz6sdt0a() {
  var path = "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/HematologicalAssessment.controller.js";
  var hash = "b7a2243173eb2462aac01fd7490097b94d785b0c";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/fabrice/Sites/chartwarden/Chartwarden/services/api/src/controllers/patient/HematologicalAssessment.controller.js",
    statementMap: {
      "0": {
        start: {
          line: 10,
          column: 8
        },
        end: {
          line: 27,
          column: 9
        }
      },
      "1": {
        start: {
          line: 11,
          column: 45
        },
        end: {
          line: 17,
          column: 45
        }
      },
      "2": {
        start: {
          line: 18,
          column: 12
        },
        end: {
          line: 18,
          column: 28
        }
      },
      "3": {
        start: {
          line: 19,
          column: 12
        },
        end: {
          line: 19,
          column: 44
        }
      },
      "4": {
        start: {
          line: 21,
          column: 12
        },
        end: {
          line: 21,
          column: 76
        }
      },
      "5": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 28
        }
      },
      "6": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 26,
          column: 14
        }
      },
      "7": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 48,
          column: 9
        }
      },
      "8": {
        start: {
          line: 33,
          column: 38
        },
        end: {
          line: 38,
          column: 34
        }
      },
      "9": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 39,
          column: 28
        }
      },
      "10": {
        start: {
          line: 40,
          column: 12
        },
        end: {
          line: 40,
          column: 37
        }
      },
      "11": {
        start: {
          line: 42,
          column: 12
        },
        end: {
          line: 42,
          column: 69
        }
      },
      "12": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 43,
          column: 28
        }
      },
      "13": {
        start: {
          line: 44,
          column: 12
        },
        end: {
          line: 47,
          column: 14
        }
      },
      "14": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 115,
          column: 9
        }
      },
      "15": {
        start: {
          line: 54,
          column: 54
        },
        end: {
          line: 54,
          column: 66
        }
      },
      "16": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 62,
          column: 13
        }
      },
      "17": {
        start: {
          line: 58,
          column: 16
        },
        end: {
          line: 58,
          column: 32
        }
      },
      "18": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 61,
          column: 18
        }
      },
      "19": {
        start: {
          line: 64,
          column: 12
        },
        end: {
          line: 69,
          column: 13
        }
      },
      "20": {
        start: {
          line: 65,
          column: 16
        },
        end: {
          line: 65,
          column: 32
        }
      },
      "21": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 68,
          column: 18
        }
      },
      "22": {
        start: {
          line: 72,
          column: 40
        },
        end: {
          line: 72,
          column: 191
        }
      },
      "23": {
        start: {
          line: 73,
          column: 39
        },
        end: {
          line: 73,
          column: 61
        }
      },
      "24": {
        start: {
          line: 76,
          column: 43
        },
        end: {
          line: 78,
          column: 35
        }
      },
      "25": {
        start: {
          line: 81,
          column: 24
        },
        end: {
          line: 81,
          column: 34
        }
      },
      "26": {
        start: {
          line: 82,
          column: 12
        },
        end: {
          line: 101,
          column: 13
        }
      },
      "27": {
        start: {
          line: 84,
          column: 16
        },
        end: {
          line: 90,
          column: 33
        }
      },
      "28": {
        start: {
          line: 91,
          column: 16
        },
        end: {
          line: 91,
          column: 35
        }
      },
      "29": {
        start: {
          line: 94,
          column: 16
        },
        end: {
          line: 99,
          column: 31
        }
      },
      "30": {
        start: {
          line: 100,
          column: 16
        },
        end: {
          line: 100,
          column: 35
        }
      },
      "31": {
        start: {
          line: 103,
          column: 12
        },
        end: {
          line: 103,
          column: 28
        }
      },
      "32": {
        start: {
          line: 104,
          column: 12
        },
        end: {
          line: 107,
          column: 14
        }
      },
      "33": {
        start: {
          line: 109,
          column: 12
        },
        end: {
          line: 109,
          column: 74
        }
      },
      "34": {
        start: {
          line: 110,
          column: 12
        },
        end: {
          line: 110,
          column: 28
        }
      },
      "35": {
        start: {
          line: 111,
          column: 12
        },
        end: {
          line: 114,
          column: 14
        }
      },
      "36": {
        start: {
          line: 121,
          column: 8
        },
        end: {
          line: 154,
          column: 9
        }
      },
      "37": {
        start: {
          line: 122,
          column: 27
        },
        end: {
          line: 122,
          column: 41
        }
      },
      "38": {
        start: {
          line: 124,
          column: 45
        },
        end: {
          line: 130,
          column: 105
        }
      },
      "39": {
        start: {
          line: 131,
          column: 44
        },
        end: {
          line: 131,
          column: 71
        }
      },
      "40": {
        start: {
          line: 133,
          column: 12
        },
        end: {
          line: 143,
          column: 13
        }
      },
      "41": {
        start: {
          line: 135,
          column: 16
        },
        end: {
          line: 135,
          column: 32
        }
      },
      "42": {
        start: {
          line: 136,
          column: 16
        },
        end: {
          line: 142,
          column: 18
        }
      },
      "43": {
        start: {
          line: 145,
          column: 12
        },
        end: {
          line: 145,
          column: 28
        }
      },
      "44": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 146,
          column: 43
        }
      },
      "45": {
        start: {
          line: 148,
          column: 12
        },
        end: {
          line: 148,
          column: 75
        }
      },
      "46": {
        start: {
          line: 149,
          column: 12
        },
        end: {
          line: 149,
          column: 28
        }
      },
      "47": {
        start: {
          line: 150,
          column: 12
        },
        end: {
          line: 153,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 5
          }
        },
        loc: {
          start: {
            line: 9,
            column: 32
          },
          end: {
            line: 28,
            column: 5
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 31,
            column: 5
          }
        },
        loc: {
          start: {
            line: 31,
            column: 44
          },
          end: {
            line: 49,
            column: 5
          }
        },
        line: 31
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 52,
            column: 4
          },
          end: {
            line: 52,
            column: 5
          }
        },
        loc: {
          start: {
            line: 52,
            column: 32
          },
          end: {
            line: 116,
            column: 5
          }
        },
        line: 52
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 120,
            column: 4
          },
          end: {
            line: 120,
            column: 5
          }
        },
        loc: {
          start: {
            line: 120,
            column: 31
          },
          end: {
            line: 155,
            column: 5
          }
        },
        line: 120
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 62,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 62,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "1": {
        loc: {
          start: {
            line: 64,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 64,
            column: 12
          },
          end: {
            line: 69,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 64
      },
      "2": {
        loc: {
          start: {
            line: 76,
            column: 43
          },
          end: {
            line: 78,
            column: 35
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 77,
            column: 18
          },
          end: {
            line: 77,
            column: 45
          }
        }, {
          start: {
            line: 78,
            column: 18
          },
          end: {
            line: 78,
            column: 35
          }
        }],
        line: 76
      },
      "3": {
        loc: {
          start: {
            line: 82,
            column: 12
          },
          end: {
            line: 101,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 82,
            column: 12
          },
          end: {
            line: 101,
            column: 13
          }
        }, {
          start: {
            line: 92,
            column: 19
          },
          end: {
            line: 101,
            column: 13
          }
        }],
        line: 82
      },
      "4": {
        loc: {
          start: {
            line: 133,
            column: 12
          },
          end: {
            line: 143,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 133,
            column: 12
          },
          end: {
            line: 143,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 133
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    inputSourceMap: null,
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "b7a2243173eb2462aac01fd7490097b94d785b0c"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_ooz6sdt0a = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_ooz6sdt0a();
import { db } from "../../config/db.drizzle.js";
import { hematological_assessment } from "../../db/schemas/hematologicalAssessment.schema.js";
import { hematological } from "../../db/schemas/hematological.schema.js";
import { eq } from "drizzle-orm";
import { logger } from '../../utils/logger.js';
class HematologicalAssessmentController {
  // Get all hematological assessments
  async index(request, reply) {
    /* istanbul ignore next */
    cov_ooz6sdt0a().f[0]++;
    cov_ooz6sdt0a().s[0]++;
    try {
      const hematologicalAssessments =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[1]++, await db.select({
        id: hematological_assessment.id,
        patient_id: hematological_assessment.patient_id,
        hematological_ids: hematological_assessment.hematological_ids,
        createdAt: hematological_assessment.createdAt,
        updatedAt: hematological_assessment.updatedAt
      }).from(hematological_assessment));
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[2]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[3]++;
      return hematologicalAssessments;
    } catch (error) {
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[4]++;
      logger.error("Error fetching hematological assessments:", error);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[5]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[6]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Get all hematological options
  async hematologicalList(request, reply) {
    /* istanbul ignore next */
    cov_ooz6sdt0a().f[1]++;
    cov_ooz6sdt0a().s[7]++;
    try {
      const hematologicalList =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[8]++, await db.select({
        id: hematological.id,
        name: hematological.name,
        createdAt: hematological.createdAt,
        updatedAt: hematological.updatedAt
      }).from(hematological));
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[9]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[10]++;
      return hematologicalList;
    } catch (error) {
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[11]++;
      logger.error("Error fetching hematological list:", error);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[12]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[13]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Store or update hematological assessment
  async store(request, reply) {
    /* istanbul ignore next */
    cov_ooz6sdt0a().f[2]++;
    cov_ooz6sdt0a().s[14]++;
    try {
      const {
        patient_id,
        hematological_ids
      } =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[15]++, request.body);

      // Validate required fields
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[16]++;
      if (!patient_id) {
        /* istanbul ignore next */
        cov_ooz6sdt0a().b[0][0]++;
        cov_ooz6sdt0a().s[17]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_ooz6sdt0a().s[18]++;
        return {
          message: "Patient ID is required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_ooz6sdt0a().b[0][1]++;
      }
      cov_ooz6sdt0a().s[19]++;
      if (!hematological_ids) {
        /* istanbul ignore next */
        cov_ooz6sdt0a().b[1][0]++;
        cov_ooz6sdt0a().s[20]++;
        reply.code(400);
        /* istanbul ignore next */
        cov_ooz6sdt0a().s[21]++;
        return {
          message: "Hematological IDs are required"
        };
      } else
      /* istanbul ignore next */
      {
        cov_ooz6sdt0a().b[1][1]++;
      }

      // Check if hematological assessment already exists for this patient
      const existingAssessments =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[22]++, await db.select({
        id: hematological_assessment.id
      }).from(hematological_assessment).where(eq(hematological_assessment.patient_id, patient_id)).limit(1));
      const existingAssessment =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[23]++, existingAssessments[0]);

      // Convert hematological_ids array to comma-separated string
      const hematologicalIdsString =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[24]++, Array.isArray(hematological_ids) ?
      /* istanbul ignore next */
      (cov_ooz6sdt0a().b[2][0]++, hematological_ids.join(",")) :
      /* istanbul ignore next */
      (cov_ooz6sdt0a().b[2][1]++, hematological_ids));
      let result;
      const now =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[25]++, new Date());
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[26]++;
      if (existingAssessment) {
        /* istanbul ignore next */
        cov_ooz6sdt0a().b[3][0]++;
        cov_ooz6sdt0a().s[27]++;
        // Update existing hematological assessment
        result = await db.update(hematological_assessment).set({
          hematological_ids: hematologicalIdsString,
          updatedAt: now
        }).where(eq(hematological_assessment.patient_id, patient_id)).returning();
        /* istanbul ignore next */
        cov_ooz6sdt0a().s[28]++;
        result = result[0];
      } else {
        /* istanbul ignore next */
        cov_ooz6sdt0a().b[3][1]++;
        cov_ooz6sdt0a().s[29]++;
        // Create new hematological assessment
        result = await db.insert(hematological_assessment).values({
          patient_id: patient_id,
          hematological_ids: hematologicalIdsString,
          createdAt: now,
          updatedAt: now
        }).returning();
        /* istanbul ignore next */
        cov_ooz6sdt0a().s[30]++;
        result = result[0];
      }
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[31]++;
      reply.code(201);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[32]++;
      return {
        message: "Hematological assessment created or updated successfully",
        data: result
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[33]++;
      logger.error("Error storing hematological assessment:", error);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[34]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[35]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }

  // Show hematological assessment for a specific patient
  // Returns empty data if no assessment exists (to allow frontend to render form)
  async show(request, reply) {
    /* istanbul ignore next */
    cov_ooz6sdt0a().f[3]++;
    cov_ooz6sdt0a().s[36]++;
    try {
      const {
        id
      } =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[37]++, request.params);
      const hematologicalAssessments =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[38]++, await db.select({
        id: hematological_assessment.id,
        patient_id: hematological_assessment.patient_id,
        hematological_ids: hematological_assessment.hematological_ids,
        createdAt: hematological_assessment.createdAt,
        updatedAt: hematological_assessment.updatedAt
      }).from(hematological_assessment).where(eq(hematological_assessment.patient_id, id)).limit(1));
      const hematologicalAssessment =
      /* istanbul ignore next */
      (cov_ooz6sdt0a().s[39]++, hematologicalAssessments[0]);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[40]++;
      if (!hematologicalAssessment) {
        /* istanbul ignore next */
        cov_ooz6sdt0a().b[4][0]++;
        cov_ooz6sdt0a().s[41]++;
        // Return 200 with empty data instead of 404, so frontend can render form
        reply.code(200);
        /* istanbul ignore next */
        cov_ooz6sdt0a().s[42]++;
        return {
          id: null,
          patient_id: parseInt(id),
          hematological_ids: "",
          createdAt: null,
          updatedAt: null
        };
      } else
      /* istanbul ignore next */
      {
        cov_ooz6sdt0a().b[4][1]++;
      }
      cov_ooz6sdt0a().s[43]++;
      reply.code(200);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[44]++;
      return hematologicalAssessment;
    } catch (error) {
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[45]++;
      logger.error("Error fetching hematological assessment:", error);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[46]++;
      reply.code(500);
      /* istanbul ignore next */
      cov_ooz6sdt0a().s[47]++;
      return {
        message: "Internal server error",
        error: error.message
      };
    }
  }
}
export default new HematologicalAssessmentController();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfb296NnNkdDBhIiwiYWN0dWFsQ292ZXJhZ2UiLCJkYiIsImhlbWF0b2xvZ2ljYWxfYXNzZXNzbWVudCIsImhlbWF0b2xvZ2ljYWwiLCJlcSIsImxvZ2dlciIsIkhlbWF0b2xvZ2ljYWxBc3Nlc3NtZW50Q29udHJvbGxlciIsImluZGV4IiwicmVxdWVzdCIsInJlcGx5IiwiZiIsInMiLCJoZW1hdG9sb2dpY2FsQXNzZXNzbWVudHMiLCJzZWxlY3QiLCJpZCIsInBhdGllbnRfaWQiLCJoZW1hdG9sb2dpY2FsX2lkcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImZyb20iLCJjb2RlIiwiZXJyb3IiLCJtZXNzYWdlIiwiaGVtYXRvbG9naWNhbExpc3QiLCJuYW1lIiwic3RvcmUiLCJib2R5IiwiYiIsImV4aXN0aW5nQXNzZXNzbWVudHMiLCJ3aGVyZSIsImxpbWl0IiwiZXhpc3RpbmdBc3Nlc3NtZW50IiwiaGVtYXRvbG9naWNhbElkc1N0cmluZyIsIkFycmF5IiwiaXNBcnJheSIsImpvaW4iLCJyZXN1bHQiLCJub3ciLCJEYXRlIiwidXBkYXRlIiwic2V0IiwicmV0dXJuaW5nIiwiaW5zZXJ0IiwidmFsdWVzIiwiZGF0YSIsInNob3ciLCJwYXJhbXMiLCJoZW1hdG9sb2dpY2FsQXNzZXNzbWVudCIsInBhcnNlSW50Il0sInNvdXJjZXMiOlsiSGVtYXRvbG9naWNhbEFzc2Vzc21lbnQuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi9jb25maWcvZGIuZHJpenpsZS5qc1wiO1xuaW1wb3J0IHsgaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvaGVtYXRvbG9naWNhbEFzc2Vzc21lbnQuc2NoZW1hLmpzXCI7XG5pbXBvcnQgeyBoZW1hdG9sb2dpY2FsIH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYXMvaGVtYXRvbG9naWNhbC5zY2hlbWEuanNcIjtcbmltcG9ydCB7IGVxIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL2xvZ2dlci5qcyc7XG5jbGFzcyBIZW1hdG9sb2dpY2FsQXNzZXNzbWVudENvbnRyb2xsZXIge1xuICAgIC8vIEdldCBhbGwgaGVtYXRvbG9naWNhbCBhc3Nlc3NtZW50c1xuICAgIGFzeW5jIGluZGV4KHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBoZW1hdG9sb2dpY2FsQXNzZXNzbWVudHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgIGlkOiBoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQuaWQsXG4gICAgICAgICAgICAgICAgcGF0aWVudF9pZDogaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50LnBhdGllbnRfaWQsXG4gICAgICAgICAgICAgICAgaGVtYXRvbG9naWNhbF9pZHM6IGhlbWF0b2xvZ2ljYWxfYXNzZXNzbWVudC5oZW1hdG9sb2dpY2FsX2lkcyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGhlbWF0b2xvZ2ljYWxfYXNzZXNzbWVudC5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQudXBkYXRlZEF0LFxuICAgICAgICAgICAgfSkuZnJvbShoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQpO1xuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIGhlbWF0b2xvZ2ljYWxBc3Nlc3NtZW50cztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZldGNoaW5nIGhlbWF0b2xvZ2ljYWwgYXNzZXNzbWVudHM6XCIsIGVycm9yKVxuICAgICAgICAgICAgcmVwbHkuY29kZSg1MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCBhbGwgaGVtYXRvbG9naWNhbCBvcHRpb25zXG4gICAgYXN5bmMgaGVtYXRvbG9naWNhbExpc3QocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGhlbWF0b2xvZ2ljYWxMaXN0ID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICBpZDogaGVtYXRvbG9naWNhbC5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBoZW1hdG9sb2dpY2FsLm5hbWUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBoZW1hdG9sb2dpY2FsLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGhlbWF0b2xvZ2ljYWwudXBkYXRlZEF0LFxuICAgICAgICAgICAgfSkuZnJvbShoZW1hdG9sb2dpY2FsKTtcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoMjAwKTtcbiAgICAgICAgICAgIHJldHVybiBoZW1hdG9sb2dpY2FsTGlzdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZldGNoaW5nIGhlbWF0b2xvZ2ljYWwgbGlzdDpcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXBseS5jb2RlKDUwMCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgb3IgdXBkYXRlIGhlbWF0b2xvZ2ljYWwgYXNzZXNzbWVudFxuICAgIGFzeW5jIHN0b3JlKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhdGllbnRfaWQsIGhlbWF0b2xvZ2ljYWxfaWRzIH0gPSByZXF1ZXN0LmJvZHk7XG5cbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgICAgICAgaWYgKCFwYXRpZW50X2lkKSB7XG4gICAgICAgICAgICAgICAgcmVwbHkuY29kZSg0MDApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJQYXRpZW50IElEIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFoZW1hdG9sb2dpY2FsX2lkcykge1xuICAgICAgICAgICAgICAgIHJlcGx5LmNvZGUoNDAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSGVtYXRvbG9naWNhbCBJRHMgYXJlIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaGVtYXRvbG9naWNhbCBhc3Nlc3NtZW50IGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIHBhdGllbnRcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQXNzZXNzbWVudHMgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50LmlkIH0pLmZyb20oaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50KS53aGVyZShlcShoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQucGF0aWVudF9pZCwgcGF0aWVudF9pZCkpLmxpbWl0KDEpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBc3Nlc3NtZW50ID0gZXhpc3RpbmdBc3Nlc3NtZW50c1swXTtcblxuICAgICAgICAgICAgLy8gQ29udmVydCBoZW1hdG9sb2dpY2FsX2lkcyBhcnJheSB0byBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nXG4gICAgICAgICAgICBjb25zdCBoZW1hdG9sb2dpY2FsSWRzU3RyaW5nID0gQXJyYXkuaXNBcnJheShoZW1hdG9sb2dpY2FsX2lkcylcbiAgICAgICAgICAgICAgICA/IGhlbWF0b2xvZ2ljYWxfaWRzLmpvaW4oXCIsXCIpXG4gICAgICAgICAgICAgICAgOiBoZW1hdG9sb2dpY2FsX2lkcztcblxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdBc3Nlc3NtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGhlbWF0b2xvZ2ljYWwgYXNzZXNzbWVudFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiLnVwZGF0ZShoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXQoeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlbWF0b2xvZ2ljYWxfaWRzOiBoZW1hdG9sb2dpY2FsSWRzU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBub3dcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKGVxKGhlbWF0b2xvZ2ljYWxfYXNzZXNzbWVudC5wYXRpZW50X2lkLCBwYXRpZW50X2lkKSlcbiAgICAgICAgICAgICAgICAgICAgLnJldHVybmluZygpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBoZW1hdG9sb2dpY2FsIGFzc2Vzc21lbnRcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBkYi5pbnNlcnQoaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50KS52YWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgICBwYXRpZW50X2lkOiBwYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgICAgICBoZW1hdG9sb2dpY2FsX2lkczogaGVtYXRvbG9naWNhbElkc1N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbm93LFxuICAgICAgICAgICAgICAgIH0pLnJldHVybmluZygpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDEpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkhlbWF0b2xvZ2ljYWwgYXNzZXNzbWVudCBjcmVhdGVkIG9yIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIHN0b3JpbmcgaGVtYXRvbG9naWNhbCBhc3Nlc3NtZW50OlwiLCBlcnJvcilcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaG93IGhlbWF0b2xvZ2ljYWwgYXNzZXNzbWVudCBmb3IgYSBzcGVjaWZpYyBwYXRpZW50XG4gICAgLy8gUmV0dXJucyBlbXB0eSBkYXRhIGlmIG5vIGFzc2Vzc21lbnQgZXhpc3RzICh0byBhbGxvdyBmcm9udGVuZCB0byByZW5kZXIgZm9ybSlcbiAgICBhc3luYyBzaG93KHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkIH0gPSByZXF1ZXN0LnBhcmFtcztcblxuICAgICAgICAgICAgY29uc3QgaGVtYXRvbG9naWNhbEFzc2Vzc21lbnRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICBpZDogaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50LmlkLFxuICAgICAgICAgICAgICAgIHBhdGllbnRfaWQ6IGhlbWF0b2xvZ2ljYWxfYXNzZXNzbWVudC5wYXRpZW50X2lkLFxuICAgICAgICAgICAgICAgIGhlbWF0b2xvZ2ljYWxfaWRzOiBoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQuaGVtYXRvbG9naWNhbF9pZHMsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50LnVwZGF0ZWRBdCxcbiAgICAgICAgICAgIH0pLmZyb20oaGVtYXRvbG9naWNhbF9hc3Nlc3NtZW50KS53aGVyZShlcShoZW1hdG9sb2dpY2FsX2Fzc2Vzc21lbnQucGF0aWVudF9pZCwgaWQpKS5saW1pdCgxKTtcbiAgICAgICAgICAgIGNvbnN0IGhlbWF0b2xvZ2ljYWxBc3Nlc3NtZW50ID0gaGVtYXRvbG9naWNhbEFzc2Vzc21lbnRzWzBdO1xuXG4gICAgICAgICAgICBpZiAoIWhlbWF0b2xvZ2ljYWxBc3Nlc3NtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIDIwMCB3aXRoIGVtcHR5IGRhdGEgaW5zdGVhZCBvZiA0MDQsIHNvIGZyb250ZW5kIGNhbiByZW5kZXIgZm9ybVxuICAgICAgICAgICAgICAgIHJlcGx5LmNvZGUoMjAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aWVudF9pZDogcGFyc2VJbnQoaWQpLFxuICAgICAgICAgICAgICAgICAgICBoZW1hdG9sb2dpY2FsX2lkczogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbHkuY29kZSgyMDApO1xuICAgICAgICAgICAgcmV0dXJuIGhlbWF0b2xvZ2ljYWxBc3Nlc3NtZW50O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgaGVtYXRvbG9naWNhbCBhc3Nlc3NtZW50OlwiLCBlcnJvcilcbiAgICAgICAgICAgIHJlcGx5LmNvZGUoNTAwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBIZW1hdG9sb2dpY2FsQXNzZXNzbWVudENvbnRyb2xsZXIoKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QjtRQUM3REMsU0FBUyxFQUFFZix3QkFBd0IsQ0FBQ2UsU0FBUztRQUM3Q0MsU0FBUyxFQUFFaEIsd0JBQXdCLENBQUNnQjtNQUN4QyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDakIsd0JBQXdCLENBQUMsQ0FBQzJCLEtBQUssQ0FBQ3pCLEVBQUUsQ0FBQ0Ysd0JBQXdCLENBQUNhLFVBQVUsRUFBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQ2dCLEtBQUssQ0FBQyxDQUFDLENBQUM7TUFDN0YsTUFBTWlCLHVCQUF1QjtNQUFBO01BQUEsQ0FBQWhELGFBQUEsR0FBQVksQ0FBQSxRQUFHQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUM7TUFBQztNQUFBYixhQUFBLEdBQUFZLENBQUE7TUFFNUQsSUFBSSxDQUFDb0MsdUJBQXVCLEVBQUU7UUFBQTtRQUFBaEQsYUFBQSxHQUFBNEIsQ0FBQTtRQUFBNUIsYUFBQSxHQUFBWSxDQUFBO1FBQzFCO1FBQ0FGLEtBQUssQ0FBQ1csSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUFDO1FBQUFyQixhQUFBLEdBQUFZLENBQUE7UUFDaEIsT0FBTztVQUNIRyxFQUFFLEVBQUUsSUFBSTtVQUNSQyxVQUFVLEVBQUVpQyxRQUFRLENBQUNsQyxFQUFFLENBQUM7VUFDeEJFLGlCQUFpQixFQUFFLEVBQUU7VUFDckJDLFNBQVMsRUFBRSxJQUFJO1VBQ2ZDLFNBQVMsRUFBRTtRQUNmLENBQUM7TUFDTCxDQUFDO01BQUE7TUFBQTtRQUFBbkIsYUFBQSxHQUFBNEIsQ0FBQTtNQUFBO01BQUE1QixhQUFBLEdBQUFZLENBQUE7TUFFREYsS0FBSyxDQUFDVyxJQUFJLENBQUMsR0FBRyxDQUFDO01BQUM7TUFBQXJCLGFBQUEsR0FBQVksQ0FBQTtNQUNoQixPQUFPb0MsdUJBQXVCO0lBQ2xDLENBQUMsQ0FBQyxPQUFPMUIsS0FBSyxFQUFFO01BQUE7TUFBQXRCLGFBQUEsR0FBQVksQ0FBQTtNQUNaTixNQUFNLENBQUNnQixLQUFLLENBQUMsMENBQTBDLEVBQUVBLEtBQUssQ0FBQztNQUFBO01BQUF0QixhQUFBLEdBQUFZLENBQUE7TUFDL0RGLEtBQUssQ0FBQ1csSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUFDO01BQUFyQixhQUFBLEdBQUFZLENBQUE7TUFDaEIsT0FBTztRQUNIVyxPQUFPLEVBQUUsdUJBQXVCO1FBQ2hDRCxLQUFLLEVBQUVBLEtBQUssQ0FBQ0M7TUFDakIsQ0FBQztJQUNMO0VBQ0o7QUFDSjtBQUVBLGVBQWUsSUFBSWhCLGlDQUFpQyxDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=