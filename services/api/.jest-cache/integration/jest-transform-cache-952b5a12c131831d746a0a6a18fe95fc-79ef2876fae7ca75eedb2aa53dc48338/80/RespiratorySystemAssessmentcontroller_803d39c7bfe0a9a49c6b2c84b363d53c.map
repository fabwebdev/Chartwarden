{"version":3,"names":["cov_1d3ytf7cya","actualCoverage","db","respiratory_system_assessments","RESPIRATORY_PATTERNS","RESPIRATORY_BREATH_SOUNDS","RESPIRATORY_ADVENTITIOUS_SOUNDS","RESPIRATORY_MMRC_SCALE","RESPIRATORY_NORMAL_RANGES","RESPIRATORY_ABG_RANGES","RESPIRATORY_O2_DEVICES","eq","and","desc","sql","gte","lte","logger","logAudit","RespiratorySystemAssessmentController","classifyRespiratoryRate","rate","f","s","b","ranges","respiratory_rate","low","high","classifyOxygenSaturation","spo2","critical_low","classifyPeakFlow","current","personalBest","percent","peak_flow_percent","green","yellow","interpretABG","abg","abg_ph","abg_pco2","ph","parseFloat","pco2","hco3","abg_hco3","checkRespiratoryAlerts","data","alerts","spo2_percentage","push","type","severity","message","respiratory_effort","respiratory_pattern","death_rattle_present","hemoptysis","hemoptysis_amount","has_alerts","length","critical_count","filter","a","getPatientAssessments","request","reply","patientId","params","limit","offset","from_date","to_date","query","conditions","patient_id","parseInt","assessment_date","Date","assessments","select","from","where","orderBy","code","status","count","error","process","env","NODE_ENV","undefined","show","id","result","create","body","rrStatus","spo2Status","peakFlowZone","peak_flow","peak_flow_personal_best","abgInterpretation","insert","values","peak_flow_zone","abg_interpretation","assessed_by_id","user","created_by_id","updated_by_id","createdAt","updatedAt","returning","alertInfo","interpretations","respiratory_rate_status","spo2_status","mmrc_description","mmrc_grade","update","existing","signed_at","_","updateData","set","delete","sign","signed_by_id","amend","amendment_reason","amended","amended_at","amended_by_id","index","overall_status","supplemental_oxygen","dyspnea_present","getPatientStats","days","startDate","setDate","getDate","latestAssessment","countResult","avgResult","avg_rr","avg_spo2","min_spo2","max_spo2","avg_o2_flow","o2Result","dyspneaResult","dyspnea_severity","groupBy","dyspneaDistribution","row","total_assessments","latest_assessment","period_days","averages","oxygen_flow_rate","spo2_range","min","max","on_supplemental_oxygen","dyspnea_distribution","normal_ranges","getPatientTrend","cough_present","reverse","getReference","name","description","clinical_standards","assessment_components","classifications","respiratory_patterns","breath_sounds","adventitious_sounds","mmrc_scale","oxygen_delivery_devices","reference_ranges","vital_signs"],"sources":["RespiratorySystemAssessment.controller.js"],"sourcesContent":["import { db } from '../config/db.drizzle.js';\nimport { respiratory_system_assessments, RESPIRATORY_PATTERNS, RESPIRATORY_BREATH_SOUNDS, RESPIRATORY_ADVENTITIOUS_SOUNDS, RESPIRATORY_MMRC_SCALE, RESPIRATORY_NORMAL_RANGES, RESPIRATORY_ABG_RANGES, RESPIRATORY_O2_DEVICES } from '../db/schemas/respiratorySystemAssessment.schema.js';\nimport { eq, and, desc, sql, gte, lte } from 'drizzle-orm';\nimport { logger } from '../utils/logger.js';\nimport { logAudit } from '../middleware/audit.middleware.js';\n\n/**\n * Respiratory System Assessment Controller\n * Manages comprehensive pulmonary assessments for hospice patients\n * Follows ATS guidelines, GOLD guidelines, and NCCN dyspnea guidelines\n */\nclass RespiratorySystemAssessmentController {\n  /**\n   * Classify respiratory rate status\n   * @param {number} rate - Respiratory rate in breaths/min\n   * @returns {string} Status classification\n   */\n  classifyRespiratoryRate(rate) {\n    if (!rate) return null;\n    const ranges = RESPIRATORY_NORMAL_RANGES.respiratory_rate;\n\n    if (rate < ranges.low) return 'BRADYPNEA';\n    if (rate > ranges.high) return 'TACHYPNEA';\n    return 'NORMAL';\n  }\n\n  /**\n   * Classify oxygen saturation status\n   * @param {number} spo2 - SpO2 percentage\n   * @returns {string} Status classification\n   */\n  classifyOxygenSaturation(spo2) {\n    if (!spo2) return null;\n    const ranges = RESPIRATORY_NORMAL_RANGES.spo2;\n\n    if (spo2 < ranges.critical_low) return 'CRITICAL';\n    if (spo2 < ranges.low) return 'HYPOXEMIA';\n    return 'NORMAL';\n  }\n\n  /**\n   * Classify peak flow status based on personal best\n   * @param {number} current - Current peak flow\n   * @param {number} personalBest - Personal best peak flow\n   * @returns {string} Zone classification (GREEN, YELLOW, RED)\n   */\n  classifyPeakFlow(current, personalBest) {\n    if (!current || !personalBest) return null;\n    const percent = (current / personalBest) * 100;\n    const ranges = RESPIRATORY_NORMAL_RANGES.peak_flow_percent;\n\n    if (percent >= ranges.green) return 'GREEN';\n    if (percent >= ranges.yellow) return 'YELLOW';\n    return 'RED';\n  }\n\n  /**\n   * Interpret ABG results\n   * @param {object} abg - ABG values (ph, pco2, hco3)\n   * @returns {string} ABG interpretation\n   */\n  interpretABG(abg) {\n    if (!abg.abg_ph || !abg.abg_pco2) return null;\n\n    const ph = parseFloat(abg.abg_ph);\n    const pco2 = parseFloat(abg.abg_pco2);\n    const hco3 = parseFloat(abg.abg_hco3) || 24;\n\n    // Simplified ABG interpretation\n    if (ph >= 7.35 && ph <= 7.45 && pco2 >= 35 && pco2 <= 45) {\n      return 'NORMAL';\n    }\n\n    if (ph < 7.35) {\n      if (pco2 > 45) return 'RESPIRATORY_ACIDOSIS';\n      if (hco3 < 22) return 'METABOLIC_ACIDOSIS';\n      return 'MIXED_ACIDOSIS';\n    }\n\n    if (ph > 7.45) {\n      if (pco2 < 35) return 'RESPIRATORY_ALKALOSIS';\n      if (hco3 > 26) return 'METABOLIC_ALKALOSIS';\n      return 'MIXED_ALKALOSIS';\n    }\n\n    return 'COMPENSATED';\n  }\n\n  /**\n   * Check for respiratory alerts\n   * @param {object} data - Assessment data\n   * @returns {object} Alert information\n   */\n  checkRespiratoryAlerts(data) {\n    const alerts = [];\n\n    // Critical SpO2\n    if (data.spo2_percentage && data.spo2_percentage < 88) {\n      alerts.push({\n        type: 'CRITICAL_SPO2',\n        severity: 'CRITICAL',\n        message: `SpO2 ${data.spo2_percentage}% is critically low`\n      });\n    }\n\n    // Severe respiratory distress\n    if (data.respiratory_effort === 'SEVERELY_LABORED') {\n      alerts.push({\n        type: 'SEVERE_RESPIRATORY_DISTRESS',\n        severity: 'CRITICAL',\n        message: 'Severely labored breathing - immediate intervention may be required'\n      });\n    }\n\n    // Agonal breathing (pre-terminal)\n    if (data.respiratory_pattern === 'AGONAL') {\n      alerts.push({\n        type: 'AGONAL_BREATHING',\n        severity: 'CRITICAL',\n        message: 'Agonal breathing pattern - may indicate end-of-life'\n      });\n    }\n\n    // Cheyne-Stokes breathing\n    if (data.respiratory_pattern === 'CHEYNE_STOKES') {\n      alerts.push({\n        type: 'CHEYNE_STOKES',\n        severity: 'HIGH',\n        message: 'Cheyne-Stokes breathing pattern detected'\n      });\n    }\n\n    // Death rattle\n    if (data.death_rattle_present) {\n      alerts.push({\n        type: 'DEATH_RATTLE',\n        severity: 'HIGH',\n        message: 'Death rattle present - end-of-life care measures may be appropriate'\n      });\n    }\n\n    // Hemoptysis\n    if (data.hemoptysis) {\n      alerts.push({\n        type: 'HEMOPTYSIS',\n        severity: data.hemoptysis_amount === 'MASSIVE' ? 'CRITICAL' : 'HIGH',\n        message: `Hemoptysis (${data.hemoptysis_amount || 'present'}) - provider notification may be required`\n      });\n    }\n\n    return {\n      alerts,\n      has_alerts: alerts.length > 0,\n      critical_count: alerts.filter(a => a.severity === 'CRITICAL').length\n    };\n  }\n\n  /**\n   * Get all respiratory system assessments for a patient\n   * GET /patients/:patientId/respiratory-system-assessments\n   */\n  async getPatientAssessments(request, reply) {\n    try {\n      const { patientId } = request.params;\n      const { limit = 50, offset = 0, from_date, to_date } = request.query;\n\n      let conditions = [eq(respiratory_system_assessments.patient_id, parseInt(patientId))];\n\n      if (from_date) {\n        conditions.push(gte(respiratory_system_assessments.assessment_date, new Date(from_date)));\n      }\n      if (to_date) {\n        conditions.push(lte(respiratory_system_assessments.assessment_date, new Date(to_date)));\n      }\n\n      const assessments = await db\n        .select()\n        .from(respiratory_system_assessments)\n        .where(and(...conditions))\n        .orderBy(desc(respiratory_system_assessments.assessment_date))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Respiratory system assessments retrieved successfully',\n        data: assessments,\n        count: assessments.length,\n        limit: parseInt(limit),\n        offset: parseInt(offset)\n      };\n    } catch (error) {\n      logger.error('Error fetching patient respiratory system assessments:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching respiratory system assessments',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get a single respiratory system assessment by ID\n   * GET /respiratory-system-assessments/:id\n   */\n  async show(request, reply) {\n    try {\n      const { id } = request.params;\n\n      const result = await db\n        .select()\n        .from(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .limit(1);\n\n      if (!result[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Respiratory system assessment not found'\n        };\n      }\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: result[0]\n      };\n    } catch (error) {\n      logger.error('Error fetching respiratory system assessment:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching respiratory system assessment',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Create a new respiratory system assessment\n   * POST /patients/:patientId/respiratory-system-assessments\n   */\n  async create(request, reply) {\n    try {\n      const { patientId } = request.params;\n      const data = request.body;\n\n      // Auto-calculate derived values\n      const rrStatus = this.classifyRespiratoryRate(data.respiratory_rate);\n      const spo2Status = this.classifyOxygenSaturation(data.spo2_percentage);\n      const peakFlowZone = this.classifyPeakFlow(data.peak_flow, data.peak_flow_personal_best);\n      const abgInterpretation = this.interpretABG(data);\n\n      const result = await db\n        .insert(respiratory_system_assessments)\n        .values({\n          patient_id: parseInt(patientId),\n          ...data,\n          peak_flow_zone: data.peak_flow_zone || peakFlowZone,\n          abg_interpretation: data.abg_interpretation || abgInterpretation,\n          assessment_date: data.assessment_date ? new Date(data.assessment_date) : new Date(),\n          assessed_by_id: data.assessed_by_id || request.user?.id,\n          created_by_id: request.user?.id,\n          updated_by_id: request.user?.id,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        })\n        .returning();\n\n      await logAudit(request, 'CREATE', 'respiratory_system_assessments', result[0].id);\n\n      // Check for respiratory alerts\n      const alertInfo = this.checkRespiratoryAlerts(data);\n\n      reply.code(201);\n      return {\n        status: 201,\n        message: 'Respiratory system assessment created successfully',\n        data: result[0],\n        interpretations: {\n          respiratory_rate_status: rrStatus,\n          spo2_status: spo2Status,\n          peak_flow_zone: peakFlowZone,\n          abg_interpretation: abgInterpretation,\n          mmrc_description: data.mmrc_grade !== undefined ? RESPIRATORY_MMRC_SCALE[data.mmrc_grade] : null\n        },\n        alerts: alertInfo.has_alerts ? alertInfo : null\n      };\n    } catch (error) {\n      logger.error('Error creating respiratory system assessment:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error creating respiratory system assessment',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Update a respiratory system assessment\n   * PATCH /respiratory-system-assessments/:id\n   */\n  async update(request, reply) {\n    try {\n      const { id } = request.params;\n      const data = request.body;\n\n      // Check if assessment exists\n      const existing = await db\n        .select()\n        .from(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Respiratory system assessment not found'\n        };\n      }\n\n      // Don't allow updates to signed assessments\n      if (existing[0].signed_at) {\n        reply.code(403);\n        return {\n          status: 403,\n          message: 'Cannot update a signed assessment. Use amendment instead.'\n        };\n      }\n\n      // Remove fields that shouldn't be updated directly\n      const { id: _, patient_id, created_by_id, createdAt, ...updateData } = data;\n\n      const result = await db\n        .update(respiratory_system_assessments)\n        .set({\n          ...updateData,\n          updated_by_id: request.user?.id,\n          updatedAt: new Date()\n        })\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .returning();\n\n      await logAudit(request, 'UPDATE', 'respiratory_system_assessments', result[0].id);\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Respiratory system assessment updated successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      logger.error('Error updating respiratory system assessment:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error updating respiratory system assessment',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Delete a respiratory system assessment\n   * DELETE /respiratory-system-assessments/:id\n   */\n  async delete(request, reply) {\n    try {\n      const { id } = request.params;\n\n      // Check if assessment exists\n      const existing = await db\n        .select()\n        .from(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Respiratory system assessment not found'\n        };\n      }\n\n      // Don't allow deletion of signed assessments\n      if (existing[0].signed_at) {\n        reply.code(403);\n        return {\n          status: 403,\n          message: 'Cannot delete a signed assessment'\n        };\n      }\n\n      await db\n        .delete(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.id, parseInt(id)));\n\n      await logAudit(request, 'DELETE', 'respiratory_system_assessments', parseInt(id));\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Respiratory system assessment deleted successfully'\n      };\n    } catch (error) {\n      logger.error('Error deleting respiratory system assessment:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error deleting respiratory system assessment',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Sign a respiratory system assessment (21 CFR Part 11 compliance)\n   * POST /respiratory-system-assessments/:id/sign\n   */\n  async sign(request, reply) {\n    try {\n      const { id } = request.params;\n\n      const existing = await db\n        .select()\n        .from(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Respiratory system assessment not found'\n        };\n      }\n\n      if (existing[0].signed_at) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Assessment already signed'\n        };\n      }\n\n      const result = await db\n        .update(respiratory_system_assessments)\n        .set({\n          signed_at: new Date(),\n          signed_by_id: request.user?.id,\n          updated_by_id: request.user?.id,\n          updatedAt: new Date()\n        })\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .returning();\n\n      await logAudit(request, 'SIGN', 'respiratory_system_assessments', result[0].id);\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Respiratory system assessment signed successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      logger.error('Error signing respiratory system assessment:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error signing assessment',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Amend a signed respiratory system assessment\n   * POST /respiratory-system-assessments/:id/amend\n   */\n  async amend(request, reply) {\n    try {\n      const { id } = request.params;\n      const { amendment_reason, ...updateData } = request.body;\n\n      if (!amendment_reason) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Amendment reason is required'\n        };\n      }\n\n      const existing = await db\n        .select()\n        .from(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .limit(1);\n\n      if (!existing[0]) {\n        reply.code(404);\n        return {\n          status: 404,\n          message: 'Respiratory system assessment not found'\n        };\n      }\n\n      if (!existing[0].signed_at) {\n        reply.code(400);\n        return {\n          status: 400,\n          message: 'Cannot amend an unsigned assessment. Use update instead.'\n        };\n      }\n\n      const result = await db\n        .update(respiratory_system_assessments)\n        .set({\n          ...updateData,\n          amended: true,\n          amendment_reason,\n          amended_at: new Date(),\n          amended_by_id: request.user?.id,\n          updated_by_id: request.user?.id,\n          updatedAt: new Date()\n        })\n        .where(eq(respiratory_system_assessments.id, parseInt(id)))\n        .returning();\n\n      await logAudit(request, 'AMEND', 'respiratory_system_assessments', result[0].id, { amendment_reason });\n\n      reply.code(200);\n      return {\n        status: 200,\n        message: 'Respiratory system assessment amended successfully',\n        data: result[0]\n      };\n    } catch (error) {\n      logger.error('Error amending respiratory system assessment:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error amending assessment',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get all respiratory system assessments (with filters)\n   * GET /respiratory-system-assessments\n   */\n  async index(request, reply) {\n    try {\n      const {\n        patient_id,\n        overall_status,\n        supplemental_oxygen,\n        dyspnea_present,\n        limit = 50,\n        offset = 0\n      } = request.query;\n\n      const conditions = [];\n\n      if (patient_id) {\n        conditions.push(eq(respiratory_system_assessments.patient_id, parseInt(patient_id)));\n      }\n      if (overall_status) {\n        conditions.push(eq(respiratory_system_assessments.overall_status, overall_status));\n      }\n      if (supplemental_oxygen !== undefined) {\n        conditions.push(eq(respiratory_system_assessments.supplemental_oxygen, supplemental_oxygen === 'true'));\n      }\n      if (dyspnea_present !== undefined) {\n        conditions.push(eq(respiratory_system_assessments.dyspnea_present, dyspnea_present === 'true'));\n      }\n\n      let query = db.select().from(respiratory_system_assessments);\n\n      if (conditions.length > 0) {\n        query = query.where(and(...conditions));\n      }\n\n      const assessments = await query\n        .orderBy(desc(respiratory_system_assessments.assessment_date))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: assessments,\n        count: assessments.length,\n        limit: parseInt(limit),\n        offset: parseInt(offset)\n      };\n    } catch (error) {\n      logger.error('Error fetching respiratory system assessments:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching assessments',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get respiratory assessment statistics for a patient\n   * GET /patients/:patientId/respiratory-system-assessments/stats\n   */\n  async getPatientStats(request, reply) {\n    try {\n      const { patientId } = request.params;\n      const { days = 30 } = request.query;\n\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - parseInt(days));\n\n      // Get the most recent assessment\n      const latestAssessment = await db\n        .select()\n        .from(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.patient_id, parseInt(patientId)))\n        .orderBy(desc(respiratory_system_assessments.assessment_date))\n        .limit(1);\n\n      // Get count of assessments\n      const countResult = await db\n        .select({ count: sql`count(*)` })\n        .from(respiratory_system_assessments)\n        .where(eq(respiratory_system_assessments.patient_id, parseInt(patientId)));\n\n      // Get average vital signs for the time period\n      const avgResult = await db\n        .select({\n          avg_rr: sql`avg(respiratory_rate)`,\n          avg_spo2: sql`avg(spo2_percentage)`,\n          min_spo2: sql`min(spo2_percentage)`,\n          max_spo2: sql`max(spo2_percentage)`,\n          avg_o2_flow: sql`avg(oxygen_flow_rate)`\n        })\n        .from(respiratory_system_assessments)\n        .where(\n          and(\n            eq(respiratory_system_assessments.patient_id, parseInt(patientId)),\n            gte(respiratory_system_assessments.assessment_date, startDate)\n          )\n        );\n\n      // Get count on supplemental oxygen\n      const o2Result = await db\n        .select({ count: sql`count(*)` })\n        .from(respiratory_system_assessments)\n        .where(\n          and(\n            eq(respiratory_system_assessments.patient_id, parseInt(patientId)),\n            eq(respiratory_system_assessments.supplemental_oxygen, true)\n          )\n        );\n\n      // Get dyspnea distribution\n      const dyspneaResult = await db\n        .select({\n          dyspnea_severity: respiratory_system_assessments.dyspnea_severity,\n          count: sql`count(*)`\n        })\n        .from(respiratory_system_assessments)\n        .where(\n          and(\n            eq(respiratory_system_assessments.patient_id, parseInt(patientId)),\n            eq(respiratory_system_assessments.dyspnea_present, true)\n          )\n        )\n        .groupBy(respiratory_system_assessments.dyspnea_severity);\n\n      const dyspneaDistribution = {};\n      for (const row of dyspneaResult) {\n        if (row.dyspnea_severity) {\n          dyspneaDistribution[row.dyspnea_severity] = parseInt(row.count);\n        }\n      }\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: {\n          total_assessments: parseInt(countResult[0]?.count || 0),\n          latest_assessment: latestAssessment[0] || null,\n          period_days: parseInt(days),\n          averages: {\n            respiratory_rate: parseFloat(avgResult[0]?.avg_rr) || null,\n            spo2_percentage: parseFloat(avgResult[0]?.avg_spo2) || null,\n            oxygen_flow_rate: parseFloat(avgResult[0]?.avg_o2_flow) || null\n          },\n          spo2_range: {\n            min: parseFloat(avgResult[0]?.min_spo2) || null,\n            max: parseFloat(avgResult[0]?.max_spo2) || null\n          },\n          on_supplemental_oxygen: parseInt(o2Result[0]?.count || 0),\n          dyspnea_distribution: dyspneaDistribution,\n          normal_ranges: RESPIRATORY_NORMAL_RANGES\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching respiratory system assessment stats:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching statistics',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get respiratory assessment trend for a patient\n   * GET /patients/:patientId/respiratory-system-assessments/trend\n   */\n  async getPatientTrend(request, reply) {\n    try {\n      const { patientId } = request.params;\n      const { days = 30, limit = 100 } = request.query;\n\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - parseInt(days));\n\n      const assessments = await db\n        .select({\n          id: respiratory_system_assessments.id,\n          assessment_date: respiratory_system_assessments.assessment_date,\n          overall_status: respiratory_system_assessments.overall_status,\n          respiratory_rate: respiratory_system_assessments.respiratory_rate,\n          respiratory_pattern: respiratory_system_assessments.respiratory_pattern,\n          respiratory_effort: respiratory_system_assessments.respiratory_effort,\n          spo2_percentage: respiratory_system_assessments.spo2_percentage,\n          supplemental_oxygen: respiratory_system_assessments.supplemental_oxygen,\n          oxygen_flow_rate: respiratory_system_assessments.oxygen_flow_rate,\n          dyspnea_present: respiratory_system_assessments.dyspnea_present,\n          dyspnea_severity: respiratory_system_assessments.dyspnea_severity,\n          mmrc_grade: respiratory_system_assessments.mmrc_grade,\n          cough_present: respiratory_system_assessments.cough_present\n        })\n        .from(respiratory_system_assessments)\n        .where(\n          and(\n            eq(respiratory_system_assessments.patient_id, parseInt(patientId)),\n            gte(respiratory_system_assessments.assessment_date, startDate)\n          )\n        )\n        .orderBy(desc(respiratory_system_assessments.assessment_date))\n        .limit(parseInt(limit));\n\n      reply.code(200);\n      return {\n        status: 200,\n        data: {\n          period_days: parseInt(days),\n          assessments: assessments.reverse(), // Chronological order for charting\n          count: assessments.length\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching respiratory trend:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching trend data',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n\n  /**\n   * Get respiratory assessment reference data\n   * GET /respiratory-system-assessments/reference\n   */\n  async getReference(request, reply) {\n    try {\n      reply.code(200);\n      return {\n        status: 200,\n        data: {\n          name: 'Respiratory System Assessment',\n          description: 'Comprehensive pulmonary assessment for hospice patients',\n          clinical_standards: [\n            'American Thoracic Society (ATS) guidelines',\n            'Global Initiative for Chronic Obstructive Lung Disease (GOLD)',\n            'National Comprehensive Cancer Network (NCCN) dyspnea guidelines'\n          ],\n          assessment_components: [\n            'Respiratory rate and pattern',\n            'Respiratory effort',\n            'Oxygen saturation',\n            'Breath sounds',\n            'Chest assessment',\n            'Cough assessment',\n            'Sputum assessment',\n            'Dyspnea assessment (mMRC scale)',\n            'Airway management',\n            'Ventilator settings (if applicable)',\n            'Pulmonary function',\n            'Arterial blood gas',\n            'Hospice-specific respiratory care'\n          ],\n          classifications: {\n            respiratory_patterns: RESPIRATORY_PATTERNS,\n            breath_sounds: RESPIRATORY_BREATH_SOUNDS,\n            adventitious_sounds: RESPIRATORY_ADVENTITIOUS_SOUNDS,\n            mmrc_scale: RESPIRATORY_MMRC_SCALE,\n            oxygen_delivery_devices: RESPIRATORY_O2_DEVICES\n          },\n          reference_ranges: {\n            vital_signs: RESPIRATORY_NORMAL_RANGES,\n            abg: RESPIRATORY_ABG_RANGES\n          }\n        }\n      };\n    } catch (error) {\n      logger.error('Error fetching respiratory reference:', error);\n      reply.code(500);\n      return {\n        status: 500,\n        message: 'Error fetching reference data',\n        error: process.env.NODE_ENV === 'development' ? error.message : undefined\n      };\n    }\n  }\n}\n\nexport default new RespiratorySystemAssessmentController();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}