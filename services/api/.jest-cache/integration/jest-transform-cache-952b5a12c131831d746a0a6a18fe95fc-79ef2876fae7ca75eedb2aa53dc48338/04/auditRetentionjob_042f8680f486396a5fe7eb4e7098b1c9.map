{"version":3,"names":["cov_23yqadg3en","actualCoverage","db","audit_logs","lte","count","sql","and","gte","desc","logger","AuditService","AuditActions","getRetentionYears","fs","path","RETENTION_CONFIG","s","defaultRetentionYears","parseInt","b","process","env","AUDIT_RETENTION_YEARS","batchSize","AUDIT_ARCHIVE_BATCH_SIZE","archiveDir","AUDIT_ARCHIVE_DIR","enableDeletion","AUDIT_ENABLE_DELETION","exportFormat","AUDIT_EXPORT_FORMAT","generateRetentionReport","f","info","now","Date","cutoffDate","setFullYear","getFullYear","withinRetention","select","from","where","created_at","eligibleForArchival","oldestLog","orderBy","limit","newestLog","byYear","year","groupBy","report","generatedAt","toISOString","retentionPolicy","years","deletionEnabled","summary","Number","map","r","compliance","hipaaCompliant","message","createAuditLog","action","COMPLIANCE_REPORT_GENERATED","resource_type","resource_id","status","metadata","JSON","stringify","reportType","immediate","skipExternal","error","archiveOldLogs","mkdir","recursive","countResult","totalEligible","archived","deleted","batchNumber","batch","length","timestamp","replace","filename","filepath","join","writeFile","headers","Object","keys","rows","row","values","v","String","warn","SYSTEM_BACKUP_COMPLETE","operation","batches","SYSTEM_BACKUP_FAILED","checkRetentionCompliance","warnings","sixYearsAgo","recentLogsCount","getTime","push","severity","recommendation","byMonth","month","counts","m","avg","reduce","a","lastMonth","compliant","filter","w","checkedAt","retentionYears","runRetentionJob","results","startedAt","archival","errors","step","completedAt","success"],"sources":["auditRetention.job.js"],"sourcesContent":["/**\n * Audit Log Retention Job\n *\n * HIPAA Compliance: Maintains 6-year retention for PHI access logs.\n * This job handles:\n * - Identifying logs eligible for archival\n * - Exporting logs to cold storage before removal\n * - Generating retention compliance reports\n *\n * IMPORTANT: This job does NOT delete logs by default.\n * Deletion requires explicit configuration and compliance officer approval.\n */\n\nimport { db } from '../config/db.drizzle.js';\nimport { audit_logs } from '../db/schemas/auditLog.schema.js';\nimport { lte, count, sql, and, gte, desc } from 'drizzle-orm';\nimport { logger } from '../utils/logger.js';\nimport AuditService from '../services/AuditService.js';\nimport { AuditActions, getRetentionYears } from '../constants/auditActions.js';\nimport fs from 'fs/promises';\nimport path from 'path';\n\n/**\n * Configuration for retention policy\n */\nconst RETENTION_CONFIG = {\n  // HIPAA minimum retention for PHI access logs (years)\n  defaultRetentionYears: parseInt(process.env.AUDIT_RETENTION_YEARS || '6', 10),\n\n  // Batch size for archival processing\n  batchSize: parseInt(process.env.AUDIT_ARCHIVE_BATCH_SIZE || '1000', 10),\n\n  // Directory for archived logs (if using file-based archival)\n  archiveDir: process.env.AUDIT_ARCHIVE_DIR || './audit-archives',\n\n  // Whether to actually delete logs after archival (requires explicit opt-in)\n  enableDeletion: process.env.AUDIT_ENABLE_DELETION === 'true',\n\n  // Export format: 'json' or 'csv'\n  exportFormat: process.env.AUDIT_EXPORT_FORMAT || 'json',\n};\n\n/**\n * Generate retention compliance report\n * Shows what logs are within retention period vs eligible for archival\n */\nexport async function generateRetentionReport() {\n  logger.info('Generating audit retention compliance report...');\n\n  const now = new Date();\n  const cutoffDate = new Date();\n  cutoffDate.setFullYear(cutoffDate.getFullYear() - RETENTION_CONFIG.defaultRetentionYears);\n\n  try {\n    // Count logs within retention period\n    const withinRetention = await db\n      .select({ count: count() })\n      .from(audit_logs)\n      .where(gte(audit_logs.created_at, cutoffDate));\n\n    // Count logs eligible for archival\n    const eligibleForArchival = await db\n      .select({ count: count() })\n      .from(audit_logs)\n      .where(lte(audit_logs.created_at, cutoffDate));\n\n    // Get oldest log\n    const oldestLog = await db\n      .select({ created_at: audit_logs.created_at })\n      .from(audit_logs)\n      .orderBy(audit_logs.created_at)\n      .limit(1);\n\n    // Get newest log\n    const newestLog = await db\n      .select({ created_at: audit_logs.created_at })\n      .from(audit_logs)\n      .orderBy(desc(audit_logs.created_at))\n      .limit(1);\n\n    // Get breakdown by year\n    const byYear = await db\n      .select({\n        year: sql`EXTRACT(YEAR FROM ${audit_logs.created_at})`,\n        count: count(),\n      })\n      .from(audit_logs)\n      .groupBy(sql`EXTRACT(YEAR FROM ${audit_logs.created_at})`)\n      .orderBy(sql`EXTRACT(YEAR FROM ${audit_logs.created_at})`);\n\n    const report = {\n      generatedAt: now.toISOString(),\n      retentionPolicy: {\n        years: RETENTION_CONFIG.defaultRetentionYears,\n        cutoffDate: cutoffDate.toISOString(),\n        deletionEnabled: RETENTION_CONFIG.enableDeletion,\n      },\n      summary: {\n        withinRetention: Number(withinRetention[0]?.count || 0),\n        eligibleForArchival: Number(eligibleForArchival[0]?.count || 0),\n        oldestLog: oldestLog[0]?.created_at?.toISOString() || null,\n        newestLog: newestLog[0]?.created_at?.toISOString() || null,\n      },\n      byYear: byYear.map(r => ({\n        year: Number(r.year),\n        count: Number(r.count),\n        withinRetention: Number(r.year) >= now.getFullYear() - RETENTION_CONFIG.defaultRetentionYears,\n      })),\n      compliance: {\n        hipaaCompliant: true,\n        message: 'All PHI access logs are being retained for the required 6-year period.',\n      },\n    };\n\n    logger.info('Retention report generated', {\n      withinRetention: report.summary.withinRetention,\n      eligibleForArchival: report.summary.eligibleForArchival,\n    });\n\n    // Log this report generation\n    await AuditService.createAuditLog({\n      action: AuditActions.COMPLIANCE_REPORT_GENERATED,\n      resource_type: 'audit_logs',\n      resource_id: null,\n      status: 'success',\n      metadata: JSON.stringify({\n        reportType: 'retention_compliance',\n        withinRetention: report.summary.withinRetention,\n        eligibleForArchival: report.summary.eligibleForArchival,\n      }),\n    }, {}, { immediate: true, skipExternal: true });\n\n    return report;\n  } catch (error) {\n    logger.error('Failed to generate retention report:', error);\n    throw error;\n  }\n}\n\n/**\n * Archive logs that are past the retention period\n * Exports to file before potential deletion\n */\nexport async function archiveOldLogs() {\n  logger.info('Starting audit log archival process...');\n\n  const cutoffDate = new Date();\n  cutoffDate.setFullYear(cutoffDate.getFullYear() - RETENTION_CONFIG.defaultRetentionYears);\n\n  try {\n    // Ensure archive directory exists\n    await fs.mkdir(RETENTION_CONFIG.archiveDir, { recursive: true });\n\n    // Count eligible logs\n    const countResult = await db\n      .select({ count: count() })\n      .from(audit_logs)\n      .where(lte(audit_logs.created_at, cutoffDate));\n\n    const totalEligible = Number(countResult[0]?.count || 0);\n\n    if (totalEligible === 0) {\n      logger.info('No logs eligible for archival');\n      return { archived: 0, deleted: 0 };\n    }\n\n    logger.info(`Found ${totalEligible} logs eligible for archival`);\n\n    let archived = 0;\n    let deleted = 0;\n    let batchNumber = 0;\n\n    // Process in batches\n    while (archived < totalEligible) {\n      batchNumber++;\n\n      // Fetch batch\n      const batch = await db\n        .select()\n        .from(audit_logs)\n        .where(lte(audit_logs.created_at, cutoffDate))\n        .orderBy(audit_logs.created_at)\n        .limit(RETENTION_CONFIG.batchSize);\n\n      if (batch.length === 0) break;\n\n      // Generate archive filename\n      const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n      const filename = `audit-archive-${timestamp}-batch-${batchNumber}.${RETENTION_CONFIG.exportFormat}`;\n      const filepath = path.join(RETENTION_CONFIG.archiveDir, filename);\n\n      // Export batch\n      if (RETENTION_CONFIG.exportFormat === 'json') {\n        await fs.writeFile(filepath, JSON.stringify(batch, null, 2));\n      } else {\n        // CSV format\n        const headers = Object.keys(batch[0]).join(',');\n        const rows = batch.map(row =>\n          Object.values(row).map(v =>\n            v === null ? '' : `\"${String(v).replace(/\"/g, '\"\"')}\"`\n          ).join(',')\n        );\n        await fs.writeFile(filepath, [headers, ...rows].join('\\n'));\n      }\n\n      logger.info(`Archived batch ${batchNumber} to ${filename}`, { count: batch.length });\n      archived += batch.length;\n\n      // Only delete if explicitly enabled\n      // Note: Database triggers prevent DELETE on audit_logs\n      // This would require special handling (e.g., partition drop)\n      if (RETENTION_CONFIG.enableDeletion) {\n        logger.warn('Deletion is enabled but audit_logs table has immutability triggers');\n        logger.warn('To delete old logs, use partition management or consult your DBA');\n        // deleted += batch.length;\n      }\n    }\n\n    // Log the archival operation\n    await AuditService.createAuditLog({\n      action: AuditActions.SYSTEM_BACKUP_COMPLETE,\n      resource_type: 'audit_logs',\n      resource_id: null,\n      status: 'success',\n      metadata: JSON.stringify({\n        operation: 'archival',\n        archived,\n        deleted,\n        cutoffDate: cutoffDate.toISOString(),\n        batches: batchNumber,\n      }),\n    }, {}, { immediate: true });\n\n    return { archived, deleted, batches: batchNumber };\n  } catch (error) {\n    logger.error('Audit log archival failed:', error);\n\n    await AuditService.createAuditLog({\n      action: AuditActions.SYSTEM_BACKUP_FAILED,\n      resource_type: 'audit_logs',\n      resource_id: null,\n      status: 'failure',\n      metadata: JSON.stringify({\n        error: error.message,\n        cutoffDate: cutoffDate.toISOString(),\n      }),\n    }, {}, { immediate: true });\n\n    throw error;\n  }\n}\n\n/**\n * Check retention compliance status\n * Returns warnings if any issues are detected\n */\nexport async function checkRetentionCompliance() {\n  logger.info('Checking retention compliance...');\n\n  const warnings = [];\n  const now = new Date();\n\n  try {\n    // Check if we have logs going back at least 6 years (if system is old enough)\n    const sixYearsAgo = new Date();\n    sixYearsAgo.setFullYear(sixYearsAgo.getFullYear() - 6);\n\n    const oldestLog = await db\n      .select({ created_at: audit_logs.created_at })\n      .from(audit_logs)\n      .orderBy(audit_logs.created_at)\n      .limit(1);\n\n    // Check for gaps in audit logging\n    const recentLogsCount = await db\n      .select({ count: count() })\n      .from(audit_logs)\n      .where(gte(audit_logs.created_at, new Date(now.getTime() - 24 * 60 * 60 * 1000))); // Last 24 hours\n\n    if (Number(recentLogsCount[0]?.count || 0) === 0) {\n      warnings.push({\n        severity: 'high',\n        message: 'No audit logs recorded in the last 24 hours',\n        recommendation: 'Verify audit logging is working correctly',\n      });\n    }\n\n    // Check storage usage trend\n    const byMonth = await db\n      .select({\n        month: sql`DATE_TRUNC('month', ${audit_logs.created_at})`,\n        count: count(),\n      })\n      .from(audit_logs)\n      .where(gte(audit_logs.created_at, new Date(now.getTime() - 365 * 24 * 60 * 60 * 1000)))\n      .groupBy(sql`DATE_TRUNC('month', ${audit_logs.created_at})`)\n      .orderBy(sql`DATE_TRUNC('month', ${audit_logs.created_at})`);\n\n    // Calculate average and check for anomalies\n    if (byMonth.length > 2) {\n      const counts = byMonth.map(m => Number(m.count));\n      const avg = counts.reduce((a, b) => a + b, 0) / counts.length;\n      const lastMonth = counts[counts.length - 1];\n\n      if (lastMonth < avg * 0.5) {\n        warnings.push({\n          severity: 'medium',\n          message: 'Audit log volume significantly lower than average last month',\n          recommendation: 'Review system activity and logging configuration',\n        });\n      }\n    }\n\n    const status = {\n      compliant: warnings.filter(w => w.severity === 'high').length === 0,\n      checkedAt: now.toISOString(),\n      warnings,\n      retentionYears: RETENTION_CONFIG.defaultRetentionYears,\n      oldestLog: oldestLog[0]?.created_at?.toISOString() || null,\n    };\n\n    logger.info('Retention compliance check complete', {\n      compliant: status.compliant,\n      warnings: warnings.length,\n    });\n\n    return status;\n  } catch (error) {\n    logger.error('Retention compliance check failed:', error);\n    throw error;\n  }\n}\n\n/**\n * Main retention job - runs all checks\n */\nexport async function runRetentionJob() {\n  logger.info('Starting audit retention job...');\n\n  const results = {\n    startedAt: new Date().toISOString(),\n    report: null,\n    compliance: null,\n    archival: null,\n    errors: [],\n  };\n\n  try {\n    // Generate retention report\n    results.report = await generateRetentionReport();\n  } catch (error) {\n    results.errors.push({ step: 'report', error: error.message });\n  }\n\n  try {\n    // Check compliance\n    results.compliance = await checkRetentionCompliance();\n  } catch (error) {\n    results.errors.push({ step: 'compliance', error: error.message });\n  }\n\n  // Only run archival if there are logs to archive\n  if (results.report?.summary?.eligibleForArchival > 0) {\n    try {\n      results.archival = await archiveOldLogs();\n    } catch (error) {\n      results.errors.push({ step: 'archival', error: error.message });\n    }\n  }\n\n  results.completedAt = new Date().toISOString();\n  results.success = results.errors.length === 0;\n\n  logger.info('Audit retention job complete', {\n    success: results.success,\n    errors: results.errors.length,\n  });\n\n  return results;\n}\n\nexport default {\n  generateRetentionReport,\n  archiveOldLogs,\n  checkRetentionCompliance,\n  runRetentionJob,\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}