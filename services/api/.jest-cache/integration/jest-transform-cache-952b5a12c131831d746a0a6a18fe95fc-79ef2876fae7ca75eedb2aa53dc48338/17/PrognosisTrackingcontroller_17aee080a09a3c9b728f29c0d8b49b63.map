{"version":3,"names":["cov_1ag1evfrf0","actualCoverage","db","prognosis_tracking","prognosis_history","prognosis_clinical_indicators","prognosis_outcomes","DISEASE_PROGRESSION_STATUS","PROGNOSIS_STATUS","CONFIDENCE_LEVELS","IMMINENCE_LEVELS","FUNCTIONAL_STATUS_SCALES","CLINICAL_INDICATOR_TYPES","patients","eq","and","desc","sql","isNull","logger","PrognosisTrackingController","index","request","reply","f","s","patient_id","status","progression_status","is_current","is_imminently_dying","limit","b","offset","query","select","from","where","deleted_at","orderBy","createdAt","parseInt","conditions","push","prognosis_status","disease_progression_status","undefined","results","code","success","data","meta","count","length","error","message","getCurrentByPatient","patientId","params","patientIdNum","isNaN","indicators","prognosis_tracking_id","id","measurement_date","clinical_indicators","getHistoryByPatient","versions","version","auditHistory","change_date","audit_trail","show","recordId","create","userId","user","otherData","body","Object","values","includes","join","patientExists","existingCurrent","now","Date","previousVersionId","newVersion","update","set","superseded_at","superseded_by_id","superseded_reason","updatedAt","newRecord","insert","previous_version_id","created_by_id","updated_by_id","_sanitizeInput","returning","change_type","changed_by_id","snapshot","JSON","stringify","ip_address","ip","user_agent","headers","existing","updateData","changes","fieldsToTrack","field","previous","new","updatedRecord","change","field_changed","previous_value","String","new_value","change_reason","delete","reason","addClinicalIndicator","indicator_type","indicator_name","value_numeric","value_text","value_unit","previousIndicator","trendData","prevValue","parseFloat","currValue","daysDiff","Math","floor","trendDirection","change_percentage","days_since_previous","trend_direction","newIndicator","recorded_by_id","getClinicalIndicators","type","recordOutcome","outcome_type","outcome_date","outcome_location","actual_los_days","prognosisData","losVariance","losAccuracy","expected_length_of_stay_days","abs","newOutcome","prognosis_date","predicted_los_days","los_variance_days","los_accuracy_category","predicted_imminence_level","imminence_level","analyzed_by_id","analysis_date","getPatientTrends","days","startDate","setDate","getDate","trends","indicator","key","name","unit","date","value","is_abnormal","is_critical","period_days","getEnums","confidence_levels","imminence_levels","functional_status_scales","clinical_indicator_types","allowedFields","sanitized"],"sources":["PrognosisTracking.controller.js"],"sourcesContent":["import { db } from \"../config/db.drizzle.js\";\nimport {\n  prognosis_tracking,\n  prognosis_history,\n  prognosis_clinical_indicators,\n  prognosis_outcomes,\n  DISEASE_PROGRESSION_STATUS,\n  PROGNOSIS_STATUS,\n  CONFIDENCE_LEVELS,\n  IMMINENCE_LEVELS,\n  FUNCTIONAL_STATUS_SCALES,\n  CLINICAL_INDICATOR_TYPES,\n} from \"../db/schemas/prognosisTracking.schema.js\";\nimport { patients } from \"../db/schemas/patient.schema.js\";\nimport { eq, and, desc, sql, isNull } from \"drizzle-orm\";\nimport { logger } from '../utils/logger.js';\n\n/**\n * PrognosisTracking Controller\n * Handles comprehensive prognosis tracking for hospice patients\n * Includes versioning, clinical indicators, and outcome tracking\n */\nclass PrognosisTrackingController {\n  /**\n   * Get all prognosis tracking records with optional filters\n   * GET /prognosis-tracking\n   */\n  async index(request, reply) {\n    try {\n      const {\n        patient_id,\n        status,\n        progression_status,\n        is_current,\n        is_imminently_dying,\n        limit = 50,\n        offset = 0,\n      } = request.query;\n\n      let query = db\n        .select()\n        .from(prognosis_tracking)\n        .where(isNull(prognosis_tracking.deleted_at))\n        .orderBy(desc(prognosis_tracking.createdAt))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      // Apply filters\n      const conditions = [isNull(prognosis_tracking.deleted_at)];\n\n      if (patient_id) {\n        conditions.push(eq(prognosis_tracking.patient_id, parseInt(patient_id)));\n      }\n      if (status) {\n        conditions.push(eq(prognosis_tracking.prognosis_status, status));\n      }\n      if (progression_status) {\n        conditions.push(eq(prognosis_tracking.disease_progression_status, progression_status));\n      }\n      if (is_current !== undefined) {\n        conditions.push(eq(prognosis_tracking.is_current, is_current === 'true'));\n      }\n      if (is_imminently_dying !== undefined) {\n        conditions.push(eq(prognosis_tracking.is_imminently_dying, is_imminently_dying === 'true'));\n      }\n\n      const results = await db\n        .select()\n        .from(prognosis_tracking)\n        .where(and(...conditions))\n        .orderBy(desc(prognosis_tracking.createdAt))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      reply.code(200);\n      return {\n        success: true,\n        data: results,\n        meta: {\n          limit: parseInt(limit),\n          offset: parseInt(offset),\n          count: results.length,\n        },\n      };\n    } catch (error) {\n      logger.error(\"Error fetching prognosis tracking records:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error fetching prognosis tracking records\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Get current prognosis for a patient\n   * GET /prognosis-tracking/patient/:patientId/current\n   */\n  async getCurrentByPatient(request, reply) {\n    try {\n      const { patientId } = request.params;\n      const patientIdNum = parseInt(patientId);\n\n      if (isNaN(patientIdNum)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_PATIENT_ID\", message: \"Invalid patient ID\" },\n        };\n      }\n\n      const results = await db\n        .select()\n        .from(prognosis_tracking)\n        .where(\n          and(\n            eq(prognosis_tracking.patient_id, patientIdNum),\n            eq(prognosis_tracking.is_current, true),\n            isNull(prognosis_tracking.deleted_at)\n          )\n        )\n        .limit(1);\n\n      if (results.length === 0) {\n        reply.code(200);\n        return {\n          success: true,\n          data: null,\n          message: \"No current prognosis found for this patient\",\n        };\n      }\n\n      // Fetch clinical indicators for current prognosis\n      const indicators = await db\n        .select()\n        .from(prognosis_clinical_indicators)\n        .where(eq(prognosis_clinical_indicators.prognosis_tracking_id, results[0].id))\n        .orderBy(desc(prognosis_clinical_indicators.measurement_date));\n\n      reply.code(200);\n      return {\n        success: true,\n        data: {\n          ...results[0],\n          clinical_indicators: indicators,\n        },\n      };\n    } catch (error) {\n      logger.error(\"Error fetching current prognosis:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error fetching current prognosis\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Get prognosis history for a patient\n   * GET /prognosis-tracking/patient/:patientId/history\n   */\n  async getHistoryByPatient(request, reply) {\n    try {\n      const { patientId } = request.params;\n      const { limit = 20, offset = 0 } = request.query;\n      const patientIdNum = parseInt(patientId);\n\n      if (isNaN(patientIdNum)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_PATIENT_ID\", message: \"Invalid patient ID\" },\n        };\n      }\n\n      // Get all prognosis versions for patient\n      const versions = await db\n        .select()\n        .from(prognosis_tracking)\n        .where(\n          and(\n            eq(prognosis_tracking.patient_id, patientIdNum),\n            isNull(prognosis_tracking.deleted_at)\n          )\n        )\n        .orderBy(desc(prognosis_tracking.version))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      // Get audit history\n      const auditHistory = await db\n        .select()\n        .from(prognosis_history)\n        .where(eq(prognosis_history.patient_id, patientIdNum))\n        .orderBy(desc(prognosis_history.change_date))\n        .limit(50);\n\n      reply.code(200);\n      return {\n        success: true,\n        data: {\n          versions,\n          audit_trail: auditHistory,\n        },\n      };\n    } catch (error) {\n      logger.error(\"Error fetching prognosis history:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error fetching prognosis history\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Get a specific prognosis tracking record\n   * GET /prognosis-tracking/:id\n   */\n  async show(request, reply) {\n    try {\n      const { id } = request.params;\n      const recordId = parseInt(id);\n\n      if (isNaN(recordId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_ID\", message: \"Invalid prognosis tracking ID\" },\n        };\n      }\n\n      const results = await db\n        .select()\n        .from(prognosis_tracking)\n        .where(\n          and(\n            eq(prognosis_tracking.id, recordId),\n            isNull(prognosis_tracking.deleted_at)\n          )\n        )\n        .limit(1);\n\n      if (results.length === 0) {\n        reply.code(404);\n        return {\n          success: false,\n          error: { code: \"NOT_FOUND\", message: \"Prognosis tracking record not found\" },\n        };\n      }\n\n      // Fetch clinical indicators\n      const indicators = await db\n        .select()\n        .from(prognosis_clinical_indicators)\n        .where(eq(prognosis_clinical_indicators.prognosis_tracking_id, recordId))\n        .orderBy(desc(prognosis_clinical_indicators.measurement_date));\n\n      reply.code(200);\n      return {\n        success: true,\n        data: {\n          ...results[0],\n          clinical_indicators: indicators,\n        },\n      };\n    } catch (error) {\n      logger.error(\"Error fetching prognosis tracking record:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error fetching prognosis tracking record\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Create a new prognosis tracking record\n   * POST /prognosis-tracking\n   */\n  async create(request, reply) {\n    try {\n      const userId = request.user?.id || null;\n      const {\n        patient_id,\n        disease_progression_status,\n        // Include other fields from schema\n        ...otherData\n      } = request.body;\n\n      // Validate required fields\n      if (!patient_id) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"MISSING_PATIENT_ID\", message: \"Patient ID is required\" },\n        };\n      }\n\n      if (!disease_progression_status) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: \"MISSING_PROGRESSION_STATUS\",\n            message: \"Disease progression status is required\",\n          },\n        };\n      }\n\n      // Validate disease progression status\n      if (!Object.values(DISEASE_PROGRESSION_STATUS).includes(disease_progression_status)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: \"INVALID_PROGRESSION_STATUS\",\n            message: `Invalid disease progression status. Valid values: ${Object.values(DISEASE_PROGRESSION_STATUS).join(\", \")}`,\n          },\n        };\n      }\n\n      const patientIdNum = parseInt(patient_id);\n\n      // Check if patient exists\n      const patientExists = await db\n        .select({ id: patients.id })\n        .from(patients)\n        .where(eq(patients.id, patientIdNum))\n        .limit(1);\n\n      if (patientExists.length === 0) {\n        reply.code(404);\n        return {\n          success: false,\n          error: { code: \"PATIENT_NOT_FOUND\", message: \"Patient not found\" },\n        };\n      }\n\n      // Mark any existing current prognosis as not current\n      const existingCurrent = await db\n        .select({ id: prognosis_tracking.id, version: prognosis_tracking.version })\n        .from(prognosis_tracking)\n        .where(\n          and(\n            eq(prognosis_tracking.patient_id, patientIdNum),\n            eq(prognosis_tracking.is_current, true),\n            isNull(prognosis_tracking.deleted_at)\n          )\n        )\n        .limit(1);\n\n      const now = new Date();\n      let previousVersionId = null;\n      let newVersion = 1;\n\n      if (existingCurrent.length > 0) {\n        previousVersionId = existingCurrent[0].id;\n        newVersion = existingCurrent[0].version + 1;\n\n        // Update existing to mark as not current\n        await db\n          .update(prognosis_tracking)\n          .set({\n            is_current: false,\n            superseded_at: now,\n            superseded_by_id: userId,\n            superseded_reason: otherData.superseded_reason || \"New prognosis created\",\n            updatedAt: now,\n          })\n          .where(eq(prognosis_tracking.id, existingCurrent[0].id));\n      }\n\n      // Create new prognosis tracking record\n      const newRecord = await db\n        .insert(prognosis_tracking)\n        .values({\n          patient_id: patientIdNum,\n          disease_progression_status,\n          version: newVersion,\n          is_current: true,\n          previous_version_id: previousVersionId,\n          prognosis_status: otherData.prognosis_status || \"ACTIVE\",\n          created_by_id: userId,\n          updated_by_id: userId,\n          createdAt: now,\n          updatedAt: now,\n          // Spread other valid fields\n          ...this._sanitizeInput(otherData),\n        })\n        .returning();\n\n      // Create history record\n      await db.insert(prognosis_history).values({\n        prognosis_tracking_id: newRecord[0].id,\n        patient_id: patientIdNum,\n        change_type: \"CREATE\",\n        change_date: now,\n        changed_by_id: userId,\n        snapshot: JSON.stringify(newRecord[0]),\n        ip_address: request.ip,\n        user_agent: request.headers[\"user-agent\"],\n        createdAt: now,\n      });\n\n      reply.code(201);\n      return {\n        success: true,\n        data: newRecord[0],\n        message: \"Prognosis tracking record created successfully\",\n      };\n    } catch (error) {\n      logger.error(\"Error creating prognosis tracking record:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error creating prognosis tracking record\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Update a prognosis tracking record\n   * PUT /prognosis-tracking/:id\n   */\n  async update(request, reply) {\n    try {\n      const { id } = request.params;\n      const userId = request.user?.id || null;\n      const recordId = parseInt(id);\n\n      if (isNaN(recordId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_ID\", message: \"Invalid prognosis tracking ID\" },\n        };\n      }\n\n      // Check if record exists\n      const existing = await db\n        .select()\n        .from(prognosis_tracking)\n        .where(\n          and(\n            eq(prognosis_tracking.id, recordId),\n            isNull(prognosis_tracking.deleted_at)\n          )\n        )\n        .limit(1);\n\n      if (existing.length === 0) {\n        reply.code(404);\n        return {\n          success: false,\n          error: { code: \"NOT_FOUND\", message: \"Prognosis tracking record not found\" },\n        };\n      }\n\n      const updateData = request.body;\n      const now = new Date();\n\n      // Validate disease progression status if provided\n      if (\n        updateData.disease_progression_status &&\n        !Object.values(DISEASE_PROGRESSION_STATUS).includes(updateData.disease_progression_status)\n      ) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: \"INVALID_PROGRESSION_STATUS\",\n            message: `Invalid disease progression status. Valid values: ${Object.values(DISEASE_PROGRESSION_STATUS).join(\", \")}`,\n          },\n        };\n      }\n\n      // Track what changed\n      const changes = [];\n      const fieldsToTrack = [\n        \"disease_progression_status\",\n        \"prognosis_status\",\n        \"functional_status_score\",\n        \"is_imminently_dying\",\n        \"imminence_level\",\n      ];\n\n      for (const field of fieldsToTrack) {\n        if (updateData[field] !== undefined && updateData[field] !== existing[0][field]) {\n          changes.push({\n            field,\n            previous: existing[0][field],\n            new: updateData[field],\n          });\n        }\n      }\n\n      // Update the record\n      const updatedRecord = await db\n        .update(prognosis_tracking)\n        .set({\n          ...this._sanitizeInput(updateData),\n          updated_by_id: userId,\n          updatedAt: now,\n        })\n        .where(eq(prognosis_tracking.id, recordId))\n        .returning();\n\n      // Create history records for significant changes\n      for (const change of changes) {\n        await db.insert(prognosis_history).values({\n          prognosis_tracking_id: recordId,\n          patient_id: existing[0].patient_id,\n          change_type: change.field === \"prognosis_status\" ? \"STATUS_CHANGE\" : \"UPDATE\",\n          change_date: now,\n          changed_by_id: userId,\n          field_changed: change.field,\n          previous_value: String(change.previous),\n          new_value: String(change.new),\n          change_reason: updateData.change_reason,\n          snapshot: JSON.stringify(updatedRecord[0]),\n          ip_address: request.ip,\n          user_agent: request.headers[\"user-agent\"],\n          createdAt: now,\n        });\n      }\n\n      reply.code(200);\n      return {\n        success: true,\n        data: updatedRecord[0],\n        message: \"Prognosis tracking record updated successfully\",\n      };\n    } catch (error) {\n      logger.error(\"Error updating prognosis tracking record:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error updating prognosis tracking record\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Soft delete a prognosis tracking record\n   * DELETE /prognosis-tracking/:id\n   */\n  async delete(request, reply) {\n    try {\n      const { id } = request.params;\n      const userId = request.user?.id || null;\n      const recordId = parseInt(id);\n\n      if (isNaN(recordId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_ID\", message: \"Invalid prognosis tracking ID\" },\n        };\n      }\n\n      const existing = await db\n        .select()\n        .from(prognosis_tracking)\n        .where(\n          and(\n            eq(prognosis_tracking.id, recordId),\n            isNull(prognosis_tracking.deleted_at)\n          )\n        )\n        .limit(1);\n\n      if (existing.length === 0) {\n        reply.code(404);\n        return {\n          success: false,\n          error: { code: \"NOT_FOUND\", message: \"Prognosis tracking record not found\" },\n        };\n      }\n\n      const now = new Date();\n\n      // Soft delete\n      await db\n        .update(prognosis_tracking)\n        .set({\n          deleted_at: now,\n          is_current: false,\n          prognosis_status: \"ARCHIVED\",\n          updated_by_id: userId,\n          updatedAt: now,\n        })\n        .where(eq(prognosis_tracking.id, recordId));\n\n      // Log deletion in history\n      await db.insert(prognosis_history).values({\n        prognosis_tracking_id: recordId,\n        patient_id: existing[0].patient_id,\n        change_type: \"ARCHIVE\",\n        change_date: now,\n        changed_by_id: userId,\n        change_reason: request.body?.reason || \"Record archived\",\n        ip_address: request.ip,\n        user_agent: request.headers[\"user-agent\"],\n        createdAt: now,\n      });\n\n      reply.code(200);\n      return {\n        success: true,\n        message: \"Prognosis tracking record archived successfully\",\n      };\n    } catch (error) {\n      logger.error(\"Error archiving prognosis tracking record:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error archiving prognosis tracking record\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Add clinical indicator to a prognosis record\n   * POST /prognosis-tracking/:id/indicators\n   */\n  async addClinicalIndicator(request, reply) {\n    try {\n      const { id } = request.params;\n      const userId = request.user?.id || null;\n      const recordId = parseInt(id);\n\n      if (isNaN(recordId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_ID\", message: \"Invalid prognosis tracking ID\" },\n        };\n      }\n\n      // Verify prognosis exists\n      const existing = await db\n        .select({ id: prognosis_tracking.id, patient_id: prognosis_tracking.patient_id })\n        .from(prognosis_tracking)\n        .where(eq(prognosis_tracking.id, recordId))\n        .limit(1);\n\n      if (existing.length === 0) {\n        reply.code(404);\n        return {\n          success: false,\n          error: { code: \"NOT_FOUND\", message: \"Prognosis tracking record not found\" },\n        };\n      }\n\n      const {\n        indicator_type,\n        indicator_name,\n        measurement_date,\n        value_numeric,\n        value_text,\n        value_unit,\n        ...otherData\n      } = request.body;\n\n      // Validate required fields\n      if (!indicator_type || !indicator_name || !measurement_date) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: \"MISSING_REQUIRED_FIELDS\",\n            message: \"indicator_type, indicator_name, and measurement_date are required\",\n          },\n        };\n      }\n\n      // Validate indicator type\n      if (!Object.values(CLINICAL_INDICATOR_TYPES).includes(indicator_type)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: {\n            code: \"INVALID_INDICATOR_TYPE\",\n            message: `Invalid indicator type. Valid values: ${Object.values(CLINICAL_INDICATOR_TYPES).join(\", \")}`,\n          },\n        };\n      }\n\n      const now = new Date();\n\n      // Get previous value for trend calculation\n      const previousIndicator = await db\n        .select()\n        .from(prognosis_clinical_indicators)\n        .where(\n          and(\n            eq(prognosis_clinical_indicators.patient_id, existing[0].patient_id),\n            eq(prognosis_clinical_indicators.indicator_type, indicator_type),\n            eq(prognosis_clinical_indicators.indicator_name, indicator_name)\n          )\n        )\n        .orderBy(desc(prognosis_clinical_indicators.measurement_date))\n        .limit(1);\n\n      let trendData = {};\n      if (previousIndicator.length > 0 && value_numeric !== undefined) {\n        const prevValue = parseFloat(previousIndicator[0].value_numeric);\n        const currValue = parseFloat(value_numeric);\n        const daysDiff = Math.floor(\n          (new Date(measurement_date) - new Date(previousIndicator[0].measurement_date)) /\n            (1000 * 60 * 60 * 24)\n        );\n\n        let trendDirection = \"STABLE\";\n        if (currValue > prevValue * 1.05) trendDirection = \"WORSENING\";\n        else if (currValue < prevValue * 0.95) trendDirection = \"IMPROVING\";\n\n        trendData = {\n          previous_value: prevValue,\n          change_percentage: ((currValue - prevValue) / prevValue) * 100,\n          days_since_previous: daysDiff,\n          trend_direction: trendDirection,\n        };\n      }\n\n      const newIndicator = await db\n        .insert(prognosis_clinical_indicators)\n        .values({\n          prognosis_tracking_id: recordId,\n          patient_id: existing[0].patient_id,\n          indicator_type,\n          indicator_name,\n          measurement_date: new Date(measurement_date),\n          value_numeric: value_numeric ? parseFloat(value_numeric) : null,\n          value_text,\n          value_unit,\n          recorded_by_id: userId,\n          createdAt: now,\n          updatedAt: now,\n          ...trendData,\n          ...otherData,\n        })\n        .returning();\n\n      reply.code(201);\n      return {\n        success: true,\n        data: newIndicator[0],\n        message: \"Clinical indicator added successfully\",\n      };\n    } catch (error) {\n      logger.error(\"Error adding clinical indicator:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error adding clinical indicator\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Get clinical indicators for a prognosis record\n   * GET /prognosis-tracking/:id/indicators\n   */\n  async getClinicalIndicators(request, reply) {\n    try {\n      const { id } = request.params;\n      const { type, limit = 50, offset = 0 } = request.query;\n      const recordId = parseInt(id);\n\n      if (isNaN(recordId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_ID\", message: \"Invalid prognosis tracking ID\" },\n        };\n      }\n\n      let conditions = [eq(prognosis_clinical_indicators.prognosis_tracking_id, recordId)];\n\n      if (type) {\n        conditions.push(eq(prognosis_clinical_indicators.indicator_type, type));\n      }\n\n      const indicators = await db\n        .select()\n        .from(prognosis_clinical_indicators)\n        .where(and(...conditions))\n        .orderBy(desc(prognosis_clinical_indicators.measurement_date))\n        .limit(parseInt(limit))\n        .offset(parseInt(offset));\n\n      reply.code(200);\n      return {\n        success: true,\n        data: indicators,\n      };\n    } catch (error) {\n      logger.error(\"Error fetching clinical indicators:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error fetching clinical indicators\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Record outcome for a prognosis\n   * POST /prognosis-tracking/:id/outcomes\n   */\n  async recordOutcome(request, reply) {\n    try {\n      const { id } = request.params;\n      const userId = request.user?.id || null;\n      const recordId = parseInt(id);\n\n      if (isNaN(recordId)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_ID\", message: \"Invalid prognosis tracking ID\" },\n        };\n      }\n\n      // Verify prognosis exists\n      const existing = await db\n        .select()\n        .from(prognosis_tracking)\n        .where(eq(prognosis_tracking.id, recordId))\n        .limit(1);\n\n      if (existing.length === 0) {\n        reply.code(404);\n        return {\n          success: false,\n          error: { code: \"NOT_FOUND\", message: \"Prognosis tracking record not found\" },\n        };\n      }\n\n      const {\n        outcome_type,\n        outcome_date,\n        outcome_location,\n        actual_los_days,\n        ...otherData\n      } = request.body;\n\n      // Validate required fields\n      if (!outcome_type) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"MISSING_OUTCOME_TYPE\", message: \"Outcome type is required\" },\n        };\n      }\n\n      const now = new Date();\n      const prognosisData = existing[0];\n\n      // Calculate accuracy metrics\n      let losVariance = null;\n      let losAccuracy = null;\n      if (actual_los_days && prognosisData.expected_length_of_stay_days) {\n        losVariance = actual_los_days - prognosisData.expected_length_of_stay_days;\n        if (Math.abs(losVariance) <= 7) {\n          losAccuracy = \"ACCURATE\";\n        } else if (losVariance > 0) {\n          losAccuracy = \"UNDERESTIMATED\";\n        } else {\n          losAccuracy = \"OVERESTIMATED\";\n        }\n      }\n\n      const newOutcome = await db\n        .insert(prognosis_outcomes)\n        .values({\n          prognosis_tracking_id: recordId,\n          patient_id: prognosisData.patient_id,\n          outcome_type,\n          outcome_date: outcome_date ? new Date(outcome_date) : null,\n          outcome_location,\n          prognosis_date: prognosisData.createdAt,\n          predicted_los_days: prognosisData.expected_length_of_stay_days,\n          actual_los_days: actual_los_days ? parseInt(actual_los_days) : null,\n          los_variance_days: losVariance,\n          los_accuracy_category: losAccuracy,\n          predicted_imminence_level: prognosisData.imminence_level,\n          analyzed_by_id: userId,\n          analysis_date: now,\n          createdAt: now,\n          updatedAt: now,\n          ...otherData,\n        })\n        .returning();\n\n      // Update prognosis status\n      await db\n        .update(prognosis_tracking)\n        .set({\n          prognosis_status: \"FINALIZED\",\n          is_current: false,\n          updatedAt: now,\n          updated_by_id: userId,\n        })\n        .where(eq(prognosis_tracking.id, recordId));\n\n      reply.code(201);\n      return {\n        success: true,\n        data: newOutcome[0],\n        message: \"Outcome recorded successfully\",\n      };\n    } catch (error) {\n      logger.error(\"Error recording outcome:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error recording outcome\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Get prognosis trends for a patient\n   * GET /prognosis-tracking/patient/:patientId/trends\n   */\n  async getPatientTrends(request, reply) {\n    try {\n      const { patientId } = request.params;\n      const { indicator_type, days = 30 } = request.query;\n      const patientIdNum = parseInt(patientId);\n\n      if (isNaN(patientIdNum)) {\n        reply.code(400);\n        return {\n          success: false,\n          error: { code: \"INVALID_PATIENT_ID\", message: \"Invalid patient ID\" },\n        };\n      }\n\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - parseInt(days));\n\n      let conditions = [\n        eq(prognosis_clinical_indicators.patient_id, patientIdNum),\n        sql`${prognosis_clinical_indicators.measurement_date} >= ${startDate}`,\n      ];\n\n      if (indicator_type) {\n        conditions.push(eq(prognosis_clinical_indicators.indicator_type, indicator_type));\n      }\n\n      const indicators = await db\n        .select()\n        .from(prognosis_clinical_indicators)\n        .where(and(...conditions))\n        .orderBy(prognosis_clinical_indicators.measurement_date);\n\n      // Group by indicator type and name for trend analysis\n      const trends = {};\n      for (const indicator of indicators) {\n        const key = `${indicator.indicator_type}_${indicator.indicator_name}`;\n        if (!trends[key]) {\n          trends[key] = {\n            type: indicator.indicator_type,\n            name: indicator.indicator_name,\n            unit: indicator.value_unit,\n            data: [],\n          };\n        }\n        trends[key].data.push({\n          date: indicator.measurement_date,\n          value: indicator.value_numeric || indicator.value_text,\n          is_abnormal: indicator.is_abnormal,\n          is_critical: indicator.is_critical,\n        });\n      }\n\n      reply.code(200);\n      return {\n        success: true,\n        data: {\n          patient_id: patientIdNum,\n          period_days: parseInt(days),\n          trends: Object.values(trends),\n        },\n      };\n    } catch (error) {\n      logger.error(\"Error fetching patient trends:\", error);\n      reply.code(500);\n      return {\n        success: false,\n        error: {\n          code: \"INTERNAL_SERVER_ERROR\",\n          message: \"Error fetching patient trends\",\n        },\n      };\n    }\n  }\n\n  /**\n   * Get enum values for dropdowns\n   * GET /prognosis-tracking/enums\n   */\n  async getEnums(request, reply) {\n    return {\n      success: true,\n      data: {\n        disease_progression_status: DISEASE_PROGRESSION_STATUS,\n        prognosis_status: PROGNOSIS_STATUS,\n        confidence_levels: CONFIDENCE_LEVELS,\n        imminence_levels: IMMINENCE_LEVELS,\n        functional_status_scales: FUNCTIONAL_STATUS_SCALES,\n        clinical_indicator_types: CLINICAL_INDICATOR_TYPES,\n      },\n    };\n  }\n\n  /**\n   * Sanitize input to only allow valid schema fields\n   * @private\n   */\n  _sanitizeInput(data) {\n    // List of allowed fields that can be set\n    const allowedFields = [\n      'prognosis_status',\n      'admission_date',\n      'expected_discharge_date',\n      'expected_length_of_stay_days',\n      'length_of_stay_range_min_days',\n      'length_of_stay_range_max_days',\n      'length_of_stay_confidence_level',\n      'length_of_stay_notes',\n      'prognosis_months',\n      'prognosis_less_than_6_months',\n      'terminal_diagnosis_confirmed',\n      'terminal_diagnosis_date',\n      'disease_progression_trend',\n      'progression_rate',\n      'progression_since_last_assessment',\n      'disease_progression_notes',\n      'vital_signs_trend',\n      'vital_signs_summary',\n      'vital_signs_last_assessment_date',\n      'lab_values_summary',\n      'lab_values_trend',\n      'lab_values_last_date',\n      'functional_status_score',\n      'functional_status_scale',\n      'functional_status_trend',\n      'previous_functional_score',\n      'functional_status_date',\n      'functional_status_notes',\n      'pps_ambulation',\n      'pps_activity_evidence_of_disease',\n      'pps_self_care',\n      'pps_intake',\n      'pps_conscious_level',\n      'primary_diagnosis_icd10',\n      'primary_diagnosis_description',\n      'secondary_diagnoses',\n      'comorbidities',\n      'diagnosis_related_prognosis_factors',\n      'symptom_burden_score',\n      'symptom_burden_level',\n      'primary_symptoms',\n      'symptom_management_effectiveness',\n      'is_imminently_dying',\n      'imminence_level',\n      'imminence_indicators',\n      'imminence_assessment_date',\n      'days_to_death_estimate',\n      'hours_to_death_estimate',\n      'patient_awareness_of_prognosis',\n      'family_awareness_of_prognosis',\n      'prognosis_discussion_date',\n      'prognosis_discussed_with',\n      'goals_of_care_aligned',\n      'goals_of_care_notes',\n      'overall_confidence_level',\n      'confidence_percentage',\n      'uncertainty_factors',\n      'prediction_model_used',\n      'surprise_question_response',\n      'complications',\n      'unexpected_events',\n      'prognosis_modifying_factors',\n      'last_review_date',\n      'next_review_date',\n      'review_frequency_days',\n      'review_notes',\n      'requires_idg_review',\n      'idg_review_date',\n      'idg_review_outcome',\n      'clinical_summary',\n      'prognosis_rationale',\n      'treatment_response',\n      'additional_notes',\n      'signature',\n      'signed_at',\n      'signed_by_id',\n      'cosignature',\n      'cosigned_at',\n      'cosigned_by_id',\n      'requires_physician_signature',\n      'physician_signature_date',\n    ];\n\n    const sanitized = {};\n    for (const field of allowedFields) {\n      if (data[field] !== undefined) {\n        sanitized[field] = data[field];\n      }\n    }\n    return sanitized;\n  }\n}\n\nexport default new PrognosisTrackingController();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}