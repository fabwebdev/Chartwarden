{"version":3,"names":["cov_1ygrwqzr7c","actualCoverage","Queue","logger","sendEmailJob","sendPasswordResetEmailJob","sendWelcomeEmailJob","sendNotificationEmailJob","registerAllJobs","f","s","registerJob","info","getRegisteredJobNames","length","join"],"sources":["registerJobs.js"],"sourcesContent":["/**\n * Job Registry - Register all jobs at application startup\n *\n * SECURITY: This replaces the dangerous eval() pattern with a secure\n * whitelist of allowed jobs. Only pre-registered jobs can be executed.\n *\n * Usage:\n *   import { registerAllJobs } from './jobs/registerJobs.js';\n *\n *   // In server.js startup:\n *   registerAllJobs();\n *\n *   // To queue a job:\n *   await Queue.push('default', 'send-email', { to: 'user@example.com', ... });\n */\n\nimport Queue from '../facades/Queue.js';\nimport { logger } from '../utils/logger.js';\nimport {\n    sendEmailJob,\n    sendPasswordResetEmailJob,\n    sendWelcomeEmailJob,\n    sendNotificationEmailJob\n} from './SendEmailJob.js';\n\n/**\n * Register all available jobs\n * Call this function once during application startup\n */\nexport function registerAllJobs() {\n    // Email jobs\n    Queue.registerJob('send-email', sendEmailJob);\n    Queue.registerJob('send-password-reset-email', sendPasswordResetEmailJob);\n    Queue.registerJob('send-welcome-email', sendWelcomeEmailJob);\n    Queue.registerJob('send-notification-email', sendNotificationEmailJob);\n\n    // Add more jobs here as needed:\n    // Queue.registerJob('generate-pdf', generatePdfJob);\n    // Queue.registerJob('process-report', processReportJob);\n\n    logger.info(`âœ… Registered ${Queue.getRegisteredJobNames().length} queue jobs`);\n    logger.info('Available jobs:', Queue.getRegisteredJobNames().join(', '));\n}\n\n/**\n * Example usage in controllers/services:\n *\n * // Queue a job\n * const jobId = await Queue.push('default', 'send-email', {\n *     to: 'patient@example.com',\n *     subject: 'Appointment Reminder',\n *     body: 'Your appointment is tomorrow at 10am'\n * });\n *\n * // Process jobs (typically in a background worker)\n * await Queue.process();\n */\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOE,KAAK,MAAM,qBAAqB;AACvC,SAASC,MAAM,QAAQ,oBAAoB;AAC3C,SACIC,YAAY,EACZC,yBAAyB,EACzBC,mBAAmB,EACnBC,wBAAwB,QACrB,mBAAmB;;AAE1B;AACA;AACA;AACA;AACA,OAAO,SAASC,eAAeA,CAAA,EAAG;EAAA;EAAAR,cAAA,GAAAS,CAAA;EAAAT,cAAA,GAAAU,CAAA;EAC9B;EACAR,KAAK,CAACS,WAAW,CAAC,YAAY,EAAEP,YAAY,CAAC;EAAC;EAAAJ,cAAA,GAAAU,CAAA;EAC9CR,KAAK,CAACS,WAAW,CAAC,2BAA2B,EAAEN,yBAAyB,CAAC;EAAC;EAAAL,cAAA,GAAAU,CAAA;EAC1ER,KAAK,CAACS,WAAW,CAAC,oBAAoB,EAAEL,mBAAmB,CAAC;EAAC;EAAAN,cAAA,GAAAU,CAAA;EAC7DR,KAAK,CAACS,WAAW,CAAC,yBAAyB,EAAEJ,wBAAwB,CAAC;;EAEtE;EACA;EACA;EAAA;EAAAP,cAAA,GAAAU,CAAA;EAEAP,MAAM,CAACS,IAAI,CAAC,gBAAgBV,KAAK,CAACW,qBAAqB,CAAC,CAAC,CAACC,MAAM,aAAa,CAAC;EAAC;EAAAd,cAAA,GAAAU,CAAA;EAC/EP,MAAM,CAACS,IAAI,CAAC,iBAAiB,EAAEV,KAAK,CAACW,qBAAqB,CAAC,CAAC,CAACE,IAAI,CAAC,IAAI,CAAC,CAAC;AAC5E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}