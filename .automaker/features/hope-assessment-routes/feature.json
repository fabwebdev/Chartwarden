{
  "id": "hope-assessment-routes",
  "category": "API",
  "title": "HOPE Assessment API Routes",
  "description": "HOPE Assessment Management REST API with CMS Requirement Tracking\n\nBuild a production-ready REST API system for managing HOPE (Health Outcomes and Patient Experience) assessments with integrated CMS (Centers for Medicare & Medicaid Services) compliance monitoring and requirement tracking.\n\nCore API Endpoints:\n- POST /api/assessments - Create new assessment with automatic CMS validation\n- GET /api/assessments/:id - Retrieve single assessment with compliance metadata\n- GET /api/assessments - List assessments with filters (date range, patient, compliance status, assessment type) and pagination\n- PUT /api/assessments/:id - Update assessment with version tracking\n- PATCH /api/assessments/:id - Partial update for specific fields\n- DELETE /api/assessments/:id - Soft delete with retention for audit compliance\n- GET /api/assessments/:id/history - Retrieve complete version history\n- GET /api/assessments/:id/cms-compliance - Detailed compliance status with missing requirements\n- POST /api/assessments/:id/submit - Submit to CMS with validation gate\n- GET /api/cms-requirements - Current CMS requirements by assessment type\n- GET /api/reports/compliance - Aggregate compliance dashboard data\n\nData Model Requirements:\n- Assessment core fields: patient_id, assessment_date, assessment_type, responses (structured JSON), calculated_scores, status (draft/submitted/validated/rejected)\n- CMS compliance fields: cms_category, submission_deadline, compliance_status, required_fields_checklist, submission_timestamp, cms_confirmation_id\n- Audit fields: version_number, created_at, updated_at, created_by, last_modified_by, modification_reason\n- Relationship tracking: link to patient record, associated care episodes, previous assessments\n- Support multiple assessment versions with immutable history\n- Handle both structured (multiple choice, numeric) and unstructured (text) response types\n\nCMS Requirement Tracking:\n- Maintain configurable CMS requirement rule engine for different assessment types (OASIS, HIS, CAHPS, etc.)\n- Real-time validation against current year CMS specifications\n- Deadline calculation based on assessment type and admission/discharge dates\n- Automated alerts at configurable thresholds (30/14/7 days before deadline)\n- Missing data element detection with specific field identification\n- Compliance scoring algorithm with weighted criteria\n- Support for CMS requirement version changes with effective dates\n- Generate exportable compliance reports (PDF, CSV) filtered by date, facility, assessment type\n\nAuthentication & Authorization:\n- JWT-based authentication with refresh tokens\n- Role-based access control with roles: clinician (create/read/update own), supervisor (read/update team), administrator (full access), auditor (read-only all), cms_submitter (submit capability)\n- Field-level permissions (e.g., only administrators modify submitted assessments)\n- HIPAA-compliant encryption at rest and in transit (TLS 1.3+)\n- PHI access audit logging with timestamp, user, action, data accessed\n- Session timeout and automatic logout after inactivity\n- IP whitelisting option for administrative functions\n\nValidation & Error Handling:\n- JSON Schema validation for all request bodies\n- CMS-specific business rule validation (required fields, value ranges, cross-field dependencies)\n- HTTP status codes: 200 (success), 201 (created), 400 (validation error), 401 (unauthorized), 403 (forbidden), 404 (not found), 409 (conflict), 422 (business rule violation), 500 (server error)\n- Structured error responses with error code, user message, developer message, field-level errors\n- Handle edge cases: duplicate assessment submissions within time window, assessments submitted past deadline, incomplete data with partial save option, concurrent edit conflicts\n- Rate limiting to prevent abuse\n- Input sanitization to prevent injection attacks\n\nTesting Requirements:\n- Unit tests achieving >80% code coverage for all business logic\n- Integration tests for complete API workflows (create → update → submit → compliance check)\n- CMS compliance validation test suite with known-good and known-bad assessment samples\n- Role-based access control tests verifying permissions for each endpoint and role combination\n- Load testing for expected concurrent users (target: 100 concurrent requests)\n- Security testing: authentication bypass attempts, authorization escalation, SQL injection, XSS\n- Regression test suite for CMS requirement changes\n\nDocumentation Requirements:\n- OpenAPI 3.0 specification with all endpoints, schemas, authentication flows\n- Example requests and responses for each endpoint including success and error cases\n- CMS requirement mapping table showing which API fields correspond to CMS data elements\n- Integration guide for frontend applications\n- Administrator guide for configuring CMS requirements and user roles\n- Deployment guide with infrastructure requirements\n- API versioning strategy documentation\n\nTechnical Constraints:\n- Database: support for transactional operations and audit trail\n- Response time: <200ms for single record retrieval, <1s for list endpoints, <3s for compliance reports\n- Availability: 99.9% uptime during business hours\n- Data retention: maintain assessment history for 7 years per CMS requirements\n- Support concurrent access without data loss\n- Graceful degradation if CMS validation service unavailable\n\nSuccess Criteria:\n- All CRUD operations function correctly with proper validation\n- CMS compliance detection accuracy ≥99% against manual review\n- Zero PHI data leaks in logs or error messages\n- All automated tests passing in CI/CD pipeline\n- API documentation complete and validated by test consumers\n- Successfully process sample workload of 1000 assessments per day",
  "status": "completed",
  "priority": 1,
  "complexity": "moderate",
  "dependencies": [
    "hope-assessment-controller"
  ],
  "createdAt": "2025-12-31T05:55:26.244Z",
  "updatedAt": "2026-01-01T00:46:47.549Z",
  "skipTests": false,
  "model": "opus",
  "thinkingLevel": "none",
  "imagePaths": [],
  "textFilePaths": [],
  "branchName": "main",
  "planningMode": "skip",
  "requirePlanApproval": false,
  "startedAt": "2026-01-01T00:38:44.544Z"
}